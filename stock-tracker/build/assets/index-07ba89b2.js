var MC=Object.defineProperty;var OC=(t,e,n)=>e in t?MC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>(OC(t,typeof e!="symbol"?e+"":e,n),n);function LC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in t)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function $C(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V1={exports:{}},nh={},H1={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=Symbol.for("react.element"),jC=Symbol.for("react.portal"),FC=Symbol.for("react.fragment"),UC=Symbol.for("react.strict_mode"),zC=Symbol.for("react.profiler"),BC=Symbol.for("react.provider"),VC=Symbol.for("react.context"),HC=Symbol.for("react.forward_ref"),WC=Symbol.for("react.suspense"),KC=Symbol.for("react.memo"),qC=Symbol.for("react.lazy"),Dy=Symbol.iterator;function GC(t){return t===null||typeof t!="object"?null:(t=Dy&&t[Dy]||t["@@iterator"],typeof t=="function"?t:null)}var W1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K1=Object.assign,q1={};function eo(t,e,n){this.props=t,this.context=e,this.refs=q1,this.updater=n||W1}eo.prototype.isReactComponent={};eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function G1(){}G1.prototype=eo.prototype;function Xp(t,e,n){this.props=t,this.context=e,this.refs=q1,this.updater=n||W1}var Jp=Xp.prototype=new G1;Jp.constructor=Xp;K1(Jp,eo.prototype);Jp.isPureReactComponent=!0;var My=Array.isArray,Y1=Object.prototype.hasOwnProperty,Zp={current:null},Q1={key:!0,ref:!0,__self:!0,__source:!0};function X1(t,e,n){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)Y1.call(e,i)&&!Q1.hasOwnProperty(i)&&(s[i]=e[i]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)s[i]===void 0&&(s[i]=a[i]);return{$$typeof:rl,type:t,key:r,ref:o,props:s,_owner:Zp.current}}function YC(t,e){return{$$typeof:rl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eg(t){return typeof t=="object"&&t!==null&&t.$$typeof===rl}function QC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Oy=/\/+/g;function id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QC(""+t.key):e.toString(36)}function Ec(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rl:case jC:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+id(o,0):i,My(s)?(n="",t!=null&&(n=t.replace(Oy,"$&/")+"/"),Ec(s,e,n,"",function(c){return c})):s!=null&&(eg(s)&&(s=YC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Oy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",My(t))for(var a=0;a<t.length;a++){r=t[a];var l=i+id(r,a);o+=Ec(r,e,n,l,s)}else if(l=GC(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=i+id(r,a++),o+=Ec(r,e,n,l,s);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ol(t,e,n){if(t==null)return t;var i=[],s=0;return Ec(t,i,"","",function(r){return e.call(n,r,s++)}),i}function XC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},Cc={transition:null},JC={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Cc,ReactCurrentOwner:Zp};function J1(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Ol,forEach:function(t,e,n){Ol(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ol(t,function(){e++}),e},toArray:function(t){return Ol(t,function(e){return e})||[]},only:function(t){if(!eg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=eo;G.Fragment=FC;G.Profiler=zC;G.PureComponent=Xp;G.StrictMode=UC;G.Suspense=WC;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JC;G.act=J1;G.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=K1({},t.props),s=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Zp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Y1.call(e,l)&&!Q1.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:rl,type:t.type,key:s,ref:r,props:i,_owner:o}};G.createContext=function(t){return t={$$typeof:VC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BC,_context:t},t.Consumer=t};G.createElement=X1;G.createFactory=function(t){var e=X1.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:HC,render:t}};G.isValidElement=eg;G.lazy=function(t){return{$$typeof:qC,_payload:{_status:-1,_result:t},_init:XC}};G.memo=function(t,e){return{$$typeof:KC,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=Cc.transition;Cc.transition={};try{t()}finally{Cc.transition=e}};G.unstable_act=J1;G.useCallback=function(t,e){return St.current.useCallback(t,e)};G.useContext=function(t){return St.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return St.current.useDeferredValue(t)};G.useEffect=function(t,e){return St.current.useEffect(t,e)};G.useId=function(){return St.current.useId()};G.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};G.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return St.current.useMemo(t,e)};G.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};G.useRef=function(t){return St.current.useRef(t)};G.useState=function(t){return St.current.useState(t)};G.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};G.useTransition=function(){return St.current.useTransition()};G.version="18.3.1";H1.exports=G;var b=H1.exports;const to=$C(b),ZC=LC({__proto__:null,default:to},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT=b,tT=Symbol.for("react.element"),nT=Symbol.for("react.fragment"),iT=Object.prototype.hasOwnProperty,sT=eT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rT={key:!0,ref:!0,__self:!0,__source:!0};function Z1(t,e,n){var i,s={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)iT.call(e,i)&&!rT.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:tT,type:t,key:r,ref:o,props:s,_owner:sT.current}}nh.Fragment=nT;nh.jsx=Z1;nh.jsxs=Z1;V1.exports=nh;var p=V1.exports,hf={},ex={exports:{}},Wt={},tx={exports:{}},nx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,F){var V=D.length;D.push(F);e:for(;0<V;){var re=V-1>>>1,le=D[re];if(0<s(le,F))D[re]=F,D[V]=le,V=re;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var F=D[0],V=D.pop();if(V!==F){D[0]=V;e:for(var re=0,le=D.length,mn=le>>>1;re<mn;){var mt=2*(re+1)-1,$n=D[mt],yt=mt+1,Ml=D[yt];if(0>s($n,V))yt<le&&0>s(Ml,$n)?(D[re]=Ml,D[yt]=V,re=yt):(D[re]=$n,D[mt]=V,re=mt);else if(yt<le&&0>s(Ml,V))D[re]=Ml,D[yt]=V,re=yt;else break e}}return F}function s(D,F){var V=D.sortIndex-F.sortIndex;return V!==0?V:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,m=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var F=n(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=D)i(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function k(D){if(v=!1,x(D),!m)if(n(l)!==null)m=!0,Ne(_);else{var F=n(c);F!==null&&et(k,F.startTime-D)}}function _(D,F){m=!1,v&&(v=!1,g(E),E=-1),f=!0;var V=d;try{for(x(F),h=n(l);h!==null&&(!(h.expirationTime>F)||D&&!L());){var re=h.callback;if(typeof re=="function"){h.callback=null,d=h.priorityLevel;var le=re(h.expirationTime<=F);F=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(l)&&i(l),x(F)}else i(l);h=n(l)}if(h!==null)var mn=!0;else{var mt=n(c);mt!==null&&et(k,mt.startTime-F),mn=!1}return mn}finally{h=null,d=V,f=!1}}var S=!1,C=null,E=-1,A=5,P=-1;function L(){return!(t.unstable_now()-P<A)}function q(){if(C!==null){var D=t.unstable_now();P=D;var F=!0;try{F=C(!0,D)}finally{F?ke():(S=!1,C=null)}}else S=!1}var ke;if(typeof y=="function")ke=function(){y(q)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,me=Mt.port2;Mt.port1.onmessage=q,ke=function(){me.postMessage(null)}}else ke=function(){w(q,0)};function Ne(D){C=D,S||(S=!0,ke())}function et(D,F){E=w(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,Ne(_))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var F=3;break;default:F=d}var V=d;d=F;try{return D()}finally{d=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var V=d;d=D;try{return F()}finally{d=V}},t.unstable_scheduleCallback=function(D,F,V){var re=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?re+V:re):V=re,D){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=V+le,D={id:u++,callback:F,priorityLevel:D,startTime:V,expirationTime:le,sortIndex:-1},V>re?(D.sortIndex=V,e(c,D),n(l)===null&&D===n(c)&&(v?(g(E),E=-1):v=!0,et(k,V-re))):(D.sortIndex=le,e(l,D),m||f||(m=!0,Ne(_))),D},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(D){var F=d;return function(){var V=d;d=F;try{return D.apply(this,arguments)}finally{d=V}}}})(nx);tx.exports=nx;var oT=tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aT=b,Vt=oT;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ix=new Set,ga={};function Ws(t,e){Or(t,e),Or(t+"Capture",e)}function Or(t,e){for(ga[t]=e,t=0;t<e.length;t++)ix.add(e[t])}var ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),df=Object.prototype.hasOwnProperty,lT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ly={},$y={};function cT(t){return df.call($y,t)?!0:df.call(Ly,t)?!1:lT.test(t)?$y[t]=!0:(Ly[t]=!0,!1)}function uT(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hT(t,e,n,i){if(e===null||typeof e>"u"||uT(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tg=/[\-:]([a-z])/g;function ng(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tg,ng);Ze[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tg,ng);Ze[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tg,ng);Ze[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ig(t,e,n,i){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hT(e,n,s,i)&&(n=null),i||s===null?cT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var hi=aT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ll=Symbol.for("react.element"),or=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),sx=Symbol.for("react.provider"),rx=Symbol.for("react.context"),rg=Symbol.for("react.forward_ref"),pf=Symbol.for("react.suspense"),gf=Symbol.for("react.suspense_list"),og=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),ox=Symbol.for("react.offscreen"),jy=Symbol.iterator;function yo(t){return t===null||typeof t!="object"?null:(t=jy&&t[jy]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,sd;function Do(t){if(sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sd=e&&e[1]||""}return`
`+sd+t}var rd=!1;function od(t,e){if(!t||rd)return"";rd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==r[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{rd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Do(t):""}function dT(t){switch(t.tag){case 5:return Do(t.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return t=od(t.type,!1),t;case 11:return t=od(t.type.render,!1),t;case 1:return t=od(t.type,!0),t;default:return""}}function mf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ar:return"Fragment";case or:return"Portal";case ff:return"Profiler";case sg:return"StrictMode";case pf:return"Suspense";case gf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rx:return(t.displayName||"Context")+".Consumer";case sx:return(t._context.displayName||"Context")+".Provider";case rg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case og:return e=t.displayName||null,e!==null?e:mf(t.type)||"Memo";case gi:e=t._payload,t=t._init;try{return mf(t(e))}catch{}}return null}function fT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mf(e);case 8:return e===sg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ax(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pT(t){var e=ax(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $l(t){t._valueTracker||(t._valueTracker=pT(t))}function lx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ax(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Qc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yf(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fy(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Hi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cx(t,e){e=e.checked,e!=null&&ig(t,"checked",e,!1)}function vf(t,e){cx(t,e);var n=Hi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&wf(t,e.type,Hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wf(t,e,n){(e!=="number"||Qc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mo=Array.isArray;function xr(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Hi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(Mo(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hi(n)}}function ux(t,e){var n=Hi(e.value),i=Hi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function By(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _f(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jl,dx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jl=jl||document.createElement("div"),jl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gT=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){gT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function fx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function px(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=fx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var mT=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kf(t,e){if(e){if(mT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=null;function ag(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ef=null,_r=null,kr=null;function Vy(t){if(t=ll(t)){if(typeof Ef!="function")throw Error(I(280));var e=t.stateNode;e&&(e=ah(e),Ef(t.stateNode,t.type,e))}}function gx(t){_r?kr?kr.push(t):kr=[t]:_r=t}function mx(){if(_r){var t=_r,e=kr;if(kr=_r=null,Vy(t),e)for(t=0;t<e.length;t++)Vy(e[t])}}function yx(t,e){return t(e)}function vx(){}var ad=!1;function wx(t,e,n){if(ad)return t(e,n);ad=!0;try{return yx(t,e,n)}finally{ad=!1,(_r!==null||kr!==null)&&(vx(),mx())}}function ya(t,e){var n=t.stateNode;if(n===null)return null;var i=ah(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var Cf=!1;if(ei)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){Cf=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{Cf=!1}function yT(t,e,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Yo=!1,Xc=null,Jc=!1,Tf=null,vT={onError:function(t){Yo=!0,Xc=t}};function wT(t,e,n,i,s,r,o,a,l){Yo=!1,Xc=null,yT.apply(vT,arguments)}function xT(t,e,n,i,s,r,o,a,l){if(wT.apply(this,arguments),Yo){if(Yo){var c=Xc;Yo=!1,Xc=null}else throw Error(I(198));Jc||(Jc=!0,Tf=c)}}function Ks(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hy(t){if(Ks(t)!==t)throw Error(I(188))}function _T(t){var e=t.alternate;if(!e){if(e=Ks(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return Hy(s),t;if(r===i)return Hy(s),e;r=r.sibling}throw Error(I(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==i)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function _x(t){return t=_T(t),t!==null?kx(t):null}function kx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kx(t);if(e!==null)return e;t=t.sibling}return null}var Sx=Vt.unstable_scheduleCallback,Wy=Vt.unstable_cancelCallback,kT=Vt.unstable_shouldYield,ST=Vt.unstable_requestPaint,Ae=Vt.unstable_now,bT=Vt.unstable_getCurrentPriorityLevel,lg=Vt.unstable_ImmediatePriority,bx=Vt.unstable_UserBlockingPriority,Zc=Vt.unstable_NormalPriority,ET=Vt.unstable_LowPriority,Ex=Vt.unstable_IdlePriority,ih=null,Tn=null;function CT(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(ih,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:NT,TT=Math.log,IT=Math.LN2;function NT(t){return t>>>=0,t===0?32:31-(TT(t)/IT|0)|0}var Fl=64,Ul=4194304;function Oo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?i=Oo(a):(r&=o,r!==0&&(i=Oo(r)))}else o=n&~s,o!==0?i=Oo(o):r!==0&&(i=Oo(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-hn(e),s=1<<n,i|=t[n],e&=~s;return i}function AT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PT(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-hn(r),a=1<<o,l=s[o];l===-1?(!(a&n)||a&i)&&(s[o]=AT(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function If(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Cx(){var t=Fl;return Fl<<=1,!(Fl&4194240)&&(Fl=64),t}function ld(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ol(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function RT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hn(n),r=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~r}}function cg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-hn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var ie=0;function Tx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ix,ug,Nx,Ax,Px,Nf=!1,zl=[],Pi=null,Ri=null,Di=null,va=new Map,wa=new Map,yi=[],DT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ky(t,e){switch(t){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(e.pointerId)}}function wo(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=ll(e),e!==null&&ug(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function MT(t,e,n,i,s){switch(e){case"focusin":return Pi=wo(Pi,t,e,n,i,s),!0;case"dragenter":return Ri=wo(Ri,t,e,n,i,s),!0;case"mouseover":return Di=wo(Di,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return va.set(r,wo(va.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,wa.set(r,wo(wa.get(r)||null,t,e,n,i,s)),!0}return!1}function Rx(t){var e=ms(t.target);if(e!==null){var n=Ks(e);if(n!==null){if(e=n.tag,e===13){if(e=xx(n),e!==null){t.blockedOn=e,Px(t.priority,function(){Nx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Af(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bf=i,n.target.dispatchEvent(i),bf=null}else return e=ll(n),e!==null&&ug(e),t.blockedOn=n,!1;e.shift()}return!0}function qy(t,e,n){Tc(t)&&n.delete(e)}function OT(){Nf=!1,Pi!==null&&Tc(Pi)&&(Pi=null),Ri!==null&&Tc(Ri)&&(Ri=null),Di!==null&&Tc(Di)&&(Di=null),va.forEach(qy),wa.forEach(qy)}function xo(t,e){t.blockedOn===e&&(t.blockedOn=null,Nf||(Nf=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,OT)))}function xa(t){function e(s){return xo(s,t)}if(0<zl.length){xo(zl[0],t);for(var n=1;n<zl.length;n++){var i=zl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Pi!==null&&xo(Pi,t),Ri!==null&&xo(Ri,t),Di!==null&&xo(Di,t),va.forEach(e),wa.forEach(e),n=0;n<yi.length;n++)i=yi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<yi.length&&(n=yi[0],n.blockedOn===null);)Rx(n),n.blockedOn===null&&yi.shift()}var Sr=hi.ReactCurrentBatchConfig,tu=!0;function LT(t,e,n,i){var s=ie,r=Sr.transition;Sr.transition=null;try{ie=1,hg(t,e,n,i)}finally{ie=s,Sr.transition=r}}function $T(t,e,n,i){var s=ie,r=Sr.transition;Sr.transition=null;try{ie=4,hg(t,e,n,i)}finally{ie=s,Sr.transition=r}}function hg(t,e,n,i){if(tu){var s=Af(t,e,n,i);if(s===null)vd(t,e,i,nu,n),Ky(t,i);else if(MT(s,t,e,n,i))i.stopPropagation();else if(Ky(t,i),e&4&&-1<DT.indexOf(t)){for(;s!==null;){var r=ll(s);if(r!==null&&Ix(r),r=Af(t,e,n,i),r===null&&vd(t,e,i,nu,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else vd(t,e,i,null,n)}}var nu=null;function Af(t,e,n,i){if(nu=null,t=ag(i),t=ms(t),t!==null)if(e=Ks(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return nu=t,null}function Dx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bT()){case lg:return 1;case bx:return 4;case Zc:case ET:return 16;case Ex:return 536870912;default:return 16}default:return 16}}var bi=null,dg=null,Ic=null;function Mx(){if(Ic)return Ic;var t,e=dg,n=e.length,i,s="value"in bi?bi.value:bi.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return Ic=s.slice(t,1<i?1-i:void 0)}function Nc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bl(){return!0}function Gy(){return!1}function Kt(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Bl:Gy,this.isPropagationStopped=Gy,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bl)},persist:function(){},isPersistent:Bl}),e}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=Kt(no),al=xe({},no,{view:0,detail:0}),jT=Kt(al),cd,ud,_o,sh=xe({},al,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_o&&(_o&&t.type==="mousemove"?(cd=t.screenX-_o.screenX,ud=t.screenY-_o.screenY):ud=cd=0,_o=t),cd)},movementY:function(t){return"movementY"in t?t.movementY:ud}}),Yy=Kt(sh),FT=xe({},sh,{dataTransfer:0}),UT=Kt(FT),zT=xe({},al,{relatedTarget:0}),hd=Kt(zT),BT=xe({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),VT=Kt(BT),HT=xe({},no,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WT=Kt(HT),KT=xe({},no,{data:0}),Qy=Kt(KT),qT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YT[t])?!!e[t]:!1}function pg(){return QT}var XT=xe({},al,{key:function(t){if(t.key){var e=qT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pg,charCode:function(t){return t.type==="keypress"?Nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JT=Kt(XT),ZT=xe({},sh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xy=Kt(ZT),eI=xe({},al,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pg}),tI=Kt(eI),nI=xe({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),iI=Kt(nI),sI=xe({},sh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rI=Kt(sI),oI=[9,13,27,32],gg=ei&&"CompositionEvent"in window,Qo=null;ei&&"documentMode"in document&&(Qo=document.documentMode);var aI=ei&&"TextEvent"in window&&!Qo,Ox=ei&&(!gg||Qo&&8<Qo&&11>=Qo),Jy=String.fromCharCode(32),Zy=!1;function Lx(t,e){switch(t){case"keyup":return oI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $x(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var lr=!1;function lI(t,e){switch(t){case"compositionend":return $x(e);case"keypress":return e.which!==32?null:(Zy=!0,Jy);case"textInput":return t=e.data,t===Jy&&Zy?null:t;default:return null}}function cI(t,e){if(lr)return t==="compositionend"||!gg&&Lx(t,e)?(t=Mx(),Ic=dg=bi=null,lr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ox&&e.locale!=="ko"?null:e.data;default:return null}}var uI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uI[t.type]:e==="textarea"}function jx(t,e,n,i){gx(i),e=iu(e,"onChange"),0<e.length&&(n=new fg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Xo=null,_a=null;function hI(t){Yx(t,0)}function rh(t){var e=hr(t);if(lx(e))return t}function dI(t,e){if(t==="change")return e}var Fx=!1;if(ei){var dd;if(ei){var fd="oninput"in document;if(!fd){var tv=document.createElement("div");tv.setAttribute("oninput","return;"),fd=typeof tv.oninput=="function"}dd=fd}else dd=!1;Fx=dd&&(!document.documentMode||9<document.documentMode)}function nv(){Xo&&(Xo.detachEvent("onpropertychange",Ux),_a=Xo=null)}function Ux(t){if(t.propertyName==="value"&&rh(_a)){var e=[];jx(e,_a,t,ag(t)),wx(hI,e)}}function fI(t,e,n){t==="focusin"?(nv(),Xo=e,_a=n,Xo.attachEvent("onpropertychange",Ux)):t==="focusout"&&nv()}function pI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rh(_a)}function gI(t,e){if(t==="click")return rh(e)}function mI(t,e){if(t==="input"||t==="change")return rh(e)}function yI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:yI;function ka(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!df.call(e,s)||!fn(t[s],e[s]))return!1}return!0}function iv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sv(t,e){var n=iv(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iv(n)}}function zx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Bx(){for(var t=window,e=Qc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qc(t.document)}return e}function mg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vI(t){var e=Bx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zx(n.ownerDocument.documentElement,n)){if(i!==null&&mg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!t.extend&&r>i&&(s=i,i=r,r=s),s=sv(n,r);var o=sv(n,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),r>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wI=ei&&"documentMode"in document&&11>=document.documentMode,cr=null,Pf=null,Jo=null,Rf=!1;function rv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rf||cr==null||cr!==Qc(i)||(i=cr,"selectionStart"in i&&mg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Jo&&ka(Jo,i)||(Jo=i,i=iu(Pf,"onSelect"),0<i.length&&(e=new fg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=cr)))}function Vl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ur={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionend:Vl("Transition","TransitionEnd")},pd={},Vx={};ei&&(Vx=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function oh(t){if(pd[t])return pd[t];if(!ur[t])return t;var e=ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Vx)return pd[t]=e[n];return t}var Hx=oh("animationend"),Wx=oh("animationiteration"),Kx=oh("animationstart"),qx=oh("transitionend"),Gx=new Map,ov="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(t,e){Gx.set(t,e),Ws(e,[t])}for(var gd=0;gd<ov.length;gd++){var md=ov[gd],xI=md.toLowerCase(),_I=md[0].toUpperCase()+md.slice(1);Xi(xI,"on"+_I)}Xi(Hx,"onAnimationEnd");Xi(Wx,"onAnimationIteration");Xi(Kx,"onAnimationStart");Xi("dblclick","onDoubleClick");Xi("focusin","onFocus");Xi("focusout","onBlur");Xi(qx,"onTransitionEnd");Or("onMouseEnter",["mouseout","mouseover"]);Or("onMouseLeave",["mouseout","mouseover"]);Or("onPointerEnter",["pointerout","pointerover"]);Or("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function av(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,xT(i,e,void 0,t),t.currentTarget=null}function Yx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;av(s,a,c),r=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;av(s,a,c),r=l}}}if(Jc)throw t=Tf,Jc=!1,Tf=null,t}function ce(t,e){var n=e[$f];n===void 0&&(n=e[$f]=new Set);var i=t+"__bubble";n.has(i)||(Qx(e,t,2,!1),n.add(i))}function yd(t,e,n){var i=0;e&&(i|=4),Qx(n,t,i,e)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function Sa(t){if(!t[Hl]){t[Hl]=!0,ix.forEach(function(n){n!=="selectionchange"&&(kI.has(n)||yd(n,!1,t),yd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hl]||(e[Hl]=!0,yd("selectionchange",!1,e))}}function Qx(t,e,n,i){switch(Dx(e)){case 1:var s=LT;break;case 4:s=$T;break;default:s=hg}n=s.bind(null,e,n,t),s=void 0,!Cf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function vd(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=ms(a),o===null)return;if(l=o.tag,l===5||l===6){i=r=o;continue e}a=a.parentNode}}i=i.return}wx(function(){var c=r,u=ag(n),h=[];e:{var d=Gx.get(t);if(d!==void 0){var f=fg,m=t;switch(t){case"keypress":if(Nc(n)===0)break e;case"keydown":case"keyup":f=JT;break;case"focusin":m="focus",f=hd;break;case"focusout":m="blur",f=hd;break;case"beforeblur":case"afterblur":f=hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=UT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=tI;break;case Hx:case Wx:case Kx:f=VT;break;case qx:f=iI;break;case"scroll":f=jT;break;case"wheel":f=rI;break;case"copy":case"cut":case"paste":f=WT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Xy}var v=(e&4)!==0,w=!v&&t==="scroll",g=v?d!==null?d+"Capture":null:d;v=[];for(var y=c,x;y!==null;){x=y;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,g!==null&&(k=ya(y,g),k!=null&&v.push(ba(y,k,x)))),w)break;y=y.return}0<v.length&&(d=new f(d,m,null,n,u),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==bf&&(m=n.relatedTarget||n.fromElement)&&(ms(m)||m[ti]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=c,m=m?ms(m):null,m!==null&&(w=Ks(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=c),f!==m)){if(v=Yy,k="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=Xy,k="onPointerLeave",g="onPointerEnter",y="pointer"),w=f==null?d:hr(f),x=m==null?d:hr(m),d=new v(k,y+"leave",f,n,u),d.target=w,d.relatedTarget=x,k=null,ms(u)===c&&(v=new v(g,y+"enter",m,n,u),v.target=x,v.relatedTarget=w,k=v),w=k,f&&m)t:{for(v=f,g=m,y=0,x=v;x;x=er(x))y++;for(x=0,k=g;k;k=er(k))x++;for(;0<y-x;)v=er(v),y--;for(;0<x-y;)g=er(g),x--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=er(v),g=er(g)}v=null}else v=null;f!==null&&lv(h,d,f,v,!1),m!==null&&w!==null&&lv(h,w,m,v,!0)}}e:{if(d=c?hr(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var _=dI;else if(ev(d))if(Fx)_=mI;else{_=pI;var S=fI}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(_=gI);if(_&&(_=_(t,c))){jx(h,_,n,u);break e}S&&S(t,d,c),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&wf(d,"number",d.value)}switch(S=c?hr(c):window,t){case"focusin":(ev(S)||S.contentEditable==="true")&&(cr=S,Pf=c,Jo=null);break;case"focusout":Jo=Pf=cr=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,rv(h,n,u);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":rv(h,n,u)}var C;if(gg)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else lr?Lx(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Ox&&n.locale!=="ko"&&(lr||E!=="onCompositionStart"?E==="onCompositionEnd"&&lr&&(C=Mx()):(bi=u,dg="value"in bi?bi.value:bi.textContent,lr=!0)),S=iu(c,E),0<S.length&&(E=new Qy(E,t,null,n,u),h.push({event:E,listeners:S}),C?E.data=C:(C=$x(n),C!==null&&(E.data=C)))),(C=aI?lI(t,n):cI(t,n))&&(c=iu(c,"onBeforeInput"),0<c.length&&(u=new Qy("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=C))}Yx(h,e)})}function ba(t,e,n){return{instance:t,listener:e,currentTarget:n}}function iu(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=ya(t,n),r!=null&&i.unshift(ba(t,r,s)),r=ya(t,e),r!=null&&i.push(ba(t,r,s))),t=t.return}return i}function er(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lv(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,s?(l=ya(n,r),l!=null&&o.unshift(ba(n,l,a))):s||(l=ya(n,r),l!=null&&o.push(ba(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SI=/\r\n?/g,bI=/\u0000|\uFFFD/g;function cv(t){return(typeof t=="string"?t:""+t).replace(SI,`
`).replace(bI,"")}function Wl(t,e,n){if(e=cv(e),cv(t)!==e&&n)throw Error(I(425))}function su(){}var Df=null,Mf=null;function Of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lf=typeof setTimeout=="function"?setTimeout:void 0,EI=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,CI=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(t){return uv.resolve(null).then(t).catch(TI)}:Lf;function TI(t){setTimeout(function(){throw t})}function wd(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),xa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);xa(e)}function Mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function hv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),kn="__reactFiber$"+io,Ea="__reactProps$"+io,ti="__reactContainer$"+io,$f="__reactEvents$"+io,II="__reactListeners$"+io,NI="__reactHandles$"+io;function ms(t){var e=t[kn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ti]||n[kn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=hv(t);t!==null;){if(n=t[kn])return n;t=hv(t)}return e}t=n,n=t.parentNode}return null}function ll(t){return t=t[kn]||t[ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function ah(t){return t[Ea]||null}var jf=[],dr=-1;function Ji(t){return{current:t}}function de(t){0>dr||(t.current=jf[dr],jf[dr]=null,dr--)}function ae(t,e){dr++,jf[dr]=t.current,t.current=e}var Wi={},dt=Ji(Wi),At=Ji(!1),As=Wi;function Lr(t,e){var n=t.type.contextTypes;if(!n)return Wi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in n)s[r]=e[r];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Pt(t){return t=t.childContextTypes,t!=null}function ru(){de(At),de(dt)}function dv(t,e,n){if(dt.current!==Wi)throw Error(I(168));ae(dt,e),ae(At,n)}function Xx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(I(108,fT(t)||"Unknown",s));return xe({},n,i)}function ou(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wi,As=dt.current,ae(dt,t),ae(At,At.current),!0}function fv(t,e,n){var i=t.stateNode;if(!i)throw Error(I(169));n?(t=Xx(t,e,As),i.__reactInternalMemoizedMergedChildContext=t,de(At),de(dt),ae(dt,t)):de(At),ae(At,n)}var Vn=null,lh=!1,xd=!1;function Jx(t){Vn===null?Vn=[t]:Vn.push(t)}function AI(t){lh=!0,Jx(t)}function Zi(){if(!xd&&Vn!==null){xd=!0;var t=0,e=ie;try{var n=Vn;for(ie=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Vn=null,lh=!1}catch(s){throw Vn!==null&&(Vn=Vn.slice(t+1)),Sx(lg,Zi),s}finally{ie=e,xd=!1}}return null}var fr=[],pr=0,au=null,lu=0,Gt=[],Yt=0,Ps=null,Wn=1,Kn="";function hs(t,e){fr[pr++]=lu,fr[pr++]=au,au=t,lu=e}function Zx(t,e,n){Gt[Yt++]=Wn,Gt[Yt++]=Kn,Gt[Yt++]=Ps,Ps=t;var i=Wn;t=Kn;var s=32-hn(i)-1;i&=~(1<<s),n+=1;var r=32-hn(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Wn=1<<32-hn(e)+s|n<<s|i,Kn=r+t}else Wn=1<<r|n<<s|i,Kn=t}function yg(t){t.return!==null&&(hs(t,1),Zx(t,1,0))}function vg(t){for(;t===au;)au=fr[--pr],fr[pr]=null,lu=fr[--pr],fr[pr]=null;for(;t===Ps;)Ps=Gt[--Yt],Gt[Yt]=null,Kn=Gt[--Yt],Gt[Yt]=null,Wn=Gt[--Yt],Gt[Yt]=null}var Bt=null,jt=null,pe=!1,cn=null;function e_(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,jt=Mi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ps!==null?{id:Wn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bt=t,jt=null,!0):!1;default:return!1}}function Ff(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Uf(t){if(pe){var e=jt;if(e){var n=e;if(!pv(t,e)){if(Ff(t))throw Error(I(418));e=Mi(n.nextSibling);var i=Bt;e&&pv(t,e)?e_(i,n):(t.flags=t.flags&-4097|2,pe=!1,Bt=t)}}else{if(Ff(t))throw Error(I(418));t.flags=t.flags&-4097|2,pe=!1,Bt=t}}}function gv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function Kl(t){if(t!==Bt)return!1;if(!pe)return gv(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Of(t.type,t.memoizedProps)),e&&(e=jt)){if(Ff(t))throw t_(),Error(I(418));for(;e;)e_(t,e),e=Mi(e.nextSibling)}if(gv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Mi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Bt?Mi(t.stateNode.nextSibling):null;return!0}function t_(){for(var t=jt;t;)t=Mi(t.nextSibling)}function $r(){jt=Bt=null,pe=!1}function wg(t){cn===null?cn=[t]:cn.push(t)}var PI=hi.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var i=n.stateNode}if(!i)throw Error(I(147,t));var s=i,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=s.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function ql(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mv(t){var e=t._init;return e(t._payload)}function n_(t){function e(g,y){if(t){var x=g.deletions;x===null?(g.deletions=[y],g.flags|=16):x.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function i(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=ji(g,y),g.index=0,g.sibling=null,g}function r(g,y,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<y?(g.flags|=2,y):x):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,x,k){return y===null||y.tag!==6?(y=Td(x,g.mode,k),y.return=g,y):(y=s(y,x),y.return=g,y)}function l(g,y,x,k){var _=x.type;return _===ar?u(g,y,x.props.children,k,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===gi&&mv(_)===y.type)?(k=s(y,x.props),k.ref=ko(g,y,x),k.return=g,k):(k=Lc(x.type,x.key,x.props,null,g.mode,k),k.ref=ko(g,y,x),k.return=g,k)}function c(g,y,x,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Id(x,g.mode,k),y.return=g,y):(y=s(y,x.children||[]),y.return=g,y)}function u(g,y,x,k,_){return y===null||y.tag!==7?(y=Es(x,g.mode,k,_),y.return=g,y):(y=s(y,x),y.return=g,y)}function h(g,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Td(""+y,g.mode,x),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ll:return x=Lc(y.type,y.key,y.props,null,g.mode,x),x.ref=ko(g,null,y),x.return=g,x;case or:return y=Id(y,g.mode,x),y.return=g,y;case gi:var k=y._init;return h(g,k(y._payload),x)}if(Mo(y)||yo(y))return y=Es(y,g.mode,x,null),y.return=g,y;ql(g,y)}return null}function d(g,y,x,k){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(g,y,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ll:return x.key===_?l(g,y,x,k):null;case or:return x.key===_?c(g,y,x,k):null;case gi:return _=x._init,d(g,y,_(x._payload),k)}if(Mo(x)||yo(x))return _!==null?null:u(g,y,x,k,null);ql(g,x)}return null}function f(g,y,x,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(x)||null,a(y,g,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ll:return g=g.get(k.key===null?x:k.key)||null,l(y,g,k,_);case or:return g=g.get(k.key===null?x:k.key)||null,c(y,g,k,_);case gi:var S=k._init;return f(g,y,x,S(k._payload),_)}if(Mo(k)||yo(k))return g=g.get(x)||null,u(y,g,k,_,null);ql(y,k)}return null}function m(g,y,x,k){for(var _=null,S=null,C=y,E=y=0,A=null;C!==null&&E<x.length;E++){C.index>E?(A=C,C=null):A=C.sibling;var P=d(g,C,x[E],k);if(P===null){C===null&&(C=A);break}t&&C&&P.alternate===null&&e(g,C),y=r(P,y,E),S===null?_=P:S.sibling=P,S=P,C=A}if(E===x.length)return n(g,C),pe&&hs(g,E),_;if(C===null){for(;E<x.length;E++)C=h(g,x[E],k),C!==null&&(y=r(C,y,E),S===null?_=C:S.sibling=C,S=C);return pe&&hs(g,E),_}for(C=i(g,C);E<x.length;E++)A=f(C,g,E,x[E],k),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?E:A.key),y=r(A,y,E),S===null?_=A:S.sibling=A,S=A);return t&&C.forEach(function(L){return e(g,L)}),pe&&hs(g,E),_}function v(g,y,x,k){var _=yo(x);if(typeof _!="function")throw Error(I(150));if(x=_.call(x),x==null)throw Error(I(151));for(var S=_=null,C=y,E=y=0,A=null,P=x.next();C!==null&&!P.done;E++,P=x.next()){C.index>E?(A=C,C=null):A=C.sibling;var L=d(g,C,P.value,k);if(L===null){C===null&&(C=A);break}t&&C&&L.alternate===null&&e(g,C),y=r(L,y,E),S===null?_=L:S.sibling=L,S=L,C=A}if(P.done)return n(g,C),pe&&hs(g,E),_;if(C===null){for(;!P.done;E++,P=x.next())P=h(g,P.value,k),P!==null&&(y=r(P,y,E),S===null?_=P:S.sibling=P,S=P);return pe&&hs(g,E),_}for(C=i(g,C);!P.done;E++,P=x.next())P=f(C,g,E,P.value,k),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?E:P.key),y=r(P,y,E),S===null?_=P:S.sibling=P,S=P);return t&&C.forEach(function(q){return e(g,q)}),pe&&hs(g,E),_}function w(g,y,x,k){if(typeof x=="object"&&x!==null&&x.type===ar&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ll:e:{for(var _=x.key,S=y;S!==null;){if(S.key===_){if(_=x.type,_===ar){if(S.tag===7){n(g,S.sibling),y=s(S,x.props.children),y.return=g,g=y;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===gi&&mv(_)===S.type){n(g,S.sibling),y=s(S,x.props),y.ref=ko(g,S,x),y.return=g,g=y;break e}n(g,S);break}else e(g,S);S=S.sibling}x.type===ar?(y=Es(x.props.children,g.mode,k,x.key),y.return=g,g=y):(k=Lc(x.type,x.key,x.props,null,g.mode,k),k.ref=ko(g,y,x),k.return=g,g=k)}return o(g);case or:e:{for(S=x.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(g,y.sibling),y=s(y,x.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=Id(x,g.mode,k),y.return=g,g=y}return o(g);case gi:return S=x._init,w(g,y,S(x._payload),k)}if(Mo(x))return m(g,y,x,k);if(yo(x))return v(g,y,x,k);ql(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,x),y.return=g,g=y):(n(g,y),y=Td(x,g.mode,k),y.return=g,g=y),o(g)):n(g,y)}return w}var jr=n_(!0),i_=n_(!1),cu=Ji(null),uu=null,gr=null,xg=null;function _g(){xg=gr=uu=null}function kg(t){var e=cu.current;de(cu),t._currentValue=e}function zf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function br(t,e){uu=t,xg=gr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(xg!==t)if(t={context:t,memoizedValue:e,next:null},gr===null){if(uu===null)throw Error(I(308));gr=t,uu.dependencies={lanes:0,firstContext:t}}else gr=gr.next=t;return e}var ys=null;function Sg(t){ys===null?ys=[t]:ys.push(t)}function s_(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Sg(e)):(n.next=s.next,s.next=n),e.interleaved=n,ni(t,i)}function ni(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mi=!1;function bg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function r_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,J&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ni(t,n)}return s=i.interleaved,s===null?(e.next=e,Sg(i)):(e.next=s.next,s.next=e),i.interleaved=e,ni(t,n)}function Ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cg(t,n)}}function yv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function hu(t,e,n,i){var s=t.updateQueue;mi=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(r!==null){var h=s.baseState;o=0,u=c=l=null,a=r;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(d=e,f=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,d=typeof m=="function"?m.call(f,h,d):m,d==null)break e;h=xe({},h,d);break e;case 2:mi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=s.effects,d===null?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;d=a,a=d.next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}while(1);if(u===null&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);Ds|=o,t.lanes=o,t.memoizedState=h}}function vv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(I(191,s));s.call(i)}}}var cl={},In=Ji(cl),Ca=Ji(cl),Ta=Ji(cl);function vs(t){if(t===cl)throw Error(I(174));return t}function Eg(t,e){switch(ae(Ta,e),ae(Ca,t),ae(In,cl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_f(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_f(e,t)}de(In),ae(In,e)}function Fr(){de(In),de(Ca),de(Ta)}function o_(t){vs(Ta.current);var e=vs(In.current),n=_f(e,t.type);e!==n&&(ae(Ca,t),ae(In,n))}function Cg(t){Ca.current===t&&(de(In),de(Ca))}var ye=Ji(0);function du(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _d=[];function Tg(){for(var t=0;t<_d.length;t++)_d[t]._workInProgressVersionPrimary=null;_d.length=0}var Pc=hi.ReactCurrentDispatcher,kd=hi.ReactCurrentBatchConfig,Rs=0,we=null,Le=null,Ve=null,fu=!1,Zo=!1,Ia=0,RI=0;function tt(){throw Error(I(321))}function Ig(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function Ng(t,e,n,i,s,r){if(Rs=r,we=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pc.current=t===null||t.memoizedState===null?LI:$I,t=n(i,s),Zo){r=0;do{if(Zo=!1,Ia=0,25<=r)throw Error(I(301));r+=1,Ve=Le=null,e.updateQueue=null,Pc.current=jI,t=n(i,s)}while(Zo)}if(Pc.current=pu,e=Le!==null&&Le.next!==null,Rs=0,Ve=Le=we=null,fu=!1,e)throw Error(I(300));return t}function Ag(){var t=Ia!==0;return Ia=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?we.memoizedState=Ve=t:Ve=Ve.next=t,Ve}function sn(){if(Le===null){var t=we.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Ve===null?we.memoizedState:Ve.next;if(e!==null)Ve=e,Le=t;else{if(t===null)throw Error(I(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Ve===null?we.memoizedState=Ve=t:Ve=Ve.next=t}return Ve}function Na(t,e){return typeof e=="function"?e(t):e}function Sd(t){var e=sn(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var i=Le,s=i.baseQueue,r=n.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,n.pending=null}if(s!==null){r=s.next,i=i.baseState;var a=o=null,l=null,c=r;do{var u=c.lane;if((Rs&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,we.lanes|=u,Ds|=u}c=c.next}while(c!==null&&c!==r);l===null?o=i:l.next=a,fn(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do r=s.lane,we.lanes|=r,Ds|=r,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bd(t){var e=sn(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);fn(r,e.memoizedState)||(Nt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function a_(){}function l_(t,e){var n=we,i=sn(),s=e(),r=!fn(i.memoizedState,s);if(r&&(i.memoizedState=s,Nt=!0),i=i.queue,Pg(h_.bind(null,n,i,t),[t]),i.getSnapshot!==e||r||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Aa(9,u_.bind(null,n,i,s,e),void 0,null),We===null)throw Error(I(349));Rs&30||c_(n,e,s)}return s}function c_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function u_(t,e,n,i){e.value=n,e.getSnapshot=i,d_(e)&&f_(t)}function h_(t,e,n){return n(function(){d_(e)&&f_(t)})}function d_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function f_(t){var e=ni(t,1);e!==null&&dn(e,t,1,-1)}function wv(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=OI.bind(null,we,t),[e.memoizedState,t]}function Aa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=we.updateQueue,e===null?(e={lastEffect:null,stores:null},we.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function p_(){return sn().memoizedState}function Rc(t,e,n,i){var s=xn();we.flags|=t,s.memoizedState=Aa(1|e,n,void 0,i===void 0?null:i)}function ch(t,e,n,i){var s=sn();i=i===void 0?null:i;var r=void 0;if(Le!==null){var o=Le.memoizedState;if(r=o.destroy,i!==null&&Ig(i,o.deps)){s.memoizedState=Aa(e,n,r,i);return}}we.flags|=t,s.memoizedState=Aa(1|e,n,r,i)}function xv(t,e){return Rc(8390656,8,t,e)}function Pg(t,e){return ch(2048,8,t,e)}function g_(t,e){return ch(4,2,t,e)}function m_(t,e){return ch(4,4,t,e)}function y_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function v_(t,e,n){return n=n!=null?n.concat([t]):null,ch(4,4,y_.bind(null,e,t),n)}function Rg(){}function w_(t,e){var n=sn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ig(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function x_(t,e){var n=sn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Ig(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function __(t,e,n){return Rs&21?(fn(n,e)||(n=Cx(),we.lanes|=n,Ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function DI(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var i=kd.transition;kd.transition={};try{t(!1),e()}finally{ie=n,kd.transition=i}}function k_(){return sn().memoizedState}function MI(t,e,n){var i=$i(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},S_(t))b_(e,n);else if(n=s_(t,e,n,i),n!==null){var s=kt();dn(n,t,i,s),E_(n,e,i)}}function OI(t,e,n){var i=$i(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(S_(t))b_(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,fn(a,o)){var l=e.interleaved;l===null?(s.next=s,Sg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=s_(t,e,s,i),n!==null&&(s=kt(),dn(n,t,i,s),E_(n,e,i))}}function S_(t){var e=t.alternate;return t===we||e!==null&&e===we}function b_(t,e){Zo=fu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function E_(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,cg(t,n)}}var pu={readContext:nn,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},LI={readContext:nn,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:xv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4194308,4,y_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Rc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Rc(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=xn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=MI.bind(null,we,t),[i.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:wv,useDebugValue:Rg,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=wv(!1),e=t[0];return t=DI.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=we,s=xn();if(pe){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),We===null)throw Error(I(349));Rs&30||c_(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,xv(h_.bind(null,i,r,t),[t]),i.flags|=2048,Aa(9,u_.bind(null,i,r,n,e),void 0,null),n},useId:function(){var t=xn(),e=We.identifierPrefix;if(pe){var n=Kn,i=Wn;n=(i&~(1<<32-hn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ia++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$I={readContext:nn,useCallback:w_,useContext:nn,useEffect:Pg,useImperativeHandle:v_,useInsertionEffect:g_,useLayoutEffect:m_,useMemo:x_,useReducer:Sd,useRef:p_,useState:function(){return Sd(Na)},useDebugValue:Rg,useDeferredValue:function(t){var e=sn();return __(e,Le.memoizedState,t)},useTransition:function(){var t=Sd(Na)[0],e=sn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:l_,useId:k_,unstable_isNewReconciler:!1},jI={readContext:nn,useCallback:w_,useContext:nn,useEffect:Pg,useImperativeHandle:v_,useInsertionEffect:g_,useLayoutEffect:m_,useMemo:x_,useReducer:bd,useRef:p_,useState:function(){return bd(Na)},useDebugValue:Rg,useDeferredValue:function(t){var e=sn();return Le===null?e.memoizedState=t:__(e,Le.memoizedState,t)},useTransition:function(){var t=bd(Na)[0],e=sn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:l_,useId:k_,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uh={isMounted:function(t){return(t=t._reactInternals)?Ks(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=kt(),s=$i(t),r=Xn(i,s);r.payload=e,n!=null&&(r.callback=n),e=Oi(t,r,s),e!==null&&(dn(e,t,s,i),Ac(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=kt(),s=$i(t),r=Xn(i,s);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Oi(t,r,s),e!==null&&(dn(e,t,s,i),Ac(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=kt(),i=$i(t),s=Xn(n,i);s.tag=2,e!=null&&(s.callback=e),e=Oi(t,s,i),e!==null&&(dn(e,t,i,n),Ac(e,t,i))}};function _v(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!ka(n,i)||!ka(s,r):!0}function C_(t,e,n){var i=!1,s=Wi,r=e.contextType;return typeof r=="object"&&r!==null?r=nn(r):(s=Pt(e)?As:dt.current,i=e.contextTypes,r=(i=i!=null)?Lr(t,s):Wi),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function kv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&uh.enqueueReplaceState(e,e.state,null)}function Vf(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},bg(t);var r=e.contextType;typeof r=="object"&&r!==null?s.context=nn(r):(r=Pt(e)?As:dt.current,s.context=Lr(t,r)),s.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Bf(t,e,r,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&uh.enqueueReplaceState(s,s.state,null),hu(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ur(t,e){try{var n="",i=e;do n+=dT(i),i=i.return;while(i);var s=n}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:s,digest:null}}function Ed(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FI=typeof WeakMap=="function"?WeakMap:Map;function T_(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){mu||(mu=!0,ep=i),Hf(t,e)},n}function I_(t,e,n){n=Xn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Hf(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Hf(t,e),typeof i!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Sv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new FI;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=ZI.bind(null,t,e,n),e.then(t,t))}function bv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ev(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Oi(n,e,1))),n.lanes|=1),t)}var UI=hi.ReactCurrentOwner,Nt=!1;function wt(t,e,n,i){e.child=t===null?i_(e,null,n,i):jr(e,t.child,n,i)}function Cv(t,e,n,i,s){n=n.render;var r=e.ref;return br(e,s),i=Ng(t,e,n,i,r,s),n=Ag(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ii(t,e,s)):(pe&&n&&yg(e),e.flags|=1,wt(t,e,i,s),e.child)}function Tv(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!Ug(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,N_(t,e,r,i,s)):(t=Lc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:ka,n(o,i)&&t.ref===e.ref)return ii(t,e,s)}return e.flags|=1,t=ji(r,i),t.ref=e.ref,t.return=e,e.child=t}function N_(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(ka(r,i)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=i=r,(t.lanes&s)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,ii(t,e,s)}return Wf(t,e,n,i,s)}function A_(t,e,n){var i=e.pendingProps,s=i.children,r=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(yr,Lt),Lt|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(yr,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:n,ae(yr,Lt),Lt|=i}else r!==null?(i=r.baseLanes|n,e.memoizedState=null):i=n,ae(yr,Lt),Lt|=i;return wt(t,e,s,n),e.child}function P_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wf(t,e,n,i,s){var r=Pt(n)?As:dt.current;return r=Lr(e,r),br(e,s),n=Ng(t,e,n,i,r,s),i=Ag(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ii(t,e,s)):(pe&&i&&yg(e),e.flags|=1,wt(t,e,n,s),e.child)}function Iv(t,e,n,i,s){if(Pt(n)){var r=!0;ou(e)}else r=!1;if(br(e,s),e.stateNode===null)Dc(t,e),C_(e,n,i),Vf(e,n,i,s),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=nn(c):(c=Pt(n)?As:dt.current,c=Lr(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&kv(e,o,i,c),mi=!1;var d=e.memoizedState;o.state=d,hu(e,i,o,s),l=e.memoizedState,a!==i||d!==l||At.current||mi?(typeof u=="function"&&(Bf(e,n,u,i),l=e.memoizedState),(a=mi||_v(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,r_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:on(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nn(l):(l=Pt(n)?As:dt.current,l=Lr(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&kv(e,o,i,l),mi=!1,d=e.memoizedState,o.state=d,hu(e,i,o,s);var m=e.memoizedState;a!==h||d!==m||At.current||mi?(typeof f=="function"&&(Bf(e,n,f,i),m=e.memoizedState),(c=mi||_v(e,n,c,i,d,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Kf(t,e,n,i,r,s)}function Kf(t,e,n,i,s,r){P_(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&fv(e,n,!1),ii(t,e,r);i=e.stateNode,UI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=jr(e,t.child,null,r),e.child=jr(e,null,a,r)):wt(t,e,a,r),e.memoizedState=i.state,s&&fv(e,n,!0),e.child}function R_(t){var e=t.stateNode;e.pendingContext?dv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dv(t,e.context,!1),Eg(t,e.containerInfo)}function Nv(t,e,n,i,s){return $r(),wg(s),e.flags|=256,wt(t,e,n,i),e.child}var qf={dehydrated:null,treeContext:null,retryLane:0};function Gf(t){return{baseLanes:t,cachePool:null,transitions:null}}function D_(t,e,n){var i=e.pendingProps,s=ye.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ae(ye,s&1),t===null)return Uf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=fh(o,i,0,null),t=Es(t,i,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Gf(n),e.memoizedState=qf,t):Dg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return zI(t,e,o,i,a,s,n);if(r){r=i.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ji(s,l),i.subtreeFlags=s.subtreeFlags&14680064),a!==null?r=ji(a,r):(r=Es(r,o,n,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=t.child.memoizedState,o=o===null?Gf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=qf,i}return r=t.child,t=r.sibling,i=ji(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Dg(t,e){return e=fh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gl(t,e,n,i){return i!==null&&wg(i),jr(e,t.child,null,n),t=Dg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zI(t,e,n,i,s,r,o){if(n)return e.flags&256?(e.flags&=-257,i=Ed(Error(I(422))),Gl(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=fh({mode:"visible",children:i.children},s,0,null),r=Es(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&jr(e,t.child,null,o),e.child.memoizedState=Gf(o),e.memoizedState=qf,r);if(!(e.mode&1))return Gl(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var a=i.dgst;return i=a,r=Error(I(419)),i=Ed(r,i,void 0),Gl(t,e,o,i)}if(a=(o&t.childLanes)!==0,Nt||a){if(i=We,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,ni(t,s),dn(i,t,s,-1))}return Fg(),i=Ed(Error(I(421))),Gl(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=e2.bind(null,t),s._reactRetry=e,null):(t=r.treeContext,jt=Mi(s.nextSibling),Bt=e,pe=!0,cn=null,t!==null&&(Gt[Yt++]=Wn,Gt[Yt++]=Kn,Gt[Yt++]=Ps,Wn=t.id,Kn=t.overflow,Ps=e),e=Dg(e,i.children),e.flags|=4096,e)}function Av(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zf(t.return,e,n)}function Cd(t,e,n,i,s){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function M_(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(wt(t,e,i.children,n),i=ye.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Av(t,n,e);else if(t.tag===19)Av(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ae(ye,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&du(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Cd(e,!1,s,n,r);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&du(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Cd(e,!0,n,null,r);break;case"together":Cd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=ji(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ji(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BI(t,e,n){switch(e.tag){case 3:R_(e),$r();break;case 5:o_(e);break;case 1:Pt(e.type)&&ou(e);break;case 4:Eg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ae(cu,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ae(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?D_(t,e,n):(ae(ye,ye.current&1),t=ii(t,e,n),t!==null?t.sibling:null);ae(ye,ye.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return M_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ae(ye,ye.current),i)break;return null;case 22:case 23:return e.lanes=0,A_(t,e,n)}return ii(t,e,n)}var O_,Yf,L_,$_;O_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yf=function(){};L_=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,vs(In.current);var r=null;switch(n){case"input":s=yf(t,s),i=yf(t,i),r=[];break;case"select":s=xe({},s,{value:void 0}),i=xe({},i,{value:void 0}),r=[];break;case"textarea":s=xf(t,s),i=xf(t,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=su)}kf(n,i);var o;n=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ga.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in i){var l=i[c];if(a=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ga.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ce("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};$_=function(t,e,n,i){n!==i&&(e.flags|=4)};function So(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function VI(t,e,n){var i=e.pendingProps;switch(vg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return Pt(e.type)&&ru(),nt(e),null;case 3:return i=e.stateNode,Fr(),de(At),de(dt),Tg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Kl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(ip(cn),cn=null))),Yf(t,e),nt(e),null;case 5:Cg(e);var s=vs(Ta.current);if(n=e.type,t!==null&&e.stateNode!=null)L_(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(I(166));return nt(e),null}if(t=vs(In.current),Kl(e)){i=e.stateNode,n=e.type;var r=e.memoizedProps;switch(i[kn]=e,i[Ea]=r,t=(e.mode&1)!==0,n){case"dialog":ce("cancel",i),ce("close",i);break;case"iframe":case"object":case"embed":ce("load",i);break;case"video":case"audio":for(s=0;s<Lo.length;s++)ce(Lo[s],i);break;case"source":ce("error",i);break;case"img":case"image":case"link":ce("error",i),ce("load",i);break;case"details":ce("toggle",i);break;case"input":Fy(i,r),ce("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},ce("invalid",i);break;case"textarea":zy(i,r),ce("invalid",i)}kf(n,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?i.textContent!==a&&(r.suppressHydrationWarning!==!0&&Wl(i.textContent,a,t),s=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Wl(i.textContent,a,t),s=["children",""+a]):ga.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ce("scroll",i)}switch(n){case"input":$l(i),Uy(i,r,!0);break;case"textarea":$l(i),By(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=su)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[kn]=e,t[Ea]=i,O_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sf(n,i),n){case"dialog":ce("cancel",t),ce("close",t),s=i;break;case"iframe":case"object":case"embed":ce("load",t),s=i;break;case"video":case"audio":for(s=0;s<Lo.length;s++)ce(Lo[s],t);s=i;break;case"source":ce("error",t),s=i;break;case"img":case"image":case"link":ce("error",t),ce("load",t),s=i;break;case"details":ce("toggle",t),s=i;break;case"input":Fy(t,i),s=yf(t,i),ce("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=xe({},i,{value:void 0}),ce("invalid",t);break;case"textarea":zy(t,i),s=xf(t,i),ce("invalid",t);break;default:s=i}kf(n,s),a=s;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?px(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dx(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ma(t,l):typeof l=="number"&&ma(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(ga.hasOwnProperty(r)?l!=null&&r==="onScroll"&&ce("scroll",t):l!=null&&ig(t,r,l,o))}switch(n){case"input":$l(t),Uy(t,i,!1);break;case"textarea":$l(t),By(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Hi(i.value));break;case"select":t.multiple=!!i.multiple,r=i.value,r!=null?xr(t,!!i.multiple,r,!1):i.defaultValue!=null&&xr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=su)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)$_(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(I(166));if(n=vs(Ta.current),vs(In.current),Kl(e)){if(i=e.stateNode,n=e.memoizedProps,i[kn]=e,(r=i.nodeValue!==n)&&(t=Bt,t!==null))switch(t.tag){case 3:Wl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wl(i.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[kn]=e,e.stateNode=i}return nt(e),null;case 13:if(de(ye),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&jt!==null&&e.mode&1&&!(e.flags&128))t_(),$r(),e.flags|=98560,r=!1;else if(r=Kl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!r)throw Error(I(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[kn]=e}else $r(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),r=!1}else cn!==null&&(ip(cn),cn=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?je===0&&(je=3):Fg())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return Fr(),Yf(t,e),t===null&&Sa(e.stateNode.containerInfo),nt(e),null;case 10:return kg(e.type._context),nt(e),null;case 17:return Pt(e.type)&&ru(),nt(e),null;case 19:if(de(ye),r=e.memoizedState,r===null)return nt(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)So(r,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=du(t),o!==null){for(e.flags|=128,So(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)r=n,t=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ae(ye,ye.current&1|2),e.child}t=t.sibling}r.tail!==null&&Ae()>zr&&(e.flags|=128,i=!0,So(r,!1),e.lanes=4194304)}else{if(!i)if(t=du(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),So(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!pe)return nt(e),null}else 2*Ae()-r.renderingStartTime>zr&&n!==1073741824&&(e.flags|=128,i=!0,So(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Ae(),e.sibling=null,n=ye.current,ae(ye,i?n&1|2:n&1),e):(nt(e),null);case 22:case 23:return jg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Lt&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function HI(t,e){switch(vg(e),e.tag){case 1:return Pt(e.type)&&ru(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fr(),de(At),de(dt),Tg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cg(e),null;case 13:if(de(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));$r()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(ye),null;case 4:return Fr(),null;case 10:return kg(e.type._context),null;case 22:case 23:return jg(),null;case 24:return null;default:return null}}var Yl=!1,ot=!1,WI=typeof WeakSet=="function"?WeakSet:Set,M=null;function mr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Se(t,e,i)}else n.current=null}function Qf(t,e,n){try{n()}catch(i){Se(t,e,i)}}var Pv=!1;function KI(t,e){if(Df=tu,t=Bx(),mg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==r||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===s&&(a=o),d===r&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mf={focusedElem:t,selectionRange:n},tu=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,w=m.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:on(e.type,v),w);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(k){Se(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return m=Pv,Pv=!1,m}function ea(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,r!==void 0&&Qf(e,n,r)}s=s.next}while(s!==i)}}function hh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Xf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function j_(t){var e=t.alternate;e!==null&&(t.alternate=null,j_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kn],delete e[Ea],delete e[$f],delete e[II],delete e[NI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function F_(t){return t.tag===5||t.tag===3||t.tag===4}function Rv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||F_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=su));else if(i!==4&&(t=t.child,t!==null))for(Jf(t,e,n),t=t.sibling;t!==null;)Jf(t,e,n),t=t.sibling}function Zf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}var Ge=null,an=!1;function di(t,e,n){for(n=n.child;n!==null;)U_(t,e,n),n=n.sibling}function U_(t,e,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(ih,n)}catch{}switch(n.tag){case 5:ot||mr(n,e);case 6:var i=Ge,s=an;Ge=null,di(t,e,n),Ge=i,an=s,Ge!==null&&(an?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(an?(t=Ge,n=n.stateNode,t.nodeType===8?wd(t.parentNode,n):t.nodeType===1&&wd(t,n),xa(t)):wd(Ge,n.stateNode));break;case 4:i=Ge,s=an,Ge=n.stateNode.containerInfo,an=!0,di(t,e,n),Ge=i,an=s;break;case 0:case 11:case 14:case 15:if(!ot&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Qf(n,e,o),s=s.next}while(s!==i)}di(t,e,n);break;case 1:if(!ot&&(mr(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Se(n,e,a)}di(t,e,n);break;case 21:di(t,e,n);break;case 22:n.mode&1?(ot=(i=ot)||n.memoizedState!==null,di(t,e,n),ot=i):di(t,e,n);break;default:di(t,e,n)}}function Dv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WI),e.forEach(function(i){var s=t2.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ge=a.stateNode,an=!1;break e;case 3:Ge=a.stateNode.containerInfo,an=!0;break e;case 4:Ge=a.stateNode.containerInfo,an=!0;break e}a=a.return}if(Ge===null)throw Error(I(160));U_(r,o,s),Ge=null,an=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Se(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)z_(e,t),e=e.sibling}function z_(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),yn(t),i&4){try{ea(3,t,t.return),hh(3,t)}catch(v){Se(t,t.return,v)}try{ea(5,t,t.return)}catch(v){Se(t,t.return,v)}}break;case 1:rn(e,t),yn(t),i&512&&n!==null&&mr(n,n.return);break;case 5:if(rn(e,t),yn(t),i&512&&n!==null&&mr(n,n.return),t.flags&32){var s=t.stateNode;try{ma(s,"")}catch(v){Se(t,t.return,v)}}if(i&4&&(s=t.stateNode,s!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&cx(s,r),Sf(a,o);var c=Sf(a,r);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?px(s,h):u==="dangerouslySetInnerHTML"?dx(s,h):u==="children"?ma(s,h):ig(s,u,h,c)}switch(a){case"input":vf(s,r);break;case"textarea":ux(s,r);break;case"select":var d=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var f=r.value;f!=null?xr(s,!!r.multiple,f,!1):d!==!!r.multiple&&(r.defaultValue!=null?xr(s,!!r.multiple,r.defaultValue,!0):xr(s,!!r.multiple,r.multiple?[]:"",!1))}s[Ea]=r}catch(v){Se(t,t.return,v)}}break;case 6:if(rn(e,t),yn(t),i&4){if(t.stateNode===null)throw Error(I(162));s=t.stateNode,r=t.memoizedProps;try{s.nodeValue=r}catch(v){Se(t,t.return,v)}}break;case 3:if(rn(e,t),yn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{xa(e.containerInfo)}catch(v){Se(t,t.return,v)}break;case 4:rn(e,t),yn(t);break;case 13:rn(e,t),yn(t),s=t.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(Lg=Ae())),i&4&&Dv(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(c=ot)||u,rn(e,t),ot=c):rn(e,t),yn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(M=t,u=t.child;u!==null;){for(h=M=u;M!==null;){switch(d=M,f=d.child,d.tag){case 0:case 11:case 14:case 15:ea(4,d,d.return);break;case 1:mr(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){Se(i,n,v)}}break;case 5:mr(d,d.return);break;case 22:if(d.memoizedState!==null){Ov(h);continue}}f!==null?(f.return=d,M=f):Ov(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{s=h.stateNode,c?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fx("display",o))}catch(v){Se(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(v){Se(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:rn(e,t),yn(t),i&4&&Dv(t);break;case 21:break;default:rn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(F_(n)){var i=n;break e}n=n.return}throw Error(I(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ma(s,""),i.flags&=-33);var r=Rv(t);Zf(t,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Rv(t);Jf(t,a,o);break;default:throw Error(I(161))}}catch(l){Se(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qI(t,e,n){M=t,B_(t)}function B_(t,e,n){for(var i=(t.mode&1)!==0;M!==null;){var s=M,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Yl;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ot;a=Yl;var c=ot;if(Yl=o,(ot=l)&&!c)for(M=s;M!==null;)o=M,l=o.child,o.tag===22&&o.memoizedState!==null?Lv(s):l!==null?(l.return=o,M=l):Lv(s);for(;r!==null;)M=r,B_(r),r=r.sibling;M=s,Yl=a,ot=c}Mv(t)}else s.subtreeFlags&8772&&r!==null?(r.return=s,M=r):Mv(t)}}function Mv(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||hh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ot)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&vv(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&xa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}ot||e.flags&512&&Xf(e)}catch(d){Se(e,e.return,d)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function Ov(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function Lv(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hh(4,e)}catch(l){Se(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(l){Se(e,s,l)}}var r=e.return;try{Xf(e)}catch(l){Se(e,r,l)}break;case 5:var o=e.return;try{Xf(e)}catch(l){Se(e,o,l)}}}catch(l){Se(e,e.return,l)}if(e===t){M=null;break}var a=e.sibling;if(a!==null){a.return=e.return,M=a;break}M=e.return}}var GI=Math.ceil,gu=hi.ReactCurrentDispatcher,Mg=hi.ReactCurrentOwner,en=hi.ReactCurrentBatchConfig,J=0,We=null,Me=null,Xe=0,Lt=0,yr=Ji(0),je=0,Pa=null,Ds=0,dh=0,Og=0,ta=null,Ct=null,Lg=0,zr=1/0,zn=null,mu=!1,ep=null,Li=null,Ql=!1,Ei=null,yu=0,na=0,tp=null,Mc=-1,Oc=0;function kt(){return J&6?Ae():Mc!==-1?Mc:Mc=Ae()}function $i(t){return t.mode&1?J&2&&Xe!==0?Xe&-Xe:PI.transition!==null?(Oc===0&&(Oc=Cx()),Oc):(t=ie,t!==0||(t=window.event,t=t===void 0?16:Dx(t.type)),t):1}function dn(t,e,n,i){if(50<na)throw na=0,tp=null,Error(I(185));ol(t,n,i),(!(J&2)||t!==We)&&(t===We&&(!(J&2)&&(dh|=n),je===4&&vi(t,Xe)),Rt(t,i),n===1&&J===0&&!(e.mode&1)&&(zr=Ae()+500,lh&&Zi()))}function Rt(t,e){var n=t.callbackNode;PT(t,e);var i=eu(t,t===We?Xe:0);if(i===0)n!==null&&Wy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Wy(n),e===1)t.tag===0?AI($v.bind(null,t)):Jx($v.bind(null,t)),CI(function(){!(J&6)&&Zi()}),n=null;else{switch(Tx(i)){case 1:n=lg;break;case 4:n=bx;break;case 16:n=Zc;break;case 536870912:n=Ex;break;default:n=Zc}n=Q_(n,V_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function V_(t,e){if(Mc=-1,Oc=0,J&6)throw Error(I(327));var n=t.callbackNode;if(Er()&&t.callbackNode!==n)return null;var i=eu(t,t===We?Xe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=vu(t,i);else{e=i;var s=J;J|=2;var r=W_();(We!==t||Xe!==e)&&(zn=null,zr=Ae()+500,bs(t,e));do try{XI();break}catch(a){H_(t,a)}while(1);_g(),gu.current=r,J=s,Me!==null?e=0:(We=null,Xe=0,e=je)}if(e!==0){if(e===2&&(s=If(t),s!==0&&(i=s,e=np(t,s))),e===1)throw n=Pa,bs(t,0),vi(t,i),Rt(t,Ae()),n;if(e===6)vi(t,i);else{if(s=t.current.alternate,!(i&30)&&!YI(s)&&(e=vu(t,i),e===2&&(r=If(t),r!==0&&(i=r,e=np(t,r))),e===1))throw n=Pa,bs(t,0),vi(t,i),Rt(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(I(345));case 2:ds(t,Ct,zn);break;case 3:if(vi(t,i),(i&130023424)===i&&(e=Lg+500-Ae(),10<e)){if(eu(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Lf(ds.bind(null,t,Ct,zn),e);break}ds(t,Ct,zn);break;case 4:if(vi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-hn(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=Ae()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*GI(i/1960))-i,10<i){t.timeoutHandle=Lf(ds.bind(null,t,Ct,zn),i);break}ds(t,Ct,zn);break;case 5:ds(t,Ct,zn);break;default:throw Error(I(329))}}}return Rt(t,Ae()),t.callbackNode===n?V_.bind(null,t):null}function np(t,e){var n=ta;return t.current.memoizedState.isDehydrated&&(bs(t,e).flags|=256),t=vu(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&ip(e)),t}function ip(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function YI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!fn(r(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vi(t,e){for(e&=~Og,e&=~dh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),i=1<<n;t[n]=-1,e&=~i}}function $v(t){if(J&6)throw Error(I(327));Er();var e=eu(t,0);if(!(e&1))return Rt(t,Ae()),null;var n=vu(t,e);if(t.tag!==0&&n===2){var i=If(t);i!==0&&(e=i,n=np(t,i))}if(n===1)throw n=Pa,bs(t,0),vi(t,e),Rt(t,Ae()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ds(t,Ct,zn),Rt(t,Ae()),null}function $g(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(zr=Ae()+500,lh&&Zi())}}function Ms(t){Ei!==null&&Ei.tag===0&&!(J&6)&&Er();var e=J;J|=1;var n=en.transition,i=ie;try{if(en.transition=null,ie=1,t)return t()}finally{ie=i,en.transition=n,J=e,!(J&6)&&Zi()}}function jg(){Lt=yr.current,de(yr)}function bs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,EI(n)),Me!==null)for(n=Me.return;n!==null;){var i=n;switch(vg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ru();break;case 3:Fr(),de(At),de(dt),Tg();break;case 5:Cg(i);break;case 4:Fr();break;case 13:de(ye);break;case 19:de(ye);break;case 10:kg(i.type._context);break;case 22:case 23:jg()}n=n.return}if(We=t,Me=t=ji(t.current,null),Xe=Lt=e,je=0,Pa=null,Og=dh=Ds=0,Ct=ta=null,ys!==null){for(e=0;e<ys.length;e++)if(n=ys[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,r=n.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}n.pending=i}ys=null}return t}function H_(t,e){do{var n=Me;try{if(_g(),Pc.current=pu,fu){for(var i=we.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}fu=!1}if(Rs=0,Ve=Le=we=null,Zo=!1,Ia=0,Mg.current=null,n===null||n.return===null){je=1,Pa=e,Me=null;break}e:{var r=t,o=n.return,a=n,l=e;if(e=Xe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=bv(o);if(f!==null){f.flags&=-257,Ev(f,o,a,r,e),f.mode&1&&Sv(r,c,e),e=f,l=c;var m=e.updateQueue;if(m===null){var v=new Set;v.add(l),e.updateQueue=v}else m.add(l);break e}else{if(!(e&1)){Sv(r,c,e),Fg();break e}l=Error(I(426))}}else if(pe&&a.mode&1){var w=bv(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ev(w,o,a,r,e),wg(Ur(l,a));break e}}r=l=Ur(l,a),je!==4&&(je=2),ta===null?ta=[r]:ta.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=T_(r,l,e);yv(r,g);break e;case 1:a=l;var y=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Li===null||!Li.has(x)))){r.flags|=65536,e&=-e,r.lanes|=e;var k=I_(r,a,e);yv(r,k);break e}}r=r.return}while(r!==null)}q_(n)}catch(_){e=_,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function W_(){var t=gu.current;return gu.current=pu,t===null?pu:t}function Fg(){(je===0||je===3||je===2)&&(je=4),We===null||!(Ds&268435455)&&!(dh&268435455)||vi(We,Xe)}function vu(t,e){var n=J;J|=2;var i=W_();(We!==t||Xe!==e)&&(zn=null,bs(t,e));do try{QI();break}catch(s){H_(t,s)}while(1);if(_g(),J=n,gu.current=i,Me!==null)throw Error(I(261));return We=null,Xe=0,je}function QI(){for(;Me!==null;)K_(Me)}function XI(){for(;Me!==null&&!kT();)K_(Me)}function K_(t){var e=Y_(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?q_(t):Me=e,Mg.current=null}function q_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HI(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,Me=null;return}}else if(n=VI(n,e,Lt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);je===0&&(je=5)}function ds(t,e,n){var i=ie,s=en.transition;try{en.transition=null,ie=1,JI(t,e,n,i)}finally{en.transition=s,ie=i}return null}function JI(t,e,n,i){do Er();while(Ei!==null);if(J&6)throw Error(I(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(RT(t,r),t===We&&(Me=We=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ql||(Ql=!0,Q_(Zc,function(){return Er(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=en.transition,en.transition=null;var o=ie;ie=1;var a=J;J|=4,Mg.current=null,KI(t,n),z_(n,t),vI(Mf),tu=!!Df,Mf=Df=null,t.current=n,qI(n),ST(),J=a,ie=o,en.transition=r}else t.current=n;if(Ql&&(Ql=!1,Ei=t,yu=s),r=t.pendingLanes,r===0&&(Li=null),CT(n.stateNode),Rt(t,Ae()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(mu)throw mu=!1,t=ep,ep=null,t;return yu&1&&t.tag!==0&&Er(),r=t.pendingLanes,r&1?t===tp?na++:(na=0,tp=t):na=0,Zi(),null}function Er(){if(Ei!==null){var t=Tx(yu),e=en.transition,n=ie;try{if(en.transition=null,ie=16>t?16:t,Ei===null)var i=!1;else{if(t=Ei,Ei=null,yu=0,J&6)throw Error(I(331));var s=J;for(J|=4,M=t.current;M!==null;){var r=M,o=r.child;if(M.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(M=c;M!==null;){var u=M;switch(u.tag){case 0:case 11:case 15:ea(8,u,r)}var h=u.child;if(h!==null)h.return=u,M=h;else for(;M!==null;){u=M;var d=u.sibling,f=u.return;if(j_(u),u===c){M=null;break}if(d!==null){d.return=f,M=d;break}M=f}}}var m=r.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}M=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,M=o;else e:for(;M!==null;){if(r=M,r.flags&2048)switch(r.tag){case 0:case 11:case 15:ea(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,M=g;break e}M=r.return}}var y=t.current;for(M=y;M!==null;){o=M;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,M=x;else e:for(o=y;M!==null;){if(a=M,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hh(9,a)}}catch(_){Se(a,a.return,_)}if(a===o){M=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,M=k;break e}M=a.return}}if(J=s,Zi(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(ih,t)}catch{}i=!0}return i}finally{ie=n,en.transition=e}}return!1}function jv(t,e,n){e=Ur(n,e),e=T_(t,e,1),t=Oi(t,e,1),e=kt(),t!==null&&(ol(t,1,e),Rt(t,e))}function Se(t,e,n){if(t.tag===3)jv(t,t,n);else for(;e!==null;){if(e.tag===3){jv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Li===null||!Li.has(i))){t=Ur(n,t),t=I_(e,t,1),e=Oi(e,t,1),t=kt(),e!==null&&(ol(e,1,t),Rt(e,t));break}}e=e.return}}function ZI(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=kt(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Xe&n)===n&&(je===4||je===3&&(Xe&130023424)===Xe&&500>Ae()-Lg?bs(t,0):Og|=n),Rt(t,e)}function G_(t,e){e===0&&(t.mode&1?(e=Ul,Ul<<=1,!(Ul&130023424)&&(Ul=4194304)):e=1);var n=kt();t=ni(t,e),t!==null&&(ol(t,e,n),Rt(t,n))}function e2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G_(t,n)}function t2(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(I(314))}i!==null&&i.delete(e),G_(t,n)}var Y_;Y_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,BI(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,pe&&e.flags&1048576&&Zx(e,lu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Dc(t,e),t=e.pendingProps;var s=Lr(e,dt.current);br(e,n),s=Ng(null,e,i,t,s,n);var r=Ag();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(i)?(r=!0,ou(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bg(e),s.updater=uh,e.stateNode=s,s._reactInternals=e,Vf(e,i,t,n),e=Kf(null,e,i,!0,r,n)):(e.tag=0,pe&&r&&yg(e),wt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Dc(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=i2(i),t=on(i,t),s){case 0:e=Wf(null,e,i,t,n);break e;case 1:e=Iv(null,e,i,t,n);break e;case 11:e=Cv(null,e,i,t,n);break e;case 14:e=Tv(null,e,i,on(i.type,t),n);break e}throw Error(I(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:on(i,s),Wf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:on(i,s),Iv(t,e,i,s,n);case 3:e:{if(R_(e),t===null)throw Error(I(387));i=e.pendingProps,r=e.memoizedState,s=r.element,r_(t,e),hu(e,i,null,n);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Ur(Error(I(423)),e),e=Nv(t,e,i,n,s);break e}else if(i!==s){s=Ur(Error(I(424)),e),e=Nv(t,e,i,n,s);break e}else for(jt=Mi(e.stateNode.containerInfo.firstChild),Bt=e,pe=!0,cn=null,n=i_(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($r(),i===s){e=ii(t,e,n);break e}wt(t,e,i,n)}e=e.child}return e;case 5:return o_(e),t===null&&Uf(e),i=e.type,s=e.pendingProps,r=t!==null?t.memoizedProps:null,o=s.children,Of(i,s)?o=null:r!==null&&Of(i,r)&&(e.flags|=32),P_(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&Uf(e),null;case 13:return D_(t,e,n);case 4:return Eg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=jr(e,null,i,n):wt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:on(i,s),Cv(t,e,i,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,ae(cu,i._currentValue),i._currentValue=o,r!==null)if(fn(r.value,o)){if(r.children===s.children&&!At.current){e=ii(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(r.tag===1){l=Xn(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),zf(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(I(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zf(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,br(e,n),s=nn(s),i=i(s),e.flags|=1,wt(t,e,i,n),e.child;case 14:return i=e.type,s=on(i,e.pendingProps),s=on(i.type,s),Tv(t,e,i,s,n);case 15:return N_(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:on(i,s),Dc(t,e),e.tag=1,Pt(i)?(t=!0,ou(e)):t=!1,br(e,n),C_(e,i,s),Vf(e,i,s,n),Kf(null,e,i,!0,t,n);case 19:return M_(t,e,n);case 22:return A_(t,e,n)}throw Error(I(156,e.tag))};function Q_(t,e){return Sx(t,e)}function n2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,i){return new n2(t,e,n,i)}function Ug(t){return t=t.prototype,!(!t||!t.isReactComponent)}function i2(t){if(typeof t=="function")return Ug(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rg)return 11;if(t===og)return 14}return 2}function ji(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Lc(t,e,n,i,s,r){var o=2;if(i=t,typeof t=="function")Ug(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ar:return Es(n.children,s,r,e);case sg:o=8,s|=8;break;case ff:return t=Xt(12,n,e,s|2),t.elementType=ff,t.lanes=r,t;case pf:return t=Xt(13,n,e,s),t.elementType=pf,t.lanes=r,t;case gf:return t=Xt(19,n,e,s),t.elementType=gf,t.lanes=r,t;case ox:return fh(n,s,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case sx:o=10;break e;case rx:o=9;break e;case rg:o=11;break e;case og:o=14;break e;case gi:o=16,i=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function Es(t,e,n,i){return t=Xt(7,t,i,e),t.lanes=n,t}function fh(t,e,n,i){return t=Xt(22,t,i,e),t.elementType=ox,t.lanes=n,t.stateNode={isHidden:!1},t}function Td(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Id(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function s2(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ld(0),this.expirationTimes=ld(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ld(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zg(t,e,n,i,s,r,o,a,l){return t=new s2(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Xt(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bg(r),t}function r2(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:or,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function X_(t){if(!t)return Wi;t=t._reactInternals;e:{if(Ks(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(Pt(n))return Xx(t,n,e)}return e}function J_(t,e,n,i,s,r,o,a,l){return t=zg(n,i,!0,t,s,r,o,a,l),t.context=X_(null),n=t.current,i=kt(),s=$i(n),r=Xn(i,s),r.callback=e??null,Oi(n,r,s),t.current.lanes=s,ol(t,s,i),Rt(t,i),t}function ph(t,e,n,i){var s=e.current,r=kt(),o=$i(s);return n=X_(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(r,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Oi(s,e,o),t!==null&&(dn(t,s,o,r),Ac(t,s,o)),o}function wu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bg(t,e){Fv(t,e),(t=t.alternate)&&Fv(t,e)}function o2(){return null}var Z_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vg(t){this._internalRoot=t}gh.prototype.render=Vg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));ph(t,e,null,null)};gh.prototype.unmount=Vg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ms(function(){ph(null,t,null,null)}),e[ti]=null}};function gh(t){this._internalRoot=t}gh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ax();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yi.length&&e!==0&&e<yi[n].priority;n++);yi.splice(n,0,t),n===0&&Rx(t)}};function Hg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uv(){}function a2(t,e,n,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var c=wu(o);r.call(c)}}var o=J_(e,i,t,0,null,!1,!1,"",Uv);return t._reactRootContainer=o,t[ti]=o.current,Sa(t.nodeType===8?t.parentNode:t),Ms(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var a=i;i=function(){var c=wu(l);a.call(c)}}var l=zg(t,0,!1,null,null,!1,!1,"",Uv);return t._reactRootContainer=l,t[ti]=l.current,Sa(t.nodeType===8?t.parentNode:t),Ms(function(){ph(e,l,n,i)}),l}function yh(t,e,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var a=s;s=function(){var l=wu(o);a.call(l)}}ph(e,o,t,s)}else o=a2(n,e,t,s,i);return wu(o)}Ix=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oo(e.pendingLanes);n!==0&&(cg(e,n|1),Rt(e,Ae()),!(J&6)&&(zr=Ae()+500,Zi()))}break;case 13:Ms(function(){var i=ni(t,1);if(i!==null){var s=kt();dn(i,t,1,s)}}),Bg(t,1)}};ug=function(t){if(t.tag===13){var e=ni(t,134217728);if(e!==null){var n=kt();dn(e,t,134217728,n)}Bg(t,134217728)}};Nx=function(t){if(t.tag===13){var e=$i(t),n=ni(t,e);if(n!==null){var i=kt();dn(n,t,e,i)}Bg(t,e)}};Ax=function(){return ie};Px=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};Ef=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=ah(i);if(!s)throw Error(I(90));lx(i),vf(i,s)}}}break;case"textarea":ux(t,n);break;case"select":e=n.value,e!=null&&xr(t,!!n.multiple,e,!1)}};yx=$g;vx=Ms;var l2={usingClientEntryPoint:!1,Events:[ll,hr,ah,gx,mx,$g]},bo={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c2={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_x(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||o2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{ih=Xl.inject(c2),Tn=Xl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l2;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hg(e))throw Error(I(200));return r2(t,e,null,n)};Wt.createRoot=function(t,e){if(!Hg(t))throw Error(I(299));var n=!1,i="",s=Z_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zg(t,1,!1,null,null,n,!1,i,s),t[ti]=e.current,Sa(t.nodeType===8?t.parentNode:t),new Vg(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=_x(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return Ms(t)};Wt.hydrate=function(t,e,n){if(!mh(e))throw Error(I(200));return yh(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Hg(t))throw Error(I(405));var i=n!=null&&n.hydratedSources||null,s=!1,r="",o=Z_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=J_(e,null,t,1,n??null,s,!1,r,o),t[ti]=e.current,Sa(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new gh(e)};Wt.render=function(t,e,n){if(!mh(e))throw Error(I(200));return yh(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!mh(t))throw Error(I(40));return t._reactRootContainer?(Ms(function(){yh(null,null,t,!1,function(){t._reactRootContainer=null,t[ti]=null})}),!0):!1};Wt.unstable_batchedUpdates=$g;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!mh(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return yh(t,e,n,!1,i)};Wt.version="18.3.1-next-f1338f8080-20240426";function ek(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ek)}catch(t){console.error(t)}}ek(),ex.exports=Wt;var u2=ex.exports,zv=u2;hf.createRoot=zv.createRoot,hf.hydrateRoot=zv.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ra.apply(this,arguments)}var Ci;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ci||(Ci={}));const Bv="popstate";function h2(t){t===void 0&&(t={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return sp("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){return typeof s=="string"?s:xu(s)}return f2(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tk(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d2(){return Math.random().toString(36).substr(2,8)}function Vv(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,n,i){return n===void 0&&(n=null),Ra({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?so(e):e,{state:n,key:e&&e.key||i||d2()})}function xu(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function f2(t,e,n,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=Ci.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ra({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Ci.Pop;let w=u(),g=w==null?null:w-c;c=w,l&&l({action:a,location:v.location,delta:g})}function d(w,g){a=Ci.Push;let y=sp(v.location,w,g);n&&n(y,w),c=u()+1;let x=Vv(y,c),k=v.createHref(y);try{o.pushState(x,"",k)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(k)}r&&l&&l({action:a,location:v.location,delta:1})}function f(w,g){a=Ci.Replace;let y=sp(v.location,w,g);n&&n(y,w),c=u();let x=Vv(y,c),k=v.createHref(y);o.replaceState(x,"",k),r&&l&&l({action:a,location:v.location,delta:0})}function m(w){let g=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof w=="string"?w:xu(w);return y=y.replace(/ $/,"%20"),Pe(g,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,g)}let v={get action(){return a},get location(){return t(s,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Bv,h),l=w,()=>{s.removeEventListener(Bv,h),l=null}},createHref(w){return e(s,w)},createURL:m,encodeLocation(w){let g=m(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:d,replace:f,go(w){return o.go(w)}};return v}var Hv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Hv||(Hv={}));function p2(t,e,n){return n===void 0&&(n="/"),g2(t,e,n,!1)}function g2(t,e,n,i){let s=typeof e=="string"?so(e):e,r=Wg(s.pathname||"/",n);if(r==null)return null;let o=nk(t);m2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=T2(r);a=E2(o[l],c,i)}return a}function nk(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(Pe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Fi([i,l.relativePath]),u=n.concat(l);r.children&&r.children.length>0&&(Pe(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),nk(r.children,e,u,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:S2(c,r.index),routesMeta:u})};return t.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of ik(r.path))s(r,o,l)}),e}function ik(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=ik(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function m2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const y2=/^:[\w-]+$/,v2=3,w2=2,x2=1,_2=10,k2=-2,Wv=t=>t==="*";function S2(t,e){let n=t.split("/"),i=n.length;return n.some(Wv)&&(i+=k2),e&&(i+=w2),n.filter(s=>!Wv(s)).reduce((s,r)=>s+(y2.test(r)?v2:r===""?x2:_2),i)}function b2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function E2(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=r==="/"?e:e.slice(r.length)||"/",h=Kv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&n&&!i[i.length-1].route.index&&(h=Kv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Fi([r,h.pathname]),pathnameBase:P2(Fi([r,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(r=Fi([r,h.pathnameBase]))}return o}function Kv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=C2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let v=a[h]||"";o=r.slice(0,r.length-v.length).replace(/(.)\/+$/,"$1")}const m=a[h];return f&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:t}}function C2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tk(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function T2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tk(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Wg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function I2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:s=""}=typeof t=="string"?so(t):t;return{pathname:n?n.startsWith("/")?n:N2(n,e):e,search:R2(i),hash:D2(s)}}function N2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Nd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function A2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Kg(t,e){let n=A2(t);return e?n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function qg(t,e,n,i){i===void 0&&(i=!1);let s;typeof t=="string"?s=so(t):(s=Ra({},t),Pe(!s.pathname||!s.pathname.includes("?"),Nd("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),Nd("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),Nd("#","search","hash",s)));let r=t===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;s.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=I2(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(r||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Fi=t=>t.join("/").replace(/\/\/+/g,"/"),P2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),R2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,D2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function M2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sk=["post","put","patch","delete"];new Set(sk);const O2=["get",...sk];new Set(O2);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Da.apply(this,arguments)}const Gg=b.createContext(null),L2=b.createContext(null),es=b.createContext(null),vh=b.createContext(null),ts=b.createContext({outlet:null,matches:[],isDataRoute:!1}),rk=b.createContext(null);function $2(t,e){let{relative:n}=e===void 0?{}:e;ro()||Pe(!1);let{basename:i,navigator:s}=b.useContext(es),{hash:r,pathname:o,search:a}=ak(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Fi([i,o])),s.createHref({pathname:l,search:a,hash:r})}function ro(){return b.useContext(vh)!=null}function oo(){return ro()||Pe(!1),b.useContext(vh).location}function ok(t){b.useContext(es).static||b.useLayoutEffect(t)}function qs(){let{isDataRoute:t}=b.useContext(ts);return t?Q2():j2()}function j2(){ro()||Pe(!1);let t=b.useContext(Gg),{basename:e,future:n,navigator:i}=b.useContext(es),{matches:s}=b.useContext(ts),{pathname:r}=oo(),o=JSON.stringify(Kg(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return ok(()=>{a.current=!0}),b.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=qg(c,JSON.parse(o),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Fi([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,r,t])}function ak(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=b.useContext(es),{matches:s}=b.useContext(ts),{pathname:r}=oo(),o=JSON.stringify(Kg(s,i.v7_relativeSplatPath));return b.useMemo(()=>qg(t,JSON.parse(o),r,n==="path"),[t,o,r,n])}function F2(t,e){return U2(t,e)}function U2(t,e,n,i){ro()||Pe(!1);let{navigator:s}=b.useContext(es),{matches:r}=b.useContext(ts),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=oo(),u;if(e){var h;let w=typeof e=="string"?so(e):e;l==="/"||(h=w.pathname)!=null&&h.startsWith(l)||Pe(!1),u=w}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let w=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=p2(t,{pathname:f}),v=W2(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Fi([l,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?l:Fi([l,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),r,n,i);return e&&v?b.createElement(vh.Provider,{value:{location:Da({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ci.Pop}},v):v}function z2(){let t=Y2(),e=M2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},r=null;return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,r)}const B2=b.createElement(z2,null);class V2 extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ts.Provider,{value:this.props.routeContext},b.createElement(rk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function H2(t){let{routeContext:e,match:n,children:i}=t,s=b.useContext(Gg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ts.Provider,{value:e},i)}function W2(t,e,n,i){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var r;if(!n)return null;if(n.errors)t=n.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Pe(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=n,m=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||m){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,m=!1,v=null,w=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,v=h.route.errorElement||B2,l&&(c<0&&d===0?(X2("route-fallback",!1),m=!0,w=null):c===d&&(m=!0,w=h.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,d+1)),y=()=>{let x;return f?x=v:m?x=w:h.route.Component?x=b.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=u,b.createElement(H2,{match:h,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:x})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?b.createElement(V2,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):y()},null)}var lk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lk||{}),_u=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_u||{});function K2(t){let e=b.useContext(Gg);return e||Pe(!1),e}function q2(t){let e=b.useContext(L2);return e||Pe(!1),e}function G2(t){let e=b.useContext(ts);return e||Pe(!1),e}function ck(t){let e=G2(),n=e.matches[e.matches.length-1];return n.route.id||Pe(!1),n.route.id}function Y2(){var t;let e=b.useContext(rk),n=q2(_u.UseRouteError),i=ck(_u.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function Q2(){let{router:t}=K2(lk.UseNavigateStable),e=ck(_u.UseNavigateStable),n=b.useRef(!1);return ok(()=>{n.current=!0}),b.useCallback(function(s,r){r===void 0&&(r={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Da({fromRouteId:e},r)))},[t,e])}const qv={};function X2(t,e,n){!e&&!qv[t]&&(qv[t]=!0)}const Gv={};function J2(t,e){Gv[e]||(Gv[e]=!0,console.warn(e))}const tr=(t,e,n)=>J2(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function Z2(t,e){t!=null&&t.v7_startTransition||tr("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&tr("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||tr("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||tr("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||tr("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||tr("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function Yv(t){let{to:e,replace:n,state:i,relative:s}=t;ro()||Pe(!1);let{future:r,static:o}=b.useContext(es),{matches:a}=b.useContext(ts),{pathname:l}=oo(),c=qs(),u=qg(e,Kg(a,r.v7_relativeSplatPath),l,s==="path"),h=JSON.stringify(u);return b.useEffect(()=>c(JSON.parse(h),{replace:n,state:i,relative:s}),[c,h,s,n,i]),null}function vn(t){Pe(!1)}function eN(t){let{basename:e="/",children:n=null,location:i,navigationType:s=Ci.Pop,navigator:r,static:o=!1,future:a}=t;ro()&&Pe(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:r,static:o,future:Da({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=so(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:m="default"}=i,v=b.useMemo(()=>{let w=Wg(u,l);return w==null?null:{location:{pathname:w,search:h,hash:d,state:f,key:m},navigationType:s}},[l,u,h,d,f,m,s]);return v==null?null:b.createElement(es.Provider,{value:c},b.createElement(vh.Provider,{children:n,value:v}))}function tN(t){let{children:e,location:n}=t;return F2(rp(e),n)}new Promise(()=>{});function rp(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(i,s)=>{if(!b.isValidElement(i))return;let r=[...e,s];if(i.type===b.Fragment){n.push.apply(n,rp(i.props.children,r));return}i.type!==vn&&Pe(!1),!i.props.index||!i.props.children||Pe(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=rp(i.props.children,r)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function op(){return op=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},op.apply(this,arguments)}function nN(t,e){if(t==null)return{};var n={},i=Object.keys(t),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function iN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sN(t,e){return t.button===0&&(!e||e==="_self")&&!iN(t)}const rN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oN="6";try{window.__reactRouterVersion=oN}catch{}const aN="startTransition",Qv=ZC[aN];function lN(t){let{basename:e,children:n,future:i,window:s}=t,r=b.useRef();r.current==null&&(r.current=h2({window:s,v5Compat:!0}));let o=r.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=b.useCallback(h=>{c&&Qv?Qv(()=>l(h)):l(h)},[l,c]);return b.useLayoutEffect(()=>o.listen(u),[o,u]),b.useEffect(()=>Z2(i),[i]),b.createElement(eN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const cN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bn=b.forwardRef(function(e,n){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,d=nN(e,rN),{basename:f}=b.useContext(es),m,v=!1;if(typeof c=="string"&&uN.test(c)&&(m=c,cN))try{let x=new URL(window.location.href),k=c.startsWith("//")?new URL(x.protocol+c):new URL(c),_=Wg(k.pathname,f);k.origin===x.origin&&_!=null?c=_+k.search+k.hash:v=!0}catch{}let w=$2(c,{relative:s}),g=hN(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:h});function y(x){i&&i(x),x.defaultPrevented||g(x)}return b.createElement("a",op({},d,{href:m||w,onClick:v||r?i:y,ref:n,target:l}))});var Xv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Xv||(Xv={}));var Jv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Jv||(Jv={}));function hN(t,e){let{target:n,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=qs(),c=oo(),u=ak(t,{relative:o});return b.useCallback(h=>{if(sN(h,n)){h.preventDefault();let d=i!==void 0?i:xu(c)===xu(u);l(t,{replace:d,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,u,i,s,n,t,r,o,a])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dN=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},hk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||c==null||h==null)throw new fN;const d=r<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const m=c<<6&192|h;i.push(m)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pN=function(t){const e=uk(t);return hk.encodeByteArray(e,!0)},ku=function(t){return pN(t).replace(/\./g,"")},dk=function(t){try{return hk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=()=>gN().__FIREBASE_DEFAULTS__,yN=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dk(t[1]);return e&&JSON.parse(e)},wh=()=>{try{return mN()||yN()||vN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fk=t=>{var e,n;return(n=(e=wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pk=t=>{const e=fk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},gk=()=>{var t;return(t=wh())===null||t===void 0?void 0:t.config},mk=t=>{var e;return(e=wh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ku(JSON.stringify(n)),ku(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function _N(){var t;const e=(t=wh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bN(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EN(){try{return typeof indexedDB=="object"}catch{return!1}}function CN(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="FirebaseError";class Ln extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=TN,Object.setPrototypeOf(this,Ln.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ul.prototype.create)}}class ul{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?IN(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Ln(s,a,i)}}function IN(t,e){return t.replace(NN,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const NN=/\{\$([^}]+)}/g;function AN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Su(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(Zv(r)&&Zv(o)){if(!Su(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function Zv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PN(t,e){const n=new RN(t,e);return n.subscribe.bind(n)}class RN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");DN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Ad),s.error===void 0&&(s.error=Ad),s.complete===void 0&&(s.complete=Ad);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function DN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ad(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t){return t&&t._delegate?t._delegate:t}class Ki{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new wN;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LN(e))try{this.getOrInitializeService({instanceIdentifier:fs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=fs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fs){return this.instances.has(e)}getOptions(e=fs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),r=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;r.add(e),this.onInitCallbacks.set(s,r);const o=this.instances.get(s);return o&&e(o,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:ON(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fs){return this.component?this.component.multipleInstances?e:fs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ON(t){return t===fs?void 0:t}function LN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new MN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const jN={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},FN=Z.INFO,UN={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},zN=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=UN[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yg{constructor(e){this.name=e,this._logLevel=FN,this._logHandler=zN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const BN=(t,e)=>e.some(n=>t instanceof n);let e0,t0;function VN(){return e0||(e0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HN(){return t0||(t0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vk=new WeakMap,ap=new WeakMap,wk=new WeakMap,Pd=new WeakMap,Qg=new WeakMap;function WN(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Ui(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vk.set(n,t)}).catch(()=>{}),Qg.set(e,t),e}function KN(t){if(ap.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});ap.set(t,e)}let lp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qN(t){lp=t(lp)}function GN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Rd(this),e,...n);return wk.set(i,e.sort?e.sort():[e]),Ui(i)}:HN().includes(t)?function(...e){return t.apply(Rd(this),e),Ui(vk.get(this))}:function(...e){return Ui(t.apply(Rd(this),e))}}function YN(t){return typeof t=="function"?GN(t):(t instanceof IDBTransaction&&KN(t),BN(t,VN())?new Proxy(t,lp):t)}function Ui(t){if(t instanceof IDBRequest)return WN(t);if(Pd.has(t))return Pd.get(t);const e=YN(t);return e!==t&&(Pd.set(t,e),Qg.set(e,t)),e}const Rd=t=>Qg.get(t);function QN(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Ui(o);return i&&o.addEventListener("upgradeneeded",l=>{i(Ui(o.result),l.oldVersion,l.newVersion,Ui(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const XN=["get","getKey","getAll","getAllKeys","count"],JN=["put","add","delete","clear"],Dd=new Map;function n0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=JN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||XN.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Dd.set(e,r),r}qN(t=>({...t,get:(e,n,i)=>n0(e,n)||t.get(e,n,i),has:(e,n)=>!!n0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eA(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function eA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const cp="@firebase/app",i0="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Yg("@firebase/app"),tA="@firebase/app-compat",nA="@firebase/analytics-compat",iA="@firebase/analytics",sA="@firebase/app-check-compat",rA="@firebase/app-check",oA="@firebase/auth",aA="@firebase/auth-compat",lA="@firebase/database",cA="@firebase/database-compat",uA="@firebase/functions",hA="@firebase/functions-compat",dA="@firebase/installations",fA="@firebase/installations-compat",pA="@firebase/messaging",gA="@firebase/messaging-compat",mA="@firebase/performance",yA="@firebase/performance-compat",vA="@firebase/remote-config",wA="@firebase/remote-config-compat",xA="@firebase/storage",_A="@firebase/storage-compat",kA="@firebase/firestore",SA="@firebase/firestore-compat",bA="firebase",EA="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="[DEFAULT]",CA={[cp]:"fire-core",[tA]:"fire-core-compat",[iA]:"fire-analytics",[nA]:"fire-analytics-compat",[rA]:"fire-app-check",[sA]:"fire-app-check-compat",[oA]:"fire-auth",[aA]:"fire-auth-compat",[lA]:"fire-rtdb",[cA]:"fire-rtdb-compat",[uA]:"fire-fn",[hA]:"fire-fn-compat",[dA]:"fire-iid",[fA]:"fire-iid-compat",[pA]:"fire-fcm",[gA]:"fire-fcm-compat",[mA]:"fire-perf",[yA]:"fire-perf-compat",[vA]:"fire-rc",[wA]:"fire-rc-compat",[xA]:"fire-gcs",[_A]:"fire-gcs-compat",[kA]:"fire-fst",[SA]:"fire-fst-compat","fire-js":"fire-js",[bA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,hp=new Map;function TA(t,e){try{t.container.addComponent(e)}catch(n){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ls(t){const e=t.name;if(hp.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,t);for(const n of bu.values())TA(n,t);return!0}function xh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},zi=new ul("app","Firebase",IA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs=EA;function xk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:up,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw zi.create("bad-app-name",{appName:String(s)});if(n||(n=gk()),!n)throw zi.create("no-options");const r=bu.get(s);if(r){if(Su(n,r.options)&&Su(i,r.config))return r;throw zi.create("duplicate-app",{appName:s})}const o=new $N(s);for(const l of hp.values())o.addComponent(l);const a=new NA(n,i,o);return bu.set(s,a),a}function Xg(t=up){const e=bu.get(t);if(!e&&t===up&&gk())return xk();if(!e)throw zi.create("no-app",{appName:t});return e}function Nn(t,e,n){var i;let s=(i=CA[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${s}" with version "${e}":`];r&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(a.join(" "));return}Ls(new Ki(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firebase-heartbeat-database",PA=1,Ma="firebase-heartbeat-store";let Md=null;function _k(){return Md||(Md=QN(AA,PA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ma)}}}).catch(t=>{throw zi.create("idb-open",{originalErrorMessage:t.message})})),Md}async function RA(t){try{return await(await _k()).transaction(Ma).objectStore(Ma).get(kk(t))}catch(e){if(e instanceof Ln)Os.warn(e.message);else{const n=zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Os.warn(n.message)}}}async function s0(t,e){try{const i=(await _k()).transaction(Ma,"readwrite");await i.objectStore(Ma).put(e,kk(t)),await i.done}catch(n){if(n instanceof Ln)Os.warn(n.message);else{const i=zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Os.warn(i.message)}}}function kk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=1024,MA=30*24*60*60*1e3;class OA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $A(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r0();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const r=new Date(s.date).valueOf();return Date.now()-r<=MA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=r0(),{heartbeatsToSend:n,unsentEntries:i}=LA(this._heartbeatsCache.heartbeats),s=ku(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function r0(){return new Date().toISOString().substring(0,10)}function LA(t,e=DA){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),o0(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),o0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class $A{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EN()?CN().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await RA(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return s0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return s0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function o0(t){return ku(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){Ls(new Ki("platform-logger",e=>new ZN(e),"PRIVATE")),Ls(new Ki("heartbeat",e=>new OA(e),"PRIVATE")),Nn(cp,i0,t),Nn(cp,i0,"esm2017"),Nn("fire-js","")}jA("");function Jg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function Sk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FA=Sk,bk=new ul("auth","Firebase",Sk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=new Yg("@firebase/auth");function UA(t,...e){Eu.logLevel<=Z.WARN&&Eu.warn(`Auth (${Gs}): ${t}`,...e)}function $c(t,...e){Eu.logLevel<=Z.ERROR&&Eu.error(`Auth (${Gs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(t,...e){throw Zg(t,...e)}function An(t,...e){return Zg(t,...e)}function zA(t,e,n){const i=Object.assign(Object.assign({},FA()),{[e]:n});return new ul("auth","Firebase",i).create(e,{appName:t.name})}function Zg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return bk.create(t,...e)}function z(t,e,...n){if(!t)throw Zg(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $c(e),new Error(e)}function si(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BA(){return a0()==="http:"||a0()==="https:"}function a0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BA()||kN()||"connection"in navigator)?navigator.onLine:!0}function HA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,si(n>e,"Short delay should be less than long delay!"),this.isMobile=xN()||SN()}get(){return VA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e){si(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new dl(3e4,6e4);function ao(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ys(t,e,n,i,s={}){return Ck(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=hl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),Ek.fetch()(Tk(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},r))})}async function Ck(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},WA),e);try{const s=new qA(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Jl(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Jl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Jl(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw zA(t,u,c);pn(t,u)}}catch(s){if(s instanceof Ln)throw s;pn(t,"network-request-failed",{message:String(s)})}}async function fl(t,e,n,i,s={}){const r=await Ys(t,e,n,i,s);return"mfaPendingCredential"in r&&pn(t,"multi-factor-auth-required",{_serverResponse:r}),r}function Tk(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?em(t.config,s):`${t.config.apiScheme}://${s}`}class qA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(An(this.auth,"network-request-failed")),KA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jl(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=An(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e){return Ys(t,"POST","/v1/accounts:delete",e)}async function YA(t,e){return Ys(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QA(t,e=!1){const n=Ee(t),i=await n.getIdToken(e),s=tm(i);z(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:ia(Od(s.auth_time)),issuedAtTime:ia(Od(s.iat)),expirationTime:ia(Od(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Od(t){return Number(t)*1e3}function tm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const s=dk(n);return s?JSON.parse(s):($c("Failed to decode base64 JWT payload"),null)}catch(s){return $c("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function XA(t){const e=tm(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Br(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ln&&JA(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function JA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ia(this.lastLoginAt),this.creationTime=ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cu(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Br(t,YA(n,{idToken:i}));z(s==null?void 0:s.users.length,n,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?nP(r.providerUserInfo):[],a=tP(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Ik(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function eP(t){const e=Ee(t);await Cu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tP(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function nP(t){return t.map(e=>{var{providerId:n}=e,i=Jg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iP(t,e){const n=await Ck(t,{},async()=>{const i=hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=Tk(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ek.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):XA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return z(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await iP(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new Oa;return i&&(z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(z(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(z(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oa,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cs{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,r=Jg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ik(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Br(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QA(this,e)}reload(){return eP(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Cu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Br(this,GA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,r,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(s=n.email)!==null&&s!==void 0?s:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:k,isAnonymous:_,providerData:S,stsTokenManager:C}=n;z(x&&C,e,"internal-error");const E=Oa.fromJSON(this.name,C);z(typeof x=="string",e,"internal-error"),fi(h,e.name),fi(d,e.name),z(typeof k=="boolean",e,"internal-error"),z(typeof _=="boolean",e,"internal-error"),fi(f,e.name),fi(m,e.name),fi(v,e.name),fi(w,e.name),fi(g,e.name),fi(y,e.name);const A=new Cs({uid:x,auth:e,email:d,emailVerified:k,displayName:h,isAnonymous:_,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:E,createdAt:g,lastLoginAt:y});return S&&Array.isArray(S)&&(A.providerData=S.map(P=>Object.assign({},P))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,n,i=!1){const s=new Oa;s.updateFromServerResponse(n);const r=new Cs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Cu(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new Map;function Gn(t){si(t instanceof Function,"Expected a class definition");let e=l0.get(t);return e?(si(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nk.type="NONE";const c0=Nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t,e,n){return`firebase:${t}:${e}:${n}`}class Cr{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=jc(this.userKey,s.apiKey,r),this.fullPersistenceKey=jc("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Cr(Gn(c0),e,i);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||Gn(c0);const o=jc(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Cs._fromJSON(e,u);c!==r&&(a=h),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Cr(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new Cr(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ak(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mk(e))return"Blackberry";if(Ok(e))return"Webos";if(nm(e))return"Safari";if((e.includes("chrome/")||Pk(e))&&!e.includes("edge/"))return"Chrome";if(Dk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Ak(t=ft()){return/firefox\//i.test(t)}function nm(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pk(t=ft()){return/crios\//i.test(t)}function Rk(t=ft()){return/iemobile/i.test(t)}function Dk(t=ft()){return/android/i.test(t)}function Mk(t=ft()){return/blackberry/i.test(t)}function Ok(t=ft()){return/webos/i.test(t)}function _h(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sP(t=ft()){var e;return _h(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rP(){return bN()&&document.documentMode===10}function Lk(t=ft()){return _h(t)||Dk(t)||Ok(t)||Mk(t)||/windows phone/i.test(t)||Rk(t)}function oP(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t,e=[]){let n;switch(t){case"Browser":n=u0(ft());break;case"Worker":n=`${u0(ft())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gs}/${i}`}async function jk(t,e){return Ys(t,"GET","/v2/recaptchaConfig",ao(t,e))}function h0(t){return t!==void 0&&t.enterprise!==void 0}class Fk{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Uk(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=An("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",aP().appendChild(i)})}function lP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const cP="https://www.google.com/recaptcha/enterprise.js?render=",uP="recaptcha-enterprise",hP="NO_RECAPTCHA";class zk{constructor(e){this.type=uP,this.auth=lo(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{jk(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Fk(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;h0(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(hP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{i(this.auth).then(a=>{if(!n&&h0(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}Uk(cP+a).then(()=>{s(a,r,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function Tu(t,e,n,i=!1){const s=new zk(t);let r;try{r=await s.verify(n)}catch{r=await s.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d0(this),this.idTokenSubscription=new d0(this),this.beforeStateQueue=new dP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Cr.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ee(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}async initializeRecaptchaConfig(){const e=await jk(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new Fk(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new zk(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ul("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await Cr.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return z(o,this,"internal-error"),o.then(()=>r(this.currentUser)),typeof n=="function"?e.addObserver(n,i,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$k(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&UA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function lo(t){return Ee(t)}class d0{constructor(e){this.auth=e,this.observer=null,this.addObserver=PN(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(t,e){const n=xh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Su(r,e??{}))return s;pn(s,"already-initialized")}return n.initialize({options:e})}function gP(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function mP(t,e,n){const i=lo(t);z(i._canInitEmulator,i,"emulator-config-failed"),z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),r=Bk(e),{host:o,port:a}=yP(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${r}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||vP()}function Bk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yP(t){const e=Bk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:f0(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:f0(o)}}}function f0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function wP(t,e){return Ys(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(t,e){return fl(t,"POST","/v1/accounts:signInWithPassword",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xP(t,e){return fl(t,"POST","/v1/accounts:signInWithEmailLink",ao(t,e))}async function _P(t,e){return fl(t,"POST","/v1/accounts:signInWithEmailLink",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends im{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new La(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new La(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const s=await Tu(e,i,"signInWithPassword");return Ld(e,s)}else return Ld(e,i).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const r=await Tu(e,i,"signInWithPassword");return Ld(e,r)}else return Promise.reject(s)});case"emailLink":return xP(e,{email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return wP(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return _P(e,{idToken:n,email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tr(t,e){return fl(t,"POST","/v1/accounts:signInWithIdp",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP="http://localhost";class $s extends im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,r=Jg(n,["providerId","signInMethod"]);if(!i||!s)return null;const o=new $s(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Tr(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Tr(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Tr(e,n)}buildRequest(){const e={requestUri:kP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function bP(t){const e=$o(jo(t)).link,n=e?$o(jo(e)).deep_link_id:null,i=$o(jo(t)).deep_link_id;return(i?$o(jo(i)).link:null)||i||n||e||t}class sm{constructor(e){var n,i,s,r,o,a;const l=$o(jo(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,h=SP((s=l.mode)!==null&&s!==void 0?s:null);z(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(r=l.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=bP(e);try{return new sm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.providerId=co.PROVIDER_ID}static credential(e,n){return La._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=sm.parseLink(n);return z(i,"argument-error"),La._fromEmailAndCode(e,i.code,i.tenantId)}}co.PROVIDER_ID="password";co.EMAIL_PASSWORD_SIGN_IN_METHOD="password";co.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Vk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends pl{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wi.credential(e.oauthAccessToken)}catch{return null}}}wi.FACEBOOK_SIGN_IN_METHOD="facebook.com";wi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends pl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return xi.credential(n,i)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends pl{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends pl{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ki.credential(n,i)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(t,e){return fl(t,"POST","/v1/accounts:signUp",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await Cs._fromIdTokenResponse(e,i,s),o=p0(i);return new js({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=p0(i);return new js({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function p0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu extends Ln{constructor(e,n,i,s){var r;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Iu.prototype),this.customData={appName:e.name,tenantId:(r=e.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new Iu(e,n,i,s)}}function Hk(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Iu._fromErrorAndOperation(t,r,e,i):r})}async function EP(t,e,n=!1){const i=await Br(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return js._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(t,e,n=!1){const{auth:i}=t,s="reauthenticate";try{const r=await Br(t,Hk(i,s,e,t),n);z(r.idToken,i,"internal-error");const o=tm(r.idToken);z(o,i,"internal-error");const{sub:a}=o;return z(t.uid===a,i,"user-mismatch"),js._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&pn(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(t,e,n=!1){const i="signIn",s=await Hk(t,i,e),r=await js._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function TP(t,e){return Wk(lo(t),e)}async function Kk(t,e,n){var i;const s=lo(t),r={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((i=s._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const c=await Tu(s,r,"signUpPassword");o=$d(s,c)}else o=$d(s,r).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await Tu(s,r,"signUpPassword");return $d(s,u)}else return Promise.reject(c)});const a=await o.catch(c=>Promise.reject(c)),l=await js._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}function IP(t,e,n){return TP(Ee(t),co.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NP(t,e){return Ys(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Ee(t),r={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Br(i,NP(i.auth,r));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function AP(t,e,n,i){return Ee(t).onIdTokenChanged(e,n,i)}function PP(t,e,n){return Ee(t).beforeAuthStateChanged(e,n)}function RP(t,e,n,i){return Ee(t).onAuthStateChanged(e,n,i)}function DP(t){return Ee(t).signOut()}const Nu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nu,"1"),this.storage.removeItem(Nu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(){const t=ft();return nm(t)||_h(t)}const OP=1e3,LP=10;class Gk extends qk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=MP()&&oP(),this.fallbackToPolling=Lk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);rP()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,LP):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},OP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gk.type="LOCAL";const $P=Gk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk extends qk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Yk.type="SESSION";const Qk=Yk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new kh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,r)),l=await jP(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=rm("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(d.data.response);break;default:clearTimeout(u),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function UP(t){Pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function zP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function BP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VP(){return Xk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="firebaseLocalStorageDb",HP=1,Au="firebaseLocalStorage",Zk="fbase_key";class gl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sh(t,e){return t.transaction([Au],e?"readwrite":"readonly").objectStore(Au)}function WP(){const t=indexedDB.deleteDatabase(Jk);return new gl(t).toPromise()}function pp(){const t=indexedDB.open(Jk,HP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Au,{keyPath:Zk})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Au)?e(i):(i.close(),await WP(),e(await pp()))})})}async function g0(t,e,n){const i=Sh(t,!0).put({[Zk]:e,value:n});return new gl(i).toPromise()}async function KP(t,e){const n=Sh(t,!1).get(e),i=await new gl(n).toPromise();return i===void 0?null:i.value}function m0(t,e){const n=Sh(t,!0).delete(e);return new gl(n).toPromise()}const qP=800,GP=3;class eS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>GP)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kh._getInstance(VP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zP(),!this.activeServiceWorker)return;this.sender=new FP(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||BP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pp();return await g0(e,Nu,"1"),await m0(e,Nu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>g0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>KP(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>m0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Sh(s,!1).getAll();return new gl(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eS.type="LOCAL";const YP=eS;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t,e){return e?Gn(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om extends im{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XP(t){return Wk(t.auth,new om(t),t.bypassAuthState)}function JP(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),CP(n,new om(t),t.bypassAuthState)}async function ZP(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),EP(n,new om(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XP;case"linkViaPopup":case"linkViaRedirect":return ZP;case"reauthViaPopup":case"reauthViaRedirect":return JP;default:pn(this.auth,"internal-error")}}resolve(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){si(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new dl(2e3,1e4);class vr extends tS{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,vr.currentPopupAction&&vr.currentPopupAction.cancel(),vr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return z(e,this.auth,"internal-error"),e}async onExecution(){si(this.filter.length===1,"Popup operations only handle one event");const e=rm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(An(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(An(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(An(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eR.get())};e()}}vr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="pendingRedirect",Fc=new Map;class nR extends tS{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Fc.get(this.auth._key());if(!e){try{const i=await iR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Fc.set(this.auth._key(),e)}return this.bypassAuthState||Fc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iR(t,e){const n=oR(e),i=rR(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function sR(t,e){Fc.set(t._key(),e)}function rR(t){return Gn(t._redirectPersistence)}function oR(t){return jc(tR,t.config.apiKey,t.name)}async function aR(t,e,n=!1){const i=lo(t),s=QP(i,e),o=await new nR(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=10*60*1e3;class cR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!nS(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(An(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lR&&this.cachedEventUids.clear(),this.cachedEventUids.has(y0(e))}saveEventToCache(e){this.cachedEventUids.add(y0(e)),this.lastProcessedEventTime=Date.now()}}function y0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t,e={}){return Ys(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fR=/^https?/;async function pR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hR(t);for(const n of e)try{if(gR(n))return}catch{}pn(t,"unauthorized-domain")}function gR(t){const e=dp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!fR.test(n))return!1;if(dR.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new dl(3e4,6e4);function v0(){const t=Pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yR(t){return new Promise((e,n)=>{var i,s,r;function o(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),n(An(t,"network-request-failed"))},timeout:mR.get()})}if(!((s=(i=Pn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((r=Pn().gapi)===null||r===void 0)&&r.load)o();else{const a=lP("iframefcb");return Pn()[a]=()=>{gapi.load?o():n(An(t,"network-request-failed"))},Uk(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Uc=null,e})}let Uc=null;function vR(t){return Uc=Uc||yR(t),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new dl(5e3,15e3),xR="__/auth/iframe",_R="emulator/auth/iframe",kR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bR(t){const e=t.config;z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?em(e,_R):`https://${t.config.authDomain}/${xR}`,i={apiKey:e.apiKey,appName:t.name,v:Gs},s=SR.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${hl(i).slice(1)}`}async function ER(t){const e=await vR(t),n=Pn().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:bR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kR,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=An(t,"network-request-failed"),a=Pn().setTimeout(()=>{r(o)},wR.get());function l(){Pn().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TR=500,IR=600,NR="_blank",AR="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PR(t,e,n,i=TR,s=IR){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},CR),{width:i.toString(),height:s.toString(),top:r,left:o}),c=ft().toLowerCase();n&&(a=Pk(c)?NR:n),Ak(c)&&(e=e||AR,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,m])=>`${d}${f}=${m},`,"");if(sP(c)&&a!=="_self")return RR(e||"",a),new w0(null);const h=window.open(e||"",a,u);z(h,t,"popup-blocked");try{h.focus()}catch{}return new w0(h)}function RR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="__/auth/handler",MR="emulator/auth/handler",OR=encodeURIComponent("fac");async function x0(t,e,n,i,s,r){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Gs,eventId:s};if(e instanceof Vk){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",AN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(r||{}))o[u]=h}if(e instanceof pl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${OR}=${encodeURIComponent(l)}`:"";return`${LR(t)}?${hl(a).slice(1)}${c}`}function LR({config:t}){return t.emulator?em(t,MR):`https://${t.authDomain}/${DR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="webStorageSupport";class $R{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qk,this._completeRedirectFn=aR,this._overrideRedirectResult=sR}async _openPopup(e,n,i,s){var r;si((r=this.eventManagers[e._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await x0(e,n,i,dp(),s);return PR(e,o,rm())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await x0(e,n,i,dp(),s);return UP(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(si(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ER(e),i=new cR(e);return n.register("authEvent",s=>(z(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jd,{type:jd},s=>{var r;const o=(r=s==null?void 0:s[0])===null||r===void 0?void 0:r[jd];o!==void 0&&n(!!o),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Lk()||nm()||_h()}}const jR=$R;var _0="@firebase/auth",k0="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function zR(t){Ls(new Ki("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$k(t)},c=new fP(i,s,r,l);return gP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Ls(new Ki("auth-internal",e=>{const n=lo(e.getProvider("auth").getImmediate());return(i=>new FR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(_0,k0,UR(t)),Nn(_0,k0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=5*60,VR=mk("authIdTokenMaxAge")||BR;let S0=null;const HR=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>VR)return;const s=n==null?void 0:n.token;S0!==s&&(S0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iS(t=Xg()){const e=xh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pP(t,{popupRedirectResolver:jR,persistence:[YP,$P,Qk]}),i=mk("authTokenSyncURL");if(i){const r=HR(i);PP(n,r,()=>r(n.currentUser)),AP(n,o=>r(o))}const s=fk("auth");return s&&mP(n,`http://${s}`),n}zR("Browser");var WR="firebase",KR="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(WR,KR,"app");var qR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},R,am=am||{},H=qR||self;function bh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ml(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function GR(t){return Object.prototype.hasOwnProperty.call(t,Fd)&&t[Fd]||(t[Fd]=++YR)}var Fd="closure_uid_"+(1e9*Math.random()>>>0),YR=0;function QR(t,e,n){return t.call.apply(t.bind,arguments)}function XR(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function ct(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ct=QR:ct=XR,ct.apply(null,arguments)}function Zl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function qe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,s,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(i,o)}}function ns(){this.s=this.s,this.o=this.o}var JR=0;ns.prototype.s=!1;ns.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),JR!=0)&&GR(this)};ns.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function lm(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function b0(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(bh(i)){const s=t.length||0,r=i.length||0;t.length=s+r;for(let o=0;o<r;o++)t[s+o]=i[o]}else t.push(i)}}function ut(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ut.prototype.h=function(){this.defaultPrevented=!0};var ZR=function(){if(!H.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{H.addEventListener("test",()=>{},e),H.removeEventListener("test",()=>{},e)}catch{}return t}();function $a(t){return/^[\s\xa0]*$/.test(t)}function Eh(){var t=H.navigator;return t&&(t=t.userAgent)?t:""}function Sn(t){return Eh().indexOf(t)!=-1}function cm(t){return cm[" "](t),t}cm[" "]=function(){};function eD(t,e){var n=KD;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var tD=Sn("Opera"),Vr=Sn("Trident")||Sn("MSIE"),rS=Sn("Edge"),gp=rS||Vr,oS=Sn("Gecko")&&!(Eh().toLowerCase().indexOf("webkit")!=-1&&!Sn("Edge"))&&!(Sn("Trident")||Sn("MSIE"))&&!Sn("Edge"),nD=Eh().toLowerCase().indexOf("webkit")!=-1&&!Sn("Edge");function aS(){var t=H.document;return t?t.documentMode:void 0}var mp;e:{var Ud="",zd=function(){var t=Eh();if(oS)return/rv:([^\);]+)(\)|;)/.exec(t);if(rS)return/Edge\/([\d\.]+)/.exec(t);if(Vr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(nD)return/WebKit\/(\S+)/.exec(t);if(tD)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(zd&&(Ud=zd?zd[1]:""),Vr){var Bd=aS();if(Bd!=null&&Bd>parseFloat(Ud)){mp=String(Bd);break e}}mp=Ud}var yp;if(H.document&&Vr){var E0=aS();yp=E0||parseInt(mp,10)||void 0}else yp=void 0;var iD=yp;function ja(t,e){if(ut.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(oS){e:{try{cm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:sD[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ja.$.h.call(this)}}qe(ja,ut);var sD={2:"touch",3:"pen",4:"mouse"};ja.prototype.h=function(){ja.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var yl="closure_listenable_"+(1e6*Math.random()|0),rD=0;function oD(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=s,this.key=++rD,this.fa=this.ia=!1}function Ch(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function um(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function aD(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function lS(t){const e={};for(const n in t)e[n]=t[n];return e}const C0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cS(t,e){let n,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(n in i)t[n]=i[n];for(let r=0;r<C0.length;r++)n=C0[r],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Th(t){this.src=t,this.g={},this.h=0}Th.prototype.add=function(t,e,n,i,s){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=wp(t,e,i,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new oD(e,this.src,r,!!i,s),e.ia=n,t.push(e)),e};function vp(t,e){var n=e.type;if(n in t.g){var i=t.g[n],s=sS(i,e),r;(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Ch(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function wp(t,e,n,i){for(var s=0;s<t.length;++s){var r=t[s];if(!r.fa&&r.listener==e&&r.capture==!!n&&r.la==i)return s}return-1}var hm="closure_lm_"+(1e6*Math.random()|0),Vd={};function uS(t,e,n,i,s){if(i&&i.once)return dS(t,e,n,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)uS(t,e[r],n,i,s);return null}return n=pm(n),t&&t[yl]?t.O(e,n,ml(i)?!!i.capture:!!i,s):hS(t,e,n,!1,i,s)}function hS(t,e,n,i,s,r){if(!e)throw Error("Invalid event type");var o=ml(s)?!!s.capture:!!s,a=fm(t);if(a||(t[hm]=a=new Th(t)),n=a.add(e,n,i,o,r),n.proxy)return n;if(i=lD(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)ZR||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(pS(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function lD(){function t(n){return e.call(t.src,t.listener,n)}const e=cD;return t}function dS(t,e,n,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)dS(t,e[r],n,i,s);return null}return n=pm(n),t&&t[yl]?t.P(e,n,ml(i)?!!i.capture:!!i,s):hS(t,e,n,!0,i,s)}function fS(t,e,n,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)fS(t,e[r],n,i,s);else i=ml(i)?!!i.capture:!!i,n=pm(n),t&&t[yl]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],n=wp(r,n,i,s),-1<n&&(Ch(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete t.g[e],t.h--)))):t&&(t=fm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=wp(e,n,i,s)),(n=-1<t?e[t]:null)&&dm(n))}function dm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[yl])vp(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(pS(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=fm(e))?(vp(n,t),n.h==0&&(n.src=null,e[hm]=null)):Ch(t)}}}function pS(t){return t in Vd?Vd[t]:Vd[t]="on"+t}function cD(t,e){if(t.fa)t=!0;else{e=new ja(e,this);var n=t.listener,i=t.la||t.src;t.ia&&dm(t),t=n.call(i,e)}return t}function fm(t){return t=t[hm],t instanceof Th?t:null}var Hd="__closure_events_fn_"+(1e9*Math.random()>>>0);function pm(t){return typeof t=="function"?t:(t[Hd]||(t[Hd]=function(e){return t.handleEvent(e)}),t[Hd])}function Ke(){ns.call(this),this.i=new Th(this),this.S=this,this.J=null}qe(Ke,ns);Ke.prototype[yl]=!0;Ke.prototype.removeEventListener=function(t,e,n,i){fS(this,t,e,n,i)};function Je(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new ut(e,t);else if(e instanceof ut)e.target=e.target||t;else{var s=e;e=new ut(i,t),cS(e,s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];s=ec(o,i,!0,e)&&s}if(o=e.g=t,s=ec(o,i,!0,e)&&s,s=ec(o,i,!1,e)&&s,n)for(r=0;r<n.length;r++)o=e.g=n[r],s=ec(o,i,!1,e)&&s}Ke.prototype.N=function(){if(Ke.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Ch(n[i]);delete t.g[e],t.h--}}this.J=null};Ke.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Ke.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function ec(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&vp(t.i,o),s=a.call(l,i)!==!1&&s}}return s&&!i.defaultPrevented}var gm=H.JSON.stringify;class uD{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function hD(){var t=mm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class dD{constructor(){this.h=this.g=null}add(e,n){const i=gS.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var gS=new uD(()=>new fD,t=>t.reset());class fD{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function pD(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function gD(t){H.setTimeout(()=>{throw t},0)}let Fa,Ua=!1,mm=new dD,mS=()=>{const t=H.Promise.resolve(void 0);Fa=()=>{t.then(mD)}};var mD=()=>{for(var t;t=hD();){try{t.h.call(t.g)}catch(n){gD(n)}var e=gS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ua=!1};function Ih(t,e){Ke.call(this),this.h=t||1,this.g=e||H,this.j=ct(this.qb,this),this.l=Date.now()}qe(Ih,Ke);R=Ih.prototype;R.ga=!1;R.T=null;R.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Je(this,"tick"),this.ga&&(ym(this),this.start()))}};R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ym(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}R.N=function(){Ih.$.N.call(this),ym(this),delete this.g};function vm(t,e,n){if(typeof t=="function")n&&(t=ct(t,n));else if(t&&typeof t.handleEvent=="function")t=ct(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:H.setTimeout(t,e||0)}function yS(t){t.g=vm(()=>{t.g=null,t.i&&(t.i=!1,yS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class yD extends ns{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:yS(this)}N(){super.N(),this.g&&(H.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function za(t){ns.call(this),this.h=t,this.g={}}qe(za,ns);var T0=[];function vS(t,e,n,i){Array.isArray(n)||(n&&(T0[0]=n.toString()),n=T0);for(var s=0;s<n.length;s++){var r=uS(e,n[s],i||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function wS(t){um(t.g,function(e,n){this.g.hasOwnProperty(n)&&dm(e)},t),t.g={}}za.prototype.N=function(){za.$.N.call(this),wS(this)};za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Nh(){this.g=!0}Nh.prototype.Ea=function(){this.g=!1};function vD(t,e,n,i,s,r){t.info(function(){if(t.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function wD(t,e,n,i,s,r,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+n+`
`+r+" "+o})}function wr(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+_D(t,n)+(i?" "+i:"")})}function xD(t,e){t.info(function(){return"TIMEOUT: "+e})}Nh.prototype.info=function(){};function _D(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return gm(n)}catch{return e}}var Qs={},I0=null;function Ah(){return I0=I0||new Ke}Qs.Ta="serverreachability";function xS(t){ut.call(this,Qs.Ta,t)}qe(xS,ut);function Ba(t){const e=Ah();Je(e,new xS(e))}Qs.STAT_EVENT="statevent";function _S(t,e){ut.call(this,Qs.STAT_EVENT,t),this.stat=e}qe(_S,ut);function xt(t){const e=Ah();Je(e,new _S(e,t))}Qs.Ua="timingevent";function kS(t,e){ut.call(this,Qs.Ua,t),this.size=e}qe(kS,ut);function vl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return H.setTimeout(function(){t()},e)}var Ph={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},SS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wm(){}wm.prototype.h=null;function N0(t){return t.h||(t.h=t.i())}function bS(){}var wl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function xm(){ut.call(this,"d")}qe(xm,ut);function _m(){ut.call(this,"c")}qe(_m,ut);var xp;function Rh(){}qe(Rh,wm);Rh.prototype.g=function(){return new XMLHttpRequest};Rh.prototype.i=function(){return{}};xp=new Rh;function xl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new za(this),this.P=kD,t=gp?125:void 0,this.V=new Ih(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ES}function ES(){this.i=null,this.g="",this.h=!1}var kD=45e3,_p={},Pu={};R=xl.prototype;R.setTimeout=function(t){this.P=t};function kp(t,e,n){t.L=1,t.v=Mh(ri(e)),t.s=n,t.S=!0,CS(t,null)}function CS(t,e){t.G=Date.now(),_l(t),t.A=ri(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),MS(n.i,"t",i),t.C=0,n=t.l.J,t.h=new ES,t.g=tb(t.l,n?e:null,!t.s),0<t.O&&(t.M=new yD(ct(t.Pa,t,t.g),t.O)),vS(t.U,t.g,"readystatechange",t.nb),e=t.I?lS(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),Ba(),vD(t.j,t.u,t.A,t.m,t.W,t.s)}R.nb=function(t){t=t.target;const e=this.M;e&&bn(t)==3?e.l():this.Pa(t)};R.Pa=function(t){try{if(t==this.g)e:{const u=bn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||gp||this.g&&(this.h.h||this.g.ja()||D0(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?Ba(3):Ba(2)),Dh(this);var n=this.g.da();this.ca=n;t:if(TS(this)){var i=D0(this.g);t="";var s=i.length,r=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),sa(this);var o="";break t}this.h.i=new H.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,wD(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$a(a)){var c=a;break t}}c=null}if(n=c)wr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sp(this,n);else{this.i=!1,this.o=3,xt(12),ws(this),sa(this);break e}}this.S?(IS(this,u,o),gp&&this.i&&u==3&&(vS(this.U,this.V,"tick",this.mb),this.V.start())):(wr(this.j,this.m,o,null),Sp(this,o)),u==4&&ws(this),this.i&&!this.J&&(u==4?XS(this.l,this):(this.i=!1,_l(this)))}else VD(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,xt(12)):(this.o=0,xt(13)),ws(this),sa(this)}}}catch{}finally{}};function TS(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function IS(t,e,n){let i=!0,s;for(;!t.J&&t.C<n.length;)if(s=SD(t,n),s==Pu){e==4&&(t.o=4,xt(14),i=!1),wr(t.j,t.m,null,"[Incomplete Response]");break}else if(s==_p){t.o=4,xt(15),wr(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else wr(t.j,t.m,s,null),Sp(t,s);TS(t)&&s!=Pu&&s!=_p&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,xt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Tm(e),e.M=!0,xt(11))):(wr(t.j,t.m,n,"[Invalid Chunked Response]"),ws(t),sa(t))}R.mb=function(){if(this.g){var t=bn(this.g),e=this.g.ja();this.C<e.length&&(Dh(this),IS(this,t,e),this.i&&t!=4&&_l(this))}};function SD(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Pu:(n=Number(e.substring(n,i)),isNaN(n)?_p:(i+=1,i+n>e.length?Pu:(e=e.slice(i,i+n),t.C=i+n,e)))}R.cancel=function(){this.J=!0,ws(this)};function _l(t){t.Y=Date.now()+t.P,NS(t,t.P)}function NS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=vl(ct(t.lb,t),e)}function Dh(t){t.B&&(H.clearTimeout(t.B),t.B=null)}R.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(xD(this.j,this.A),this.L!=2&&(Ba(),xt(17)),ws(this),this.o=2,sa(this)):NS(this,this.Y-t)};function sa(t){t.l.H==0||t.J||XS(t.l,t)}function ws(t){Dh(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,ym(t.V),wS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Sp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||bp(n.i,t))){if(!t.K&&bp(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Mu(n),$h(n);else break e;Cm(n),xt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=vl(ct(n.ib,n),6e3));if(1>=$S(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else xs(n,11)}else if((t.K||n.g==t)&&Mu(n),!$a(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var r=i.i;r.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(km(r,r.h),r.h=null))}if(i.F){const v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(i.Da=v,ue(i.I,i.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=eb(i,i.J?i.pa:null,i.Y),o.K){jS(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(Dh(a),_l(a)),i.g=o}else YS(i);0<n.j.length&&jh(n)}else c[0]!="stop"&&c[0]!="close"||xs(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?xs(n,7):Em(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Ba(4)}catch{}}function bD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(bh(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function ED(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(bh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function AS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(bh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=ED(t),i=bD(t),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],n&&n[r],t)}var PS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var r=t[n].substring(0,i);s=t[n].substring(i+1)}else r=t[n];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Ts(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ts){this.h=t.h,Ru(this,t.j),this.s=t.s,this.g=t.g,Du(this,t.m),this.l=t.l;var e=t.i,n=new Va;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),A0(this,n),this.o=t.o}else t&&(e=String(t).match(PS))?(this.h=!1,Ru(this,e[1]||"",!0),this.s=Fo(e[2]||""),this.g=Fo(e[3]||"",!0),Du(this,e[4]),this.l=Fo(e[5]||"",!0),A0(this,e[6]||"",!0),this.o=Fo(e[7]||"")):(this.h=!1,this.i=new Va(null,this.h))}Ts.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Uo(e,P0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Uo(e,P0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Uo(n,n.charAt(0)=="/"?ND:ID,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Uo(n,PD)),t.join("")};function ri(t){return new Ts(t)}function Ru(t,e,n){t.j=n?Fo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Du(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function A0(t,e,n){e instanceof Va?(t.i=e,RD(t.i,t.h)):(n||(e=Uo(e,AD)),t.i=new Va(e,t.h))}function ue(t,e,n){t.i.set(e,n)}function Mh(t){return ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Fo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Uo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,TD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function TD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var P0=/[#\/\?@]/g,ID=/[#\?:]/g,ND=/[#\?]/g,AD=/[#\?@]/g,PD=/#/g;function Va(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function is(t){t.g||(t.g=new Map,t.h=0,t.i&&CD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}R=Va.prototype;R.add=function(t,e){is(this),this.i=null,t=uo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function RS(t,e){is(t),e=uo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function DS(t,e){return is(t),e=uo(t,e),t.g.has(e)}R.forEach=function(t,e){is(this),this.g.forEach(function(n,i){n.forEach(function(s){t.call(e,s,i,this)},this)},this)};R.ta=function(){is(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let r=0;r<s.length;r++)n.push(e[i])}return n};R.Z=function(t){is(this);let e=[];if(typeof t=="string")DS(this,t)&&(e=e.concat(this.g.get(uo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};R.set=function(t,e){return is(this),this.i=null,t=uo(this,t),DS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};R.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function MS(t,e,n){RS(t,e),0<n.length&&(t.i=null,t.g.set(uo(t,e),lm(n)),t.h+=n.length)}R.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const r=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var s=r;o[i]!==""&&(s+="="+encodeURIComponent(String(o[i]))),t.push(s)}}return this.i=t.join("&")};function uo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function RD(t,e){e&&!t.j&&(is(t),t.i=null,t.g.forEach(function(n,i){var s=i.toLowerCase();i!=s&&(RS(this,i),MS(this,s,n))},t)),t.j=e}var DD=class{constructor(t,e){this.g=t,this.map=e}};function OS(t){this.l=t||MD,H.PerformanceNavigationTiming?(t=H.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(H.g&&H.g.Ka&&H.g.Ka()&&H.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var MD=10;function LS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function $S(t){return t.h?1:t.g?t.g.size:0}function bp(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function km(t,e){t.g?t.g.add(e):t.h=e}function jS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}OS.prototype.cancel=function(){if(this.i=FS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function FS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return lm(t.i)}var OD=class{stringify(t){return H.JSON.stringify(t,void 0)}parse(t){return H.JSON.parse(t,void 0)}};function LD(){this.g=new OD}function $D(t,e,n){const i=n||"";try{AS(t,function(s,r){let o=s;ml(s)&&(o=gm(s)),e.push(i+r+"="+encodeURIComponent(o))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function jD(t,e){const n=new Nh;if(H.Image){const i=new Image;i.onload=Zl(tc,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Zl(tc,n,i,"TestLoadImage: error",!1,e),i.onabort=Zl(tc,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Zl(tc,n,i,"TestLoadImage: timeout",!1,e),H.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function tc(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function kl(t){this.l=t.fc||null,this.j=t.ob||!1}qe(kl,wm);kl.prototype.g=function(){return new Oh(this.l,this.j)};kl.prototype.i=function(t){return function(){return t}}({});function Oh(t,e){Ke.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Sm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qe(Oh,Ke);var Sm=0;R=Oh.prototype;R.open=function(t,e){if(this.readyState!=Sm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ha(this)};R.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||H).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sl(this)),this.readyState=Sm};R.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ha(this)),this.g&&(this.readyState=3,Ha(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof H.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;US(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function US(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}R.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Sl(this):Ha(this),this.readyState==3&&US(this)}};R.Za=function(t){this.g&&(this.response=this.responseText=t,Sl(this))};R.Ya=function(t){this.g&&(this.response=t,Sl(this))};R.ka=function(){this.g&&Sl(this)};function Sl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ha(t)}R.setRequestHeader=function(t,e){this.v.append(t,e)};R.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};R.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ha(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Oh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var FD=H.JSON.parse;function Ce(t){Ke.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zS,this.L=this.M=!1}qe(Ce,Ke);var zS="",UD=/^https?$/i,zD=["POST","PUT"];R=Ce.prototype;R.Oa=function(t){this.M=t};R.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():xp.g(),this.C=this.u?N0(this.u):N0(xp),this.g.onreadystatechange=ct(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(r){R0(this,r);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const r of i.keys())n.set(r,i.get(r));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),s=H.FormData&&t instanceof H.FormData,!(0<=sS(zD,e))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{HS(this),0<this.B&&((this.L=BD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ct(this.ua,this)):this.A=vm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){R0(this,r)}};function BD(t){return Vr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}R.ua=function(){typeof am<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Je(this,"timeout"),this.abort(8))};function R0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,BS(t),Lh(t)}function BS(t){t.F||(t.F=!0,Je(t,"complete"),Je(t,"error"))}R.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Je(this,"complete"),Je(this,"abort"),Lh(this))};R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Lh(this,!0)),Ce.$.N.call(this)};R.La=function(){this.s||(this.G||this.v||this.l?VS(this):this.kb())};R.kb=function(){VS(this)};function VS(t){if(t.h&&typeof am<"u"&&(!t.C[1]||bn(t)!=4||t.da()!=2)){if(t.v&&bn(t)==4)vm(t.La,0,t);else if(Je(t,"readystatechange"),bn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var s=String(t.I).match(PS)[1]||null;!s&&H.self&&H.self.location&&(s=H.self.location.protocol.slice(0,-1)),i=!UD.test(s?s.toLowerCase():"")}n=i}if(n)Je(t,"complete"),Je(t,"success");else{t.m=6;try{var r=2<bn(t)?t.g.statusText:""}catch{r=""}t.j=r+" ["+t.da()+"]",BS(t)}}finally{Lh(t)}}}}function Lh(t,e){if(t.g){HS(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Je(t,"ready");try{n.onreadystatechange=i}catch{}}}function HS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(H.clearTimeout(t.A),t.A=null)}R.isActive=function(){return!!this.g};function bn(t){return t.g?t.g.readyState:0}R.da=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}};R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};R.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),FD(e)}};function D0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case zS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function VD(t){const e={};t=(t.g&&2<=bn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if($a(t[i]))continue;var n=pD(t[i]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=e[s]||[];e[s]=r,r.push(n)}aD(e,function(i){return i.join(", ")})}R.Ia=function(){return this.m};R.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function WS(t){let e="";return um(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function bm(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=WS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ue(t,e,n))}function Eo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function KS(t){this.Ga=0,this.j=[],this.l=new Nh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Eo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Eo("baseRetryDelayMs",5e3,t),this.hb=Eo("retryDelaySeedMs",1e4,t),this.eb=Eo("forwardChannelMaxRetries",2,t),this.xa=Eo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new OS(t&&t.concurrentRequestLimit),this.Ja=new LD,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}R=KS.prototype;R.ra=8;R.H=1;function Em(t){if(qS(t),t.H==3){var e=t.W++,n=ri(t.I);if(ue(n,"SID",t.K),ue(n,"RID",e),ue(n,"TYPE","terminate"),bl(t,n),e=new xl(t,t.l,e),e.L=2,e.v=Mh(ri(n)),n=!1,H.navigator&&H.navigator.sendBeacon)try{n=H.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&H.Image&&(new Image().src=e.v,n=!0),n||(e.g=tb(e.l,null),e.g.ha(e.v)),e.G=Date.now(),_l(e)}ZS(t)}function $h(t){t.g&&(Tm(t),t.g.cancel(),t.g=null)}function qS(t){$h(t),t.u&&(H.clearTimeout(t.u),t.u=null),Mu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&H.clearTimeout(t.m),t.m=null)}function jh(t){if(!LS(t.i)&&!t.m){t.m=!0;var e=t.Na;Fa||mS(),Ua||(Fa(),Ua=!0),mm.add(e,t),t.C=0}}function HD(t,e){return $S(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=vl(ct(t.Na,t,e),JS(t,t.C)),t.C++,!0)}R.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new xl(this,this.l,t);let r=this.s;if(this.U&&(r?(r=lS(r),cS(r,this.U)):r=this.U),this.o!==null||this.O||(s.I=r,r=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=GS(this,s,e),n=ri(this.I),ue(n,"RID",t),ue(n,"CVER",22),this.F&&ue(n,"X-HTTP-Session-Id",this.F),bl(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(WS(r)))+"&"+e:this.o&&bm(n,this.o,r)),km(this.i,s),this.bb&&ue(n,"TYPE","init"),this.P?(ue(n,"$req",e),ue(n,"SID","null"),s.aa=!0,kp(s,n,null)):kp(s,n,e),this.H=2}}else this.H==3&&(t?M0(this,t):this.j.length==0||LS(this.i)||M0(this))};function M0(t,e){var n;e?n=e.m:n=t.W++;const i=ri(t.I);ue(i,"SID",t.K),ue(i,"RID",n),ue(i,"AID",t.V),bl(t,i),t.o&&t.s&&bm(i,t.o,t.s),n=new xl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=GS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),km(t.i,n),kp(n,i,e)}function bl(t,e){t.na&&um(t.na,function(n,i){ue(e,i,n)}),t.h&&AS({},function(n,i){ue(e,i,n)})}function GS(t,e,n){n=Math.min(t.j.length,n);var i=t.h?ct(t.h.Va,t.h,t):null;e:{var s=t.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=s[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const u=s[l].map;if(c-=r,0>c)r=Math.max(0,s[l].g-100),a=!1;else try{$D(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function YS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fa||mS(),Ua||(Fa(),Ua=!0),mm.add(e,t),t.A=0}}function Cm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=vl(ct(t.Ma,t),JS(t,t.A)),t.A++,!0)}R.Ma=function(){if(this.u=null,QS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=vl(ct(this.jb,this),t)}};R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xt(10),$h(this),QS(this))};function Tm(t){t.B!=null&&(H.clearTimeout(t.B),t.B=null)}function QS(t){t.g=new xl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ri(t.wa);ue(e,"RID","rpc"),ue(e,"SID",t.K),ue(e,"AID",t.V),ue(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ue(e,"TO",t.qa),ue(e,"TYPE","xmlhttp"),bl(t,e),t.o&&t.s&&bm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Mh(ri(e)),n.s=null,n.S=!0,CS(n,t)}R.ib=function(){this.v!=null&&(this.v=null,$h(this),Cm(this),xt(19))};function Mu(t){t.v!=null&&(H.clearTimeout(t.v),t.v=null)}function XS(t,e){var n=null;if(t.g==e){Mu(t),Tm(t),t.g=null;var i=2}else if(bp(t.i,e))n=e.F,jS(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;i=Ah(),Je(i,new kS(i,n)),jh(t)}else YS(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(i==1&&HD(t,e)||i==2&&Cm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:xs(t,5);break;case 4:xs(t,10);break;case 3:xs(t,6);break;default:xs(t,2)}}}function JS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function xs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=ct(t.pb,t);n||(n=new Ts("//www.google.com/images/cleardot.gif"),H.location&&H.location.protocol=="http"||Ru(n,"https"),Mh(n)),jD(n.toString(),i)}else xt(2);t.H=0,t.h&&t.h.za(e),ZS(t),qS(t)}R.pb=function(t){t?(this.l.info("Successfully pinged google.com"),xt(2)):(this.l.info("Failed to ping google.com"),xt(1))};function ZS(t){if(t.H=0,t.ma=[],t.h){const e=FS(t.i);(e.length!=0||t.j.length!=0)&&(b0(t.ma,e),b0(t.ma,t.j),t.i.i.length=0,lm(t.j),t.j.length=0),t.h.ya()}}function eb(t,e,n){var i=n instanceof Ts?ri(n):new Ts(n);if(i.g!="")e&&(i.g=e+"."+i.g),Du(i,i.m);else{var s=H.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new Ts(null);i&&Ru(r,i),e&&(r.g=e),s&&Du(r,s),n&&(r.l=n),i=r}return n=t.F,e=t.Da,n&&e&&ue(i,n,e),ue(i,"VER",t.ra),bl(t,i),i}function tb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ce(new kl({ob:!0})):new Ce(t.va),e.Oa(t.J),e}R.isActive=function(){return!!this.h&&this.h.isActive(this)};function nb(){}R=nb.prototype;R.Ba=function(){};R.Aa=function(){};R.za=function(){};R.ya=function(){};R.isActive=function(){return!0};R.Va=function(){};function Ou(){if(Vr&&!(10<=Number(iD)))throw Error("Environmental error: no available transport.")}Ou.prototype.g=function(t,e){return new Ht(t,e)};function Ht(t,e){Ke.call(this),this.g=new KS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!$a(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!$a(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ho(this)}qe(Ht,Ke);Ht.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;xt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=eb(t,null,t.Y),jh(t)};Ht.prototype.close=function(){Em(this.g)};Ht.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=gm(t),t=n);e.j.push(new DD(e.fb++,t)),e.H==3&&jh(e)};Ht.prototype.N=function(){this.g.h=null,delete this.j,Em(this.g),delete this.g,Ht.$.N.call(this)};function ib(t){xm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}qe(ib,xm);function sb(){_m.call(this),this.status=1}qe(sb,_m);function ho(t){this.g=t}qe(ho,nb);ho.prototype.Ba=function(){Je(this.g,"a")};ho.prototype.Aa=function(t){Je(this.g,new ib(t))};ho.prototype.za=function(t){Je(this.g,new sb)};ho.prototype.ya=function(){Je(this.g,"b")};function WD(){this.blockSize=-1}function gn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}qe(gn,WD);gn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Wd(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)i[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)i[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var r=t.g[3],o=e+(r^n&(s^r))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[1]+3905402710&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[2]+606105819&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[5]+1200080426&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[6]+2821735955&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[9]+2336552879&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[10]+4294925233&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(r^n&(s^r))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(s^e&(n^s))+i[13]+4254626195&4294967295,r=e+(o<<12&4294967295|o>>>20),o=s+(n^r&(e^n))+i[14]+2792965006&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(e^s&(r^e))+i[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^r&(n^s))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[6]+3225465664&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[11]+643717713&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[10]+38016083&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[15]+3634488961&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[14]+3275163606&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[3]+4107603335&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^r&(n^s))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(e^n))+i[2]+4243563512&4294967295,r=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(r^e))+i[7]+1735328473&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(s^r))+i[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^r)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[8]+2272392833&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[11]+1839030562&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[4]+1272893353&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[7]+4139469664&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[0]+3936430074&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[3]+3572445317&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^r)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^s)+i[12]+3873151461&4294967295,r=e+(o<<11&4294967295|o>>>21),o=s+(r^e^n)+i[15]+530742520&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^e)+i[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~r))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[7]+1126891415&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[14]+2878612391&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[3]+2399980690&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[10]+4293915773&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[15]+4264355552&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[6]+2734768916&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~r))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~s))+i[11]+3174756917&4294967295,r=e+(o<<10&4294967295|o>>>22),o=s+(e^(r|~n))+i[2]+718787259&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+r&4294967295}gn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,s=this.h,r=0;r<e;){if(s==0)for(;r<=n;)Wd(this,t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<e;)if(i[s++]=t.charCodeAt(r++),s==this.blockSize){Wd(this,i),s=0;break}}else for(;r<e;)if(i[s++]=t[r++],s==this.blockSize){Wd(this,i),s=0;break}}this.h=s,this.i+=e};gn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function se(t,e){this.h=e;for(var n=[],i=!0,s=t.length-1;0<=s;s--){var r=t[s]|0;i&&r==e||(n[s]=r,i=!1)}this.g=n}var KD={};function Im(t){return-128<=t&&128>t?eD(t,function(e){return new se([e|0],0>e?-1:0)}):new se([t|0],0>t?-1:0)}function En(t){if(isNaN(t)||!isFinite(t))return Ir;if(0>t)return Qe(En(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Ep;return new se(e,0)}function rb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Qe(rb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=En(Math.pow(e,8)),i=Ir,s=0;s<t.length;s+=8){var r=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+r),e);8>r?(r=En(Math.pow(e,r)),i=i.R(r).add(En(o))):(i=i.R(n),i=i.add(En(o)))}return i}var Ep=4294967296,Ir=Im(0),Cp=Im(1),O0=Im(16777216);R=se.prototype;R.ea=function(){if(Qt(this))return-Qe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Ep+i)*e,e*=Ep}return t};R.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Yn(this))return"0";if(Qt(this))return"-"+Qe(this).toString(t);for(var e=En(Math.pow(t,6)),n=this,i="";;){var s=$u(n,e).g;n=Lu(n,s.R(e));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Yn(n))return r+i;for(;6>r.length;)r="0"+r;i=r+i}};R.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Yn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Qt(t){return t.h==-1}R.X=function(t){return t=Lu(this,t),Qt(t)?-1:Yn(t)?0:1};function Qe(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new se(n,~t.h).add(Cp)}R.abs=function(){return Qt(this)?Qe(this):this};R.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,s=0;s<=e;s++){var r=i+(this.D(s)&65535)+(t.D(s)&65535),o=(r>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);i=o>>>16,r&=65535,o&=65535,n[s]=o<<16|r}return new se(n,n[n.length-1]&-2147483648?-1:0)};function Lu(t,e){return t.add(Qe(e))}R.R=function(t){if(Yn(this)||Yn(t))return Ir;if(Qt(this))return Qt(t)?Qe(this).R(Qe(t)):Qe(Qe(this).R(t));if(Qt(t))return Qe(this.R(Qe(t)));if(0>this.X(O0)&&0>t.X(O0))return En(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<t.g.length;s++){var r=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*i+2*s]+=o*l,nc(n,2*i+2*s),n[2*i+2*s+1]+=r*l,nc(n,2*i+2*s+1),n[2*i+2*s+1]+=o*a,nc(n,2*i+2*s+1),n[2*i+2*s+2]+=r*a,nc(n,2*i+2*s+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new se(n,0)};function nc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Co(t,e){this.g=t,this.h=e}function $u(t,e){if(Yn(e))throw Error("division by zero");if(Yn(t))return new Co(Ir,Ir);if(Qt(t))return e=$u(Qe(t),e),new Co(Qe(e.g),Qe(e.h));if(Qt(e))return e=$u(t,Qe(e)),new Co(Qe(e.g),e.h);if(30<t.g.length){if(Qt(t)||Qt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Cp,i=e;0>=i.X(t);)n=L0(n),i=L0(i);var s=nr(n,1),r=nr(i,1);for(i=nr(i,2),n=nr(n,2);!Yn(i);){var o=r.add(i);0>=o.X(t)&&(s=s.add(n),r=o),i=nr(i,1),n=nr(n,1)}return e=Lu(t,s.R(e)),new Co(s,e)}for(s=Ir;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),r=En(n),o=r.R(e);Qt(o)||0<o.X(t);)n-=i,r=En(n),o=r.R(e);Yn(r)&&(r=Cp),s=s.add(r),t=Lu(t,o)}return new Co(s,t)}R.gb=function(t){return $u(this,t).h};R.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new se(n,this.h&t.h)};R.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new se(n,this.h|t.h)};R.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new se(n,this.h^t.h)};function L0(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new se(n,t.h)}function nr(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,s=[],r=0;r<i;r++)s[r]=0<e?t.D(r+n)>>>e|t.D(r+n+1)<<32-e:t.D(r+n);return new se(s,t.h)}Ou.prototype.createWebChannel=Ou.prototype.g;Ht.prototype.send=Ht.prototype.u;Ht.prototype.open=Ht.prototype.m;Ht.prototype.close=Ht.prototype.close;Ph.NO_ERROR=0;Ph.TIMEOUT=8;Ph.HTTP_ERROR=6;SS.COMPLETE="complete";bS.EventType=wl;wl.OPEN="a";wl.CLOSE="b";wl.ERROR="c";wl.MESSAGE="d";Ke.prototype.listen=Ke.prototype.O;Ce.prototype.listenOnce=Ce.prototype.P;Ce.prototype.getLastError=Ce.prototype.Sa;Ce.prototype.getLastErrorCode=Ce.prototype.Ia;Ce.prototype.getStatus=Ce.prototype.da;Ce.prototype.getResponseJson=Ce.prototype.Wa;Ce.prototype.getResponseText=Ce.prototype.ja;Ce.prototype.send=Ce.prototype.ha;Ce.prototype.setWithCredentials=Ce.prototype.Oa;gn.prototype.digest=gn.prototype.l;gn.prototype.reset=gn.prototype.reset;gn.prototype.update=gn.prototype.j;se.prototype.add=se.prototype.add;se.prototype.multiply=se.prototype.R;se.prototype.modulo=se.prototype.gb;se.prototype.compare=se.prototype.X;se.prototype.toNumber=se.prototype.ea;se.prototype.toString=se.prototype.toString;se.prototype.getBits=se.prototype.D;se.fromNumber=En;se.fromString=rb;var qD=function(){return new Ou},GD=function(){return Ah()},Kd=Ph,YD=SS,QD=Qs,$0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},XD=kl,ic=bS,JD=Ce,ZD=gn,Nr=se;const j0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Yg("@firebase/firestore");function F0(){return Fs.logLevel}function O(t,...e){if(Fs.logLevel<=Z.DEBUG){const n=e.map(Nm);Fs.debug(`Firestore (${fo}): ${t}`,...n)}}function oi(t,...e){if(Fs.logLevel<=Z.ERROR){const n=e.map(Nm);Fs.error(`Firestore (${fo}): ${t}`,...n)}}function Hr(t,...e){if(Fs.logLevel<=Z.WARN){const n=e.map(Nm);Fs.warn(`Firestore (${fo}): ${t}`,...n)}}function Nm(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t="Unexpected state"){const e=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: `+t;throw oi(e),new Error(e)}function fe(t,e){t||B()}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Ln{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}}class tM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class nM{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let r=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Jn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe(typeof i.accessToken=="string"),new ob(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new rt(e)}}class iM{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class sM{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new iM(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rM{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oM{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=r=>{r.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.T;return this.T=r.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.I.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.I.getImmediate({optional:!0});r?s(r):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.T=n.token,new rM(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=aM(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%e.length))}return i}}function ee(t,e){return t<e?-1:t>e?1:0}function Wr(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ue(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.timestamp=e}static fromTimestamp(e){return new W(e)}static min(){return new W(new Ue(0,0))}static max(){return new W(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,i){n===void 0?n=0:n>e.length&&B(),i===void 0?i=e.length-n:i>e.length-n&&B(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Wa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wa?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=e.get(s),o=n.get(s);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ge extends Wa{construct(e,n,i){return new ge(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new $(T.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const lM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Wa{construct(e,n,i){return new lt(e,n,i)}static isValidIdentifier(e){return lM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new $(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new $(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new $(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.path=e}static fromPath(e){return new j(ge.fromString(e))}static fromName(e){return new j(ge.fromString(e).popFirst(5))}static empty(){return new j(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new ge(e.slice()))}}function cM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=W.fromTimestamp(i===1e9?new Ue(n+1,0):new Ue(n,i));return new qi(s,j.empty(),e)}function uM(t){return new qi(t.readTime,t.key,-1)}class qi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new qi(W.min(),j.empty(),-1)}static max(){return new qi(W.max(),j.empty(),-1)}}function hM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t){if(t.code!==T.FAILED_PRECONDITION||t.message!==dM)throw t;O("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,i)=>{n(e)})}static reject(e){return new N((n,i)=>{i(e)})}static waitFor(e){return new N((n,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(e){let n=N.resolve(!1);for(const i of e)n=n.next(s=>s?N.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new N((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(e,n){return new N((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function Cl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Am.ct=-1;function Fh(t){return t==null}function ju(t){return t===0&&1/t==-1/0}function pM(t){return typeof t=="number"&&Number.isInteger(t)&&!ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new _e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new _e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sc(this.root,e,this.comparator,!0)}}class sc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??Ye.RED,this.left=s??Ye.EMPTY,this.right=r??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new Ye(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ye.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();const e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(t,e,n,i,s){return this}insert(t,e,n){return new Ye(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new z0(this.data.getIterator())}getIteratorFrom(e){return new z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new ht(lt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wr(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new cb("Invalid base64 string: "+s):s}}(e);return new pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const gM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gi(t){if(fe(!!t),typeof t=="string"){let e=0;const n=gM.exec(t);if(fe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Us(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Rm(t){const e=t.mapValue.fields.__previous_value__;return Pm(e)?Rm(e):e}function Ka(t){const e=Gi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,i,s,r,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class qa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new qa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pm(t)?4:yM(t)?9007199254740991:10:B()}function Mn(t,e){if(t===e)return!0;const n=zs(t);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ka(t).isEqual(Ka(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=Gi(i.timestampValue),o=Gi(s.timestampValue);return r.seconds===o.seconds&&r.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Us(i.bytesValue).isEqual(Us(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return De(i.geoPointValue.latitude)===De(s.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return De(i.integerValue)===De(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=De(i.doubleValue),o=De(s.doubleValue);return r===o?ju(r)===ju(o):isNaN(r)&&isNaN(o)}return!1}(t,e);case 9:return Wr(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:return function(i,s){const r=i.mapValue.fields||{},o=s.mapValue.fields||{};if(U0(r)!==U0(o))return!1;for(const a in r)if(r.hasOwnProperty(a)&&(o[a]===void 0||!Mn(r[a],o[a])))return!1;return!0}(t,e);default:return B()}}function Ga(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function Kr(t,e){if(t===e)return 0;const n=zs(t),i=zs(e);if(n!==i)return ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(s,r){const o=De(s.integerValue||s.doubleValue),a=De(r.integerValue||r.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return B0(t.timestampValue,e.timestampValue);case 4:return B0(Ka(t),Ka(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(s,r){const o=Us(s),a=Us(r);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,r){const o=s.split("/"),a=r.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ee(o[l],a[l]);if(c!==0)return c}return ee(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,r){const o=ee(De(s.latitude),De(r.latitude));return o!==0?o:ee(De(s.longitude),De(r.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,r){const o=s.values||[],a=r.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Kr(o[l],a[l]);if(c)return c}return ee(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,r){if(s===rc.mapValue&&r===rc.mapValue)return 0;if(s===rc.mapValue)return 1;if(r===rc.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=r.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=ee(a[u],c[u]);if(h!==0)return h;const d=Kr(o[a[u]],l[c[u]]);if(d!==0)return d}return ee(a.length,c.length)}(t.mapValue,e.mapValue);default:throw B()}}function B0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Gi(t),i=Gi(e),s=ee(n.seconds,i.seconds);return s!==0?s:ee(n.nanos,i.nanos)}function qr(t){return Tp(t)}function Tp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const s=Gi(i);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Us(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,j.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let s="[",r=!0;for(const o of i.values||[])r?r=!1:s+=",",s+=Tp(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",o=!0;for(const a of s)o?o=!1:r+=",",r+=`${a}:${Tp(i.fields[a])}`;return r+"}"}(t.mapValue):B();var e,n}function Ip(t){return!!t&&"integerValue"in t}function Dm(t){return!!t&&"arrayValue"in t}function V0(t){return!!t&&"nullValue"in t}function H0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zc(t){return!!t&&"mapValue"in t}function ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ra(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!zc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(n)}setAll(e){let n=lt.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=ra(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());zc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];zc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){Xs(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Tt(ra(this.value))}}function ub(t){const e=[];return Xs(t.fields,(n,i)=>{const s=new lt([n]);if(zc(i)){const r=ub(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,i,s,r,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new at(e,0,W.min(),W.min(),W.min(),Tt.empty(),0)}static newFoundDocument(e,n,i,s){return new at(e,1,n,W.min(),i,s,0)}static newNoDocument(e,n){return new at(e,2,n,W.min(),W.min(),Tt.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,W.min(),W.min(),Tt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.position=e,this.inclusive=n}}function W0(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(r.field.isKeyField()?i=j.comparator(j.fromName(o.referenceValue),n.key):i=Kr(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function K0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n="asc"){this.field=e,this.dir=n}}function vM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{}class $e extends hb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new xM(e,n,i):n==="array-contains"?new SM(e,i):n==="in"?new bM(e,i):n==="not-in"?new EM(e,i):n==="array-contains-any"?new CM(e,i):new $e(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new _M(e,i):new kM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Kr(n,this.value)):n!==null&&zs(this.value)===zs(n)&&this.matchesComparison(Kr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class On extends hb{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new On(e,n)}matches(e){return db(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function db(t){return t.op==="and"}function fb(t){return wM(t)&&db(t)}function wM(t){for(const e of t.filters)if(e instanceof On)return!1;return!0}function Np(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+qr(t.value);if(fb(t))return t.filters.map(e=>Np(e)).join(",");{const e=t.filters.map(n=>Np(n)).join(",");return`${t.op}(${e})`}}function pb(t,e){return t instanceof $e?function(n,i){return i instanceof $e&&n.op===i.op&&n.field.isEqual(i.field)&&Mn(n.value,i.value)}(t,e):t instanceof On?function(n,i){return i instanceof On&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,r,o)=>s&&pb(r,i.filters[o]),!0):!1}(t,e):void B()}function gb(t){return t instanceof $e?function(e){return`${e.field.canonicalString()} ${e.op} ${qr(e.value)}`}(t):t instanceof On?function(e){return e.op.toString()+" {"+e.getFilters().map(gb).join(" ,")+"}"}(t):"Filter"}class xM extends $e{constructor(e,n,i){super(e,n,i),this.key=j.fromName(i.referenceValue)}matches(e){const n=j.comparator(e.key,this.key);return this.matchesComparison(n)}}class _M extends $e{constructor(e,n){super(e,"in",n),this.keys=mb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kM extends $e{constructor(e,n){super(e,"not-in",n),this.keys=mb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>j.fromName(i.referenceValue))}class SM extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dm(n)&&Ga(n.arrayValue,this.value)}}class bM extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ga(this.value.arrayValue,n)}}class EM extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ga(this.value.arrayValue,n)}}class CM extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ga(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,n=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.dt=null}}function q0(t,e=null,n=[],i=[],s=null,r=null,o=null){return new TM(t,e,n,i,s,r,o)}function Mm(t){const e=K(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Np(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>qr(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>qr(i)).join(",")),e.dt=n}return e.dt}function Om(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!pb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!K0(t.startAt,e.startAt)&&K0(t.endAt,e.endAt)}function Ap(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function IM(t,e,n,i,s,r,o,a){return new Uh(t,e,n,i,s,r,o,a)}function Lm(t){return new Uh(t)}function G0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NM(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function AM(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function PM(t){return t.collectionGroup!==null}function Ar(t){const e=K(t);if(e.wt===null){e.wt=[];const n=AM(e),i=NM(e);if(n!==null&&i===null)n.isKeyField()||e.wt.push(new oa(n)),e.wt.push(new oa(lt.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e.wt.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new oa(lt.keyField(),r))}}}return e.wt}function ai(t){const e=K(t);if(!e._t)if(e.limitType==="F")e._t=q0(e.path,e.collectionGroup,Ar(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const r of Ar(e)){const o=r.dir==="desc"?"asc":"desc";n.push(new oa(r.field,o))}const i=e.endAt?new Fu(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Fu(e.startAt.position,e.startAt.inclusive):null;e._t=q0(e.path,e.collectionGroup,n,e.filters,e.limit,i,s)}return e._t}function Pp(t,e,n){return new Uh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zh(t,e){return Om(ai(t),ai(e))&&t.limitType===e.limitType}function yb(t){return`${Mm(ai(t))}|lt:${t.limitType}`}function Rp(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>gb(i)).join(", ")}]`),Fh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>qr(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>qr(i)).join(",")),`Target(${n})`}(ai(t))}; limitType=${t.limitType})`}function Bh(t,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):j.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,i){for(const s of Ar(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(s,r,o){const a=W0(s,r,o);return s.inclusive?a<=0:a<0}(n.startAt,Ar(n),i)||n.endAt&&!function(s,r,o){const a=W0(s,r,o);return s.inclusive?a>=0:a>0}(n.endAt,Ar(n),i))}(t,e)}function RM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function vb(t){return(e,n)=>{let i=!1;for(const s of Ar(t)){const r=DM(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function DM(t,e,n){const i=t.field.isKeyField()?j.comparator(e.key,n.key):function(s,r,o){const a=r.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Kr(a,l):B()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return B()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return lb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new _e(j.comparator);function li(){return MM}const wb=new _e(j.comparator);function zo(...t){let e=wb;for(const n of t)e=e.insert(n.key,n);return e}function xb(t){let e=wb;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function _s(){return aa()}function _b(){return aa()}function aa(){return new po(t=>t.toString(),(t,e)=>t.isEqual(e))}const OM=new _e(j.comparator),LM=new ht(j.comparator);function Y(...t){let e=LM;for(const n of t)e=e.add(n);return e}const $M=new ht(ee);function jM(){return $M}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function Sb(t){return{integerValue:""+t}}function FM(t,e){return pM(e)?Sb(e):kb(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(){this._=void 0}}function UM(t,e,n){return t instanceof Uu?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Pm(s)&&(s=Rm(s)),s&&(r.fields.__previous_value__=s),{mapValue:r}}(n,e):t instanceof Ya?Eb(t,e):t instanceof Qa?Cb(t,e):function(i,s){const r=bb(i,s),o=Y0(r)+Y0(i.gt);return Ip(r)&&Ip(i.gt)?Sb(o):kb(i.serializer,o)}(t,e)}function zM(t,e,n){return t instanceof Ya?Eb(t,e):t instanceof Qa?Cb(t,e):n}function bb(t,e){return t instanceof zu?Ip(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class Uu extends Vh{}class Ya extends Vh{constructor(e){super(),this.elements=e}}function Eb(t,e){const n=Tb(e);for(const i of t.elements)n.some(s=>Mn(s,i))||n.push(i);return{arrayValue:{values:n}}}class Qa extends Vh{constructor(e){super(),this.elements=e}}function Cb(t,e){let n=Tb(e);for(const i of t.elements)n=n.filter(s=>!Mn(s,i));return{arrayValue:{values:n}}}class zu extends Vh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function Y0(t){return De(t.integerValue||t.doubleValue)}function Tb(t){return Dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BM(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Ya&&i instanceof Ya||n instanceof Qa&&i instanceof Qa?Wr(n.elements,i.elements,Mn):n instanceof zu&&i instanceof zu?Mn(n.gt,i.gt):n instanceof Uu&&i instanceof Uu}(t.transform,e.transform)}class VM{constructor(e,n){this.version=e,this.transformResults=n}}class Rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hh{}function Ib(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ab(t.key,Rn.none()):new Tl(t.key,t.data,Rn.none());{const n=t.data,i=Tt.empty();let s=new ht(lt.comparator);for(let r of e.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new ss(t.key,i,new Ft(s.toArray()),Rn.none())}}function HM(t,e,n){t instanceof Tl?function(i,s,r){const o=i.value.clone(),a=X0(i.fieldTransforms,s,r.transformResults);o.setAll(a),s.convertToFoundDocument(r.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ss?function(i,s,r){if(!Bc(i.precondition,s))return void s.convertToUnknownDocument(r.version);const o=X0(i.fieldTransforms,s,r.transformResults),a=s.data;a.setAll(Nb(i)),a.setAll(o),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(t,e,n):function(i,s,r){s.convertToNoDocument(r.version).setHasCommittedMutations()}(0,e,n)}function la(t,e,n,i){return t instanceof Tl?function(s,r,o,a){if(!Bc(s.precondition,r))return o;const l=s.value.clone(),c=J0(s.fieldTransforms,a,r);return l.setAll(c),r.convertToFoundDocument(r.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof ss?function(s,r,o,a){if(!Bc(s.precondition,r))return o;const l=J0(s.fieldTransforms,a,r),c=r.data;return c.setAll(Nb(s)),c.setAll(l),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(u=>u.field))}(t,e,n,i):function(s,r,o){return Bc(s.precondition,r)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):o}(t,e,n)}function WM(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=bb(i.transform,s||null);r!=null&&(n===null&&(n=Tt.empty()),n.set(i.field,r))}return n||null}function Q0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Wr(n,i,(s,r)=>BM(s,r))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tl extends Hh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ss extends Hh{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Nb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function X0(t,e,n){const i=new Map;fe(t.length===n.length);for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,zM(o,a,n[s]))}return i}function J0(t,e,n){const i=new Map;for(const s of t){const r=s.transform,o=n.data.field(s.field);i.set(s.field,UM(r,o,e))}return i}class Ab extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KM extends Hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&HM(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=la(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=la(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=_b();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const l=Ib(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(W.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Y())}isEqual(e){return this.batchId===e.batchId&&Wr(this.mutations,e.mutations,(n,i)=>Q0(n,i))&&Wr(this.baseMutations,e.baseMutations,(n,i)=>Q0(n,i))}}class $m{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){fe(e.mutations.length===i.length);let s=OM;const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new $m(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,X;function QM(t){switch(t){default:return B();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function Pb(t){if(t===void 0)return oi("GRPC error has no .code"),T.UNKNOWN;switch(t){case Re.OK:return T.OK;case Re.CANCELLED:return T.CANCELLED;case Re.UNKNOWN:return T.UNKNOWN;case Re.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Re.INTERNAL:return T.INTERNAL;case Re.UNAVAILABLE:return T.UNAVAILABLE;case Re.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Re.NOT_FOUND:return T.NOT_FOUND;case Re.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Re.ABORTED:return T.ABORTED;case Re.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Re.DATA_LOSS:return T.DATA_LOSS;default:return B()}}(X=Re||(Re={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return oc}static getOrCreateInstance(){return oc===null&&(oc=new jm),oc}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let oc=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new Nr([4294967295,4294967295],0);function Z0(t){const e=XM().encode(t),n=new ZD;return n.update(e),new Uint8Array(n.digest())}function ew(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Nr([n,i],0),new Nr([s,r],0)]}class Fm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Bo(`Invalid padding: ${n}`);if(i<0)throw new Bo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Nr.fromNumber(this.It)}Et(e,n,i){let s=e.add(n.multiply(Nr.fromNumber(i)));return s.compare(JM)===1&&(s=new Nr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Z0(e),[i,s]=ew(n);for(let r=0;r<this.hashCount;r++){const o=this.Et(i,s,r);if(!this.At(o))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new Fm(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=Z0(e),[i,s]=ew(n);for(let r=0;r<this.hashCount;r++){const o=this.Et(i,s,r);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Wh(W.min(),s,new _e(ee),li(),Y())}}class Il{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Il(i,n,Y(),Y(),Y())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n,i,s){this.Pt=e,this.removedTargetIds=n,this.key=i,this.bt=s}}class Rb{constructor(e,n){this.targetId=e,this.Vt=n}}class Db{constructor(e,n,i=pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class tw{constructor(){this.St=0,this.Dt=iw(),this.Ct=pt.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Y(),n=Y(),i=Y();return this.Dt.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:B()}}),new Il(this.Ct,this.xt,e,n,i)}Ft(){this.Nt=!1,this.Dt=iw()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class ZM{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=li(),this.zt=nw(),this.Wt=new _e(ee)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const i=this.Zt(n);switch(e.state){case 0:this.te(n)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(n);break;case 3:this.te(n)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),i.$t(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((i,s)=>{this.te(s)&&n(s)})}ne(e){var n;const i=e.targetId,s=e.Vt.count,r=this.se(i);if(r){const o=r.target;if(Ap(o))if(s===0){const a=new j(o.path);this.Yt(i,a,at.newNoDocument(a,W.min()))}else fe(s===1);else{const a=this.ie(i);if(a!==s){const l=this.re(e,a);if(l!==0){this.ee(i);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(i,c)}(n=jm.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(c,u,h){var d,f,m,v,w,g;const y={localCacheCount:u,existenceFilterCount:h.count},x=h.unchangedNames;return x&&(y.bloomFilter={applied:c===0,hashCount:(d=x==null?void 0:x.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(v=(m=(f=x==null?void 0:x.bits)===null||f===void 0?void 0:f.bitmap)===null||m===void 0?void 0:m.length)!==null&&v!==void 0?v:0,padding:(g=(w=x==null?void 0:x.bits)===null||w===void 0?void 0:w.padding)!==null&&g!==void 0?g:0}),y}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:i,count:s}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:r="",padding:o=0},hashCount:a=0}=i;let l,c;try{l=Us(r).toUint8Array()}catch(u){if(u instanceof cb)return Hr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new Fm(l,o,a)}catch(u){return Hr(u instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return c.It===0?1:s!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const i=this.Gt.getRemoteKeysForTarget(e);let s=0;return i.forEach(r=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;n.vt(a)||(this.Yt(e,r,null),s++)}),s}ce(e){const n=new Map;this.Qt.forEach((r,o)=>{const a=this.se(o);if(a){if(r.current&&Ap(a.target)){const l=new j(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,at.newNoDocument(l,e))}r.Mt&&(n.set(o,r.Ot()),r.Ft())}});let i=Y();this.zt.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.jt.forEach((r,o)=>o.setReadTime(e));const s=new Wh(e,n,this.Wt,this.jt,i);return this.jt=li(),this.zt=nw(),this.Wt=new _e(ee),s}Jt(e,n){if(!this.te(e))return;const i=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,i),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,i){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,n)?s.Bt(n,1):s.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),i&&(this.jt=this.jt.insert(n,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new tw,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new ht(ee),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new tw),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function nw(){return new _e(j.comparator)}function iw(){return new _e(j.comparator)}const eO=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),tO=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),nO=(()=>({and:"AND",or:"OR"}))();class iO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Dp(t,e){return t.useProto3Json||Fh(e)?e:{value:e}}function Bu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function sO(t,e){return Bu(t,e.toTimestamp())}function Dn(t){return fe(!!t),W.fromTimestamp(function(e){const n=Gi(e);return new Ue(n.seconds,n.nanos)}(t))}function Um(t,e){return function(n){return new ge(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Ob(t){const e=ge.fromString(t);return fe(Fb(e)),e}function Mp(t,e){return Um(t.databaseId,e.path)}function qd(t,e){const n=Ob(e);if(n.get(1)!==t.databaseId.projectId)throw new $(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(Lb(n))}function Op(t,e){return Um(t.databaseId,e)}function rO(t){const e=Ob(t);return e.length===4?ge.emptyPath():Lb(e)}function Lp(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Lb(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sw(t,e,n){return{name:Mp(t,e),fields:n.value.mapValue.fields}}function oO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(l,c){return l.useProto3Json?(fe(c===void 0||typeof c=="string"),pt.fromBase64String(c||"")):(fe(c===void 0||c instanceof Uint8Array),pt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?T.UNKNOWN:Pb(l.code);return new $(c,l.message||"")}(o);n=new Db(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=qd(t,i.document.name),r=Dn(i.document.updateTime),o=i.document.createTime?Dn(i.document.createTime):W.min(),a=new Tt({mapValue:{fields:i.document.fields}}),l=at.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Vc(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=qd(t,i.document),r=i.readTime?Dn(i.readTime):W.min(),o=at.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Vc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=qd(t,i.document),r=i.removedTargetIds||[];n=new Vc([],r,s,null)}else{if(!("filter"in e))return B();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new YM(s,r),a=i.targetId;n=new Rb(a,o)}}return n}function aO(t,e){let n;if(e instanceof Tl)n={update:sw(t,e.key,e.value)};else if(e instanceof Ab)n={delete:Mp(t,e.key)};else if(e instanceof ss)n={update:sw(t,e.key,e.data),updateMask:mO(e.fieldMask)};else{if(!(e instanceof KM))return B();n={verify:Mp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const o=r.transform;if(o instanceof Uu)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ya)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Qa)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zu)return{fieldPath:r.field.canonicalString(),increment:o.gt};throw B()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:sO(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:B()}(t,e.precondition)),n}function lO(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(i,s){let r=i.updateTime?Dn(i.updateTime):Dn(s);return r.isEqual(W.min())&&(r=Dn(s)),new VM(r,i.transformResults||[])}(n,e))):[]}function cO(t,e){return{documents:[Op(t,e.path)]}}function uO(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Op(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Op(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(l){if(l.length!==0)return jb(On.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const r=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:sr(u.field),direction:fO(u.dir)}}(c))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=Dp(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function hO(t){let e=rO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){fe(i===1);const u=n.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let r=[];n.where&&(r=function(u){const h=$b(u);return h instanceof On&&fb(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new oa(rr(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Fh(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,d=u.values||[];return new Fu(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,d=u.values||[];return new Fu(d,h)}(n.endAt)),IM(e,s,o,r,a,"F",l,c)}function dO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return B()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $b(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=rr(e.unaryFilter.field);return $e.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=rr(e.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rr(e.unaryFilter.field);return $e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=rr(e.unaryFilter.field);return $e.create(r,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(t):t.fieldFilter!==void 0?function(e){return $e.create(rr(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return On.create(e.compositeFilter.filters.map(n=>$b(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return B()}}(e.compositeFilter.op))}(t):B()}function fO(t){return eO[t]}function pO(t){return tO[t]}function gO(t){return nO[t]}function sr(t){return{fieldPath:t.canonicalString()}}function rr(t){return lt.fromServerFormat(t.fieldPath)}function jb(t){return t instanceof $e?function(e){if(e.op==="=="){if(H0(e.value))return{unaryFilter:{field:sr(e.field),op:"IS_NAN"}};if(V0(e.value))return{unaryFilter:{field:sr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(H0(e.value))return{unaryFilter:{field:sr(e.field),op:"IS_NOT_NAN"}};if(V0(e.value))return{unaryFilter:{field:sr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sr(e.field),op:pO(e.op),value:e.value}}}(t):t instanceof On?function(e){const n=e.getFilters().map(i=>jb(i));return n.length===1?n[0]:{compositeFilter:{op:gO(e.op),filters:n}}}(t):B()}function mO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,i,s,r=W.min(),o=W.min(),a=pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ti(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ti(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e){this.fe=e}}function vO(t){const e=hO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Pp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.rn=new xO}addToCollectionParentIndex(e,n){return this.rn.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(qi.min())}updateCollectionGroup(e,n,i){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class xO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new ht(ge.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new ht(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Gr(0)}static Mn(){return new Gr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.changes=new po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?N.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&la(i.mutation,s,Ft.empty(),Ue.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Y()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Y()){const s=_s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let o=zo();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=_s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Y()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,s){let r=li();const o=aa(),a=aa();return n.forEach((l,c)=>{const u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof ss)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),la(u.mutation,c,u.mutation.getFieldMask(),Ue.now())):o.set(c.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new kO(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=aa();let s=new _e((o,a)=>o-a),r=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Ft.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(s.get(a.batchId)||Y()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=_b();u.forEach(d=>{if(!r.has(d)){const f=Ib(n.get(d),i.get(d));f!==null&&h.set(d,f),r=r.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return N.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(s){return j.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):N.resolve(_s());let a=-1,l=r;return o.next(c=>N.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?N.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,Y())).next(u=>({batchId:a,changes:xb(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(i=>{let s=zo();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const s=n.collectionGroup;let r=zo();return this.indexManager.getCollectionParents(e,s).next(o=>N.forEach(o,a=>{const l=function(c,u){return new Uh(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,h)=>{r=r.insert(u,h)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(r=>(s=r,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s))).next(r=>{s.forEach((a,l)=>{const c=l.getKey();r.get(c)===null&&(r=r.insert(c,at.newInvalidDocument(c)))});let o=zo();return r.forEach((a,l)=>{const c=s.get(a);c!==void 0&&la(c.mutation,l,Ft.empty(),Ue.now()),Bh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return N.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var i;return this.cs.set(n.id,{id:(i=n).id,version:i.version,createTime:Dn(i.createTime)}),N.resolve()}getNamedQuery(e,n){return N.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(i){return{name:i.name,query:vO(i.bundledQuery),readTime:Dn(i.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(){this.overlays=new _e(j.comparator),this.ls=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const i=_s();return N.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.we(e,n,r)}),N.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.ls.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.ls.delete(i)),N.resolve()}getOverlaysForCollection(e,n,i){const s=_s(),r=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return N.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new _e((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=_s(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=_s(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return N.resolve(a)}we(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.ls.get(s.largestBatchId).delete(i.key);this.ls.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new GM(n,i));let r=this.ls.get(n);r===void 0&&(r=Y(),this.ls.set(n,r)),this.ls.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.fs=new ht(Be.ds),this.ws=new ht(Be._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const i=new Be(e,n);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.ys(new Be(e,n))}ps(e,n){e.forEach(i=>this.removeReference(i,n))}Is(e){const n=new j(new ge([])),i=new Be(n,e),s=new Be(n,e+1),r=[];return this.ws.forEachInRange([i,s],o=>{this.ys(o),r.push(o.key)}),r}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new j(new ge([])),i=new Be(n,e),s=new Be(n,e+1);let r=Y();return this.ws.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new Be(e,0),i=this.fs.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Be{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return j.comparator(e.key,n.key)||ee(e.As,n.As)}static _s(e,n){return ee(e.As,n.As)||j.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new ht(Be.ds)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qM(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.Rs=this.Rs.add(new Be(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.bs(i),r=s<0?0:s;return N.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Be(n,0),s=new Be(n,Number.POSITIVE_INFINITY),r=[];return this.Rs.forEachInRange([i,s],o=>{const a=this.Ps(o.As);r.push(a)}),N.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ht(ee);return n.forEach(s=>{const r=new Be(s,0),o=new Be(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([r,o],a=>{i=i.add(a.As)})}),N.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;j.isDocumentKey(r)||(r=r.child(""));const o=new Be(new j(r),0);let a=new ht(ee);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.As)),!0)},o),N.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(i=>{const s=this.Ps(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return N.forEach(n.mutations,s=>{const r=new Be(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,n){const i=new Be(n,0),s=this.Rs.firstAfterOrEqual(i);return N.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.Ds=e,this.docs=new _e(j.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.Ds(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return N.resolve(i?i.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let i=li();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():at.newInvalidDocument(s))}),N.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=li();const o=n.path,a=new j(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||hM(uM(u),i)<=0||(s.has(u.key)||Bh(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return N.resolve(r)}getAllFromCollectionGroup(e,n,i,s){B()}Cs(e,n){return N.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new IO(this)}getSize(e){return N.resolve(this.size)}}class IO extends _O{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.os.addEntry(e,s)):this.os.removeEntry(i)}),N.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.persistence=e,this.xs=new po(n=>Mm(n),Om),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Ns=0,this.ks=new zm,this.targetCount=0,this.Ms=Gr.kn()}forEachTarget(e,n){return this.xs.forEach((i,s)=>n(s)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Ns&&(this.Ns=n),N.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Gr(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Fn(n),N.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.xs.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),N.waitFor(r).next(()=>s)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const i=this.xs.get(n)||null;return N.resolve(i)}addMatchingKeys(e,n,i){return this.ks.gs(n,i),N.resolve()}removeMatchingKeys(e,n,i){this.ks.ps(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),N.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),N.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ks.Es(n);return N.resolve(i)}containsKey(e,n){return N.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n){this.$s={},this.overlays={},this.Os=new Am(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new NO(this),this.indexManager=new wO,this.remoteDocumentCache=function(i){return new TO(i)}(i=>this.referenceDelegate.Ls(i)),this.serializer=new yO(n),this.qs=new bO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new EO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.$s[e.toKey()];return i||(i=new CO(n,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,i){O("MemoryPersistence","Starting transaction:",e);const s=new PO(this.Os.next());return this.referenceDelegate.Us(),i(s).next(r=>this.referenceDelegate.Ks(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Gs(e,n){return N.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,n)))}}class PO extends fM{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.Qs=new zm,this.js=null}static zs(e){return new Bm(e)}get Ws(){if(this.js)return this.js;throw B()}addReference(e,n,i){return this.Qs.addReference(i,n),this.Ws.delete(i.toString()),N.resolve()}removeReference(e,n,i){return this.Qs.removeReference(i,n),this.Ws.add(i.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),N.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(s=>this.Ws.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.Ws.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Ws,i=>{const s=j.fromPath(i);return this.Hs(e,s).next(r=>{r||n.removeEntry(s,W.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(i=>{i?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return N.or([()=>N.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Fi=i,this.Bi=s}static Li(e,n){let i=Y(),s=Y();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Vm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,i,s){return this.Ki(e,n).next(r=>r||this.Gi(e,n,s,i)).next(r=>r||this.Qi(e,n))}Ki(e,n){if(G0(n))return N.resolve(null);let i=ai(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Pp(n,null,"F"),i=ai(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=Y(...r);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ji(n,a);return this.zi(n,c,o,l.readTime)?this.Ki(e,Pp(n,null,"F")):this.Wi(e,c,n,l)}))})))}Gi(e,n,i,s){return G0(n)||s.isEqual(W.min())?this.Qi(e,n):this.Ui.getDocuments(e,i).next(r=>{const o=this.ji(n,r);return this.zi(n,o,i,s)?this.Qi(e,n):(F0()<=Z.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Rp(n)),this.Wi(e,o,n,cM(s,-1)))})}ji(e,n){let i=new ht(vb(e));return n.forEach((s,r)=>{Bh(e,r)&&(i=i.add(r))}),i}zi(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Qi(e,n){return F0()<=Z.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Rp(n)),this.Ui.getDocumentsMatchingQuery(e,n,qi.min())}Wi(e,n,i,s){return this.Ui.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,n,i,s){this.persistence=e,this.Hi=n,this.serializer=s,this.Ji=new _e(ee),this.Yi=new po(r=>Mm(r),Om),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function MO(t,e,n,i){return new DO(t,e,n,i)}async function Ub(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.tr(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let l=Y();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}function OO(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let d=N.resolve();return h.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(m=>{const v=l.docVersions.get(f);fe(v!==null),m.version.compareTo(v)<0&&(u.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=Y();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function zb(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function LO(t,e){const n=K(t),i=e.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const a=[];e.targetChanges.forEach((u,h)=>{const d=s.get(h);if(!d)return;a.push(n.Bs.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(r,u.addedDocuments,h)));let f=d.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(pt.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),s=s.insert(h,f),function(m,v,w){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(d,f,u)&&a.push(n.Bs.updateTargetData(r,f))});let l=li(),c=Y();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push($O(r,o,e.documentUpdates).next(u=>{l=u.nr,c=u.sr})),!i.isEqual(W.min())){const u=n.Bs.getLastRemoteSnapshotVersion(r).next(h=>n.Bs.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return N.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.Ji=s,r))}function $O(t,e,n){let i=Y(),s=Y();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let o=li();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(W.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:s}})}function jO(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function FO(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Bs.getTargetData(i,e).next(r=>r?(s=r,N.resolve(s)):n.Bs.allocateTargetId(i).next(o=>(s=new Ti(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Bs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ji.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(i.targetId,i),n.Yi.set(e,i.targetId)),i})}async function $p(t,e,n){const i=K(t),s=i.Ji.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Cl(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(s.target)}function rw(t,e,n){const i=K(t);let s=W.min(),r=Y();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=K(a),h=u.Yi.get(c);return h!==void 0?N.resolve(u.Ji.get(h)):u.Bs.getTargetData(l,c)}(i,o,ai(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,n?s:W.min(),n?r:Y())).next(a=>(UO(i,RM(e),a),{documents:a,ir:r})))}function UO(t,e,n){let i=t.Xi.get(e)||W.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Xi.set(e,i)}class ow{constructor(){this.activeTargetIds=jM()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zO{constructor(){this.Hr=new ow,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,i){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new ow,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=null;function Gd(){return ac===null?ac=268435456+Math.round(2147483648*Math.random()):ac++,"0x"+ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it="WebChannelConnection";class WO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,i,s,r){const o=Gd(),a=this.To(e,n);O("RestConnection",`Sending RPC '${e}' ${o}:`,a,i);const l={};return this.Eo(l,s,r),this.Ao(e,a,l,i).then(c=>(O("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Hr("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}vo(e,n,i,s,r,o){return this.Io(e,n,i,s,r)}Eo(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+fo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}To(e,n){const i=VO[e];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,i,s){const r=Gd();return new Promise((o,a)=>{const l=new JD;l.setWithCredentials(!0),l.listenOnce(YD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Kd.NO_ERROR:const u=l.getResponseJson();O(it,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case Kd.TIMEOUT:O(it,`RPC '${e}' ${r} timed out`),a(new $(T.DEADLINE_EXCEEDED,"Request time out"));break;case Kd.HTTP_ERROR:const h=l.getStatus();if(O(it,`RPC '${e}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const m=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(w)>=0?w:T.UNKNOWN}(f.status);a(new $(m,f.message))}else a(new $(T.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new $(T.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{O(it,`RPC '${e}' ${r} completed.`)}});const c=JSON.stringify(s);O(it,`RPC '${e}' ${r} sending request:`,s),l.send(n,"POST",c,i,15)})}Ro(e,n,i){const s=Gd(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qD(),a=GD(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new XD({})),this.Eo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=r.join("");O(it,`Creating RPC '${e}' stream ${s}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const m=new HO({ro:w=>{f?O(it,`Not sending because RPC '${e}' stream ${s} is closed:`,w):(d||(O(it,`Opening RPC '${e}' stream ${s} transport.`),h.open(),d=!0),O(it,`RPC '${e}' stream ${s} sending:`,w),h.send(w))},oo:()=>h.close()}),v=(w,g,y)=>{w.listen(g,x=>{try{y(x)}catch(k){setTimeout(()=>{throw k},0)}})};return v(h,ic.EventType.OPEN,()=>{f||O(it,`RPC '${e}' stream ${s} transport opened.`)}),v(h,ic.EventType.CLOSE,()=>{f||(f=!0,O(it,`RPC '${e}' stream ${s} transport closed`),m.wo())}),v(h,ic.EventType.ERROR,w=>{f||(f=!0,Hr(it,`RPC '${e}' stream ${s} transport errored:`,w),m.wo(new $(T.UNAVAILABLE,"The operation could not be completed")))}),v(h,ic.EventType.MESSAGE,w=>{var g;if(!f){const y=w.data[0];fe(!!y);const x=y,k=x.error||((g=x[0])===null||g===void 0?void 0:g.error);if(k){O(it,`RPC '${e}' stream ${s} received error:`,k);const _=k.status;let S=function(E){const A=Re[E];if(A!==void 0)return Pb(A)}(_),C=k.message;S===void 0&&(S=T.INTERNAL,C="Unknown error status: "+_+" with message "+k.message),f=!0,m.wo(new $(S,C)),h.close()}else O(it,`RPC '${e}' stream ${s} received:`,y),m._o(y)}}),v(a,QD.STAT_EVENT,w=>{w.stat===$0.PROXY?O(it,`RPC '${e}' stream ${s} detected buffering proxy`):w.stat===$0.NOPROXY&&O(it,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.fo()},0),m}}function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(t){return new iO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,i=1e3,s=1.5,r=6e4){this.ii=e,this.timerId=n,this.Po=i,this.bo=s,this.Vo=r,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),s=Math.max(0,n-i);s>0&&O("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n,i,s,r,o,a,l){this.ii=e,this.$o=i,this.Oo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Bb(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(oi(n.toString()),oi("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Fo===n&&this.Zo(i,s)},i=>{e(()=>{const s=new $(T.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(s)})})}Zo(e,n){const i=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{i(()=>this.tu(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KO extends Vb{constructor(e,n,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=oO(this.serializer,e),i=function(s){if(!("targetChange"in s))return W.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?W.min():r.readTime?Dn(r.readTime):W.min()}(e);return this.listener.nu(n,i)}su(e){const n={};n.database=Lp(this.serializer),n.addTarget=function(s,r){let o;const a=r.target;if(o=Ap(a)?{documents:cO(s,a)}:{query:uO(s,a)},o.targetId=r.targetId,r.resumeToken.approximateByteSize()>0){o.resumeToken=Mb(s,r.resumeToken);const l=Dp(s,r.expectedCount);l!==null&&(o.expectedCount=l)}else if(r.snapshotVersion.compareTo(W.min())>0){o.readTime=Bu(s,r.snapshotVersion.toTimestamp());const l=Dp(s,r.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const i=dO(this.serializer,e);i&&(n.labels=i),this.Wo(n)}iu(e){const n={};n.database=Lp(this.serializer),n.removeTarget=e,this.Wo(n)}}class qO extends Vb{constructor(e,n,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=lO(e.writeResults,e.commitTime),i=Dn(e.commitTime);return this.listener.cu(i,n)}return fe(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Lp(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>aO(this.serializer,i))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new $(T.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.Io(e,n,i,s,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(T.UNKNOWN,s.toString())})}vo(e,n,i,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.vo(e,n,i,r,o,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new $(T.UNKNOWN,r.toString())})}terminate(){this.lu=!0}}class YO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(oi(n),this.mu=!1):O("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=r,this.Pu.Yr(o=>{i.enqueueAndForget(async()=>{Js(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=K(a);l.vu.add(4),await Nl(l),l.bu.set("Unknown"),l.vu.delete(4),await qh(l)}(this))})}),this.bu=new YO(i,s)}}async function qh(t){if(Js(t))for(const e of t.Ru)await e(!0)}async function Nl(t){for(const e of t.Ru)await e(!1)}function Hb(t,e){const n=K(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Km(n)?Wm(n):go(n).Ko()&&Hm(n,e))}function Wb(t,e){const n=K(t),i=go(n);n.Au.delete(e),i.Ko()&&Kb(n,e),n.Au.size===0&&(i.Ko()?i.jo():Js(n)&&n.bu.set("Unknown"))}function Hm(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).su(e)}function Kb(t,e){t.Vu.qt(e),go(t).iu(e)}function Wm(t){t.Vu=new ZM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),go(t).start(),t.bu.gu()}function Km(t){return Js(t)&&!go(t).Uo()&&t.Au.size>0}function Js(t){return K(t).vu.size===0}function qb(t){t.Vu=void 0}async function XO(t){t.Au.forEach((e,n)=>{Hm(t,e)})}async function JO(t,e){qb(t),Km(t)?(t.bu.Iu(e),Wm(t)):t.bu.set("Unknown")}async function ZO(t,e,n){if(t.bu.set("Online"),e instanceof Db&&e.state===2&&e.cause)try{await async function(i,s){const r=s.cause;for(const o of s.targetIds)i.Au.has(o)&&(await i.remoteSyncer.rejectListen(o,r),i.Au.delete(o),i.Vu.removeTarget(o))}(t,e)}catch(i){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Vu(t,i)}else if(e instanceof Vc?t.Vu.Ht(e):e instanceof Rb?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(W.min()))try{const i=await zb(t.localStore);n.compareTo(i)>=0&&await function(s,r){const o=s.Vu.ce(r);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=s.Au.get(l);c&&s.Au.set(l,c.withResumeToken(a.resumeToken,r))}}),o.targetMismatches.forEach((a,l)=>{const c=s.Au.get(a);if(!c)return;s.Au.set(a,c.withResumeToken(pt.EMPTY_BYTE_STRING,c.snapshotVersion)),Kb(s,a);const u=new Ti(c.target,a,l,c.sequenceNumber);Hm(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){O("RemoteStore","Failed to raise snapshot:",i),await Vu(t,i)}}async function Vu(t,e,n){if(!Cl(e))throw e;t.vu.add(1),await Nl(t),t.bu.set("Offline"),n||(n=()=>zb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{O("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await qh(t)})}function Gb(t,e){return e().catch(n=>Vu(t,n,e))}async function Gh(t){const e=K(t),n=Yi(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;eL(e);)try{const s=await jO(e.localStore,i);if(s===null){e.Eu.length===0&&n.jo();break}i=s.batchId,tL(e,s)}catch(s){await Vu(e,s)}Yb(e)&&Qb(e)}function eL(t){return Js(t)&&t.Eu.length<10}function tL(t,e){t.Eu.push(e);const n=Yi(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function Yb(t){return Js(t)&&!Yi(t).Uo()&&t.Eu.length>0}function Qb(t){Yi(t).start()}async function nL(t){Yi(t).hu()}async function iL(t){const e=Yi(t);for(const n of t.Eu)e.uu(n.mutations)}async function sL(t,e,n){const i=t.Eu.shift(),s=$m.from(i,e,n);await Gb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Gh(t)}async function rL(t,e){e&&Yi(t).ou&&await async function(n,i){if(s=i.code,QM(s)&&s!==T.ABORTED){const r=n.Eu.shift();Yi(n).Qo(),await Gb(n,()=>n.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Gh(n)}var s}(t,e),Yb(t)&&Qb(t)}async function lw(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const i=Js(n);n.vu.add(3),await Nl(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await qh(n)}async function oL(t,e){const n=K(t);e?(n.vu.delete(2),await qh(n)):e||(n.vu.add(2),await Nl(n),n.bu.set("Unknown"))}function go(t){return t.Su||(t.Su=function(e,n,i){const s=K(e);return s.fu(),new KO(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:XO.bind(null,t),ao:JO.bind(null,t),nu:ZO.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),Km(t)?Wm(t):t.bu.set("Unknown")):(await t.Su.stop(),qb(t))})),t.Su}function Yi(t){return t.Du||(t.Du=function(e,n,i){const s=K(e);return s.fu(),new qO(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{uo:nL.bind(null,t),ao:rL.bind(null,t),au:iL.bind(null,t),cu:sL.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Gh(t)):(await t.Du.stop(),t.Eu.length>0&&(O("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,i,s,r){const o=Date.now()+i,a=new qm(e,n,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(t,e){if(oi("AsyncQueue",`${e}: ${t}`),Cl(t))return new $(T.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this.comparator=e?(n,i)=>e(n,i)||j.comparator(n.key,i.key):(n,i)=>j.comparator(n.key,i.key),this.keyedMap=zo(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new Pr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Pr;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.Cu=new _e(j.comparator)}track(e){const n=e.doc.key,i=this.Cu.get(n);i?e.type!==0&&i.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&i.type!==1?this.Cu=this.Cu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Cu=this.Cu.remove(n):e.type===1&&i.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):B():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,i)=>{e.push(i)}),e}}class Yr{constructor(e,n,i,s,r,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yr(e,n,Pr.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.Nu=void 0,this.listeners=[]}}class lL{constructor(){this.queries=new po(e=>yb(e),zh),this.onlineState="Unknown",this.ku=new Set}}async function Xb(t,e){const n=K(t),i=e.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new aL),s)try{r.Nu=await n.onListen(i)}catch(o){const a=Gm(o,`Initialization of query '${Rp(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,r),r.listeners.push(e),e.Mu(n.onlineState),r.Nu&&e.$u(r.Nu)&&Ym(n)}async function Jb(t,e){const n=K(t),i=e.query;let s=!1;const r=n.queries.get(i);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),s=r.listeners.length===0)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function cL(t,e){const n=K(t);let i=!1;for(const s of e){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.listeners)a.$u(s)&&(i=!0);o.Nu=s}}i&&Ym(n)}function uL(t,e,n){const i=K(t),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(n);i.queries.delete(e)}function Ym(t){t.ku.forEach(e=>{e.next()})}class Zb{constructor(e,n,i){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Yr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Ku||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Yr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e){this.key=e}}class tE{constructor(e){this.key=e}}class hL{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Y(),this.mutatedKeys=Y(),this.tc=vb(e),this.ec=new Pr(this.tc)}get nc(){return this.Yu}sc(e,n){const i=n?n.ic:new cw,s=n?n.ec:this.ec;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,h)=>{const d=s.get(u),f=Bh(this.query,h)?h:null,m=!!d&&this.mutatedKeys.has(d.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let w=!1;d&&f?d.data.isEqual(f.data)?m!==v&&(i.track({type:3,doc:f}),w=!0):this.rc(d,f)||(i.track({type:2,doc:f}),w=!0,(l&&this.tc(f,l)>0||c&&this.tc(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),w=!0):d&&!f&&(i.track({type:1,doc:d}),w=!0,(l||c)&&(a=!0)),w&&(f?(o=o.add(f),r=v?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{ec:o,ic:i,zi:a,mutatedKeys:r}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const r=e.ic.xu();r.sort((c,u)=>function(h,d){const f=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return f(h)-f(d)}(c.type,u.type)||this.tc(c.doc,u.doc)),this.oc(i);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,r.length!==0||l?{snapshot:new Yr(this.query,e.ec,s,r,e.mutatedKeys,a===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new cw,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Y(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const n=[];return e.forEach(i=>{this.Zu.has(i)||n.push(new tE(i))}),this.Zu.forEach(i=>{e.has(i)||n.push(new eE(i))}),n}hc(e){this.Yu=e.ir,this.Zu=Y();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Yr.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class dL{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class fL{constructor(e){this.key=e,this.fc=!1}}class pL{constructor(e,n,i,s,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new po(a=>yb(a),zh),this._c=new Map,this.mc=new Set,this.gc=new _e(j.comparator),this.yc=new Map,this.Ic=new zm,this.Tc={},this.Ec=new Map,this.Ac=Gr.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function gL(t,e){const n=EL(t);let i,s;const r=n.wc.get(e);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.lc();else{const o=await FO(n.localStore,ai(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,s=await mL(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&Hb(n.remoteStore,o)}return s}async function mL(t,e,n,i,s){t.Rc=(h,d,f)=>async function(m,v,w,g){let y=v.view.sc(w);y.zi&&(y=await rw(m.localStore,v.query,!1).then(({documents:_})=>v.view.sc(_,y)));const x=g&&g.targetChanges.get(v.targetId),k=v.view.applyChanges(y,m.isPrimaryClient,x);return hw(m,v.targetId,k.cc),k.snapshot}(t,h,d,f);const r=await rw(t.localStore,e,!0),o=new hL(e,r.ir),a=o.sc(r.documents),l=Il.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);hw(t,n,c.cc);const u=new dL(e,n,o);return t.wc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}async function yL(t,e){const n=K(t),i=n.wc.get(e),s=n._c.get(i.targetId);if(s.length>1)return n._c.set(i.targetId,s.filter(r=>!zh(r,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await $p(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Wb(n.remoteStore,i.targetId),jp(n,i.targetId)}).catch(El)):(jp(n,i.targetId),await $p(n.localStore,i.targetId,!0))}async function vL(t,e,n){const i=CL(t);try{const s=await function(r,o){const a=K(r),l=Ue.now(),c=o.reduce((d,f)=>d.add(f.key),Y());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=li(),m=Y();return a.Zi.getEntries(d,c).next(v=>{f=v,f.forEach((w,g)=>{g.isValidDocument()||(m=m.add(w))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(v=>{u=v;const w=[];for(const g of o){const y=WM(g,u.get(g.key).overlayedDocument);y!=null&&w.push(new ss(g.key,y,ub(y.value.mapValue),Rn.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,w,o)}).next(v=>{h=v;const w=v.applyToLocalDocumentSet(u,m);return a.documentOverlayCache.saveOverlays(d,v.batchId,w)})}).then(()=>({batchId:h.batchId,changes:xb(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(r,o,a){let l=r.Tc[r.currentUser.toKey()];l||(l=new _e(ee)),l=l.insert(o,a),r.Tc[r.currentUser.toKey()]=l}(i,s.batchId,n),await Al(i,s.changes),await Gh(i.remoteStore)}catch(s){const r=Gm(s,"Failed to persist write");n.reject(r)}}async function nE(t,e){const n=K(t);try{const i=await LO(n.localStore,e);e.targetChanges.forEach((s,r)=>{const o=n.yc.get(r);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.fc=!0:s.modifiedDocuments.size>0?fe(o.fc):s.removedDocuments.size>0&&(fe(o.fc),o.fc=!1))}),await Al(n,i,e)}catch(i){await El(i)}}function uw(t,e,n){const i=K(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.wc.forEach((r,o)=>{const a=o.view.Mu(e);a.snapshot&&s.push(a.snapshot)}),function(r,o){const a=K(r);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.Mu(o)&&(l=!0)}),l&&Ym(a)}(i.eventManager,e),s.length&&i.dc.nu(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function wL(t,e,n){const i=K(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.yc.get(e),r=s&&s.key;if(r){let o=new _e(j.comparator);o=o.insert(r,at.newNoDocument(r,W.min()));const a=Y().add(r),l=new Wh(W.min(),new Map,new _e(ee),o,a);await nE(i,l),i.gc=i.gc.remove(r),i.yc.delete(e),Qm(i)}else await $p(i.localStore,e,!1).then(()=>jp(i,e,n)).catch(El)}async function xL(t,e){const n=K(t),i=e.batch.batchId;try{const s=await OO(n.localStore,e);sE(n,i,null),iE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Al(n,s)}catch(s){await El(s)}}async function _L(t,e,n){const i=K(t);try{const s=await function(r,o){const a=K(r);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(fe(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);sE(i,e,n),iE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Al(i,s)}catch(s){await El(s)}}function iE(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function sE(t,e,n){const i=K(t);let s=i.Tc[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Tc[i.currentUser.toKey()]=s}}function jp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(i=>{t.Ic.containsKey(i)||rE(t,i)})}function rE(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(Wb(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Qm(t))}function hw(t,e,n){for(const i of n)i instanceof eE?(t.Ic.addReference(i.key,e),kL(t,i)):i instanceof tE?(O("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||rE(t,i.key)):B()}function kL(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(O("SyncEngine","New document in limbo: "+n),t.mc.add(i),Qm(t))}function Qm(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new j(ge.fromString(e)),i=t.Ac.next();t.yc.set(i,new fL(n)),t.gc=t.gc.insert(n,i),Hb(t.remoteStore,new Ti(ai(Lm(n.path)),i,"TargetPurposeLimboResolution",Am.ct))}}async function Al(t,e,n){const i=K(t),s=[],r=[],o=[];i.wc.isEmpty()||(i.wc.forEach((a,l)=>{o.push(i.Rc(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const u=Vm.Li(l.targetId,c);r.push(u)}}))}),await Promise.all(o),i.dc.nu(s),await async function(a,l){const c=K(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>N.forEach(l,h=>N.forEach(h.Fi,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>N.forEach(h.Bi,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!Cl(u))throw u;O("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Ji.get(h),f=d.snapshotVersion,m=d.withLastLimboFreeSnapshotVersion(f);c.Ji=c.Ji.insert(h,m)}}}(i.localStore,r))}async function SL(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());const i=await Ub(n.localStore,e);n.currentUser=e,function(s,r){s.Ec.forEach(o=>{o.forEach(a=>{a.reject(new $(T.CANCELLED,r))})}),s.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Al(n,i.er)}}function bL(t,e){const n=K(t),i=n.yc.get(e);if(i&&i.fc)return Y().add(i.key);{let s=Y();const r=n._c.get(e);if(!r)return s;for(const o of r){const a=n.wc.get(o);s=s.unionWith(a.view.nc)}return s}}function EL(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wL.bind(null,e),e.dc.nu=cL.bind(null,e.eventManager),e.dc.Pc=uL.bind(null,e.eventManager),e}function CL(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_L.bind(null,e),e}class dw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Kh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return MO(this.persistence,new RO,e.initialUser,this.serializer)}createPersistence(e){return new AO(Bm.zs,this.serializer)}createSharedClientState(e){return new zO}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class TL{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SL.bind(null,this.syncEngine),await oL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new lL}createDatastore(e){const n=Kh(e.databaseInfo.databaseId),i=(s=e.databaseInfo,new WO(s));var s;return function(r,o,a,l){return new GO(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,s=e.asyncQueue,r=a=>uw(this.syncEngine,a,0),o=aw.D()?new aw:new BO,new QO(n,i,s,r,o);var n,i,s,r,o}createSyncEngine(e,n){return function(i,s,r,o,a,l,c){const u=new pL(i,s,r,o,a,l);return c&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=K(e);O("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Nl(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):oi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=rt.UNAUTHENTICATED,this.clientId=ab.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async r=>{O("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(i,r=>(O("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Gm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Ub(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AL(t);O("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(s=>lw(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,r)=>lw(e.remoteStore,r)),t._onlineComponents=e}function NL(t){return t.name==="FirebaseError"?t.code===T.FAILED_PRECONDITION||t.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function AL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!NL(n))throw n;Hr("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new dw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),await Qd(t,new dw);return t._offlineComponents}async function aE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),await fw(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),await fw(t,new TL))),t._onlineComponents}function PL(t){return aE(t).then(e=>e.syncEngine)}async function lE(t){const e=await aE(t),n=e.eventManager;return n.onListen=gL.bind(null,e.syncEngine),n.onUnlisten=yL.bind(null,e.syncEngine),n}function RL(t,e,n={}){const i=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,r,o,a,l){const c=new oE({next:h=>{r.enqueueAndForget(()=>Jb(s,u));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new $(T.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new $(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new Zb(Lm(o.path),c,{includeMetadataChanges:!0,Ku:!0});return Xb(s,u)}(await lE(t),t.asyncQueue,e,n,i)),i.promise}function DL(t,e,n={}){const i=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(s,r,o,a,l){const c=new oE({next:h=>{r.enqueueAndForget(()=>Jb(s,u)),h.fromCache&&a.source==="server"?l.reject(new $(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new Zb(o,c,{includeMetadataChanges:!0,Ku:!0});return Xb(s,u)}(await lE(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(t,e,n){if(!n)throw new $(T.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ML(t,e,n,i){if(e===!0&&i===!0)throw new $(T.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gw(t){if(!j.isDocumentKey(t))throw new $(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mw(t){if(j.isDocumentKey(t))throw new $(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xm(t);throw new $(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new $(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ML("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,n.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,i}}class Yh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new eM;switch(n.type){case"firstParty":return new sM(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new $(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=pw.get(e);n&&(O("ComponentProvider","Removing Datastore"),pw.delete(e),n.terminate())}(this),Promise.resolve()}}function OL(t,e,n,i={}){var s;const r=(t=ci(t,Yh))._getSettings(),o=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&Hr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=rt.MOCK_USER;else{a=yk(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new $(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rt(c)}t._authCredentials=new tM(new ob(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Dt(this.firestore,e,this._key)}}class Qh{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Qh(this.firestore,e,this._query)}}class Bi extends Qh{constructor(e,n,i){super(e,n,Lm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Dt(this.firestore,null,new j(e))}withConverter(e){return new Bi(this.firestore,e,this._path)}}function hE(t,e,...n){if(t=Ee(t),uE("collection","path",e),t instanceof Yh){const i=ge.fromString(e,...n);return mw(i),new Bi(t,null,i)}{if(!(t instanceof Dt||t instanceof Bi))throw new $(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ge.fromString(e,...n));return mw(i),new Bi(t.firestore,null,i)}}function Zn(t,e,...n){if(t=Ee(t),arguments.length===1&&(e=ab.A()),uE("doc","path",e),t instanceof Yh){const i=ge.fromString(e,...n);return gw(i),new Dt(t,null,new j(i))}{if(!(t instanceof Dt||t instanceof Bi))throw new $(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ge.fromString(e,...n));return gw(i),new Dt(t.firestore,t instanceof Bi?t.converter:null,new j(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Bb(this,"async_queue_retry"),this.Xc=()=>{const n=Yd();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Yd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Jn;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Cl(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{this.Wc=i,this.Hc=!1;const s=function(r){let o=r.message||"";return r.stack&&(o=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),o}(i);throw oi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.Hc=!1,i))));return this.Gc=n,n}enqueueAfterDelay(e,n,i){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const s=qm.createAndSchedule(this,e,n,i,r=>this.na(r));return this.zc.push(s),s}Zc(){this.Wc&&B()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class Pl extends Yh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new LL,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||fE(this),this._firestoreClient.terminate()}}function dE(t,e){const n=typeof t=="object"?t:Xg(),i=typeof t=="string"?t:e||"(default)",s=xh(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=pk("firestore");r&&OL(s,...r)}return s}function Jm(t){return t._firestoreClient||fE(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function fE(t){var e,n,i;const s=t._freezeSettings(),r=function(o,a,l,c){return new mM(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,cE(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new IL(t._authCredentials,t._appCheckCredentials,t._queue,r),!((n=s.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qr(pt.fromBase64String(e))}catch(n){throw new $(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qr(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=/^__.*__$/;class jL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ss(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tl(e,this.data,n,this.fieldTransforms)}}class pE{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ss(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function gE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}class ty{constructor(e,n,i,s,r,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.ua(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ty(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:i,la:!1});return s.fa(e),s}da(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.aa({path:i,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Hu(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(gE(this.ca)&&$L.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class FL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Kh(e)}ya(e,n,i,s=!1){return new ty({ca:e,methodName:n,ga:i,path:lt.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mE(t){const e=t._freezeSettings(),n=Kh(t._databaseId);return new FL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UL(t,e,n,i,s,r={}){const o=t.ya(r.merge||r.mergeFields?2:0,e,n,s);ny("Data must be an object, but it was:",o,i);const a=yE(i,o);let l,c;if(r.merge)l=new Ft(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const h of r.mergeFields){const d=Fp(e,h,n);if(!o.contains(d))throw new $(T.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);wE(u,d)||u.push(d)}l=new Ft(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new jL(new Tt(a),l,c)}class Jh extends Zm{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jh}}function zL(t,e,n,i){const s=t.ya(1,e,n);ny("Data must be an object, but it was:",s,i);const r=[],o=Tt.empty();Xs(i,(l,c)=>{const u=iy(e,l,n);c=Ee(c);const h=s.da(u);if(c instanceof Jh)r.push(u);else{const d=Zh(c,h);d!=null&&(r.push(u),o.set(u,d))}});const a=new Ft(r);return new pE(o,a,s.fieldTransforms)}function BL(t,e,n,i,s,r){const o=t.ya(1,e,n),a=[Fp(e,i,n)],l=[s];if(r.length%2!=0)throw new $(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<r.length;d+=2)a.push(Fp(e,r[d])),l.push(r[d+1]);const c=[],u=Tt.empty();for(let d=a.length-1;d>=0;--d)if(!wE(c,a[d])){const f=a[d];let m=l[d];m=Ee(m);const v=o.da(f);if(m instanceof Jh)c.push(f);else{const w=Zh(m,v);w!=null&&(c.push(f),u.set(f,w))}}const h=new Ft(c);return new pE(u,h,o.fieldTransforms)}function Zh(t,e){if(vE(t=Ee(t)))return ny("Unsupported field value:",e,t),yE(t,e);if(t instanceof Zm)return function(n,i){if(!gE(i.ca))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,i){const s=[];let r=0;for(const o of n){let a=Zh(o,i.wa(r));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),r++}return{arrayValue:{values:s}}}(t,e)}return function(n,i){if((n=Ee(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return FM(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Ue.fromDate(n);return{timestampValue:Bu(i.serializer,s)}}if(n instanceof Ue){const s=new Ue(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Bu(i.serializer,s)}}if(n instanceof ey)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Qr)return{bytesValue:Mb(i.serializer,n._byteString)};if(n instanceof Dt){const s=i.databaseId,r=n.firestore._databaseId;if(!r.isEqual(s))throw i._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Um(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${Xm(n)}`)}(t,e)}function yE(t,e){const n={};return lb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(t,(i,s)=>{const r=Zh(s,e.ha(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function vE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof ey||t instanceof Qr||t instanceof Dt||t instanceof Zm)}function ny(t,e,n){if(!vE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=Xm(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function Fp(t,e,n){if((e=Ee(e))instanceof Xh)return e._internalPath;if(typeof e=="string")return iy(t,e);throw Hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const VL=new RegExp("[~\\*/\\[\\]]");function iy(t,e,n){if(e.search(VL)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xh(...e.split("."))._internalPath}catch{throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hu(t,e,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new $(T.INVALID_ARGUMENT,a+t+l)}function wE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_E("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HL extends xE{data(){return super.data()}}function _E(t,e){return typeof e=="string"?iy(t,e):e instanceof Xh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KL{convertValue(e,n="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Xs(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertGeoPoint(e){return new ey(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Rm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ka(e));default:return null}}convertTimestamp(e){const n=Gi(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ge.fromString(e);fe(Fb(i));const s=new qa(i.get(1),i.get(3)),r=new j(i.popFirst(5));return s.isEqual(n)||oi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kE extends xE{constructor(e,n,i,s,r,o){super(e,n,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_E("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Hc extends kE{data(e={}){return super.data(e)}}class GL{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vo(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Hc(this._firestore,this._userDataWriter,i.key,i,new Vo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(o=>{const a=new Hc(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Vo(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:r++}})}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new Hc(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Vo(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return o.type!==0&&(l=r.indexOf(o.doc.key),r=r.delete(o.doc.key)),o.type!==1&&(r=r.add(o.doc),c=r.indexOf(o.doc.key)),{type:YL(o.type),doc:a,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function YL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t){t=ci(t,Dt);const e=ci(t.firestore,Pl);return RL(Jm(e),t._key).then(n=>QL(e,t,n))}class SE extends KL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Dt(this.firestore,null,n)}}function bE(t){t=ci(t,Qh);const e=ci(t.firestore,Pl),n=Jm(e),i=new SE(e);return WL(t._query),DL(n,t._query).then(s=>new GL(e,i,t,s))}function ry(t,e,n){t=ci(t,Dt);const i=ci(t.firestore,Pl),s=qL(t.converter,e,n);return EE(i,[UL(mE(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Rn.none())])}function Up(t,e,n,...i){t=ci(t,Dt);const s=ci(t.firestore,Pl),r=mE(s);let o;return o=typeof(e=Ee(e))=="string"||e instanceof Xh?BL(r,"updateDoc",t._key,e,n,i):zL(r,"updateDoc",t._key,e),EE(s,[o.toMutation(t._key,Rn.exists(!0))])}function EE(t,e){return function(n,i){const s=new Jn;return n.asyncQueue.enqueueAndForget(async()=>vL(await PL(n),i,s)),s.promise}(Jm(t),e)}function QL(t,e,n){const i=n.docs.get(e._key),s=new SE(t);return new kE(t,s,e._key,i,new Vo(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){fo=n})(Gs),Ls(new Ki("firestore",(n,{instanceIdentifier:i,options:s})=>{const r=n.getProvider("app").getImmediate(),o=new Pl(new nM(n.getProvider("auth-internal")),new oM(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new $(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(a.options.projectId,l)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Nn(j0,"3.13.0",t),Nn(j0,"3.13.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="firebasestorage.googleapis.com",TE="storageBucket",XL=2*60*1e3,JL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie extends Ln{constructor(e,n,i=0){super(Xd(e),`Firebase Storage: ${n} (${Xd(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ie.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Xd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Te;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Te||(Te={}));function Xd(t){return"storage/"+t}function oy(){const t="An unknown error occurred, please check the error payload for server response.";return new Ie(Te.UNKNOWN,t)}function ZL(t){return new Ie(Te.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function e4(t){return new Ie(Te.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function t4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ie(Te.UNAUTHENTICATED,t)}function n4(){return new Ie(Te.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function i4(t){return new Ie(Te.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function s4(){return new Ie(Te.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r4(){return new Ie(Te.CANCELED,"User canceled the upload/download.")}function o4(t){return new Ie(Te.INVALID_URL,"Invalid URL '"+t+"'.")}function a4(t){return new Ie(Te.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function l4(){return new Ie(Te.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TE+"' property when initializing the app?")}function c4(){return new Ie(Te.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u4(){return new Ie(Te.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function h4(t){return new Ie(Te.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function zp(t){return new Ie(Te.INVALID_ARGUMENT,t)}function IE(){return new Ie(Te.APP_DELETED,"The Firebase app was deleted.")}function d4(t){return new Ie(Te.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ca(t,e){return new Ie(Te.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function To(t){throw new Ie(Te.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Ut.makeFromUrl(e,n)}catch{return new Ut(e,"")}if(i.path==="")return i;throw a4(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${s}/o${d}`,"i"),m={bucket:1,path:3},v=n===CE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",g=new RegExp(`^https?://${v}/${s}/${w}`,"i"),x=[{regex:a,indices:l,postModify:r},{regex:f,indices:m,postModify:c},{regex:g,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<x.length;k++){const _=x[k],S=_.regex.exec(e);if(S){const C=S[_.indices.bucket];let E=S[_.indices.path];E||(E=""),i=new Ut(C,E),_.postModify(i);break}}if(i==null)throw o4(e);return i}}class f4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t,e,n){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...w){c||(c=!0,e.apply(null,w))}function h(w){s=setTimeout(()=>{s=null,t(f,l())},w)}function d(){r&&clearTimeout(r)}function f(w,...g){if(c){d();return}if(w){d(),u.call(null,w,...g);return}if(l()||o){d(),u.call(null,w,...g);return}i<64&&(i*=2);let x;a===1?(a=2,x=0):x=(i+Math.random())*1e3,h(x)}let m=!1;function v(w){m||(m=!0,d(),!c&&(s!==null?(w||(a=2),clearTimeout(s),h(0)):w||(a=1)))}return h(0),r=setTimeout(()=>{o=!0,v(!0)},n),v}function g4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(t){return t!==void 0}function y4(t){return typeof t=="object"&&!Array.isArray(t)}function ay(t){return typeof t=="string"||t instanceof String}function vw(t){return ly()&&t instanceof Blob}function ly(){return typeof Blob<"u"&&!_N()}function ww(t,e,n,i){if(i<e)throw zp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw zp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function NE(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Is;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Is||(Is={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,n,i,s,r,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,m)=>{this.resolve_=f,this.reject_=m,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new lc(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Is.NO_ERROR,l=r.getStatus();if(!a||v4(l,this.additionalRetryCodes_)&&this.retry){const u=r.getErrorCode()===Is.ABORT;i(!1,new lc(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new lc(c,r))})},n=(i,s)=>{const r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());m4(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=oy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?IE():r4();o(l)}else{const l=s4();o(l)}};this.canceled_?n(!1,new lc(!1,null,!0)):this.backoffId_=p4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class lc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function x4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function _4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function k4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function S4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function b4(t,e,n,i,s,r,o=!0){const a=NE(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return k4(c,e),x4(c,n),_4(c,r),S4(c,i),new w4(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function C4(...t){const e=E4();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(ly())return new Blob(t);throw new Ie(Te.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function T4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I4(t){if(typeof atob>"u")throw h4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jd{constructor(e,n){this.data=e,this.contentType=n||null}}function N4(t,e){switch(t){case Cn.RAW:return new Jd(AE(e));case Cn.BASE64:case Cn.BASE64URL:return new Jd(PE(t,e));case Cn.DATA_URL:return new Jd(P4(e),R4(e))}throw oy()}function AE(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=i,o=t.charCodeAt(++n);i=65536|(r&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function A4(t){let e;try{e=decodeURIComponent(t)}catch{throw ca(Cn.DATA_URL,"Malformed data URL.")}return AE(e)}function PE(t,e){switch(t){case Cn.BASE64:{const s=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(s||r)throw ca(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Cn.BASE64URL:{const s=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(s||r)throw ca(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=I4(e)}catch(s){throw s.message.includes("polyfill")?s:ca(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class RE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ca(Cn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=D4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function P4(t){const e=new RE(t);return e.base64?PE(Cn.BASE64,e.rest):A4(e.rest)}function R4(t){return new RE(t).contentType}function D4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){let i=0,s="";vw(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(vw(this.data_)){const i=this.data_,s=T4(i,e,n);return s===null?null:new Si(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Si(i,!0)}}static getBlob(...e){if(ly()){const n=e.map(i=>i instanceof Si?i.data_:i);return new Si(C4.apply(null,n))}else{const n=e.map(o=>ay(o)?N4(Cn.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const s=new Uint8Array(i);let r=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[r++]=o[a]}),new Si(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t){let e;try{e=JSON.parse(t)}catch{return null}return y4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function O4(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function ME(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t,e){return e}class vt{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||L4}}let cc=null;function $4(t){return!ay(t)||t.length<2?t:ME(t)}function OE(){if(cc)return cc;const t=[];t.push(new vt("bucket")),t.push(new vt("generation")),t.push(new vt("metageneration")),t.push(new vt("name","fullPath",!0));function e(r,o){return $4(o)}const n=new vt("name");n.xform=e,t.push(n);function i(r,o){return o!==void 0?Number(o):o}const s=new vt("size");return s.xform=i,t.push(s),t.push(new vt("timeCreated")),t.push(new vt("updated")),t.push(new vt("md5Hash",null,!0)),t.push(new vt("cacheControl",null,!0)),t.push(new vt("contentDisposition",null,!0)),t.push(new vt("contentEncoding",null,!0)),t.push(new vt("contentLanguage",null,!0)),t.push(new vt("contentType",null,!0)),t.push(new vt("metadata","customMetadata",!0)),cc=t,cc}function j4(t,e){function n(){const i=t.bucket,s=t.fullPath,r=new Ut(i,s);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:n})}function F4(t,e,n){const i={};i.type="file";const s=n.length;for(let r=0;r<s;r++){const o=n[r];i[o.local]=o.xform(i,e[o.server])}return j4(i,t),i}function LE(t,e,n){const i=DE(e);return i===null?null:F4(t,i,n)}function U4(t,e,n,i){const s=DE(e);if(s===null||!ay(s.downloadTokens))return null;const r=s.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(c=>{const u=t.bucket,h=t.fullPath,d="/b/"+o(u)+"/o/"+o(h),f=cy(d,n,i),m=NE({alt:"media",token:c});return f+m})[0]}function z4(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const r=e[s];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}class $E{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){if(!t)throw oy()}function B4(t,e){function n(i,s){const r=LE(t,s,e);return jE(r!==null),r}return n}function V4(t,e){function n(i,s){const r=LE(t,s,e);return jE(r!==null),U4(r,s,t.host,t._protocol)}return n}function FE(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=n4():s=t4():n.getStatus()===402?s=e4(t.bucket):n.getStatus()===403?s=i4(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function H4(t){const e=FE(t);function n(i,s){let r=e(i,s);return i.getStatus()===404&&(r=ZL(t.path)),r.serverResponse=s.serverResponse,r}return n}function W4(t,e,n){const i=e.fullServerUrl(),s=cy(i,t.host,t._protocol),r="GET",o=t.maxOperationRetryTime,a=new $E(s,r,V4(t,n),o);return a.errorHandler=H4(e),a}function K4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function q4(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=K4(null,e)),i}function G4(t,e,n,i,s){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let k=0;k<2;k++)x=x+Math.random().toString().slice(2);return x}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=q4(e,i,s),u=z4(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=Si.getBlob(h,i,d);if(f===null)throw c4();const m={name:c.fullPath},v=cy(r,t.host,t._protocol),w="POST",g=t.maxUploadRetryTime,y=new $E(v,w,B4(t,n),g);return y.urlParams=m,y.headers=o,y.body=f.uploadData(),y.errorHandler=FE(e),y}class Y4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Is.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Is.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Is.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s){if(this.sent_)throw To("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const r in s)s.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,s[r].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw To("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw To("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw To("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw To("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Q4 extends Y4{initXhr(){this.xhr_.responseType="text"}}function UE(){return new Q4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this._service=e,n instanceof Ut?this._location=n:this._location=Ut.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Bs(e,n)}get root(){const e=new Ut(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ME(this._location.path)}get storage(){return this._service}get parent(){const e=M4(this._location.path);if(e===null)return null;const n=new Ut(this._location.bucket,e);return new Bs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw d4(e)}}function X4(t,e,n){t._throwIfRoot("uploadBytes");const i=G4(t.storage,t._location,OE(),new Si(e,!0),n);return t.storage.makeRequestWithTokens(i,UE).then(s=>({metadata:s,ref:t}))}function J4(t){t._throwIfRoot("getDownloadURL");const e=W4(t.storage,t._location,OE());return t.storage.makeRequestWithTokens(e,UE).then(n=>{if(n===null)throw u4();return n})}function Z4(t,e){const n=O4(t._location.path,e),i=new Ut(t._location.bucket,n);return new Bs(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(t){return/^[A-Za-z]+:\/\//.test(t)}function t$(t,e){return new Bs(t,e)}function zE(t,e){if(t instanceof uy){const n=t;if(n._bucket==null)throw l4();const i=new Bs(n,n._bucket);return e!=null?zE(i,e):i}else return e!==void 0?Z4(t,e):t}function n$(t,e){if(e&&e$(e)){if(t instanceof uy)return t$(t,e);throw zp("To use ref(service, url), the first argument must be a Storage instance.")}else return zE(t,e)}function xw(t,e){const n=e==null?void 0:e[TE];return n==null?null:Ut.makeFromBucketSpec(n,t)}function i$(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:yk(s,t.app.options.projectId))}class uy{constructor(e,n,i,s,r){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=CE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=XL,this._maxUploadRetryTime=JL,this._requests=new Set,s!=null?this._bucket=Ut.makeFromBucketSpec(s,this._host):this._bucket=xw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ut.makeFromBucketSpec(this._url,e):this._bucket=xw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ww("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ww("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Bs(this,e)}_makeRequest(e,n,i,s,r=!0){if(this._deleted)return new f4(IE());{const o=b4(e,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const _w="@firebase/storage",kw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="storage";function s$(t,e,n){return t=Ee(t),X4(t,e,n)}function r$(t){return t=Ee(t),J4(t)}function o$(t,e){return t=Ee(t),n$(t,e)}function VE(t=Xg(),e){t=Ee(t);const i=xh(t,BE).getImmediate({identifier:e}),s=pk("storage");return s&&a$(i,...s),i}function a$(t,e,n,i={}){i$(t,e,n,i)}function l$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new uy(n,i,s,e,Gs)}function c$(){Ls(new Ki(BE,l$,"PUBLIC").setMultipleInstances(!0)),Nn(_w,kw,""),Nn(_w,kw,"esm2017")}c$();const u$={apiKey:"AIzaSyCBzLqdIAXLsaUZU9e5LhJRs3OAmAfKZUI",authDomain:"stock-tracker-7a87a.firebaseapp.com",databaseURL:"https://stock-tracker-7a87a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"stock-tracker-7a87a",storageBucket:"stock-tracker-7a87a.firebasestorage.app",messagingSenderId:"436136550947",appId:"1:436136550947:web:30e59d287e3d06291e4796",measurementId:"G-W8B38MB3ZM"},hy=xk(u$),rs=dE(hy),Xa=iS(hy);VE(hy);function Sw(t,e){return ry(Zn(rs,"users",t),{stocks:e},{merge:!0}).catch(n=>{throw console.error("Error saving stocks:",n),n})}function h$(t){return sy(Zn(rs,"users",t)).then(e=>e.exists()?e.data().stocks||[]:[]).catch(e=>{throw console.error("Error getting stocks:",e),e})}async function bw(t,e){try{await Up(Zn(rs,"users",t),{cryptos:e})}catch(n){throw console.error("Error saving cryptos:",n),n}}async function d$(t){try{const e=await sy(Zn(rs,"users",t));return e.exists()?e.data().cryptos||[]:[]}catch(e){throw console.error("Error getting cryptos:",e),e}}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f$=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HE=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...p$,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:HE("lucide",s),...a},[...o.map(([c,u])=>b.createElement(c,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=(t,e)=>{const n=b.forwardRef(({className:i,...s},r)=>b.createElement(g$,{ref:r,iconNode:e,className:HE(`lucide-${f$(t)}`,i),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=ze("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=ze("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x$=ze("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=ze("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=ze("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=ze("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S$=ze("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E$=ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=ze("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=ze("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),N$="daniel.golod2008@gmail.com";function A$({isAuthenticated:t,user:e}){const n=qs(),i=oo(),[s,r]=b.useState(!1),o=async()=>{try{await DP(Xa),n("/dashboard")}catch(l){console.error("Error signing out:",l)}},a=l=>i.pathname===l;return p.jsx("nav",{className:`fixed top-0 left-0 h-screen bg-secondary transition-all duration-300 ease-in-out overflow-hidden z-10 shadow-lg ${s?"w-64":"w-16"}`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:p.jsxs("div",{className:"flex flex-col h-full py-6",children:[p.jsxs("ul",{className:"flex-grow space-y-2",children:[p.jsx("li",{children:p.jsxs(Bn,{to:"/dashboard",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/dashboard")?"bg-primary":""}`,children:[p.jsx(k$,{className:"w-6 h-6 min-w-[24px]"}),p.jsx("span",{className:`ml-4 ${s?"block":"hidden"}`,children:"Dashboard"})]})}),p.jsx("li",{children:p.jsxs(Bn,{to:"/add-stock",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/add-stock")?"bg-primary":""}`,children:[p.jsx(I$,{className:"w-6 h-6 min-w-[24px]"}),p.jsx("span",{className:`ml-4 ${s?"block":"hidden"}`,children:"Add Stock"})]})}),p.jsx("li",{children:p.jsxs(Bn,{to:"/compare-stocks",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/compare-stocks")?"bg-primary":""}`,children:[p.jsx(x$,{className:"w-6 h-6 min-w-[24px]"}),p.jsx("span",{className:`ml-4 ${s?"block":"hidden"}`,children:"Compare Stocks"})]})}),p.jsx("li",{children:p.jsxs(Bn,{to:"/ai-assistant",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/ai-assistant")?"bg-primary":""}`,children:[p.jsx(m$,{className:"w-6 h-6 min-w-[24px]"}),p.jsx("span",{className:`ml-4 ${s?"block":"hidden"}`,children:"AI Assistant"})]})}),t&&p.jsx("li",{children:p.jsxs(Bn,{to:"/profile",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/profile")?"bg-primary":""}`,children:[p.jsx(qE,{className:"w-6 h-6 min-w-[24px]"}),p.jsx("span",{className:`ml-4 ${s?"block":"hidden"}`,children:"Profile"})]})}),e&&e.email===N$&&p.jsx("li",{children:p.jsxs(Bn,{to:"/admin",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/admin")?"bg-primary":""}`,children:[p.jsx(WE,{className:"w-6 h-6 min-w-[24px]"}),p.jsx("span",{className:`ml-4 ${s?"block":"hidden"}`,children:"Admin"})]})})]}),p.jsx("div",{className:"mt-auto",children:t?p.jsxs("button",{onClick:o,className:"flex items-center w-full px-4 py-3 text-text-primary hover:bg-primary transition duration-300",children:[p.jsx(b$,{className:"w-6 h-6 min-w-[24px]"}),p.jsx("span",{className:`ml-4 ${s?"block":"hidden"}`,children:"Sign Out"})]}):p.jsxs(Bn,{to:"/login",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/login")?"bg-primary":""}`,children:[p.jsx(S$,{className:"w-6 h-6 min-w-[24px]"}),p.jsx("span",{className:`ml-4 ${s?"block":"hidden"}`,children:"Log In"})]})})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Rl(t){return t+.5|0}const Ii=(t,e,n)=>Math.max(Math.min(t,n),e);function Ho(t){return Ii(Rl(t*2.55),0,255)}function Vi(t){return Ii(Rl(t*255),0,255)}function Hn(t){return Ii(Rl(t/2.55)/100,0,1)}function Tw(t){return Ii(Rl(t*100),0,100)}const qt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Bp=[..."0123456789ABCDEF"],P$=t=>Bp[t&15],R$=t=>Bp[(t&240)>>4]+Bp[t&15],uc=t=>(t&240)>>4===(t&15),D$=t=>uc(t.r)&&uc(t.g)&&uc(t.b)&&uc(t.a);function M$(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&qt[t[1]]*17,g:255&qt[t[2]]*17,b:255&qt[t[3]]*17,a:e===5?qt[t[4]]*17:255}:(e===7||e===9)&&(n={r:qt[t[1]]<<4|qt[t[2]],g:qt[t[3]]<<4|qt[t[4]],b:qt[t[5]]<<4|qt[t[6]],a:e===9?qt[t[7]]<<4|qt[t[8]]:255})),n}const O$=(t,e)=>t<255?e(t):"";function L$(t){var e=D$(t)?P$:R$;return t?"#"+e(t.r)+e(t.g)+e(t.b)+O$(t.a,e):void 0}const $$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function GE(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function j$(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function F$(t,e,n){const i=GE(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function U$(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function dy(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=U$(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function fy(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Vi)}function py(t,e,n){return fy(GE,t,e,n)}function z$(t,e,n){return fy(F$,t,e,n)}function B$(t,e,n){return fy(j$,t,e,n)}function YE(t){return(t%360+360)%360}function V$(t){const e=$$.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Ho(+e[5]):Vi(+e[5]));const s=YE(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=z$(s,r,o):e[1]==="hsv"?i=B$(s,r,o):i=py(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function H$(t,e){var n=dy(t);n[0]=YE(n[0]+e),n=py(n),t.r=n[0],t.g=n[1],t.b=n[2]}function W$(t){if(!t)return;const e=dy(t),n=e[0],i=Tw(e[1]),s=Tw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${Hn(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Iw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Nw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function K$(){const t={},e=Object.keys(Nw),n=Object.keys(Iw);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Iw[r]);r=parseInt(Nw[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let hc;function q$(t){hc||(hc=K$(),hc.transparent=[0,0,0,0]);const e=hc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const G$=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Y$(t){const e=G$.exec(t);let n=255,i,s,r;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Ho(o):Ii(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Ho(i):Ii(i,0,255)),s=255&(e[4]?Ho(s):Ii(s,0,255)),r=255&(e[6]?Ho(r):Ii(r,0,255)),{r:i,g:s,b:r,a:n}}}function Q$(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Hn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Zd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ir=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function X$(t,e,n){const i=ir(Hn(t.r)),s=ir(Hn(t.g)),r=ir(Hn(t.b));return{r:Vi(Zd(i+n*(ir(Hn(e.r))-i))),g:Vi(Zd(s+n*(ir(Hn(e.g))-s))),b:Vi(Zd(r+n*(ir(Hn(e.b))-r))),a:t.a+n*(e.a-t.a)}}function dc(t,e,n){if(t){let i=dy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=py(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function QE(t,e){return t&&Object.assign(e||{},t)}function Aw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Vi(t[3]))):(e=QE(t,{r:0,g:0,b:0,a:1}),e.a=Vi(e.a)),e}function J$(t){return t.charAt(0)==="r"?Y$(t):V$(t)}class Ja{constructor(e){if(e instanceof Ja)return e;const n=typeof e;let i;n==="object"?i=Aw(e):n==="string"&&(i=M$(e)||q$(e)||J$(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=QE(this._rgb);return e&&(e.a=Hn(e.a)),e}set rgb(e){this._rgb=Aw(e)}rgbString(){return this._valid?Q$(this._rgb):void 0}hexString(){return this._valid?L$(this._rgb):void 0}hslString(){return this._valid?W$(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=X$(this._rgb,e._rgb,n)),this}clone(){return new Ja(this.rgb)}alpha(e){return this._rgb.a=Vi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Rl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return dc(this._rgb,2,e),this}darken(e){return dc(this._rgb,2,-e),this}saturate(e){return dc(this._rgb,1,e),this}desaturate(e){return dc(this._rgb,1,-e),this}rotate(e){return H$(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function jn(){}const Z$=(()=>{let t=0;return()=>t++})();function he(t){return t==null}function ve(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function te(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function He(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ot(t,e){return He(t)?t:e}function Q(t,e){return typeof t>"u"?e:t}const ej=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function oe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ne(t,e,n,i){let s,r,o;if(ve(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(te(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function Wu(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function Ku(t){if(ve(t))return t.map(Ku);if(te(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=Ku(t[n[s]]);return e}return t}function XE(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function tj(t,e,n,i){if(!XE(t))return;const s=e[t],r=n[t];te(s)&&te(r)?Za(s,r,i):e[t]=Ku(r)}function Za(t,e,n){const i=ve(e)?e:[e],s=i.length;if(!te(t))return t;n=n||{};const r=n.merger||tj;let o;for(let a=0;a<s;++a){if(o=i[a],!te(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function ua(t,e){return Za(t,e,{merger:nj})}function nj(t,e,n){if(!XE(t))return;const i=e[t],s=n[t];te(i)&&te(s)?ua(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ku(s))}const Pw={"":t=>t,x:t=>t.x,y:t=>t.y};function ij(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function sj(t){const e=ij(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function qu(t,e){return(Pw[e]||(Pw[e]=sj(e)))(t)}function gy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Gu=t=>typeof t<"u",Qi=t=>typeof t=="function",Rw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function rj(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Oe=Math.PI,tn=2*Oe,oj=tn+Oe,Yu=Number.POSITIVE_INFINITY,aj=Oe/180,zt=Oe/2,as=Oe/4,Dw=Oe*2/3,Ni=Math.log10,Xr=Math.sign;function ha(t,e,n){return Math.abs(t-e)<n}function Mw(t){const e=Math.round(t);t=ha(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ni(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function lj(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function el(t){return!isNaN(parseFloat(t))&&isFinite(t)}function cj(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function JE(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Ai(t){return t*(Oe/180)}function my(t){return t*(180/Oe)}function Ow(t){if(!He(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function uj(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*Oe&&(r+=tn),{angle:r,distance:s}}function Vp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function hj(t,e){return(t-e+oj)%tn-Oe}function ln(t){return(t%tn+tn)%tn}function ZE(t,e,n,i){const s=ln(t),r=ln(e),o=ln(n),a=ln(r-s),l=ln(o-s),c=ln(s-r),u=ln(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Jt(t,e,n){return Math.max(e,Math.min(n,t))}function dj(t){return Jt(t,-32768,32767)}function Wo(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function yy(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const ks=(t,e,n,i)=>yy(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),fj=(t,e,n)=>yy(t,n,i=>t[i][e]>=n);function pj(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const eC=["push","pop","shift","splice","unshift"];function gj(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),eC.forEach(n=>{const i="_onData"+gy(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function Lw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(eC.forEach(r=>{delete t[r]}),delete t._chartjs)}function mj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const tC=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function nC(t,e){let n=[],i=!1;return function(...s){n=s,i||(i=!0,tC.call(window,()=>{i=!1,t.apply(e,n)}))}}function yj(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const vy=t=>t==="start"?"left":t==="end"?"right":"center",st=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,vj=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function wj(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(s=Jt(Math.min(ks(a,l,c).lo,n?i:ks(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?r=Jt(Math.max(ks(a,o.axis,u,!0).hi+1,n?0:ks(e,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function xj(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const fc=t=>t===0||t===1,$w=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*tn/n)),jw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*tn/n)+1,da={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*zt)+1,easeOutSine:t=>Math.sin(t*zt),easeInOutSine:t=>-.5*(Math.cos(Oe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>fc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>fc(t)?t:$w(t,.075,.3),easeOutElastic:t=>fc(t)?t:jw(t,.075,.3),easeInOutElastic(t){return fc(t)?t:t<.5?.5*$w(t*2,.1125,.45):.5+.5*jw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-da.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?da.easeInBounce(t*2)*.5:da.easeOutBounce(t*2-1)*.5+.5};function wy(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Fw(t){return wy(t)?t:new Ja(t)}function ef(t){return wy(t)?t:new Ja(t).saturate(.5).darken(.1).hexString()}const _j=["x","y","borderWidth","radius","tension"],kj=["color","borderColor","backgroundColor"];function Sj(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:kj},numbers:{type:"number",properties:_j}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function bj(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Uw=new Map;function Ej(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Uw.get(n);return i||(i=new Intl.NumberFormat(t,e),Uw.set(n,i)),i}function xy(t,e,n){return Ej(e,n).format(t)}const iC={values(t){return ve(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=Cj(t,n)}const o=Ni(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),xy(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Ni(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?iC.numeric.call(this,t,e,n):""}};function Cj(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var ed={formatters:iC};function Tj(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ed.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Vs=Object.create(null),Hp=Object.create(null);function fa(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function tf(t,e,n){return typeof e=="string"?Za(fa(t,e),n):Za(fa(t,""),e)}class Ij{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>ef(s.backgroundColor),this.hoverBorderColor=(i,s)=>ef(s.borderColor),this.hoverColor=(i,s)=>ef(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return tf(this,e,n)}get(e){return fa(this,e)}describe(e,n){return tf(Hp,e,n)}override(e,n){return tf(Vs,e,n)}route(e,n,i,s){const r=fa(this,e),o=fa(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return te(l)?Object.assign({},c,l):Q(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var be=new Ij({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Sj,bj,Tj]);function Nj(t){return!t||he(t.size)||he(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Qu(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function Aj(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!ve(h))o=Qu(t,s,r,o,h);else if(ve(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!ve(d)&&(o=Qu(t,s,r,o,d));t.restore();const f=r.length/2;if(f>n.length){for(l=0;l<f;l++)delete s[r[l]];r.splice(0,f)}return o}function ls(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function zw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Wp(t,e,n,i){sC(t,e,n,i,null)}function sC(t,e,n,i,s){let r,o,a,l,c,u,h,d;const f=e.pointStyle,m=e.rotation,v=e.radius;let w=(m||0)*aj;if(f&&typeof f=="object"&&(r=f.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(w),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),f){default:s?t.ellipse(n,i,s/2,v,0,0,tn):t.arc(n,i,v,0,tn),t.closePath();break;case"triangle":u=s?s/2:v,t.moveTo(n+Math.sin(w)*u,i-Math.cos(w)*v),w+=Dw,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*v),w+=Dw,t.lineTo(n+Math.sin(w)*u,i-Math.cos(w)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(w+as)*l,h=Math.cos(w+as)*(s?s/2-c:l),a=Math.sin(w+as)*l,d=Math.sin(w+as)*(s?s/2-c:l),t.arc(n-h,i-a,c,w-Oe,w-zt),t.arc(n+d,i-o,c,w-zt,w),t.arc(n+h,i+a,c,w,w+zt),t.arc(n-d,i+o,c,w+zt,w+Oe),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*v,u=s?s/2:l,t.rect(n-u,i-l,2*u,2*l);break}w+=as;case"rectRot":h=Math.cos(w)*(s?s/2:v),o=Math.cos(w)*v,a=Math.sin(w)*v,d=Math.sin(w)*(s?s/2:v),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":w+=as;case"cross":h=Math.cos(w)*(s?s/2:v),o=Math.cos(w)*v,a=Math.sin(w)*v,d=Math.sin(w)*(s?s/2:v),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(w)*(s?s/2:v),o=Math.cos(w)*v,a=Math.sin(w)*v,d=Math.sin(w)*(s?s/2:v),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),w+=as,h=Math.cos(w)*(s?s/2:v),o=Math.cos(w)*v,a=Math.sin(w)*v,d=Math.sin(w)*(s?s/2:v),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=s?s/2:Math.cos(w)*v,a=Math.sin(w)*v,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(w)*(s?s/2:v),i+Math.sin(w)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Qn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function _y(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ky(t){t.restore()}function Pj(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Rj(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Dj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),he(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Mj(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Oj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Hs(t,e,n,i,s,r={}){const o=ve(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,Dj(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&Oj(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),he(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),Mj(t,n,i,c,r),i+=Number(s.lineHeight);t.restore()}function Xu(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Oe,Oe,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,Oe,zt,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,zt,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-zt,!0),t.lineTo(n+o.topLeft,i)}const Lj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$j=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function jj(t,e){const n=(""+t).match(Lj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Fj=t=>+t||0;function rC(t,e){const n={},i=te(e),s=i?Object.keys(e):e,r=te(t)?i?o=>Q(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Fj(r(o));return n}function Uj(t){return rC(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Rr(t){return rC(t,["topLeft","topRight","bottomLeft","bottomRight"])}function gt(t){const e=Uj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Fe(t,e){t=t||{},e=e||be.font;let n=Q(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Q(t.style,e.style);i&&!(""+i).match($j)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Q(t.family,e.family),lineHeight:jj(Q(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Q(t.weight,e.weight),string:""};return s.string=Nj(s),s}function pc(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&ve(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function zj(t,e,n){const{min:i,max:s}=t,r=ej(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function os(t,e){return Object.assign(Object.create(t),e)}function Sy(t,e=[""],n,i,s=()=>t[0]){const r=n||t;typeof i>"u"&&(i=cC("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:r,_fallback:i,_getTarget:s,override:a=>Sy([a,...t],e,r,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return aC(a,l,()=>Yj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Vw(a).includes(l)},ownKeys(a){return Vw(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Jr(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:oC(t,i),setContext:r=>Jr(t,r,n,i),override:r=>Jr(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return aC(r,o,()=>Vj(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function oC(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Qi(n)?n:()=>n,isIndexable:Qi(i)?i:()=>i}}const Bj=(t,e)=>t?t+gy(e):e,by=(t,e)=>te(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function aC(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Vj(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Qi(a)&&o.isScriptable(e)&&(a=Hj(e,a,t,n)),ve(a)&&a.length&&(a=Wj(e,a,t,o.isIndexable)),by(e,a)&&(a=Jr(a,s,r&&r[e],o)),a}function Hj(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(r,o||i);return a.delete(t),by(t,l)&&(l=Ey(s._scopes,s,t,l)),l}function Wj(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&i(t))return e[r.index%e.length];if(te(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=Ey(c,s,t,u);e.push(Jr(h,r,o&&o[t],a))}}return e}function lC(t,e,n){return Qi(t)?t(e,n):t}const Kj=(t,e)=>t===!0?e:typeof t=="string"?qu(e,t):void 0;function qj(t,e,n,i,s){for(const r of e){const o=Kj(n,r);if(o){t.add(o);const a=lC(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Ey(t,e,n,i){const s=e._rootScopes,r=lC(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=Bw(a,o,n,r||n,i);return l===null||typeof r<"u"&&r!==n&&(l=Bw(a,o,r,l,i),l===null)?!1:Sy(Array.from(a),[""],s,r,()=>Gj(e,n,i))}function Bw(t,e,n,i,s){for(;n;)n=qj(t,e,n,i,s);return n}function Gj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return ve(s)&&te(n)?n:s||{}}function Yj(t,e,n,i){let s;for(const r of e)if(s=cC(Bj(r,t),n),typeof s<"u")return by(t,s)?Ey(n,i,t,s):s}function cC(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Vw(t){let e=t._keys;return e||(e=t._keys=Qj(t._scopes)),e}function Qj(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}const Xj=Number.EPSILON||1e-14,Zr=(t,e)=>e<t.length&&!t[e].skip&&t[e],uC=t=>t==="x"?"y":"x";function Jj(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=Vp(r,s),l=Vp(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:r.x-h*(o.x-s.x),y:r.y-h*(o.y-s.y)},next:{x:r.x+d*(o.x-s.x),y:r.y+d*(o.y-s.y)}}}function Zj(t,e,n){const i=t.length;let s,r,o,a,l,c=Zr(t,0);for(let u=0;u<i-1;++u)if(l=c,c=Zr(t,u+1),!(!l||!c)){if(ha(e[u],0,Xj)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function eF(t,e,n="x"){const i=uC(n),s=t.length;let r,o,a,l=Zr(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Zr(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=h-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=h+r*e[c])}}function tF(t,e="x"){const n=uC(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=Zr(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Zr(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?Xr(s[o-1])!==Xr(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}Zj(t,s,r),eF(t,r,e)}function gc(t,e,n){return Math.max(Math.min(t,n),e)}function nF(t,e){let n,i,s,r,o,a=Qn(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&Qn(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=gc(s.cp1x,e.left,e.right),s.cp1y=gc(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=gc(s.cp2x,e.left,e.right),s.cp2y=gc(s.cp2y,e.top,e.bottom)))}function iF(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")tF(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=Jj(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&nF(t,n)}function Cy(){return typeof window<"u"&&typeof document<"u"}function Ty(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ju(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const td=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function sF(t,e){return td(t).getPropertyValue(e)}const rF=["top","right","bottom","left"];function Ns(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=rF[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const oF=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function aF(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(oF(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ps(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=td(n),r=s.boxSizing==="border-box",o=Ns(s,"padding"),a=Ns(s,"border","width"),{x:l,y:c,box:u}=aF(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:m}=e;return r&&(f-=o.width+a.width,m-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/m*n.height/i)}}function lF(t,e,n){let i,s;if(e===void 0||n===void 0){const r=t&&Ty(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=td(r),l=Ns(a,"border","width"),c=Ns(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Ju(a.maxWidth,r,"clientWidth"),s=Ju(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||Yu,maxHeight:s||Yu}}const mc=t=>Math.round(t*10)/10;function cF(t,e,n,i){const s=td(t),r=Ns(s,"margin"),o=Ju(s.maxWidth,t,"clientWidth")||Yu,a=Ju(s.maxHeight,t,"clientHeight")||Yu,l=lF(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const d=Ns(s,"border","width"),f=Ns(s,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?c/i:u-r.height),c=mc(Math.min(c,o,l.maxWidth)),u=mc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=mc(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=mc(Math.floor(u*i))),{width:c,height:u}}function Hw(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const uF=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Cy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Ww(t,e){const n=sF(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function gs(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function hF(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function dF(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=gs(t,s,n),a=gs(s,r,n),l=gs(r,e,n),c=gs(o,a,n),u=gs(a,l,n);return gs(c,u,n)}const fF=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},pF=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Dr(t,e,n){return t?fF(e,n):pF()}function hC(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function dC(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function fC(t){return t==="angle"?{between:ZE,compare:hj,normalize:ln}:{between:Wo,compare:(e,n)=>e-n,normalize:e=>e}}function Kw({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function gF(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=fC(i),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),s,r);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function mF(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=fC(i),{start:u,end:h,loop:d,style:f}=gF(t,e,n),m=[];let v=!1,w=null,g,y,x;const k=()=>l(s,x,g)&&a(s,x)!==0,_=()=>a(r,g)===0||l(r,x,g),S=()=>v||k(),C=()=>!v||_();for(let E=u,A=u;E<=h;++E)y=e[E%o],!y.skip&&(g=c(y[i]),g!==x&&(v=l(g,s,r),w===null&&S()&&(w=a(g,s)===0?E:A),w!==null&&C()&&(m.push(Kw({start:w,end:E,loop:d,count:o,style:f})),w=null),A=E,x=g));return w!==null&&m.push(Kw({start:w,end:h,loop:d,count:o,style:f})),m}function yF(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=mF(i[s],t.points,e);r.length&&n.push(...r)}return n}function vF(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function wF(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function xF(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=vF(n,s,r,i);if(i===!0)return qw(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return qw(t,wF(n,o,l,c),n,e)}function qw(t,e,n,i){return!i||!i.setContext||!n?e:_F(t,e,n,i)}function _F(t,e,n,i){const s=t._chart.getContext(),r=Gw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,h=e[0].start,d=h;function f(m,v,w,g){const y=a?-1:1;if(m!==v){for(m+=l;n[m%l].skip;)m-=y;for(;n[v%l].skip;)v+=y;m%l!==v%l&&(c.push({start:m%l,end:v%l,loop:w,style:g}),u=g,h=v%l)}}for(const m of e){h=a?h:m.start;let v=n[h%l],w;for(d=h+1;d<=m.end;d++){const g=n[d%l];w=Gw(i.setContext(os(s,{type:"segment",p0:v,p1:g,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),kF(w,u)&&f(h,d-1,m.loop,u),v=g,u=w}h<d-1&&f(h,d-1,m.loop,u)}return c}function Gw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function kF(t,e){if(!e)return!1;const n=[],i=function(s,r){return wy(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class SF{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=tC.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Fn=new SF;const Yw="transparent",bF={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Fw(t||Yw),s=i.valid&&Fw(e||Yw);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class EF{constructor(e,n,i,s){const r=n[i];s=pc([e.to,s,r,e.from]);const o=pc([e.from,r,s]);this._active=!0,this._fn=e.fn||bF[e.type||typeof o],this._easing=da[e.easing]||da.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=pc([e.to,n,s,e.from]),this._from=pc([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class pC{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!te(e))return;const n=Object.keys(be.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!te(r))return;const o={};for(const a of n)o[a]=r[a];(ve(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=TF(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&CF(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let h=r[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}r[c]=h=new EF(d,e,c,u),s.push(h)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Fn.add(this._chart,i),!0}}function CF(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function TF(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Qw(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function IF(t,e,n){if(n===!1)return!1;const i=Qw(t,n),s=Qw(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function NF(t){let e,n,i,s;return te(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function gC(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function Xw(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],He(c)&&(r||e===0||Xr(e)===Xr(c))&&(e+=c)}return!u&&!i.all?0:e}function AF(t,e){const{iScale:n,vScale:i}=e,s=n.axis==="x"?"x":"y",r=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[r]:t[u]};return a}function nf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function PF(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function RF(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function DF(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Jw(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function Zw(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=PF(r,o,i),h=e.length;let d;for(let f=0;f<h;++f){const m=e[f],{[l]:v,[c]:w}=m,g=m._stacks||(m._stacks={});d=g[c]=DF(s,u,v),d[a]=w,d._top=Jw(d,o,!0,i.type),d._bottom=Jw(d,o,!1,i.type);const y=d._visualValues||(d._visualValues={});y[a]=w}}function sf(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function MF(t,e){return os(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function OF(t,e,n){return os(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Io(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n],r[i]._visualValues!==void 0&&r[i]._visualValues[n]!==void 0&&delete r[i]._visualValues[n]}}}const rf=t=>t==="reset"||t==="none",e1=(t,e)=>e?t:Object.assign({},t),LF=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:gC(n,!0),values:null};class pa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=nf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Io(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(h,d,f,m)=>h==="x"?d:h==="r"?m:f,r=n.xAxisID=Q(i.xAxisID,sf(e,"x")),o=n.yAxisID=Q(i.yAxisID,sf(e,"y")),a=n.rAxisID=Q(i.rAxisID,sf(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Lw(this._data,this),e._stacked&&Io(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(te(n)){const s=this._cachedMeta;this._data=AF(n,s)}else if(i!==n){if(i){Lw(i,this);const s=this._cachedMeta;Io(s),s._parsed=[]}n&&Object.isExtensible(n)&&gj(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=nf(n.vScale,n),n.stack!==i.stack&&(s=!0,Io(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&(Zw(this,n._parsed),n._stacked=nf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=s,i._sorted=!0,d=s;else{ve(s[e])?d=this.parseArrayData(i,s,e,n):te(s[e])?d=this.parseObjectData(i,s,e,n):d=this.parsePrimitiveData(i,s,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&Zw(this,d)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,h=new Array(s);let d,f,m;for(d=0,f=s;d<f;++d)m=d+i,h[d]={[a]:u||r.parse(c[m],m),[l]:o.parse(n[m],m)};return h}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,h;for(l=0,c=s;l<c;++l)u=l+i,h=n[u],a[l]={x:r.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,h,d,f;for(u=0,h=s;u<h;++u)d=u+i,f=n[d],c[u]={x:r.parse(qu(f,a),d),y:o.parse(qu(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:gC(s,!0),values:n._stacks[e.axis]._visualValues};return Xw(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=Xw(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=LF(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=RF(a);let d,f;function m(){f=s[d];const v=f[a.axis];return!He(f[e.axis])||u>v||h<v}for(d=0;d<o&&!(!m()&&(this.updateRangeFromParsed(c,e,f,l),r));++d);if(r){for(d=o-1;d>=0;--d)if(!m()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],He(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=NF(Q(this.options.clip,IF(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const h=s[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=OF(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=MF(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&Gu(i);if(a)return e1(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(be.elements[e]),m=()=>this.getContext(i,s,n),v=c.resolveNamedOptions(d,f,m,h);return v.$shared&&(v.$shared=l,r[o]=Object.freeze(e1(v,l))),v}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new pC(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||rf(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){rf(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!rf(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&Io(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}U(pa,"defaults",{}),U(pa,"datasetElementType",null),U(pa,"dataElementType",null);class Wc extends pa{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=wj(n,s,o);this._drawStart=a,this._drawCount=l,xj(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),d=o.axis,f=a.axis,{spanGaps:m,segment:v}=this.options,w=el(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||s==="none",y=n+i,x=e.length;let k=n>0&&this.getParsed(n-1);for(let _=0;_<x;++_){const S=e[_],C=g?S:{};if(_<n||_>=y){C.skip=!0;continue}const E=this.getParsed(_),A=he(E[f]),P=C[d]=o.getPixelForValue(E[d],_),L=C[f]=r||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[f],_);C.skip=isNaN(P)||isNaN(L)||A,C.stop=_>0&&Math.abs(E[d]-k[d])>w,v&&(C.parsed=E,C.raw=c.data[_]),h&&(C.options=u||this.resolveDataElementOptions(_,S.active?"active":s)),g||this.updateElement(S,_,C,s),k=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}U(Wc,"id","line"),U(Wc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),U(Wc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function cs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Iy{constructor(e){U(this,"options");this.options=e||{}}static override(e){Object.assign(Iy.prototype,e)}init(){}formats(){return cs()}parse(){return cs()}format(){return cs()}add(){return cs()}diff(){return cs()}startOf(){return cs()}endOf(){return cs()}}var $F={_date:Iy};function jF(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?fj:ks;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(r,e,n-u),d=l(r,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(r,e,n)}return{lo:0,hi:r.length-1}}function Dl(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:h,hi:d}=jF(r[a],e,o,s);for(let f=h;f<=d;++f){const m=u[f];m.skip||i(m,c,f)}}}function FF(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function of(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||Dl(t,n,e,function(a,l,c){!s&&!Qn(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function UF(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=uj(o,{x:e.x,y:e.y});ZE(h,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Dl(t,n,e,r),s}function zF(t,e,n,i,s,r){let o=[];const a=FF(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,s);if(i&&!f)return;const m=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(m))&&!f)return;const w=a(e,m);w<l?(o=[{element:u,datasetIndex:h,index:d}],l=w):w===l&&o.push({element:u,datasetIndex:h,index:d})}return Dl(t,n,e,c),o}function af(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?UF(t,e,n,s):zF(t,e,n,i,s,r)}function t1(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Dl(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var BF={evaluateInteractionItems:Dl,modes:{index(t,e,n,i){const s=ps(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?of(t,s,r,i,o):af(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=ps(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?of(t,s,r,i,o):af(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=ps(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return of(t,s,r,i,o)},nearest(t,e,n,i){const s=ps(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return af(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=ps(e,t);return t1(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=ps(e,t);return t1(t,s,"y",n.intersect,i)}}};const mC=["left","top","right","bottom"];function No(t,e){return t.filter(n=>n.pos===e)}function n1(t,e){return t.filter(n=>mC.indexOf(n.pos)===-1&&n.box.axis===e)}function Ao(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function VF(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function HF(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!mC.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function WF(t,e){const n=HF(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function KF(t){const e=VF(t),n=Ao(e.filter(c=>c.box.fullSize),!0),i=Ao(No(e,"left"),!0),s=Ao(No(e,"right")),r=Ao(No(e,"top"),!0),o=Ao(No(e,"bottom")),a=n1(e,"x"),l=n1(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:No(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function i1(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function yC(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function qF(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!te(s)){n.size&&(t[s]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?r.height:r.width),n.size=h.size/h.count,t[s]+=n.size}r.getPadding&&yC(o,r.getPadding());const a=Math.max(0,e.outerWidth-i1(o,t,"left","right")),l=Math.max(0,e.outerHeight-i1(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function GF(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function YF(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function Ko(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,YF(a.horizontal,e));const{same:h,other:d}=qF(e,n,a,i);c|=h&&s.length,u=u||d,l.fullSize||s.push(a)}return c&&Ko(s,e,n,i)||u}function yc(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function s1(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Gu(c.start)&&(o=c.start),l.fullSize?yc(l,s.left,o,n.outerWidth-s.right-s.left,d):yc(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Gu(c.start)&&(r=c.start),l.fullSize?yc(l,r,s.top,d,n.outerHeight-s.bottom-s.top):yc(l,r,e.top+c.placed,d,h),c.start=r,c.placed+=h,r=l.right}}e.x=r,e.y=o}var Zt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=gt(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=KF(t.boxes),l=a.vertical,c=a.horizontal;ne(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,w)=>w.box.options&&w.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},s);yC(d,gt(i));const f=Object.assign({maxPadding:d,w:r,h:o,x:s.left,y:s.top},s),m=WF(l.concat(c),h);Ko(a.fullSize,f,h,m),Ko(l,f,h,m),Ko(c,f,h,m)&&Ko(l,f,h,m),GF(f),s1(a.leftAndTop,f,h,m),f.x+=f.w,f.y+=f.h,s1(a.rightAndBottom,f,h,m),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ne(a.chartArea,v=>{const w=v.box;Object.assign(w,t.chartArea),w.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class vC{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class QF extends vC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Kc="$chartjs",XF={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},r1=t=>t===null||t==="";function JF(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[Kc]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",r1(s)){const r=Ww(t,"width");r!==void 0&&(t.width=r)}if(r1(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=Ww(t,"height");r!==void 0&&(t.height=r)}return t}const wC=uF?{passive:!0}:!1;function ZF(t,e,n){t&&t.addEventListener(e,n,wC)}function eU(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,wC)}function tU(t,e){const n=XF[t.type]||t.type,{x:i,y:s}=ps(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Zu(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function nU(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Zu(a.addedNodes,i),o=o&&!Zu(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function iU(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Zu(a.removedNodes,i),o=o&&!Zu(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const tl=new Map;let o1=0;function xC(){const t=window.devicePixelRatio;t!==o1&&(o1=t,tl.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function sU(t,e){tl.size||window.addEventListener("resize",xC),tl.set(t,e)}function rU(t){tl.delete(t),tl.size||window.removeEventListener("resize",xC)}function oU(t,e,n){const i=t.canvas,s=i&&Ty(i);if(!s)return;const r=nC((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),sU(t,r),o}function lf(t,e,n){n&&n.disconnect(),e==="resize"&&rU(t)}function aU(t,e,n){const i=t.canvas,s=nC(r=>{t.ctx!==null&&n(tU(r,t))},t);return ZF(i,e,s),s}class lU extends vC{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(JF(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Kc])return!1;const i=n[Kc].initial;["height","width"].forEach(r=>{const o=i[r];he(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Kc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:nU,detach:iU,resize:oU}[n]||aU;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:lf,detach:lf,resize:lf}[n]||eU)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return cF(e,n,i,s)}isAttached(e){const n=e&&Ty(e);return!!(n&&n.isConnected)}}function cU(t){return!Cy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?QF:lU}class ui{constructor(){U(this,"x");U(this,"y");U(this,"active",!1);U(this,"options");U(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return el(this.x)&&el(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}U(ui,"defaults",{}),U(ui,"defaultRoutes");function uU(t,e){const n=t.options.ticks,i=hU(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?fU(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return pU(e,c,r,o/s),c;const u=dU(r,e,s);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(vc(e,c,u,he(f)?0:a-f,a),h=0,d=o-1;h<d;h++)vc(e,c,u,r[h],r[h+1]);return vc(e,c,u,l,he(f)?e.length:l+f),c}return vc(e,c,u),c}function hU(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function dU(t,e,n){const i=gU(t),s=e.length/n;if(!i)return Math.max(s,1);const r=lj(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function fU(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function pU(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function vc(t,e,n,i,s){const r=Q(i,0),o=Math.min(Q(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function gU(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const mU=t=>t==="left"?"right":t==="right"?"left":t,a1=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,l1=(t,e)=>Math.min(e||t,t);function c1(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function yU(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function vU(t,e){ne(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Po(t){return t.drawTicks?t.tickLength:0}function u1(t,e){if(!t.display)return 0;const n=Fe(t.font,e),i=gt(t.padding);return(ve(t.text)?t.text.length:1)*n.lineHeight+i.height}function wU(t,e){return os(t,{scale:e,type:"scale"})}function xU(t,e,n){return os(t,{tick:n,index:e,type:"tick"})}function _U(t,e,n){let i=vy(t);return(n&&e!=="right"||!n&&e==="right")&&(i=mU(i)),i}function kU(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,m;const v=o-s,w=a-r;if(t.isHorizontal()){if(f=st(i,r,a),te(n)){const g=Object.keys(n)[0],y=n[g];m=u[g].getPixelForValue(y)+v-e}else n==="center"?m=(c.bottom+c.top)/2+v-e:m=a1(t,n,e);d=a-r}else{if(te(n)){const g=Object.keys(n)[0],y=n[g];f=u[g].getPixelForValue(y)-w+e}else n==="center"?f=(c.left+c.right)/2-w+e:f=a1(t,n,e);m=st(i,o,s),h=n==="left"?-zt:zt}return{titleX:f,titleY:m,maxWidth:d,rotation:h}}class Zs extends ui{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=Ot(e,Number.POSITIVE_INFINITY),n=Ot(n,Number.NEGATIVE_INFINITY),i=Ot(i,Number.POSITIVE_INFINITY),s=Ot(s,Number.NEGATIVE_INFINITY),{min:Ot(e,i),max:Ot(n,s),minDefined:He(e),maxDefined:He(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Ot(n,Ot(i,n)),max:Ot(i,Ot(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zj(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?c1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=uU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=oe(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=l1(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Jt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Po(e.grid)-n.padding-u1(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=my(Math.min(Math.asin(Jt((u.highest.height+6)/a,-1,1)),Math.asin(Jt(l/c,-1,1))-Math.asin(Jt(d/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=u1(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Po(r)+l):(e.height=this.maxHeight,e.width=Po(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,m=Ai(this.labelRotation),v=Math.cos(m),w=Math.sin(m);if(a){const g=i.mirror?0:w*h.width+v*d.height;e.height=Math.min(this.maxHeight,e.height+g+f)}else{const g=i.mirror?0:v*h.width+w*d.height;e.width=Math.min(this.maxWidth,e.width+g+f)}this._calculatePadding(c,u,w,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=s*e.width,f=i*n.height):(d=i*e.height,f=s*n.width):r==="start"?f=n.width:r==="end"?d=e.width:r!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;r==="start"?(u=0,h=e.height):r==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)he(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=c1(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:s,_longestTextCache:r}=this,o=[],a=[],l=Math.floor(n/l1(n,i));let c=0,u=0,h,d,f,m,v,w,g,y,x,k,_;for(h=0;h<n;h+=l){if(m=e[h].label,v=this._resolveTickFontOptions(h),s.font=w=v.string,g=r[w]=r[w]||{data:{},gc:[]},y=v.lineHeight,x=k=0,!he(m)&&!ve(m))x=Qu(s,g.data,g.gc,x,m),k=y;else if(ve(m))for(d=0,f=m.length;d<f;++d)_=m[d],!he(_)&&!ve(_)&&(x=Qu(s,g.data,g.gc,x,_),k+=y);o.push(x),a.push(k),c=Math.max(x,c),u=Math.max(k,u)}vU(r,n);const S=o.indexOf(c),C=a.indexOf(u),E=A=>({width:o[A]||0,height:a[A]||0});return{first:E(0),last:E(n-1),widest:E(S),highest:E(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return dj(this._alignToPixels?ls(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=xU(this.getContext(),e,i))}return this.$context||(this.$context=wU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ai(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Po(r),f=[],m=a.setContext(this.getContext()),v=m.display?m.width:0,w=v/2,g=function(Ne){return ls(i,Ne,v)};let y,x,k,_,S,C,E,A,P,L,q,ke;if(o==="top")y=g(this.bottom),C=this.bottom-d,A=y-w,L=g(e.top)+w,ke=e.bottom;else if(o==="bottom")y=g(this.top),L=e.top,ke=g(e.bottom)-w,C=y+w,A=this.top+d;else if(o==="left")y=g(this.right),S=this.right-d,E=y-w,P=g(e.left)+w,q=e.right;else if(o==="right")y=g(this.left),P=e.left,q=g(e.right)-w,S=y+w,E=this.left+d;else if(n==="x"){if(o==="center")y=g((e.top+e.bottom)/2+.5);else if(te(o)){const Ne=Object.keys(o)[0],et=o[Ne];y=g(this.chart.scales[Ne].getPixelForValue(et))}L=e.top,ke=e.bottom,C=y+w,A=C+d}else if(n==="y"){if(o==="center")y=g((e.left+e.right)/2);else if(te(o)){const Ne=Object.keys(o)[0],et=o[Ne];y=g(this.chart.scales[Ne].getPixelForValue(et))}S=y-w,E=S-d,P=e.left,q=e.right}const Mt=Q(s.ticks.maxTicksLimit,h),me=Math.max(1,Math.ceil(h/Mt));for(x=0;x<h;x+=me){const Ne=this.getContext(x),et=r.setContext(Ne),D=a.setContext(Ne),F=et.lineWidth,V=et.color,re=D.dash||[],le=D.dashOffset,mn=et.tickWidth,mt=et.tickColor,$n=et.tickBorderDash||[],yt=et.tickBorderDashOffset;k=yU(this,x,l),k!==void 0&&(_=ls(i,k,F),c?S=E=P=q=_:C=A=L=ke=_,f.push({tx1:S,ty1:C,tx2:E,ty2:A,x1:P,y1:L,x2:q,y2:ke,width:F,color:V,borderDash:re,borderDashOffset:le,tickWidth:mn,tickColor:mt,tickBorderDash:$n,tickBorderDashOffset:yt}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=r,d=Po(i.grid),f=d+u,m=h?-u:f,v=-Ai(this.labelRotation),w=[];let g,y,x,k,_,S,C,E,A,P,L,q,ke="middle";if(s==="top")S=this.bottom-m,C=this._getXAxisLabelAlignment();else if(s==="bottom")S=this.top+m,C=this._getXAxisLabelAlignment();else if(s==="left"){const me=this._getYAxisLabelAlignment(d);C=me.textAlign,_=me.x}else if(s==="right"){const me=this._getYAxisLabelAlignment(d);C=me.textAlign,_=me.x}else if(n==="x"){if(s==="center")S=(e.top+e.bottom)/2+f;else if(te(s)){const me=Object.keys(s)[0],Ne=s[me];S=this.chart.scales[me].getPixelForValue(Ne)+f}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")_=(e.left+e.right)/2-f;else if(te(s)){const me=Object.keys(s)[0],Ne=s[me];_=this.chart.scales[me].getPixelForValue(Ne)}C=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?ke="top":l==="end"&&(ke="bottom"));const Mt=this._getLabelSizes();for(g=0,y=a.length;g<y;++g){x=a[g],k=x.label;const me=r.setContext(this.getContext(g));E=this.getPixelForTick(g)+r.labelOffset,A=this._resolveTickFontOptions(g),P=A.lineHeight,L=ve(k)?k.length:1;const Ne=L/2,et=me.color,D=me.textStrokeColor,F=me.textStrokeWidth;let V=C;o?(_=E,C==="inner"&&(g===y-1?V=this.options.reverse?"left":"right":g===0?V=this.options.reverse?"right":"left":V="center"),s==="top"?c==="near"||v!==0?q=-L*P+P/2:c==="center"?q=-Mt.highest.height/2-Ne*P+P:q=-Mt.highest.height+P/2:c==="near"||v!==0?q=P/2:c==="center"?q=Mt.highest.height/2-Ne*P:q=Mt.highest.height-L*P,h&&(q*=-1),v!==0&&!me.showLabelBackdrop&&(_+=P/2*Math.sin(v))):(S=E,q=(1-L)*P/2);let re;if(me.showLabelBackdrop){const le=gt(me.backdropPadding),mn=Mt.heights[g],mt=Mt.widths[g];let $n=q-le.top,yt=0-le.left;switch(ke){case"middle":$n-=mn/2;break;case"bottom":$n-=mn;break}switch(C){case"center":yt-=mt/2;break;case"right":yt-=mt;break;case"inner":g===y-1?yt-=mt:g>0&&(yt-=mt/2);break}re={left:yt,top:$n,width:mt+le.width,height:mn+le.height,color:me.backdropColor}}w.push({label:k,font:A,textOffset:q,options:{rotation:v,color:et,strokeColor:D,strokeWidth:F,textAlign:V,textBaseline:ke,translation:[_,S],backdrop:re}})}return w}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ai(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=ls(e,this.left,o)-o/2,u=ls(e,this.right,a)+a/2,h=d=l):(h=ls(e,this.top,o)-o/2,d=ls(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&_y(i,s);const r=this.getLabelItems(e);for(const o of r){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Hs(i,c,0,u,l,a)}s&&ky(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=Fe(i.font),o=gt(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||te(n)?(l+=o.bottom,ve(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=kU(this,l,n,a);Hs(e,i.text,0,0,r,{color:i.color,maxWidth:h,rotation:d,textAlign:_U(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Q(e.grid&&e.grid.z,-1),s=Q(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zs.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Fe(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class wc{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;EU(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,SU(e,o,i),this.override&&be.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in be[s]&&(delete be[s][i],this.override&&delete Vs[i])}}function SU(t,e,n){const i=Za(Object.create(null),[n?be.get(n):{},be.get(e),t.defaults]);be.set(e,i),t.defaultRoutes&&bU(e,t.defaultRoutes),t.descriptors&&be.describe(e,t.descriptors)}function bU(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");be.route(r,s,l,a)})}function EU(t){return"id"in t&&"defaults"in t}class CU{constructor(){this.controllers=new wc(pa,"datasets",!0),this.elements=new wc(ui,"elements"),this.plugins=new wc(Object,"plugins"),this.scales=new wc(Zs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):ne(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=gy(e);oe(i["before"+s],[],i),n[e](i),oe(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var _n=new CU;class TU{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(oe(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){he(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=Q(i.options&&i.options.plugins,{}),r=IU(i);return s===!1&&!n?[]:AU(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function IU(t){const e={},n=[],i=Object.keys(_n.plugins.items);for(let r=0;r<i.length;r++)n.push(_n.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function NU(t,e){return!e&&t===!1?null:t===!0?{}:t}function AU(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=NU(i[l],s);c!==null&&r.push({plugin:a,options:PU(t.config,{plugin:a,local:n[l]},c,o)})}return r}function PU(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Kp(t,e){const n=be.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function RU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function DU(t,e){return t===e?"_index_":"_value_"}function h1(t){if(t==="x"||t==="y"||t==="r")return t}function MU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function qp(t,...e){if(h1(t))return t;for(const n of e){const i=n.axis||MU(n.position)||t.length>1&&h1(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function d1(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function OU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return d1(t,"x",n[0])||d1(t,"y",n[0])}return{}}function LU(t,e){const n=Vs[t.type]||{scales:{}},i=e.scales||{},s=Kp(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!te(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=qp(o,a,OU(o,t),be.scales[a.type]),c=DU(l,s),u=n.scales||{};r[o]=ua(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Kp(a,e),u=(Vs[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=RU(h,l),f=o[d+"AxisID"]||d;r[f]=r[f]||Object.create(null),ua(r[f],[{axis:d},i[f],u[h]])})}),Object.keys(r).forEach(o=>{const a=r[o];ua(a,[be.scales[a.type],be.scale])}),r}function _C(t){const e=t.options||(t.options={});e.plugins=Q(e.plugins,{}),e.scales=LU(t,e)}function kC(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function $U(t){return t=t||{},t.data=kC(t.data),_C(t),t}const f1=new Map,SC=new Set;function xc(t,e){let n=f1.get(t);return n||(n=e(),f1.set(t,n),SC.add(n)),n}const Ro=(t,e,n)=>{const i=qu(e,n);i!==void 0&&t.add(i)};class jU{constructor(e){this._config=$U(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kC(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),_C(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return xc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return xc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return xc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ro(l,e,h))),u.forEach(h=>Ro(l,s,h)),u.forEach(h=>Ro(l,Vs[r]||{},h)),u.forEach(h=>Ro(l,be,h)),u.forEach(h=>Ro(l,Hp,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),SC.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Vs[n]||{},be.datasets[n]||{},{type:n},be,Hp]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=p1(this._resolverCache,e,s);let l=o;if(UU(o,n)){r.$shared=!1,i=Qi(i)?i():i;const c=this.createResolver(e,i,a);l=Jr(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=p1(this._resolverCache,e,i);return te(n)?Jr(r,n,void 0,s):r}}function p1(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:Sy(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const FU=t=>te(t)&&Object.getOwnPropertyNames(t).some(e=>Qi(t[e]));function UU(t,e){const{isScriptable:n,isIndexable:i}=oC(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Qi(a)||FU(a))||o&&ve(a))return!0}return!1}var zU="4.4.7";const BU=["top","bottom","left","right","chartArea"];function g1(t,e){return t==="top"||t==="bottom"||BU.indexOf(t)===-1&&e==="x"}function m1(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function y1(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),oe(n&&n.onComplete,[t],e)}function VU(t){const e=t.chart,n=e.options.animation;oe(n&&n.onProgress,[t],e)}function bC(t){return Cy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const qc={},v1=t=>{const e=bC(t);return Object.values(qc).filter(n=>n.canvas===e).pop()};function HU(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function WU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function _c(t,e,n){return t.options.clip?t[n]:e[n]}function KU(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:_c(n,e,"left"),right:_c(n,e,"right"),top:_c(i,e,"top"),bottom:_c(i,e,"bottom")}:e}var pi;let mo=(pi=class{static register(...e){_n.add(...e),w1()}static unregister(...e){_n.remove(...e),w1()}constructor(e,n){const i=this.config=new jU(n),s=bC(e),r=v1(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||cU(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Z$(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new TU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=yj(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],qc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Fn.listen(this,"complete",y1),Fn.listen(this,"progress",VU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return he(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return _n}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Hw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zw(this.canvas,this.ctx),this}stop(){return Fn.stop(this),this}resize(e,n){Fn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Hw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),oe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ne(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=qp(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ne(r,o=>{const a=o.options,l=a.id,c=qp(l,a),u=Q(a.type,o.dtype);(a.position===void 0||g1(a.position,c)!==g1(o.dposition))&&(a.position=o.dposition),s[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=_n.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),ne(s,(o,a)=>{o||delete i[a]}),ne(i,o=>{Zt.configure(this,o,o.options),Zt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(m1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Kp(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=_n.getController(a),{datasetElementType:c,dataElementType:u}=be.datasets[a];Object.assign(l,{dataElementType:_n.getElement(u),datasetElementType:c&&_n.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ne(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!s&&r.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||ne(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(m1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ne(this.scales,e=>{Zt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Rw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;HU(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!Rw(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ne(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Qi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Fn.has(this)?this.attached&&!Fn.running(this)&&Fn.start(this):(this.draw(),y1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=KU(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&_y(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&ky(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Qn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=BF.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=os(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);Gu(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Fn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),zw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete qc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};ne(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ne(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ne(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Wu(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=rj(e),c=WU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,oe(r.onHover,[e,a,this],this),l&&oe(r.onClick,[e,a,this],this));const u=!Wu(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}},U(pi,"defaults",be),U(pi,"instances",qc),U(pi,"overrides",Vs),U(pi,"registry",_n),U(pi,"version",zU),U(pi,"getChart",v1),pi);function w1(){return ne(mo.instances,t=>t._plugins.invalidate())}function EC(t,e,n=e){t.lineCap=Q(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Q(n.borderDash,e.borderDash)),t.lineDashOffset=Q(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Q(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Q(n.borderWidth,e.borderWidth),t.strokeStyle=Q(n.borderColor,e.borderColor)}function qU(t,e,n){t.lineTo(n.x,n.y)}function GU(t){return t.stepped?Pj:t.tension||t.cubicInterpolationMode==="monotone"?Rj:qU}function CC(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function YU(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=CC(s,n,i),u=GU(r);let{move:h=!0,reverse:d}=i||{},f,m,v;for(f=0;f<=c;++f)m=s[(a+(d?c-f:f))%o],!m.skip&&(h?(t.moveTo(m.x,m.y),h=!1):u(t,v,m,d,r.stepped),v=m);return l&&(m=s[(a+(d?c:0))%o],u(t,v,m,d,r.stepped)),!!l}function QU(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=CC(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,m,v,w,g;const y=k=>(o+(c?a-k:k))%r,x=()=>{v!==w&&(t.lineTo(u,w),t.lineTo(u,v),t.lineTo(u,g))};for(l&&(f=s[y(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=s[y(d)],f.skip)continue;const k=f.x,_=f.y,S=k|0;S===m?(_<v?v=_:_>w&&(w=_),u=(h*u+k)/++h):(x(),t.lineTo(k,_),m=S,h=0,v=w=_),g=_}x()}function Gp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?QU:YU}function XU(t){return t.stepped?hF:t.tension||t.cubicInterpolationMode==="monotone"?dF:gs}function JU(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),EC(t,e.options),t.stroke(s)}function ZU(t,e,n,i){const{segments:s,options:r}=e,o=Gp(e);for(const a of s)EC(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const e3=typeof Path2D=="function";function t3(t,e,n,i){e3&&!e.options.segment?JU(t,e,n,i):ZU(t,e,n,i)}class Ss extends ui{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;iF(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=xF(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=yF(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=XU(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=r[h],m=r[d];if(f===m){a.push(f);continue}const v=Math.abs((s-f[n])/(m[n]-f[n])),w=l(f,m,v,i.stepped);w[n]=e[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Gp(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=Gp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),t3(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}U(Ss,"id","line"),U(Ss,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),U(Ss,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),U(Ss,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function x1(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class Mr extends ui{constructor(n){super();U(this,"parsed");U(this,"skip");U(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,s){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],s);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,i){return x1(this,n,"x",i)}inYRange(n,i){return x1(this,n,"y",i)}getCenterPoint(n){const{x:i,y:s}=this.getProps(["x","y"],n);return{x:i,y:s}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const s=i&&n.borderWidth||0;return(i+s)*2}draw(n,i){const s=this.options;this.skip||s.radius<.1||!Qn(this,i,this.size(s)/2)||(n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.fillStyle=s.backgroundColor,Wp(n,s,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}U(Mr,"id","point"),U(Mr,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),U(Mr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const _1=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},n3=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class k1 extends ui{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=oe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=Fe(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=_1(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let h=e;r.textAlign="left",r.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((m,v)=>{const w=i+n/2+r.measureText(m.text).width;(v===0||c[c.length-1]+w+2*a>o)&&(h+=u,c[c.length-(v>0?0:1)]=0,f+=u,d++),l[v]={left:0,top:f,row:d,width:w,height:s},c[c.length-1]+=w+a}),h}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,m=0,v=0;return this.legendItems.forEach((w,g)=>{const{itemWidth:y,itemHeight:x}=i3(i,n,r,w,s);g>0&&f+x+2*a>u&&(h+=d+a,c.push({width:d,height:f}),m+=d+a,v++,d=f=0),l[g]={left:m,top:f,col:v,width:y,height:x},d=Math.max(d,y),f+=x+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Dr(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=st(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=st(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=st(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=st(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;_y(e,this),this._draw(),ky(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=be.color,l=Dr(e.rtl,this.left,this.width),c=Fe(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:v,itemHeight:w}=_1(o,h),g=function(S,C,E){if(isNaN(m)||m<=0||isNaN(v)||v<0)return;s.save();const A=Q(E.lineWidth,1);if(s.fillStyle=Q(E.fillStyle,a),s.lineCap=Q(E.lineCap,"butt"),s.lineDashOffset=Q(E.lineDashOffset,0),s.lineJoin=Q(E.lineJoin,"miter"),s.lineWidth=A,s.strokeStyle=Q(E.strokeStyle,a),s.setLineDash(Q(E.lineDash,[])),o.usePointStyle){const P={radius:v*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:A},L=l.xPlus(S,m/2),q=C+d;sC(s,P,L,q,o.pointStyleWidth&&m)}else{const P=C+Math.max((h-v)/2,0),L=l.leftForLtr(S,m),q=Rr(E.borderRadius);s.beginPath(),Object.values(q).some(ke=>ke!==0)?Xu(s,{x:L,y:P,w:m,h:v,radius:q}):s.rect(L,P,m,v),s.fill(),A!==0&&s.stroke()}s.restore()},y=function(S,C,E){Hs(s,E.text,S,C+w/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},x=this.isHorizontal(),k=this._computeTitleHeight();x?f={x:st(r,this.left+u,this.right-i[0]),y:this.top+u+k,line:0}:f={x:this.left+u,y:st(r,this.top+k+u,this.bottom-n[0].height),line:0},hC(this.ctx,e.textDirection);const _=w+u;this.legendItems.forEach((S,C)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const E=s.measureText(S.text).width,A=l.textAlign(S.textAlign||(S.textAlign=o.textAlign)),P=m+d+E;let L=f.x,q=f.y;l.setWidth(this.width),x?C>0&&L+P+u>this.right&&(q=f.y+=_,f.line++,L=f.x=st(r,this.left+u,this.right-i[f.line])):C>0&&q+_>this.bottom&&(L=f.x=L+n[f.line].width+u,f.line++,q=f.y=st(r,this.top+k+u,this.bottom-n[f.line].height));const ke=l.x(L);if(g(ke,q,S),L=vj(A,L+m+d,x?L+P:this.right,e.rtl),y(l.x(L),q,S),x)f.x+=P+u;else if(typeof S.text!="string"){const Mt=c.lineHeight;f.y+=TC(S,Mt)+u}else f.y+=_}),dC(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Fe(n.font),s=gt(n.padding);if(!n.display)return;const r=Dr(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=st(e.align,h,this.right-d);else{const m=this.columnSizes.reduce((v,w)=>Math.max(v,w.height),0);u=c+st(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const f=st(a,h,h+d);o.textAlign=r.textAlign(vy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Hs(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=Fe(e.font),i=gt(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(Wo(e,this.left,this.right)&&Wo(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Wo(e,s.left,s.left+s.width)&&Wo(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!o3(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=n3(s,i);s&&!r&&oe(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&oe(n.onHover,[e,i,this],this)}else i&&oe(n.onClick,[e,i,this],this)}}function i3(t,e,n,i,s){const r=s3(i,t,e,n),o=r3(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function s3(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function r3(t,e,n){let i=t;return typeof e.text!="string"&&(i=TC(e,n)),i}function TC(t,e){const n=t.text?t.text.length:0;return e*n}function o3(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ny={id:"legend",_element:k1,start(t,e,n){const i=t.legend=new k1({ctx:t.ctx,options:n,chart:t});Zt.configure(t,i,n),Zt.addBox(t,i)},stop(t){Zt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Zt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=gt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class IC extends ui{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=ve(i.text)?i.text.length:1;this._padding=gt(i.padding);const r=s*Fe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=st(a,i,r),h=n+e,c=r-i):(o.position==="left"?(u=i+e,h=st(a,s,n),l=Oe*-.5):(u=r-e,h=st(a,n,s),l=Oe*.5),c=s-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Fe(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);Hs(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:vy(n.align),textBaseline:"middle",translation:[o,a]})}}function a3(t,e){const n=new IC({ctx:t.ctx,options:e,chart:t});Zt.configure(t,n,e),Zt.addBox(t,n),t.titleBlock=n}var Ay={id:"title",_element:IC,start(t,e,n){a3(t,n)},stop(t){const e=t.titleBlock;Zt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Zt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const qo={average(t){if(!t.length)return!1;let e,n,i=new Set,s=0,r=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),s+=l.y,++r}}return r===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Vp(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function wn(t,e){return e&&(ve(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Un(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function l3(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function S1(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=Fe(e.bodyFont),c=Fe(e.titleFont),u=Fe(e.footerFont),h=r.length,d=s.length,f=i.length,m=gt(e.padding);let v=m.height,w=0,g=i.reduce((k,_)=>k+_.before.length+_.lines.length+_.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const k=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=f*k+(g-f)*l.lineHeight+(g-1)*e.bodySpacing}d&&(v+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let y=0;const x=function(k){w=Math.max(w,n.measureText(k).width+y)};return n.save(),n.font=c.string,ne(t.title,x),n.font=l.string,ne(t.beforeBody.concat(t.afterBody),x),y=e.displayColors?o+2+e.boxPadding:0,ne(i,k=>{ne(k.before,x),ne(k.lines,x),ne(k.after,x)}),y=0,n.font=u.string,ne(t.footer,x),n.restore(),w+=m.width,{width:w,height:v}}function c3(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function u3(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function h3(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),u3(c,t,e,n)&&(c="center"),c}function b1(t,e,n){const i=n.yAlign||e.yAlign||c3(t,n);return{xAlign:n.xAlign||e.xAlign||h3(t,e,n,i),yAlign:i}}function d3(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function f3(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function E1(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=Rr(o);let m=d3(e,a);const v=f3(e,l,c);return l==="center"?a==="left"?m+=c:a==="right"&&(m-=c):a==="left"?m-=Math.max(u,d)+s:a==="right"&&(m+=Math.max(h,f)+s),{x:Jt(m,0,i.width-e.width),y:Jt(v,0,i.height-e.height)}}function kc(t,e,n){const i=gt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function C1(t){return wn([],Un(t))}function p3(t,e,n){return os(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function T1(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const NC={beforeTitle:jn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:jn,beforeBody:jn,beforeLabel:jn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return he(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:jn,afterBody:jn,beforeFooter:jn,footer:jn,afterFooter:jn};function Et(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?NC[e].call(n,i):s}class Yp extends ui{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new pC(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=p3(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=Et(i,"beforeTitle",this,e),r=Et(i,"title",this,e),o=Et(i,"afterTitle",this,e);let a=[];return a=wn(a,Un(s)),a=wn(a,Un(r)),a=wn(a,Un(o)),a}getBeforeBody(e,n){return C1(Et(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return ne(e,r=>{const o={before:[],lines:[],after:[]},a=T1(i,r);wn(o.before,Un(Et(a,"beforeLabel",this,r))),wn(o.lines,Et(a,"label",this,r)),wn(o.after,Un(Et(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return C1(Et(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=Et(i,"beforeFooter",this,e),r=Et(i,"footer",this,e),o=Et(i,"afterFooter",this,e);let a=[];return a=wn(a,Un(s)),a=wn(a,Un(r)),a=wn(a,Un(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(l3(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),ne(a,u=>{const h=T1(e.callbacks,u);s.push(Et(h,"labelColor",this,u)),r.push(Et(h,"labelPointStyle",this,u)),o.push(Et(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=qo[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=S1(this,i),c=Object.assign({},a,l),u=b1(this.chart,i,c),h=E1(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Rr(a),{x:d,y:f}=e,{width:m,height:v}=n;let w,g,y,x,k,_;return r==="center"?(k=f+v/2,s==="left"?(w=d,g=w-o,x=k+o,_=k-o):(w=d+m,g=w+o,x=k-o,_=k+o),y=w):(s==="left"?g=d+Math.max(l,u)+o:s==="right"?g=d+m-Math.max(c,h)-o:g=this.caretX,r==="top"?(x=f,k=x-o,w=g-o,y=g+o):(x=f+v,k=x+o,w=g+o,y=g-o),_=x),{x1:w,x2:g,x3:y,y1:x,y2:k,y3:_}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Dr(i.rtl,this.x,this.width);for(e.x=kc(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Fe(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=r,u=Fe(r.bodyFont),h=kc(this,"left",r),d=s.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,m=n.y+f;if(r.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=s.leftForLtr(d,c)+c/2,g=m+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Wp(e,v,w,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Wp(e,v,w,g)}else{e.lineWidth=te(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=s.leftForLtr(d,c),w=s.leftForLtr(s.xPlus(d,1),c-2),g=Rr(o.borderRadius);Object.values(g).some(y=>y!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Xu(e,{x:v,y:m,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Xu(e,{x:w,y:m+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(v,m,c,l),e.strokeRect(v,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(w,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Fe(i.bodyFont);let d=h.lineHeight,f=0;const m=Dr(i.rtl,this.x,this.width),v=function(E){n.fillText(E,m.x(e.x+f),e.y+d/2),e.y+=d+r},w=m.textAlign(o);let g,y,x,k,_,S,C;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=kc(this,w,i),n.fillStyle=i.bodyColor,ne(this.beforeBody,v),f=a&&w!=="right"?o==="center"?c/2+u:c+2+u:0,k=0,S=s.length;k<S;++k){for(g=s[k],y=this.labelTextColors[k],n.fillStyle=y,ne(g.before,v),x=g.lines,a&&x.length&&(this._drawColorBox(n,e,k,m,i),d=Math.max(h.lineHeight,l)),_=0,C=x.length;_<C;++_)v(x[_]),d=h.lineHeight;ne(g.after,v)}f=0,d=h.lineHeight,ne(this.afterBody,v),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Dr(i.rtl,this.x,this.width);for(e.x=kc(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Fe(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=Rr(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-m),n.quadraticCurveTo(a+c,l+u,a+c-m,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=qo[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=S1(this,e),l=Object.assign({},o,this._size),c=b1(n,e,l),u=E1(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=gt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),hC(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),dC(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!Wu(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!Wu(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=qo[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}U(Yp,"positioners",qo);var Py={id:"tooltip",_element:Yp,positioners:qo,afterInit(t,e,n){n&&(t.tooltip=new Yp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:NC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const g3=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function m3(t,e,n,i){const s=t.indexOf(e);if(s===-1)return g3(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const y3=(t,e)=>t===null?null:Jt(Math.round(t),0,e);function I1(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class nl extends Zs{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(he(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:m3(i,e,Q(n,e),this._addedLabels),y3(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return I1.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}U(nl,"id","category"),U(nl,"defaults",{ticks:{callback:I1}});function v3(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=r||1,m=u-1,{min:v,max:w}=e,g=!he(o),y=!he(a),x=!he(c),k=(w-v)/(h+1);let _=Mw((w-v)/m/f)*f,S,C,E,A;if(_<1e-14&&!g&&!y)return[{value:v},{value:w}];A=Math.ceil(w/_)-Math.floor(v/_),A>m&&(_=Mw(A*_/m/f)*f),he(l)||(S=Math.pow(10,l),_=Math.ceil(_*S)/S),s==="ticks"?(C=Math.floor(v/_)*_,E=Math.ceil(w/_)*_):(C=v,E=w),g&&y&&r&&cj((a-o)/r,_/1e3)?(A=Math.round(Math.min((a-o)/_,u)),_=(a-o)/A,C=o,E=a):x?(C=g?o:C,E=y?a:E,A=c-1,_=(E-C)/A):(A=(E-C)/_,ha(A,Math.round(A),_/1e3)?A=Math.round(A):A=Math.ceil(A));const P=Math.max(Ow(_),Ow(C));S=Math.pow(10,he(l)?P:l),C=Math.round(C*S)/S,E=Math.round(E*S)/S;let L=0;for(g&&(d&&C!==o?(n.push({value:o}),C<o&&L++,ha(Math.round((C+L*_)*S)/S,o,N1(o,k,t))&&L++):C<o&&L++);L<A;++L){const q=Math.round((C+L*_)*S)/S;if(y&&q>a)break;n.push({value:q})}return y&&d&&E!==a?n.length&&ha(n[n.length-1].value,a,N1(a,k,t))?n[n.length-1].value=a:n.push({value:a}):(!y||E===a)&&n.push({value:E}),n}function N1(t,e,{horizontal:n,minRotation:i}){const s=Ai(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class eh extends Zs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return he(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=Xr(s),c=Xr(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=v3(s,r);return e.bounds==="ticks"&&JE(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return xy(e,this.chart.options.locale,this.options.ticks.format)}}class il extends eh{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=He(e)?e:0,this.max=He(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Ai(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}U(il,"id","linear"),U(il,"defaults",{ticks:{callback:ed.formatters.numeric}});const sl=t=>Math.floor(Ni(t)),us=(t,e)=>Math.pow(10,sl(t)+e);function A1(t){return t/Math.pow(10,sl(t))===1}function P1(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function w3(t,e){const n=e-t;let i=sl(n);for(;P1(t,e,i)>10;)i++;for(;P1(t,e,i)<10;)i--;return Math.min(i,sl(t))}function x3(t,{min:e,max:n}){e=Ot(t.min,e);const i=[],s=sl(e);let r=w3(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,r)),d=Ot(t.min,Math.round((l+u+h*Math.pow(10,r))*o)/o);for(;d<n;)i.push({value:d,major:A1(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(r++,h=2,o=r>=0?1:o),d=Math.round((l+u+h*Math.pow(10,r))*o)/o;const f=Ot(t.max,d);return i.push({value:f,major:A1(f),significand:h}),i}class R1 extends Zs{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=eh.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return He(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=He(e)?Math.max(0,e):null,this.max=He(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!He(this._userMin)&&(this.min=e===us(this.min,0)?us(this.min,-1):us(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(us(i,-1)),o(us(s,1)))),i<=0&&r(us(s,-1)),s<=0&&o(us(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=x3(n,this);return e.bounds==="ticks"&&JE(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":xy(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ni(e),this._valueRange=Ni(this.max)-Ni(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ni(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}U(R1,"id","logarithmic"),U(R1,"defaults",{ticks:{callback:ed.formatters.logarithmic,major:{enabled:!0}}});function Qp(t){const e=t.ticks;if(e.display&&t.display){const n=gt(e.backdropPadding);return Q(e.font&&e.font.size,be.font.size)+n.height}return 0}function _3(t,e,n){return n=ve(n)?n:[n],{w:Aj(t,e.string,n),h:n.length*e.lineHeight}}function D1(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function k3(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Oe/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),h=Fe(c.font),d=_3(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=ln(t.getIndexAngle(l)+a),m=Math.round(my(f)),v=D1(m,u.x,d.w,0,180),w=D1(m,u.y,d.h,90,270);S3(n,e,f,v,w)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=C3(t,i,s)}function S3(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function b3(t,e,n){const i=t.drawingArea,{extra:s,additionalAngle:r,padding:o,size:a}=n,l=t.getPointPosition(e,i+s+o,r),c=Math.round(my(ln(l.angle+zt))),u=N3(l.y,a.h,c),h=T3(c),d=I3(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function E3(t,e){if(!e)return!0;const{left:n,top:i,right:s,bottom:r}=t;return!(Qn({x:n,y:i},e)||Qn({x:n,y:r},e)||Qn({x:s,y:i},e)||Qn({x:s,y:r},e))}function C3(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,{centerPointLabels:o,display:a}=r.pointLabels,l={extra:Qp(r)/2,additionalAngle:o?Oe/s:0};let c;for(let u=0;u<s;u++){l.padding=n[u],l.size=e[u];const h=b3(t,u,l);i.push(h),a==="auto"&&(h.visible=E3(h,c),h.visible&&(c=h))}return i}function T3(t){return t===0||t===180?"center":t<180?"left":"right"}function I3(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function N3(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function A3(t,e,n){const{left:i,top:s,right:r,bottom:o}=n,{backdropColor:a}=e;if(!he(a)){const l=Rr(e.borderRadius),c=gt(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=s-c.top,d=r-i+c.width,f=o-s+c.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),Xu(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function P3(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=t._pointLabelItems[s];if(!r.visible)continue;const o=i.setContext(t.getPointLabelContext(s));A3(n,o,r);const a=Fe(o.font),{x:l,y:c,textAlign:u}=r;Hs(n,t._pointLabels[s],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function AC(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,tn);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function R3(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash||[]),r.lineDashOffset=s.dashOffset,r.beginPath(),AC(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function D3(t,e,n){return os(t,{label:n,index:e,type:"pointLabel"})}class Sc extends eh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=gt(Qp(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=He(e)&&!isNaN(e)?e:0,this.max=He(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Qp(this.options))}generateTickLabels(e){eh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=oe(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?k3(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=tn/(this._pointLabels.length||1),i=this.options.startAngle||0;return ln(e*n+Ai(i))}getDistanceFromCenterForValue(e){if(he(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(he(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return D3(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-zt+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),AC(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&P3(this,o),s.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=s.setContext(d),m=r.setContext(d);R3(this,f,l,o,m)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=Fe(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=gt(c.backdropPadding);e.fillRect(-o/2-h.left,-r-u.size/2-h.top,o+h.width,u.size+h.height)}Hs(e,a.label,0,-r,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}U(Sc,"id","radialLinear"),U(Sc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ed.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),U(Sc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),U(Sc,"descriptors",{angleLines:{_fallback:"grid"}});const nd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},It=Object.keys(nd);function M1(t,e){return t-e}function O1(t,e){if(he(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),He(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(el(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function L1(t,e,n,i){const s=It.length;for(let r=It.indexOf(t);r<s-1;++r){const o=nd[It[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return It[r]}return It[s-1]}function M3(t,e,n,i,s){for(let r=It.length-1;r>=It.indexOf(n);r--){const o=It[r];if(nd[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return It[n?It.indexOf(n):0]}function O3(t){for(let e=It.indexOf(t)+1,n=It.length;e<n;++e)if(nd[It[e]].common)return It[e]}function $1(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=yy(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function L3(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function j1(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:L3(t,i,s,n)}class th extends Zs{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new $F._date(e.adapters.date);s.init(n),ua(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:O1(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=He(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=He(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=pj(s,r,o);return this._unit=n.unit||(i.autoSkip?L1(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):M3(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:O3(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),j1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Jt(n,0,o),i=Jt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||L1(r.minUnit,n,i,this._getLabelCapacity(n)),a=Q(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=el(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)$1(u,d,m);return(d===i||s.bounds==="ticks"||f===1)&&$1(u,d,m),Object.keys(u).sort(M1).map(v=>+v)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,r=this._unit,o=n||s[r];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return oe(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,s||(f?h:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=Ai(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,j1(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(O1(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return mj(e.sort(M1))}}U(th,"id","time"),U(th,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bc(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=ks(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=ks(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class F1 extends th{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=bc(n,this.min),this._tableRange=bc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((s,r)=>s-r)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(bc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return bc(this._table,i*this._tableRange+this._minPos,!0)}}U(F1,"id","timeseries"),U(F1,"defaults",th.defaults);const PC="label";function U1(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function $3(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function RC(t,e){t.labels=e}function DC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:PC;const i=[];t.datasets=e.map(s=>{const r=t.datasets.find(o=>o[n]===s[n]);return!r||!s.data||i.includes(r)?{...s}:(i.push(r),Object.assign(r,s),r)})}function j3(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:PC;const n={labels:[],datasets:[]};return RC(n,t.labels),DC(n,t.datasets,e),n}function F3(t,e){const{height:n=150,width:i=300,redraw:s=!1,datasetIdKey:r,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=t,f=b.useRef(null),m=b.useRef(),v=()=>{f.current&&(m.current=new mo(f.current,{type:o,data:j3(a,r),options:l&&{...l},plugins:c}),U1(e,m.current))},w=()=>{U1(e,null),m.current&&(m.current.destroy(),m.current=null)};return b.useEffect(()=>{!s&&m.current&&l&&$3(m.current,l)},[s,l]),b.useEffect(()=>{!s&&m.current&&RC(m.current.config.data,a.labels)},[s,a.labels]),b.useEffect(()=>{!s&&m.current&&a.datasets&&DC(m.current.config.data,a.datasets,r)},[s,a.datasets]),b.useEffect(()=>{m.current&&(s?(w(),setTimeout(v)):m.current.update(h))},[s,l,a.labels,a.datasets,h]),b.useEffect(()=>{m.current&&(w(),setTimeout(v))},[o]),b.useEffect(()=>(v(),()=>w()),[]),to.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:i},d),u)}const U3=b.forwardRef(F3);function z3(t,e){return mo.register(e),b.forwardRef((n,i)=>to.createElement(U3,Object.assign({},n,{ref:i,type:t})))}const Ry=z3("line",Wc);mo.register(nl,il,Mr,Ss,Ay,Py,Ny);const B3="VsNkEb0zbUUoaS30tLEtworzEy92byRB";function V3({stock:t,onDelete:e}){const[n,i]=b.useState(null),[s,r]=b.useState(null),[o,a]=b.useState("30"),[l,c]=b.useState(null),[u,h]=b.useState(null),[d,f]=b.useState(null),[m,v]=b.useState({currentPrice:!1,priceChange:!1,volume:!1,marketCap:!1,peRatio:!1});b.useEffect(()=>{async function y(){try{const x=await fetch(`https://financialmodelingprep.com/api/v3/historical-price-full/${t.symbol}?timeseries=${o}&apikey=${B3}`);if(!x.ok)throw new Error(`HTTP error! status: ${x.status}`);const k=await x.json();if(!k.historical||k.historical.length===0)throw new Error("No data available for this stock");const _=k.historical.reverse(),S=_[_.length-1];i({labels:_.map(C=>C.date),datasets:[{label:"Closing Price",data:_.map(C=>C.close),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.2)",tension:.1,fill:!0}]}),c(S.close),h(S.close-_[0].close),f({volume:S.volume||"N/A",marketCap:S.marketCap&&!isNaN(S.marketCap)?S.marketCap:"N/A",pe:S.pe&&!isNaN(S.pe)?S.pe:"N/A"}),r(null)}catch(x){console.error("Error fetching stock data:",x),r(x.message),i(null),c(null),h(null),f(null)}}y()},[t.symbol,o]);const w={currentPrice:"The most recent price at which the stock was traded.",priceChange:"The change in price over the selected time period.",volume:"The total number of shares traded during the most recent trading day.",marketCap:"The total value of a company's outstanding shares of stock.",peRatio:"The ratio of a company's share price to its earnings per share."},g=y=>{v(x=>({...x,[y]:!x[y]}))};return s?p.jsxs("div",{className:"bg-error text-white p-6 rounded-lg shadow-lg",children:["Error: ",s]}):n?p.jsxs("div",{className:"bg-secondary border border-gray-700 rounded-lg overflow-hidden shadow-lg transition duration-300 ease-in-out hover:shadow-2xl h-full flex flex-col",children:[p.jsxs("div",{className:"p-8",children:[p.jsxs("div",{className:"flex justify-between items-start mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-text-primary",children:[t.name," (",t.symbol,")"]}),p.jsx("button",{onClick:()=>e(t.id),className:"bg-error hover:bg-red-700 text-white font-bold py-2 px-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:p.jsx(KE,{size:20})})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"text-4xl font-bold text-text-primary",children:["$",l.toFixed(2)]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("currentPrice"),children:p.jsx(un,{size:20})})]}),m.currentPrice&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.currentPrice}),p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:`text-2xl font-semibold ${u>=0?"text-success":"text-error"}`,children:[u>=0?"+":"-","$",Math.abs(u).toFixed(2)," (",(u/(l-u)*100).toFixed(2),"%)"]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("priceChange"),children:p.jsx(un,{size:20})})]}),m.priceChange&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.priceChange}),d&&p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsxs("p",{className:"text-text-secondary",children:["Volume: ",d.volume.toLocaleString()]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("volume"),children:p.jsx(un,{size:16})})]}),m.volume&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.volume}),p.jsxs("div",{className:"flex items-center",children:[p.jsxs("p",{className:"text-text-secondary",children:["Market Cap: ",typeof d.marketCap=="number"?`$${(d.marketCap/1e9).toFixed(2)}B`:"N/A"]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("marketCap"),children:p.jsx(un,{size:16})})]}),m.marketCap&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.marketCap}),p.jsxs("div",{className:"flex items-center",children:[p.jsxs("p",{className:"text-text-secondary",children:["P/E Ratio: ",typeof d.pe=="number"?d.pe.toFixed(2):"N/A"]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("peRatio"),children:p.jsx(un,{size:16})})]}),m.peRatio&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.peRatio})]})]}),p.jsx("div",{className:"h-64 flex-grow",children:p.jsx(Ry,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!1,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"var(--text-color-muted)"}},x:{grid:{display:!1},ticks:{color:"var(--text-color-muted)"}}}}})})]})]}),p.jsx("div",{className:"bg-primary p-4 flex justify-center space-x-4",children:["7","30","90","365"].map(y=>p.jsx("button",{onClick:()=>a(y),className:`px-4 py-2 rounded-lg ${o===y?"bg-accent text-white":"bg-secondary text-text-primary hover:bg-accent hover:text-white"} transition duration-300 ease-in-out transform hover:scale-105`,children:y==="7"?"1W":y==="30"?"1M":y==="90"?"3M":"1Y"},y))})]}):p.jsx("div",{className:"bg-secondary text-text-primary p-6 rounded-lg shadow-lg",children:"Loading..."})}mo.register(nl,il,Mr,Ss,Ay,Py,Ny);function H3({crypto:t,onDelete:e}){const[n,i]=b.useState(null),[s,r]=b.useState(null),[o,a]=b.useState("m30"),[l,c]=b.useState(null),[u,h]=b.useState(null),[d,f]=b.useState(null),[m,v]=b.useState({currentPrice:!1,priceChange:!1,volume:!1,marketCap:!1,supply:!1,maxSupply:!1});b.useEffect(()=>{async function y(){try{const[x,k]=await Promise.all([fetch(`https://api.coincap.io/v2/assets/${t.id}/history?interval=${o}`),fetch(`https://api.coincap.io/v2/assets/${t.id}`)]);if(!x.ok||!k.ok)throw new Error(`HTTP error! status: ${x.status||k.status}`);const[_,S]=await Promise.all([x.json(),k.json()]);if(!_.data||_.data.length===0)throw new Error("No data available for this cryptocurrency");const C=_.data,E=o==="m30"?48:o==="h2"?84:o==="h12"?60:30,A=Math.max(1,Math.floor(C.length/E)),P=C.filter((q,ke)=>ke%A===0).slice(-E);i({labels:P.map(q=>new Date(q.time).toLocaleDateString()),datasets:[{label:"Price (USD)",data:P.map(q=>parseFloat(q.priceUsd)),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.2)",tension:.1,fill:!0}]});const L=parseFloat(S.data.priceUsd);c(L),h(L-parseFloat(P[0].priceUsd)),f({volume:parseFloat(S.data.volumeUsd24Hr),marketCap:parseFloat(S.data.marketCapUsd),supply:parseFloat(S.data.supply),maxSupply:S.data.maxSupply?parseFloat(S.data.maxSupply):null}),r(null)}catch(x){console.error("Error fetching crypto data:",x),r(x.message),i(null),c(null),h(null),f(null)}}y()},[t.id,o]);const w={currentPrice:"The most recent price of the cryptocurrency in USD.",priceChange:"The change in price over the selected time period.",volume:"The total trading volume in USD over the last 24 hours.",marketCap:"The total market value of the cryptocurrency's circulating supply.",supply:"The amount of coins that are circulating in the market.",maxSupply:"The maximum number of coins that will ever exist in the lifetime of the cryptocurrency."},g=y=>{v(x=>({...x,[y]:!x[y]}))};return s?p.jsxs("div",{className:"bg-error text-white p-6 rounded-lg shadow-lg",children:["Error: ",s]}):!n||!d?p.jsx("div",{className:"bg-secondary text-text-primary p-6 rounded-lg shadow-lg",children:"Loading..."}):p.jsxs("div",{className:"bg-secondary border border-gray-700 rounded-lg overflow-hidden shadow-lg transition duration-300 ease-in-out hover:shadow-2xl h-full flex flex-col",children:[p.jsxs("div",{className:"p-8",children:[p.jsxs("div",{className:"flex justify-between items-start mb-6",children:[p.jsxs("h3",{className:"text-2xl font-bold text-text-primary",children:[t.name," (",t.symbol.toUpperCase(),")"]}),p.jsx("button",{onClick:()=>e(t.id),className:"bg-error hover:bg-red-700 text-white font-bold py-2 px-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:p.jsx(KE,{size:20})})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"text-4xl font-bold text-text-primary",children:["$",l.toFixed(2)]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("currentPrice"),children:p.jsx(un,{size:20})})]}),m.currentPrice&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.currentPrice}),p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:`text-2xl font-semibold ${u>=0?"text-success":"text-error"}`,children:[u>=0?"+":"-","$",Math.abs(u).toFixed(2)," (",(u/(l-u)*100).toFixed(2),"%)"]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("priceChange"),children:p.jsx(un,{size:20})})]}),m.priceChange&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.priceChange}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsxs("p",{className:"text-text-secondary",children:["Volume: $",d.volume.toLocaleString(void 0,{maximumFractionDigits:0})]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("volume"),children:p.jsx(un,{size:16})})]}),m.volume&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.volume}),p.jsxs("div",{className:"flex items-center",children:[p.jsxs("p",{className:"text-text-secondary",children:["Market Cap: $",d.marketCap.toLocaleString(void 0,{maximumFractionDigits:0})]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("marketCap"),children:p.jsx(un,{size:16})})]}),m.marketCap&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.marketCap}),p.jsxs("div",{className:"flex items-center",children:[p.jsxs("p",{className:"text-text-secondary",children:["Supply: ",d.supply.toLocaleString(void 0,{maximumFractionDigits:0})," ",t.symbol.toUpperCase()]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("supply"),children:p.jsx(un,{size:16})})]}),m.supply&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.supply}),d.maxSupply&&p.jsxs("div",{className:"flex items-center",children:[p.jsxs("p",{className:"text-text-secondary",children:["Max Supply: ",d.maxSupply.toLocaleString(void 0,{maximumFractionDigits:0})," ",t.symbol.toUpperCase()]}),p.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>g("maxSupply"),children:p.jsx(un,{size:16})})]}),m.maxSupply&&d.maxSupply&&p.jsx("p",{className:"text-sm text-text-secondary",children:w.maxSupply})]})]}),p.jsx("div",{className:"h-64 flex-grow",children:p.jsx(Ry,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!1,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"var(--text-color-muted)"}},x:{grid:{display:!1},ticks:{color:"var(--text-color-muted)"}}}}})})]})]}),p.jsx("div",{className:"bg-primary p-4 flex justify-center space-x-4",children:[{label:"1D",value:"m30"},{label:"1W",value:"h2"},{label:"1M",value:"h12"},{label:"1Y",value:"d1"}].map(({label:y,value:x})=>p.jsx("button",{onClick:()=>a(x),className:`px-4 py-2 rounded-lg ${o===x?"bg-accent text-white":"bg-secondary text-text-primary hover:bg-accent hover:text-white"} transition duration-300 ease-in-out transform hover:scale-105`,children:y},x))})]})}const _t=({children:t,onClick:e,type:n="button",disabled:i=!1,className:s=""})=>p.jsx("button",{type:n,onClick:e,disabled:i,className:`px-4 py-2 bg-accent text-white rounded hover:bg-accent-dark transition-all duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-opacity-50 ${i?"opacity-50 cursor-not-allowed":""} ${s}`,children:t}),W3=({type:t="text",id:e,value:n,onChange:i,placeholder:s,required:r=!1,className:o="",label:a})=>p.jsxs("div",{className:"mb-4",children:[a&&p.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-text-primary",children:a}),p.jsx("input",{type:t,id:e,value:n,onChange:i,placeholder:s,required:r,className:`w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none ${o}`})]}),Gc=to.forwardRef(({className:t,...e},n)=>p.jsx("label",{ref:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${t}`,...e}));Gc.displayName="Label";const Yc=to.forwardRef(({className:t,children:e,...n},i)=>p.jsx("select",{className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,ref:i,...n,children:e}));Yc.displayName="Select";const K3=[{id:1,name:"Microsoft",symbol:"MSFT",price:300,change:1.2,volume:1e6}],q3=[{id:1,name:"Bitcoin",symbol:"BTC",price:45e3,change:2.5,volume:5e5}];function z1({stocks:t=K3,cryptos:e=q3,onDeleteStock:n,onDeleteCrypto:i,user:s,isAuthenticated:r}){const[o,a]=b.useState(!0),[l,c]=b.useState(""),[u,h]=b.useState("name"),[d,f]=b.useState("asc"),[m,v]=b.useState(t),[w,g]=b.useState(e),[y,x]=b.useState([]);b.useEffect(()=>{v(t),g(e)},[t,e]),b.useEffect(()=>{(async()=>{if(s&&s.role==="admin"){const S=hE(rs,"users"),E=(await bE(S)).docs.map(A=>({id:A.id,...A.data()}));x(E)}})()},[s]);const k=b.useMemo(()=>(o?m:w).filter(C=>C.name.toLowerCase().includes(l.toLowerCase())||C.symbol.toLowerCase().includes(l.toLowerCase())).sort((C,E)=>{if(C.isCustom)return-1;if(E.isCustom)return 1;const A=C[u],P=E[u];return A<P?d==="asc"?-1:1:A>P?d==="asc"?1:-1:0}),[o,m,w,l,u,d]);return s&&s.role==="admin"?p.jsxs("div",{className:"space-y-8",children:[p.jsx("h1",{className:"text-4xl font-bold text-text-primary",children:"Admin Dashboard"}),p.jsxs("div",{className:"bg-secondary p-6 rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4 text-text-primary",children:"User Management"}),p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"text-left p-2",children:"Name"}),p.jsx("th",{className:"text-left p-2",children:"Email"}),p.jsx("th",{className:"text-left p-2",children:"Role"}),p.jsx("th",{className:"text-left p-2",children:"Actions"})]})}),p.jsx("tbody",{children:y.map(_=>p.jsxs("tr",{children:[p.jsx("td",{className:"p-2",children:_.displayName}),p.jsx("td",{className:"p-2",children:_.email}),p.jsx("td",{className:"p-2",children:_.role}),p.jsx("td",{className:"p-2",children:p.jsx(_t,{children:"View Activity"})})]},_.id))})]})]})]}):p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("h1",{className:"text-4xl font-bold text-text-primary",children:["Your ",o?"Stock":"Crypto"," Dashboard"]}),p.jsx(Bn,{to:"/add-stock",children:p.jsxs(_t,{className:"bg-accent hover:bg-accent-dark text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:["Add New ",o?"Stock":"Crypto"]})})]}),!r&&p.jsx("div",{className:"bg-primary p-4 rounded-lg text-text-primary",children:p.jsx("p",{children:"You are currently using the app without an account. Sign up to save your data and access all features."})}),p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Gc,{htmlFor:"show-stocks",className:"text-text-primary",children:"Show:"}),p.jsxs(Yc,{id:"show-stocks",value:o?"stocks":"crypto",onChange:_=>a(_.target.value==="stocks"),children:[p.jsx("option",{value:"stocks",children:"Stocks"}),p.jsx("option",{value:"crypto",children:"Cryptocurrencies"})]})]}),p.jsx("div",{className:"flex-1 max-w-sm",children:p.jsx(W3,{type:"text",placeholder:"Search by name or symbol",value:l,onChange:_=>c(_.target.value),className:"w-full"})}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Gc,{htmlFor:"sort-by",className:"text-text-primary",children:"Sort by:"}),p.jsxs(Yc,{id:"sort-by",value:u,onChange:_=>h(_.target.value),children:[p.jsx("option",{value:"name",children:"Name"}),p.jsx("option",{value:"symbol",children:"Symbol"}),p.jsx("option",{value:"price",children:"Price"}),p.jsx("option",{value:"change",children:"Change %"}),p.jsx("option",{value:"volume",children:"Volume"})]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Gc,{htmlFor:"sort-order",className:"text-text-primary",children:"Order:"}),p.jsxs(Yc,{id:"sort-order",value:d,onChange:_=>f(_.target.value),children:[p.jsx("option",{value:"asc",children:"Ascending"}),p.jsx("option",{value:"desc",children:"Descending"})]})]})]}),p.jsx("div",{className:"grid gap-8 grid-cols-1",children:k.map(_=>o?p.jsx(V3,{stock:_,onDelete:()=>n(_.id),className:"w-full"},_.id):p.jsx(H3,{crypto:_,onDelete:()=>i(_.id),className:"w-full"},_.id))}),k.length===0&&p.jsxs("p",{className:"text-center text-text-secondary text-lg",children:["No ",o?"stocks":"cryptocurrencies"," found. Try adjusting your search or add some!"]})]})}const G3={}.VITE_TWELVE_DATA_API_KEY;function Y3({onAddStock:t,onAddCrypto:e}){const[n,i]=b.useState(""),[s,r]=b.useState([]),[o,a]=b.useState(null),[l,c]=b.useState(!1),[u,h]=b.useState(!1);async function d(m){m.preventDefault(),c(!0),a(null),r([]);try{let v;if(u){const w=await fetch(`https://api.coincap.io/v2/assets?search=${n}&limit=10`);if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);const g=await w.json();g.data&&g.data.length>0?r(g.data.map(y=>({id:y.id,symbol:y.symbol,name:y.name}))):a("No results found")}else{const w=await fetch(`https://api.twelvedata.com/symbol_search?symbol=${n}&apikey=${G3}`);if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);v=(await w.json()).data.filter(y=>y.exchange&&["NASDAQ","NYSE"].includes(y.exchange)).slice(0,10).map(y=>({id:y.symbol,symbol:y.symbol,name:y.instrument_name})),v.length===0?a("No results found"):r(v)}}catch(v){console.error("Error details:",v),a(`Error searching for ${u?"cryptocurrencies":"stocks"}: ${v.message}`)}finally{c(!1)}}function f(m){u?e(m):t(m),i(""),r([])}return p.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-secondary rounded-lg shadow-md",children:[p.jsxs("h2",{className:"text-2xl font-bold mb-4 text-text-primary",children:["Add New ",u?"Cryptocurrency":"Stock"]}),p.jsx("div",{className:"mb-4",children:p.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[p.jsx("span",{className:"mr-3 text-sm font-medium text-text-primary",children:"Stocks"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"checkbox",value:"",className:"sr-only peer",checked:u,onChange:()=>h(!u)}),p.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),p.jsx("span",{className:"ml-3 text-sm font-medium text-text-primary",children:"Crypto"})]})}),p.jsx("form",{onSubmit:d,className:"mb-6",children:p.jsxs("div",{className:"flex",children:[p.jsx("input",{type:"text",value:n,onChange:m=>i(m.target.value),placeholder:`Search for a ${u?"cryptocurrency":"stock"}...`,required:!0,disabled:l,className:"flex-grow p-2 border border-gray-600 rounded-l-md bg-primary text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),p.jsx(_t,{type:"submit",className:"bg-accent hover:bg-accent-dark text-white font-bold py-2 px-4 rounded-r-md",disabled:l,children:l?"Searching...":"Search"})]})}),o&&p.jsx("p",{className:"text-error mb-4",children:o}),s.length>0&&p.jsx("ul",{className:"bg-primary rounded-md overflow-hidden",children:s.map(m=>p.jsx("li",{className:"border-b border-gray-700 last:border-b-0",children:p.jsxs("div",{className:"flex justify-between items-center p-4",children:[p.jsxs("span",{className:"text-text-primary",children:[m.name," (",m.symbol.toUpperCase(),")"]}),p.jsx(_t,{onClick:()=>f(m),className:"bg-accent hover:bg-accent-dark text-white font-bold py-1 px-3 rounded-md text-sm",children:"Add"})]})},m.id))})]})}mo.register(nl,il,Mr,Ss,Ay,Py,Ny);const B1="VsNkEb0zbUUoaS30tLEtworzEy92byRB";function Q3({stocks:t}){const[e,n]=b.useState(null),[i,s]=b.useState(null),[r,o]=b.useState("30"),[a,l]=b.useState([]),[c,u]=b.useState("price"),[h,d]=b.useState({}),[f,m]=b.useState(!1);b.useEffect(()=>{async function g(){if(a.length!==0)try{const y=a.map(E=>fetch(`https://financialmodelingprep.com/api/v3/historical-price-full/${E}?timeseries=${r}&apikey=${B1}`).then(A=>A.json())),x=a.map(E=>fetch(`https://financialmodelingprep.com/api/v3/quote/${E}?apikey=${B1}`).then(A=>A.json())),[k,_]=await Promise.all([Promise.all(y),Promise.all(x)]),S={labels:k[0].historical.map(E=>new Date(E.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})).reverse(),datasets:k.map((E,A)=>{const P=E.historical.map(L=>{switch(c){case"price":return L.close;case"percentChange":return(L.close-E.historical[E.historical.length-1].close)/E.historical[E.historical.length-1].close*100;case"volume":return L.volume;default:return L.close}}).reverse();return{label:a[A],data:P,borderColor:`hsl(${A*137.5}, 70%, 50%)`,backgroundColor:`hsla(${A*137.5}, 70%, 50%, 0.2)`,tension:.1,fill:!1}})};n(S);const C={};_.forEach((E,A)=>{const P=E[0];C[a[A]]={price:P.price,change:P.change,percentChange:P.changesPercentage,volume:P.volume,marketCap:P.marketCap,pe:P.pe}}),d(C),s(null)}catch(y){console.error("Error fetching compare data:",y),s(y.message),n(null)}}g()},[a,r,c]);const v=g=>{l(y=>y.includes(g)?y.filter(x=>x!==g):y.length<3?[...y,g]:y)},w=g=>{u(g)};return i?p.jsxs("div",{className:"p-6 bg-error text-white rounded-lg",children:["Error: ",i]}):p.jsxs("div",{className:"p-6 max-w-7xl mx-auto bg-secondary rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4 text-text-primary",children:"Compare Stocks"}),p.jsxs("div",{className:"mb-6 bg-primary p-4 rounded-lg",children:[p.jsxs(_t,{onClick:()=>m(!f),className:"bg-accent hover:bg-accent-dark text-white font-bold py-2 px-4 rounded-md mb-2",children:[f?"Hide":"Show"," How to Use"]}),f&&p.jsxs("div",{className:"mt-2 text-text-secondary",children:[p.jsx("h3",{className:"font-bold mb-2",children:"How to use:"}),p.jsxs("ul",{className:"list-disc list-inside",children:[p.jsx("li",{children:"Select up to 3 stocks from the list below to compare."}),p.jsx("li",{children:"Choose a comparison metric: Price, Percent Change, or Volume."}),p.jsx("li",{children:"Select a timeframe to view the data."}),p.jsx("li",{children:"The chart and statistics table will update automatically."})]})]})]}),p.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.map(g=>p.jsx(_t,{onClick:()=>v(g.symbol),className:`py-2 px-4 rounded-md ${a.includes(g.symbol)?"bg-accent text-white":"bg-primary text-text-primary hover:bg-accent hover:text-white"}`,children:g.symbol},g.symbol))}),p.jsxs("div",{className:"mb-4",children:[p.jsx("h3",{className:"text-lg font-semibold mb-2 text-text-primary",children:"Comparison Options:"}),p.jsx("div",{className:"flex gap-2",children:["price","percentChange","volume"].map(g=>p.jsx(_t,{onClick:()=>w(g),className:`py-2 px-4 rounded-md ${c===g?"bg-accent text-white":"bg-primary text-text-primary hover:bg-accent hover:text-white"}`,children:g.charAt(0).toUpperCase()+g.slice(1)},g))})]}),e&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6 bg-primary p-4 rounded-lg",children:p.jsx(Ry,{data:e,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"rgb(224, 224, 224)"}},title:{display:!0,text:`Stock ${c==="percentChange"?"Percent Change":c.charAt(0).toUpperCase()+c.slice(1)} Comparison`,color:"rgb(224, 224, 224)"}},scales:{y:{beginAtZero:c==="percentChange",grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgb(160, 160, 160)"}},x:{grid:{display:!1},ticks:{color:"rgb(160, 160, 160)"}}}},height:300})}),p.jsxs("div",{className:"mb-4",children:[p.jsx("h3",{className:"text-lg font-semibold mb-2 text-text-primary",children:"Timeframe:"}),p.jsx("div",{className:"flex gap-2",children:["7","30","90","365"].map(g=>p.jsx(_t,{onClick:()=>o(g),className:`py-2 px-4 rounded-md ${r===g?"bg-accent text-white":"bg-primary text-text-primary hover:bg-accent hover:text-white"}`,children:g==="7"?"1W":g==="30"?"1M":g==="90"?"3M":"1Y"},g))})]}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-primary",children:[p.jsx("th",{className:"p-2 border-b border-gray-700",children:"Symbol"}),p.jsx("th",{className:"p-2 border-b border-gray-700",children:"Price"}),p.jsx("th",{className:"p-2 border-b border-gray-700",children:"Change"}),p.jsx("th",{className:"p-2 border-b border-gray-700",children:"% Change"}),p.jsx("th",{className:"p-2 border-b border-gray-700",children:"Volume"}),p.jsx("th",{className:"p-2 border-b border-gray-700",children:"Market Cap"}),p.jsx("th",{className:"p-2 border-b border-gray-700",children:"P/E Ratio"})]})}),p.jsx("tbody",{children:Object.entries(h).map(([g,y])=>p.jsxs("tr",{className:"hover:bg-primary",children:[p.jsx("td",{className:"p-2 border-b border-gray-700",children:g}),p.jsxs("td",{className:"p-2 border-b border-gray-700",children:["$",y.price.toFixed(2)]}),p.jsxs("td",{className:`p-2 border-b border-gray-700 ${y.change>=0?"text-success":"text-error"}`,children:["$",Math.abs(y.change).toFixed(2)]}),p.jsxs("td",{className:`p-2 border-b border-gray-700 ${y.percentChange>=0?"text-success":"text-error"}`,children:[y.percentChange.toFixed(2),"%"]}),p.jsx("td",{className:"p-2 border-b border-gray-700",children:y.volume.toLocaleString()}),p.jsxs("td",{className:"p-2 border-b border-gray-700",children:["$",(y.marketCap/1e9).toFixed(2),"B"]}),p.jsx("td",{className:"p-2 border-b border-gray-700",children:y.pe?y.pe.toFixed(2):"N/A"})]},g))})]})})]})]})}const $t=({type:t,id:e,name:n,value:i,onChange:s,label:r,disabled:o,icon:a,textarea:l})=>{const c="w-full p-2 pl-10 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none";return p.jsxs("div",{className:"form-group relative",children:[r&&p.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-text-primary",children:r}),p.jsxs("div",{className:"relative",children:[a&&p.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:a}),l?p.jsx("textarea",{id:e,name:n,value:i,onChange:s,disabled:o,className:`${c} h-24 resize-none`}):p.jsx("input",{type:t,id:e,name:n,value:i,onChange:s,disabled:o,className:c})]})]})};function X3(){const[t,e]=b.useState(""),[n,i]=b.useState([{role:"system",content:"You are a helpful assistant specialized in stocks."}]),s=()=>{const r={role:"user",content:t},o=[...n,r],l={role:"assistant",content:"This is a fixed response related to stocks."};i([...o,l]),e("")};return p.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-gray-800 rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"AI Assistant"}),p.jsx("div",{className:"mb-4 p-4 bg-gray-700 rounded-md text-white",children:n.map((r,o)=>p.jsxs("div",{className:`mb-2 ${r.role==="user"?"text-blue-400":"text-green-400"}`,children:[p.jsxs("strong",{children:[r.role==="user"?"User":"Assistant",":"]})," ",r.content]},o))}),p.jsx($t,{type:"text",id:"inputText",name:"inputText",value:t,onChange:r=>e(r.target.value),label:"Input Text",className:"mb-4"}),p.jsx(_t,{className:"bg-blue-500 text-white",onClick:s,children:"Send"})]})}const J3=({user:t})=>{iS();const e=dE(),n=VE(),[i,s]=b.useState({}),[r,o]=b.useState(!1),[a,l]=b.useState({}),[c,u]=b.useState(!0),[h,d]=b.useState(null),[f,m]=b.useState(null),v=qs();b.useEffect(()=>{(async()=>{if(t)try{const S=Zn(e,"users",t.uid),C=await sy(S);if(C.exists()){const E=C.data();s(E),l(E)}m(t.photoURL)}catch{d("Failed to fetch user data")}finally{u(!1)}else u(!1)})()},[t,e]);const w=()=>{o(!0)},g=_=>{const{name:S,value:C}=_.target;l(E=>({...E,[S]:C}))},y=async()=>{if(t)try{const _=Zn(e,"users",t.uid);await Up(_,a),await fp(t,{displayName:a.displayName}),s(a),o(!1)}catch{d("Failed to update profile")}},x=()=>{o(!1),l(i)},k=async _=>{const S=_.target.files[0];if(S&&t)try{const C=o$(n,`profile_pictures/${t.uid}`);await s$(C,S);const E=await r$(C);await fp(t,{photoURL:E}),m(E);const A=Zn(e,"users",t.uid);await Up(A,{photoURL:E})}catch{d("Failed to upload image")}};return c?p.jsx("div",{className:"text-center text-text-primary",children:"Loading..."}):t?p.jsxs("div",{className:"p-6 max-w-4xl mx-auto bg-secondary rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-3xl font-bold mb-6 text-text-primary",children:"Profile"}),h&&p.jsx("p",{className:"text-error mb-4",children:h}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[p.jsxs("div",{className:"md:col-span-1",children:[p.jsxs("div",{className:"mb-6 text-center",children:[p.jsxs("div",{className:"relative inline-block",children:[p.jsx("img",{src:f||"/placeholder.svg?height=200&width=200",alt:"Profile",className:"w-48 h-48 rounded-full mx-auto mb-4 object-cover"}),p.jsx("label",{htmlFor:"profile-image-upload",className:"absolute bottom-0 right-0 bg-accent hover:bg-accent-dark text-white rounded-full p-2 cursor-pointer",children:p.jsx(w$,{size:24})})]}),p.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"hidden",id:"profile-image-upload"})]}),p.jsx("h3",{className:"text-2xl font-semibold text-center text-text-primary mb-2",children:i.displayName||t.displayName}),p.jsx("p",{className:"text-text-secondary text-center mb-4",children:i.title||"No title set"}),p.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:r?p.jsxs(p.Fragment,{children:[p.jsx(_t,{onClick:y,children:"Save"}),p.jsx(_t,{onClick:x,variant:"outline",children:"Cancel"})]}):p.jsx(_t,{onClick:w,children:"Edit Profile"})})]}),p.jsxs("div",{className:"md:col-span-2 space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsx($t,{type:"text",id:"displayName",name:"displayName",value:r?a.displayName:i.displayName||"",onChange:g,label:"Display Name",disabled:!r,icon:p.jsx(qE,{className:"w-5 h-5 text-text-secondary"})}),p.jsx($t,{type:"email",id:"email",name:"email",value:t.email,label:"Email",disabled:!0,icon:p.jsx(E$,{className:"w-5 h-5 text-text-secondary"})}),p.jsx($t,{type:"tel",id:"phoneNumber",name:"phoneNumber",value:r?a.phoneNumber:i.phoneNumber||"",onChange:g,label:"Phone Number",disabled:!r,icon:p.jsx(T$,{className:"w-5 h-5 text-text-secondary"})}),p.jsx($t,{type:"text",id:"location",name:"location",value:r?a.location:i.location||"",onChange:g,label:"Location",disabled:!r,icon:p.jsx(C$,{className:"w-5 h-5 text-text-secondary"})}),p.jsx($t,{type:"text",id:"title",name:"title",value:r?a.title:i.title||"",onChange:g,label:"Job Title",disabled:!r,icon:p.jsx(y$,{className:"w-5 h-5 text-text-secondary"})}),p.jsx($t,{type:"date",id:"birthdate",name:"birthdate",value:r?a.birthdate:i.birthdate||"",onChange:g,label:"Birthdate",disabled:!r,icon:p.jsx(v$,{className:"w-5 h-5 text-text-secondary"})}),p.jsx($t,{type:"text",id:"role",name:"role",value:i.role||"",label:"User Role",disabled:!0,icon:p.jsx(WE,{className:"w-5 h-5 text-text-secondary"})})]}),p.jsx("div",{children:p.jsx($t,{type:"text",id:"bio",name:"bio",value:r?a.bio:i.bio||"",onChange:g,label:"Bio",disabled:!r,icon:p.jsx(_$,{className:"w-5 h-5 text-text-secondary"}),textarea:!0})})]})]})]}):p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-2xl font-bold mb-4 text-text-primary",children:"Please log in to view your profile"}),p.jsx(_t,{onClick:()=>v("/login"),children:"Go to Login"})]})};function Z3(){const[t,e]=b.useState(""),[n,i]=b.useState(""),[s,r]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(!1),[u,h]=b.useState(null),[d,f]=b.useState(!1),[m,v]=b.useState(!1),[w,g]=b.useState(!1),y=qs(),x=async _=>{if(_.preventDefault(),h(null),f(!0),l&&n!==s){h("Passwords don't match"),f(!1);return}try{if(l){const C=(await Kk(Xa,t,n)).user;await ry(Zn(rs,"users",C.uid),{email:t,displayName:o,createdAt:new Date().toISOString()})}else await IP(Xa,t,n);y("/dashboard")}catch(S){console.error("Error during authentication:",S),h(S.message)}finally{f(!1)}},k=_=>{_==="password"?v(!m):_==="confirmPassword"&&g(!w)};return p.jsxs("div",{className:"max-w-md mx-auto mt-8 p-6 bg-secondary rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-text-primary",children:l?"Sign Up":"Log In"}),p.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l&&p.jsx($t,{type:"text",id:"displayName",value:o,onChange:_=>a(_.target.value),label:"Display Name",required:!0}),p.jsx($t,{type:"email",id:"email",value:t,onChange:_=>e(_.target.value),label:"Email",required:!0}),p.jsxs("div",{className:"relative",children:[p.jsx($t,{type:m?"text":"password",id:"password",value:n,onChange:_=>i(_.target.value),label:"Password",required:!0}),p.jsx("button",{type:"button",onClick:()=>k("password"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-text-secondary",children:m?p.jsx(Ew,{size:20}):p.jsx(Cw,{size:20})})]}),l&&p.jsxs("div",{className:"relative",children:[p.jsx($t,{type:w?"text":"password",id:"confirmPassword",value:s,onChange:_=>r(_.target.value),label:"Confirm Password",required:!0}),p.jsx("button",{type:"button",onClick:()=>k("confirmPassword"),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-text-secondary",children:w?p.jsx(Ew,{size:20}):p.jsx(Cw,{size:20})})]}),p.jsx(_t,{type:"submit",disabled:d,className:"w-full",children:d?"Processing...":l?"Sign Up":"Log In"})]}),u&&p.jsx("p",{className:"mt-4 text-error text-center",role:"alert",children:u}),p.jsxs("p",{className:"mt-4 text-center text-text-secondary",children:[l?"Already have an account?":"Don't have an account?",p.jsx("button",{onClick:()=>c(!l),className:"text-accent hover:underline ml-1",children:l?"Log In":"Sign Up"})]})]})}function e5(){const[t,e]=b.useState(""),[n,i]=b.useState(""),[s,r]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(null),[u,h]=b.useState(!1),[d,f]=b.useState(!1),[m,v]=b.useState(!1),w=qs(),g=()=>!t||!n||!s||!o?(c("Email, password, confirm password, and display name are required."),!1):n.length<6?(c("Password must be at least 6 characters long."),!1):n!==s?(c("Passwords do not match."),!1):!t.includes("@")||!t.includes(".")?(c("Please enter a valid email address."),!1):!0,y=async x=>{if(x.preventDefault(),h(!0),c(null),!g()){h(!1);return}try{const _=(await Kk(Xa,t,n)).user;await fp(_,{displayName:o}),await ry(Zn(rs,"users",_.uid),{email:t,displayName:o,createdAt:new Date().toISOString()}),w("/dashboard")}catch(k){switch(k.code){case"auth/email-already-in-use":c("This email is already registered. Please login instead.");break;case"auth/invalid-email":c("Please enter a valid email address.");break;case"auth/weak-password":c("Please choose a stronger password.");break;default:c(`An error occurred during signup: ${k.message}`)}}finally{h(!1)}};return p.jsxs("div",{className:"max-w-md mx-auto mt-8 p-6 bg-secondary rounded-lg shadow-md",children:[p.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-text-primary",children:"Sign Up"}),p.jsxs("form",{onSubmit:y,className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-text-primary",children:"Email"}),p.jsx("input",{type:"email",id:"email",value:t,onChange:x=>e(x.target.value),placeholder:"Email",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-text-primary",children:"Password"}),p.jsx("input",{type:d?"text":"password",id:"password",value:n,onChange:x=>i(x.target.value),placeholder:"Password (min. 6 characters)",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"showPassword",checked:d,onChange:()=>f(!d),className:"mr-2"}),p.jsx("label",{htmlFor:"showPassword",className:"text-text-primary",children:"Show Password"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"confirmPassword",className:"block mb-2 text-sm font-medium text-text-primary",children:"Confirm Password"}),p.jsx("input",{type:m?"text":"password",id:"confirmPassword",value:s,onChange:x=>r(x.target.value),placeholder:"Confirm Password",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx("input",{type:"checkbox",id:"showConfirmPassword",checked:m,onChange:()=>v(!m),className:"mr-2"}),p.jsx("label",{htmlFor:"showConfirmPassword",className:"text-text-primary",children:"Show Confirm Password"})]}),p.jsxs("div",{children:[p.jsx("label",{htmlFor:"displayName",className:"block mb-2 text-sm font-medium text-text-primary",children:"Display Name"}),p.jsx("input",{type:"text",id:"displayName",value:o,onChange:x=>a(x.target.value),placeholder:"Display Name",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),p.jsx(_t,{type:"submit",disabled:u,className:"w-full",children:u?"Signing Up...":"Sign Up"})]}),l&&p.jsx("p",{className:"mt-4 text-error text-center",role:"alert",children:l}),p.jsxs("p",{className:"mt-4 text-center text-text-secondary",children:["Already have an account? ",p.jsx(Bn,{to:"/login",className:"text-accent hover:underline",children:"Login"})]})]})}const t5="daniel.golod2008@gmail.com";function n5({user:t}){const[e,n]=b.useState([]),[i,s]=b.useState(!0),[r,o]=b.useState(null),a=qs();return b.useEffect(()=>{if(!t||t.email!==t5){a("/dashboard");return}(async()=>{try{const c=hE(rs,"users"),h=(await bE(c)).docs.map(d=>({id:d.id,...d.data()}));n(h)}catch(c){console.error("Error fetching users:",c),o("Failed to fetch users")}finally{s(!1)}})()},[t,a]),i?p.jsx("div",{className:"text-center text-text-primary",children:"Loading..."}):r?p.jsx("div",{className:"text-center text-error",children:r}):p.jsxs("div",{className:"p-6 max-w-4xl mx-auto bg-secondary rounded-lg shadow-md",children:[p.jsx("h1",{className:"text-3xl font-bold mb-6 text-text-primary",children:"Admin Dashboard"}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-left border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-primary",children:[p.jsx("th",{className:"p-2 border-b border-gray-700",children:"Name"}),p.jsx("th",{className:"p-2 border-b border-gray-700",children:"Email"}),p.jsx("th",{className:"p-2 border-b border-gray-700",children:"Created At"})]})}),p.jsx("tbody",{children:e.map(l=>p.jsxs("tr",{className:"hover:bg-primary",children:[p.jsx("td",{className:"p-2 border-b border-gray-700",children:l.displayName}),p.jsx("td",{className:"p-2 border-b border-gray-700",children:l.email}),p.jsx("td",{className:"p-2 border-b border-gray-700",children:new Date(l.createdAt).toLocaleString()})]},l.id))})]})})]})}const cf=[{id:1,name:"Microsoft",symbol:"MSFT",price:300,change:1.2,volume:1e6}],uf=[{id:1,name:"Bitcoin",symbol:"BTC",price:45e3,change:2.5,volume:5e5}];function i5(){const[t,e]=b.useState(null),[n,i]=b.useState(cf),[s,r]=b.useState(uf),[o,a]=b.useState(!0);b.useEffect(()=>{const d=RP(Xa,async f=>{if(f)try{const m=await h$(f.uid),v=await d$(f.uid);i(m.length?m:cf),r(v.length?v:uf)}catch(m){console.error("Error fetching user data:",m)}else i(cf),r(uf);e(f),a(!1)});return()=>d()},[]);const l=async d=>{if(t){const f=n.filter(m=>m.id!==d);i(f),await Sw(t.uid,f)}},c=async d=>{if(t){const f=s.filter(m=>m.id!==d);r(f),await bw(t.uid,f)}},u=async d=>{if(t){const f=[...n,d];i(f),await Sw(t.uid,f)}else i([...n,d])},h=async d=>{if(t){const f=[...s,d];r(f),await bw(t.uid,f)}else r([...s,d])};return o?p.jsx("div",{children:"Loading..."}):p.jsx(lN,{children:p.jsxs("div",{className:"flex bg-background min-h-screen",children:[p.jsx(A$,{isAuthenticated:!!t,user:t}),p.jsx("main",{className:"flex-grow p-6 ml-20 transition-all duration-300 ease-in-out",children:p.jsx("div",{className:"max-w-7xl mx-auto",children:p.jsxs(tN,{children:[p.jsx(vn,{path:"/login",element:t?p.jsx(Yv,{to:"/dashboard"}):p.jsx(Z3,{})}),p.jsx(vn,{path:"/signup",element:t?p.jsx(Yv,{to:"/dashboard"}):p.jsx(e5,{})}),p.jsx(vn,{path:"/profile",element:p.jsx(J3,{user:t})}),p.jsx(vn,{path:"/dashboard",element:p.jsx(z1,{stocks:n,cryptos:s,onDeleteStock:l,onDeleteCrypto:c,user:t,isAuthenticated:!!t})}),p.jsx(vn,{path:"/add-stock",element:p.jsx(Y3,{onAddStock:u,onAddCrypto:h,user:t,isAuthenticated:!!t})}),p.jsx(vn,{path:"/compare-stocks",element:p.jsx(Q3,{stocks:n,cryptos:s,user:t,isAuthenticated:!!t})}),p.jsx(vn,{path:"/ai-assistant",element:p.jsx(X3,{})}),p.jsx(vn,{path:"/admin",element:p.jsx(n5,{user:t})}),p.jsx(vn,{path:"/",element:p.jsx(z1,{stocks:n,cryptos:s,onDeleteStock:l,onDeleteCrypto:c,user:t,isAuthenticated:!!t})})]})})})]})})}hf.createRoot(document.getElementById("root")).render(p.jsx(to.StrictMode,{children:p.jsx(i5,{})}));
