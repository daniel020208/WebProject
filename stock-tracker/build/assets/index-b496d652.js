var fC=Object.defineProperty;var pC=(t,e,n)=>e in t?fC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>(pC(t,typeof e!="symbol"?e+"":e,n),n);function gC(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function mC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O_={exports:{}},Zu={},L_={exports:{}},G={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rl=Symbol.for("react.element"),yC=Symbol.for("react.portal"),vC=Symbol.for("react.fragment"),wC=Symbol.for("react.strict_mode"),_C=Symbol.for("react.profiler"),xC=Symbol.for("react.provider"),kC=Symbol.for("react.context"),SC=Symbol.for("react.forward_ref"),bC=Symbol.for("react.suspense"),EC=Symbol.for("react.memo"),CC=Symbol.for("react.lazy"),Py=Symbol.iterator;function TC(t){return t===null||typeof t!="object"?null:(t=Py&&t[Py]||t["@@iterator"],typeof t=="function"?t:null)}var $_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F_=Object.assign,j_={};function Zs(t,e,n){this.props=t,this.context=e,this.refs=j_,this.updater=n||$_}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function U_(){}U_.prototype=Zs.prototype;function Kp(t,e,n){this.props=t,this.context=e,this.refs=j_,this.updater=n||$_}var qp=Kp.prototype=new U_;qp.constructor=Kp;F_(qp,Zs.prototype);qp.isPureReactComponent=!0;var Ay=Array.isArray,z_=Object.prototype.hasOwnProperty,Gp={current:null},B_={key:!0,ref:!0,__self:!0,__source:!0};function V_(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)z_.call(e,i)&&!B_.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:rl,type:t,key:s,ref:o,props:r,_owner:Gp.current}}function IC(t,e){return{$$typeof:rl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yp(t){return typeof t=="object"&&t!==null&&t.$$typeof===rl}function NC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ry=/\/+/g;function Zh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NC(""+t.key):e.toString(36)}function Sc(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case rl:case yC:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Zh(o,0):i,Ay(r)?(n="",t!=null&&(n=t.replace(Ry,"$&/")+"/"),Sc(r,e,n,"",function(c){return c})):r!=null&&(Yp(r)&&(r=IC(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Ry,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",Ay(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Zh(s,a);o+=Sc(s,e,n,l,r)}else if(l=TC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Zh(s,a++),o+=Sc(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dl(t,e,n){if(t==null)return t;var i=[],r=0;return Sc(t,i,"","",function(s){return e.call(n,s,r++)}),i}function PC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xt={current:null},bc={transition:null},AC={ReactCurrentDispatcher:xt,ReactCurrentBatchConfig:bc,ReactCurrentOwner:Gp};function H_(){throw Error("act(...) is not supported in production builds of React.")}G.Children={map:Dl,forEach:function(t,e,n){Dl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dl(t,function(){e++}),e},toArray:function(t){return Dl(t,function(e){return e})||[]},only:function(t){if(!Yp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};G.Component=Zs;G.Fragment=vC;G.Profiler=_C;G.PureComponent=Kp;G.StrictMode=wC;G.Suspense=bC;G.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AC;G.act=H_;G.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=F_({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)z_.call(e,l)&&!B_.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:rl,type:t.type,key:r,ref:s,props:i,_owner:o}};G.createContext=function(t){return t={$$typeof:kC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xC,_context:t},t.Consumer=t};G.createElement=V_;G.createFactory=function(t){var e=V_.bind(null,t);return e.type=t,e};G.createRef=function(){return{current:null}};G.forwardRef=function(t){return{$$typeof:SC,render:t}};G.isValidElement=Yp;G.lazy=function(t){return{$$typeof:CC,_payload:{_status:-1,_result:t},_init:PC}};G.memo=function(t,e){return{$$typeof:EC,type:t,compare:e===void 0?null:e}};G.startTransition=function(t){var e=bc.transition;bc.transition={};try{t()}finally{bc.transition=e}};G.unstable_act=H_;G.useCallback=function(t,e){return xt.current.useCallback(t,e)};G.useContext=function(t){return xt.current.useContext(t)};G.useDebugValue=function(){};G.useDeferredValue=function(t){return xt.current.useDeferredValue(t)};G.useEffect=function(t,e){return xt.current.useEffect(t,e)};G.useId=function(){return xt.current.useId()};G.useImperativeHandle=function(t,e,n){return xt.current.useImperativeHandle(t,e,n)};G.useInsertionEffect=function(t,e){return xt.current.useInsertionEffect(t,e)};G.useLayoutEffect=function(t,e){return xt.current.useLayoutEffect(t,e)};G.useMemo=function(t,e){return xt.current.useMemo(t,e)};G.useReducer=function(t,e,n){return xt.current.useReducer(t,e,n)};G.useRef=function(t){return xt.current.useRef(t)};G.useState=function(t){return xt.current.useState(t)};G.useSyncExternalStore=function(t,e,n){return xt.current.useSyncExternalStore(t,e,n)};G.useTransition=function(){return xt.current.useTransition()};G.version="18.3.1";L_.exports=G;var S=L_.exports;const eo=mC(S),RC=gC({__proto__:null,default:eo},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DC=S,MC=Symbol.for("react.element"),OC=Symbol.for("react.fragment"),LC=Object.prototype.hasOwnProperty,$C=DC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FC={key:!0,ref:!0,__self:!0,__source:!0};function W_(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)LC.call(e,i)&&!FC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:MC,type:t,key:s,ref:o,props:r,_owner:$C.current}}Zu.Fragment=OC;Zu.jsx=W_;Zu.jsxs=W_;O_.exports=Zu;var v=O_.exports,lf={},K_={exports:{}},Vt={},q_={exports:{}},G_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,j){var B=D.length;D.push(j);e:for(;0<B;){var se=B-1>>>1,le=D[se];if(0<r(le,j))D[se]=j,D[B]=le,B=se;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var j=D[0],B=D.pop();if(B!==j){D[0]=B;e:for(var se=0,le=D.length,pn=le>>>1;se<pn;){var gt=2*(se+1)-1,Mn=D[gt],mt=gt+1,Rl=D[mt];if(0>r(Mn,B))mt<le&&0>r(Rl,Mn)?(D[se]=Rl,D[mt]=B,se=mt):(D[se]=Mn,D[gt]=B,se=gt);else if(mt<le&&0>r(Rl,B))D[se]=Rl,D[mt]=B,se=mt;else break e}}return j}function r(D,j){var B=D.sortIndex-j.sortIndex;return B!==0?B:D.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,g=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(D){for(var j=n(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=D)i(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function x(D){if(w=!1,_(D),!g)if(n(l)!==null)g=!0,Ie(k);else{var j=n(c);j!==null&&Ze(x,j.startTime-D)}}function k(D,j){g=!1,w&&(w=!1,p(E),E=-1),f=!0;var B=d;try{for(_(j),h=n(l);h!==null&&(!(h.expirationTime>j)||D&&!L());){var se=h.callback;if(typeof se=="function"){h.callback=null,d=h.priorityLevel;var le=se(h.expirationTime<=j);j=t.unstable_now(),typeof le=="function"?h.callback=le:h===n(l)&&i(l),_(j)}else i(l);h=n(l)}if(h!==null)var pn=!0;else{var gt=n(c);gt!==null&&Ze(x,gt.startTime-j),pn=!1}return pn}finally{h=null,d=B,f=!1}}var b=!1,C=null,E=-1,P=5,A=-1;function L(){return!(t.unstable_now()-A<P)}function q(){if(C!==null){var D=t.unstable_now();A=D;var j=!0;try{j=C(!0,D)}finally{j?xe():(b=!1,C=null)}}else b=!1}var xe;if(typeof m=="function")xe=function(){m(q)};else if(typeof MessageChannel<"u"){var At=new MessageChannel,ge=At.port2;At.port1.onmessage=q,xe=function(){ge.postMessage(null)}}else xe=function(){y(q,0)};function Ie(D){C=D,b||(b=!0,xe())}function Ze(D,j){E=y(function(){D(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,Ie(k))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var B=d;d=j;try{return D()}finally{d=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,j){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=d;d=D;try{return j()}finally{d=B}},t.unstable_scheduleCallback=function(D,j,B){var se=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?se+B:se):B=se,D){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=B+le,D={id:u++,callback:j,priorityLevel:D,startTime:B,expirationTime:le,sortIndex:-1},B>se?(D.sortIndex=B,e(c,D),n(l)===null&&D===n(c)&&(w?(p(E),E=-1):w=!0,Ze(x,B-se))):(D.sortIndex=le,e(l,D),g||f||(g=!0,Ie(k))),D},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(D){var j=d;return function(){var B=d;d=j;try{return D.apply(this,arguments)}finally{d=B}}}})(G_);q_.exports=G_;var jC=q_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UC=S,zt=jC;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y_=new Set,pa={};function Wr(t,e){Ms(t,e),Ms(t+"Capture",e)}function Ms(t,e){for(pa[t]=e,t=0;t<e.length;t++)Y_.add(e[t])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cf=Object.prototype.hasOwnProperty,zC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dy={},My={};function BC(t){return cf.call(My,t)?!0:cf.call(Dy,t)?!1:zC.test(t)?My[t]=!0:(Dy[t]=!0,!1)}function VC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HC(t,e,n,i){if(e===null||typeof e>"u"||VC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qp=/[\-:]([a-z])/g;function Xp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qp,Xp);Je[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qp,Xp);Je[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qp,Xp);Je[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jp(t,e,n,i){var r=Je.hasOwnProperty(e)?Je[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HC(e,n,r,i)&&(n=null),i||r===null?BC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var oi=UC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ml=Symbol.for("react.element"),ss=Symbol.for("react.portal"),os=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),Q_=Symbol.for("react.provider"),X_=Symbol.for("react.context"),eg=Symbol.for("react.forward_ref"),hf=Symbol.for("react.suspense"),df=Symbol.for("react.suspense_list"),tg=Symbol.for("react.memo"),di=Symbol.for("react.lazy"),J_=Symbol.for("react.offscreen"),Oy=Symbol.iterator;function yo(t){return t===null||typeof t!="object"?null:(t=Oy&&t[Oy]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,ed;function Do(t){if(ed===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ed=e&&e[1]||""}return`
`+ed+t}var td=!1;function nd(t,e){if(!t||td)return"";td=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{td=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Do(t):""}function WC(t){switch(t.tag){case 5:return Do(t.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return t=nd(t.type,!1),t;case 11:return t=nd(t.type.render,!1),t;case 1:return t=nd(t.type,!0),t;default:return""}}function ff(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case os:return"Fragment";case ss:return"Portal";case uf:return"Profiler";case Zp:return"StrictMode";case hf:return"Suspense";case df:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X_:return(t.displayName||"Context")+".Consumer";case Q_:return(t._context.displayName||"Context")+".Provider";case eg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tg:return e=t.displayName||null,e!==null?e:ff(t.type)||"Memo";case di:e=t._payload,t=t._init;try{return ff(t(e))}catch{}}return null}function KC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ff(e);case 8:return e===Zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qC(t){var e=Z_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ol(t){t._valueTracker||(t._valueTracker=qC(t))}function ex(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Z_(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function qc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pf(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=zi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tx(t,e){e=e.checked,e!=null&&Jp(t,"checked",e,!1)}function gf(t,e){tx(t,e);var n=zi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?mf(t,e.type,n):e.hasOwnProperty("defaultValue")&&mf(t,e.type,zi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $y(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function mf(t,e,n){(e!=="number"||qc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Mo=Array.isArray;function ws(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+zi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function yf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(Mo(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zi(n)}}function nx(t,e){var n=zi(e.value),i=zi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function jy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ix(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ix(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ll,rx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ll=Ll||document.createElement("div"),Ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GC=["Webkit","ms","Moz","O"];Object.keys(qo).forEach(function(t){GC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qo[e]=qo[t]})});function sx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qo.hasOwnProperty(t)&&qo[t]?(""+e).trim():e+"px"}function ox(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=sx(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var YC=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wf(t,e){if(e){if(YC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function _f(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=null;function ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kf=null,_s=null,xs=null;function Uy(t){if(t=al(t)){if(typeof kf!="function")throw Error(I(280));var e=t.stateNode;e&&(e=rh(e),kf(t.stateNode,t.type,e))}}function ax(t){_s?xs?xs.push(t):xs=[t]:_s=t}function lx(){if(_s){var t=_s,e=xs;if(xs=_s=null,Uy(t),e)for(t=0;t<e.length;t++)Uy(e[t])}}function cx(t,e){return t(e)}function ux(){}var id=!1;function hx(t,e,n){if(id)return t(e,n);id=!0;try{return cx(t,e,n)}finally{id=!1,(_s!==null||xs!==null)&&(ux(),lx())}}function ma(t,e){var n=t.stateNode;if(n===null)return null;var i=rh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var Sf=!1;if(Qn)try{var vo={};Object.defineProperty(vo,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",vo,vo),window.removeEventListener("test",vo,vo)}catch{Sf=!1}function QC(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Go=!1,Gc=null,Yc=!1,bf=null,XC={onError:function(t){Go=!0,Gc=t}};function JC(t,e,n,i,r,s,o,a,l){Go=!1,Gc=null,QC.apply(XC,arguments)}function ZC(t,e,n,i,r,s,o,a,l){if(JC.apply(this,arguments),Go){if(Go){var c=Gc;Go=!1,Gc=null}else throw Error(I(198));Yc||(Yc=!0,bf=c)}}function Kr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zy(t){if(Kr(t)!==t)throw Error(I(188))}function eT(t){var e=t.alternate;if(!e){if(e=Kr(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return zy(r),t;if(s===i)return zy(r),e;s=s.sibling}throw Error(I(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==i)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function fx(t){return t=eT(t),t!==null?px(t):null}function px(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=px(t);if(e!==null)return e;t=t.sibling}return null}var gx=zt.unstable_scheduleCallback,By=zt.unstable_cancelCallback,tT=zt.unstable_shouldYield,nT=zt.unstable_requestPaint,Ne=zt.unstable_now,iT=zt.unstable_getCurrentPriorityLevel,ig=zt.unstable_ImmediatePriority,mx=zt.unstable_UserBlockingPriority,Qc=zt.unstable_NormalPriority,rT=zt.unstable_LowPriority,yx=zt.unstable_IdlePriority,eh=null,bn=null;function sT(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(eh,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:lT,oT=Math.log,aT=Math.LN2;function lT(t){return t>>>=0,t===0?32:31-(oT(t)/aT|0)|0}var $l=64,Fl=4194304;function Oo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Oo(a):(s&=o,s!==0&&(i=Oo(s)))}else o=n&~r,o!==0?i=Oo(o):s!==0&&(i=Oo(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-cn(e),r=1<<n,i|=t[n],e&=~r;return i}function cT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uT(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-cn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=cT(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ef(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vx(){var t=$l;return $l<<=1,!($l&4194240)&&($l=64),t}function rd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function hT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-cn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function rg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-cn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ie=0;function wx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _x,sg,xx,kx,Sx,Cf=!1,jl=[],Ii=null,Ni=null,Pi=null,ya=new Map,va=new Map,pi=[],dT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vy(t,e){switch(t){case"focusin":case"focusout":Ii=null;break;case"dragenter":case"dragleave":Ni=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(e.pointerId)}}function wo(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=al(e),e!==null&&sg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function fT(t,e,n,i,r){switch(e){case"focusin":return Ii=wo(Ii,t,e,n,i,r),!0;case"dragenter":return Ni=wo(Ni,t,e,n,i,r),!0;case"mouseover":return Pi=wo(Pi,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ya.set(s,wo(ya.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,va.set(s,wo(va.get(s)||null,t,e,n,i,r)),!0}return!1}function bx(t){var e=dr(t.target);if(e!==null){var n=Kr(e);if(n!==null){if(e=n.tag,e===13){if(e=dx(n),e!==null){t.blockedOn=e,Sx(t.priority,function(){xx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Tf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);xf=i,n.target.dispatchEvent(i),xf=null}else return e=al(n),e!==null&&sg(e),t.blockedOn=n,!1;e.shift()}return!0}function Hy(t,e,n){Ec(t)&&n.delete(e)}function pT(){Cf=!1,Ii!==null&&Ec(Ii)&&(Ii=null),Ni!==null&&Ec(Ni)&&(Ni=null),Pi!==null&&Ec(Pi)&&(Pi=null),ya.forEach(Hy),va.forEach(Hy)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Cf||(Cf=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,pT)))}function wa(t){function e(r){return _o(r,t)}if(0<jl.length){_o(jl[0],t);for(var n=1;n<jl.length;n++){var i=jl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ii!==null&&_o(Ii,t),Ni!==null&&_o(Ni,t),Pi!==null&&_o(Pi,t),ya.forEach(e),va.forEach(e),n=0;n<pi.length;n++)i=pi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<pi.length&&(n=pi[0],n.blockedOn===null);)bx(n),n.blockedOn===null&&pi.shift()}var ks=oi.ReactCurrentBatchConfig,Jc=!0;function gT(t,e,n,i){var r=ie,s=ks.transition;ks.transition=null;try{ie=1,og(t,e,n,i)}finally{ie=r,ks.transition=s}}function mT(t,e,n,i){var r=ie,s=ks.transition;ks.transition=null;try{ie=4,og(t,e,n,i)}finally{ie=r,ks.transition=s}}function og(t,e,n,i){if(Jc){var r=Tf(t,e,n,i);if(r===null)pd(t,e,i,Zc,n),Vy(t,i);else if(fT(r,t,e,n,i))i.stopPropagation();else if(Vy(t,i),e&4&&-1<dT.indexOf(t)){for(;r!==null;){var s=al(r);if(s!==null&&_x(s),s=Tf(t,e,n,i),s===null&&pd(t,e,i,Zc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else pd(t,e,i,null,n)}}var Zc=null;function Tf(t,e,n,i){if(Zc=null,t=ng(i),t=dr(t),t!==null)if(e=Kr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zc=t,null}function Ex(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iT()){case ig:return 1;case mx:return 4;case Qc:case rT:return 16;case yx:return 536870912;default:return 16}default:return 16}}var xi=null,ag=null,Cc=null;function Cx(){if(Cc)return Cc;var t,e=ag,n=e.length,i,r="value"in xi?xi.value:xi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Cc=r.slice(t,1<i?1-i:void 0)}function Tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ul(){return!0}function Wy(){return!1}function Ht(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ul:Wy,this.isPropagationStopped=Wy,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),e}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lg=Ht(to),ol=we({},to,{view:0,detail:0}),yT=Ht(ol),sd,od,xo,th=we({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xo&&(xo&&t.type==="mousemove"?(sd=t.screenX-xo.screenX,od=t.screenY-xo.screenY):od=sd=0,xo=t),sd)},movementY:function(t){return"movementY"in t?t.movementY:od}}),Ky=Ht(th),vT=we({},th,{dataTransfer:0}),wT=Ht(vT),_T=we({},ol,{relatedTarget:0}),ad=Ht(_T),xT=we({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),kT=Ht(xT),ST=we({},to,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bT=Ht(ST),ET=we({},to,{data:0}),qy=Ht(ET),CT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=IT[t])?!!e[t]:!1}function cg(){return NT}var PT=we({},ol,{key:function(t){if(t.key){var e=CT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(t){return t.type==="keypress"?Tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),AT=Ht(PT),RT=we({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gy=Ht(RT),DT=we({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),MT=Ht(DT),OT=we({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),LT=Ht(OT),$T=we({},th,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),FT=Ht($T),jT=[9,13,27,32],ug=Qn&&"CompositionEvent"in window,Yo=null;Qn&&"documentMode"in document&&(Yo=document.documentMode);var UT=Qn&&"TextEvent"in window&&!Yo,Tx=Qn&&(!ug||Yo&&8<Yo&&11>=Yo),Yy=String.fromCharCode(32),Qy=!1;function Ix(t,e){switch(t){case"keyup":return jT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var as=!1;function zT(t,e){switch(t){case"compositionend":return Nx(e);case"keypress":return e.which!==32?null:(Qy=!0,Yy);case"textInput":return t=e.data,t===Yy&&Qy?null:t;default:return null}}function BT(t,e){if(as)return t==="compositionend"||!ug&&Ix(t,e)?(t=Cx(),Cc=ag=xi=null,as=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tx&&e.locale!=="ko"?null:e.data;default:return null}}var VT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VT[t.type]:e==="textarea"}function Px(t,e,n,i){ax(i),e=eu(e,"onChange"),0<e.length&&(n=new lg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Qo=null,_a=null;function HT(t){zx(t,0)}function nh(t){var e=us(t);if(ex(e))return t}function WT(t,e){if(t==="change")return e}var Ax=!1;if(Qn){var ld;if(Qn){var cd="oninput"in document;if(!cd){var Jy=document.createElement("div");Jy.setAttribute("oninput","return;"),cd=typeof Jy.oninput=="function"}ld=cd}else ld=!1;Ax=ld&&(!document.documentMode||9<document.documentMode)}function Zy(){Qo&&(Qo.detachEvent("onpropertychange",Rx),_a=Qo=null)}function Rx(t){if(t.propertyName==="value"&&nh(_a)){var e=[];Px(e,_a,t,ng(t)),hx(HT,e)}}function KT(t,e,n){t==="focusin"?(Zy(),Qo=e,_a=n,Qo.attachEvent("onpropertychange",Rx)):t==="focusout"&&Zy()}function qT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nh(_a)}function GT(t,e){if(t==="click")return nh(e)}function YT(t,e){if(t==="input"||t==="change")return nh(e)}function QT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:QT;function xa(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!cf.call(e,r)||!hn(t[r],e[r]))return!1}return!0}function ev(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tv(t,e){var n=ev(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ev(n)}}function Dx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Dx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mx(){for(var t=window,e=qc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qc(t.document)}return e}function hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XT(t){var e=Mx(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Dx(n.ownerDocument.documentElement,n)){if(i!==null&&hg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=tv(n,s);var o=tv(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JT=Qn&&"documentMode"in document&&11>=document.documentMode,ls=null,If=null,Xo=null,Nf=!1;function nv(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nf||ls==null||ls!==qc(i)||(i=ls,"selectionStart"in i&&hg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Xo&&xa(Xo,i)||(Xo=i,i=eu(If,"onSelect"),0<i.length&&(e=new lg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ls)))}function zl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cs={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},ud={},Ox={};Qn&&(Ox=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function ih(t){if(ud[t])return ud[t];if(!cs[t])return t;var e=cs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ox)return ud[t]=e[n];return t}var Lx=ih("animationend"),$x=ih("animationiteration"),Fx=ih("animationstart"),jx=ih("transitionend"),Ux=new Map,iv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(t,e){Ux.set(t,e),Wr(e,[t])}for(var hd=0;hd<iv.length;hd++){var dd=iv[hd],ZT=dd.toLowerCase(),eI=dd[0].toUpperCase()+dd.slice(1);Gi(ZT,"on"+eI)}Gi(Lx,"onAnimationEnd");Gi($x,"onAnimationIteration");Gi(Fx,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(jx,"onTransitionEnd");Ms("onMouseEnter",["mouseout","mouseover"]);Ms("onMouseLeave",["mouseout","mouseover"]);Ms("onPointerEnter",["pointerout","pointerover"]);Ms("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lo));function rv(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,ZC(i,e,void 0,t),t.currentTarget=null}function zx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;rv(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;rv(r,a,c),s=l}}}if(Yc)throw t=bf,Yc=!1,bf=null,t}function ce(t,e){var n=e[Mf];n===void 0&&(n=e[Mf]=new Set);var i=t+"__bubble";n.has(i)||(Bx(e,t,2,!1),n.add(i))}function fd(t,e,n){var i=0;e&&(i|=4),Bx(n,t,i,e)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[Bl]){t[Bl]=!0,Y_.forEach(function(n){n!=="selectionchange"&&(tI.has(n)||fd(n,!1,t),fd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bl]||(e[Bl]=!0,fd("selectionchange",!1,e))}}function Bx(t,e,n,i){switch(Ex(e)){case 1:var r=gT;break;case 4:r=mT;break;default:r=og}n=r.bind(null,e,n,t),r=void 0,!Sf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function pd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=dr(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}hx(function(){var c=s,u=ng(n),h=[];e:{var d=Ux.get(t);if(d!==void 0){var f=lg,g=t;switch(t){case"keypress":if(Tc(n)===0)break e;case"keydown":case"keyup":f=AT;break;case"focusin":g="focus",f=ad;break;case"focusout":g="blur",f=ad;break;case"beforeblur":case"afterblur":f=ad;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=wT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=MT;break;case Lx:case $x:case Fx:f=kT;break;case jx:f=LT;break;case"scroll":f=yT;break;case"wheel":f=FT;break;case"copy":case"cut":case"paste":f=bT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Gy}var w=(e&4)!==0,y=!w&&t==="scroll",p=w?d!==null?d+"Capture":null:d;w=[];for(var m=c,_;m!==null;){_=m;var x=_.stateNode;if(_.tag===5&&x!==null&&(_=x,p!==null&&(x=ma(m,p),x!=null&&w.push(Sa(m,x,_)))),y)break;m=m.return}0<w.length&&(d=new f(d,g,null,n,u),h.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==xf&&(g=n.relatedTarget||n.fromElement)&&(dr(g)||g[Xn]))break e;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=c,g=g?dr(g):null,g!==null&&(y=Kr(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(w=Ky,x="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=Gy,x="onPointerLeave",p="onPointerEnter",m="pointer"),y=f==null?d:us(f),_=g==null?d:us(g),d=new w(x,m+"leave",f,n,u),d.target=y,d.relatedTarget=_,x=null,dr(u)===c&&(w=new w(p,m+"enter",g,n,u),w.target=_,w.relatedTarget=y,x=w),y=x,f&&g)t:{for(w=f,p=g,m=0,_=w;_;_=Zr(_))m++;for(_=0,x=p;x;x=Zr(x))_++;for(;0<m-_;)w=Zr(w),m--;for(;0<_-m;)p=Zr(p),_--;for(;m--;){if(w===p||p!==null&&w===p.alternate)break t;w=Zr(w),p=Zr(p)}w=null}else w=null;f!==null&&sv(h,d,f,w,!1),g!==null&&y!==null&&sv(h,y,g,w,!0)}}e:{if(d=c?us(c):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var k=WT;else if(Xy(d))if(Ax)k=YT;else{k=qT;var b=KT}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(k=GT);if(k&&(k=k(t,c))){Px(h,k,n,u);break e}b&&b(t,d,c),t==="focusout"&&(b=d._wrapperState)&&b.controlled&&d.type==="number"&&mf(d,"number",d.value)}switch(b=c?us(c):window,t){case"focusin":(Xy(b)||b.contentEditable==="true")&&(ls=b,If=c,Xo=null);break;case"focusout":Xo=If=ls=null;break;case"mousedown":Nf=!0;break;case"contextmenu":case"mouseup":case"dragend":Nf=!1,nv(h,n,u);break;case"selectionchange":if(JT)break;case"keydown":case"keyup":nv(h,n,u)}var C;if(ug)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else as?Ix(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Tx&&n.locale!=="ko"&&(as||E!=="onCompositionStart"?E==="onCompositionEnd"&&as&&(C=Cx()):(xi=u,ag="value"in xi?xi.value:xi.textContent,as=!0)),b=eu(c,E),0<b.length&&(E=new qy(E,t,null,n,u),h.push({event:E,listeners:b}),C?E.data=C:(C=Nx(n),C!==null&&(E.data=C)))),(C=UT?zT(t,n):BT(t,n))&&(c=eu(c,"onBeforeInput"),0<c.length&&(u=new qy("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=C))}zx(h,e)})}function Sa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function eu(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ma(t,n),s!=null&&i.unshift(Sa(t,s,r)),s=ma(t,e),s!=null&&i.push(Sa(t,s,r))),t=t.return}return i}function Zr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sv(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=ma(n,s),l!=null&&o.unshift(Sa(n,l,a))):r||(l=ma(n,s),l!=null&&o.push(Sa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nI=/\r\n?/g,iI=/\u0000|\uFFFD/g;function ov(t){return(typeof t=="string"?t:""+t).replace(nI,`
`).replace(iI,"")}function Vl(t,e,n){if(e=ov(e),ov(t)!==e&&n)throw Error(I(425))}function tu(){}var Pf=null,Af=null;function Rf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Df=typeof setTimeout=="function"?setTimeout:void 0,rI=typeof clearTimeout=="function"?clearTimeout:void 0,av=typeof Promise=="function"?Promise:void 0,sI=typeof queueMicrotask=="function"?queueMicrotask:typeof av<"u"?function(t){return av.resolve(null).then(t).catch(oI)}:Df;function oI(t){setTimeout(function(){throw t})}function gd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),wa(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);wa(e)}function Ai(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var no=Math.random().toString(36).slice(2),wn="__reactFiber$"+no,ba="__reactProps$"+no,Xn="__reactContainer$"+no,Mf="__reactEvents$"+no,aI="__reactListeners$"+no,lI="__reactHandles$"+no;function dr(t){var e=t[wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Xn]||n[wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lv(t);t!==null;){if(n=t[wn])return n;t=lv(t)}return e}t=n,n=t.parentNode}return null}function al(t){return t=t[wn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function us(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function rh(t){return t[ba]||null}var Of=[],hs=-1;function Yi(t){return{current:t}}function de(t){0>hs||(t.current=Of[hs],Of[hs]=null,hs--)}function ae(t,e){hs++,Of[hs]=t.current,t.current=e}var Bi={},ht=Yi(Bi),It=Yi(!1),Cr=Bi;function Os(t,e){var n=t.type.contextTypes;if(!n)return Bi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Nt(t){return t=t.childContextTypes,t!=null}function nu(){de(It),de(ht)}function cv(t,e,n){if(ht.current!==Bi)throw Error(I(168));ae(ht,e),ae(It,n)}function Vx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(I(108,KC(t)||"Unknown",r));return we({},n,i)}function iu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bi,Cr=ht.current,ae(ht,t),ae(It,It.current),!0}function uv(t,e,n){var i=t.stateNode;if(!i)throw Error(I(169));n?(t=Vx(t,e,Cr),i.__reactInternalMemoizedMergedChildContext=t,de(It),de(ht),ae(ht,t)):de(It),ae(It,n)}var Un=null,sh=!1,md=!1;function Hx(t){Un===null?Un=[t]:Un.push(t)}function cI(t){sh=!0,Hx(t)}function Qi(){if(!md&&Un!==null){md=!0;var t=0,e=ie;try{var n=Un;for(ie=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Un=null,sh=!1}catch(r){throw Un!==null&&(Un=Un.slice(t+1)),gx(ig,Qi),r}finally{ie=e,md=!1}}return null}var ds=[],fs=0,ru=null,su=0,Kt=[],qt=0,Tr=null,Vn=1,Hn="";function ar(t,e){ds[fs++]=su,ds[fs++]=ru,ru=t,su=e}function Wx(t,e,n){Kt[qt++]=Vn,Kt[qt++]=Hn,Kt[qt++]=Tr,Tr=t;var i=Vn;t=Hn;var r=32-cn(i)-1;i&=~(1<<r),n+=1;var s=32-cn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Vn=1<<32-cn(e)+r|n<<r|i,Hn=s+t}else Vn=1<<s|n<<r|i,Hn=t}function dg(t){t.return!==null&&(ar(t,1),Wx(t,1,0))}function fg(t){for(;t===ru;)ru=ds[--fs],ds[fs]=null,su=ds[--fs],ds[fs]=null;for(;t===Tr;)Tr=Kt[--qt],Kt[qt]=null,Hn=Kt[--qt],Kt[qt]=null,Vn=Kt[--qt],Kt[qt]=null}var jt=null,Mt=null,pe=!1,an=null;function Kx(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Mt=Ai(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Tr!==null?{id:Vn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Mt=null,!0):!1;default:return!1}}function Lf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $f(t){if(pe){var e=Mt;if(e){var n=e;if(!hv(t,e)){if(Lf(t))throw Error(I(418));e=Ai(n.nextSibling);var i=jt;e&&hv(t,e)?Kx(i,n):(t.flags=t.flags&-4097|2,pe=!1,jt=t)}}else{if(Lf(t))throw Error(I(418));t.flags=t.flags&-4097|2,pe=!1,jt=t}}}function dv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function Hl(t){if(t!==jt)return!1;if(!pe)return dv(t),pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rf(t.type,t.memoizedProps)),e&&(e=Mt)){if(Lf(t))throw qx(),Error(I(418));for(;e;)Kx(t,e),e=Ai(e.nextSibling)}if(dv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Ai(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=jt?Ai(t.stateNode.nextSibling):null;return!0}function qx(){for(var t=Mt;t;)t=Ai(t.nextSibling)}function Ls(){Mt=jt=null,pe=!1}function pg(t){an===null?an=[t]:an.push(t)}var uI=oi.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var i=n.stateNode}if(!i)throw Error(I(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function Wl(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fv(t){var e=t._init;return e(t._payload)}function Gx(t){function e(p,m){if(t){var _=p.deletions;_===null?(p.deletions=[m],p.flags|=16):_.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function i(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function r(p,m){return p=Oi(p,m),p.index=0,p.sibling=null,p}function s(p,m,_){return p.index=_,t?(_=p.alternate,_!==null?(_=_.index,_<m?(p.flags|=2,m):_):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,m,_,x){return m===null||m.tag!==6?(m=Sd(_,p.mode,x),m.return=p,m):(m=r(m,_),m.return=p,m)}function l(p,m,_,x){var k=_.type;return k===os?u(p,m,_.props.children,x,_.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===di&&fv(k)===m.type)?(x=r(m,_.props),x.ref=ko(p,m,_),x.return=p,x):(x=Mc(_.type,_.key,_.props,null,p.mode,x),x.ref=ko(p,m,_),x.return=p,x)}function c(p,m,_,x){return m===null||m.tag!==4||m.stateNode.containerInfo!==_.containerInfo||m.stateNode.implementation!==_.implementation?(m=bd(_,p.mode,x),m.return=p,m):(m=r(m,_.children||[]),m.return=p,m)}function u(p,m,_,x,k){return m===null||m.tag!==7?(m=xr(_,p.mode,x,k),m.return=p,m):(m=r(m,_),m.return=p,m)}function h(p,m,_){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Sd(""+m,p.mode,_),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ml:return _=Mc(m.type,m.key,m.props,null,p.mode,_),_.ref=ko(p,null,m),_.return=p,_;case ss:return m=bd(m,p.mode,_),m.return=p,m;case di:var x=m._init;return h(p,x(m._payload),_)}if(Mo(m)||yo(m))return m=xr(m,p.mode,_,null),m.return=p,m;Wl(p,m)}return null}function d(p,m,_,x){var k=m!==null?m.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:a(p,m,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ml:return _.key===k?l(p,m,_,x):null;case ss:return _.key===k?c(p,m,_,x):null;case di:return k=_._init,d(p,m,k(_._payload),x)}if(Mo(_)||yo(_))return k!==null?null:u(p,m,_,x,null);Wl(p,_)}return null}function f(p,m,_,x,k){if(typeof x=="string"&&x!==""||typeof x=="number")return p=p.get(_)||null,a(m,p,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ml:return p=p.get(x.key===null?_:x.key)||null,l(m,p,x,k);case ss:return p=p.get(x.key===null?_:x.key)||null,c(m,p,x,k);case di:var b=x._init;return f(p,m,_,b(x._payload),k)}if(Mo(x)||yo(x))return p=p.get(_)||null,u(m,p,x,k,null);Wl(m,x)}return null}function g(p,m,_,x){for(var k=null,b=null,C=m,E=m=0,P=null;C!==null&&E<_.length;E++){C.index>E?(P=C,C=null):P=C.sibling;var A=d(p,C,_[E],x);if(A===null){C===null&&(C=P);break}t&&C&&A.alternate===null&&e(p,C),m=s(A,m,E),b===null?k=A:b.sibling=A,b=A,C=P}if(E===_.length)return n(p,C),pe&&ar(p,E),k;if(C===null){for(;E<_.length;E++)C=h(p,_[E],x),C!==null&&(m=s(C,m,E),b===null?k=C:b.sibling=C,b=C);return pe&&ar(p,E),k}for(C=i(p,C);E<_.length;E++)P=f(C,p,E,_[E],x),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?E:P.key),m=s(P,m,E),b===null?k=P:b.sibling=P,b=P);return t&&C.forEach(function(L){return e(p,L)}),pe&&ar(p,E),k}function w(p,m,_,x){var k=yo(_);if(typeof k!="function")throw Error(I(150));if(_=k.call(_),_==null)throw Error(I(151));for(var b=k=null,C=m,E=m=0,P=null,A=_.next();C!==null&&!A.done;E++,A=_.next()){C.index>E?(P=C,C=null):P=C.sibling;var L=d(p,C,A.value,x);if(L===null){C===null&&(C=P);break}t&&C&&L.alternate===null&&e(p,C),m=s(L,m,E),b===null?k=L:b.sibling=L,b=L,C=P}if(A.done)return n(p,C),pe&&ar(p,E),k;if(C===null){for(;!A.done;E++,A=_.next())A=h(p,A.value,x),A!==null&&(m=s(A,m,E),b===null?k=A:b.sibling=A,b=A);return pe&&ar(p,E),k}for(C=i(p,C);!A.done;E++,A=_.next())A=f(C,p,E,A.value,x),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?E:A.key),m=s(A,m,E),b===null?k=A:b.sibling=A,b=A);return t&&C.forEach(function(q){return e(p,q)}),pe&&ar(p,E),k}function y(p,m,_,x){if(typeof _=="object"&&_!==null&&_.type===os&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ml:e:{for(var k=_.key,b=m;b!==null;){if(b.key===k){if(k=_.type,k===os){if(b.tag===7){n(p,b.sibling),m=r(b,_.props.children),m.return=p,p=m;break e}}else if(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===di&&fv(k)===b.type){n(p,b.sibling),m=r(b,_.props),m.ref=ko(p,b,_),m.return=p,p=m;break e}n(p,b);break}else e(p,b);b=b.sibling}_.type===os?(m=xr(_.props.children,p.mode,x,_.key),m.return=p,p=m):(x=Mc(_.type,_.key,_.props,null,p.mode,x),x.ref=ko(p,m,_),x.return=p,p=x)}return o(p);case ss:e:{for(b=_.key;m!==null;){if(m.key===b)if(m.tag===4&&m.stateNode.containerInfo===_.containerInfo&&m.stateNode.implementation===_.implementation){n(p,m.sibling),m=r(m,_.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=bd(_,p.mode,x),m.return=p,p=m}return o(p);case di:return b=_._init,y(p,m,b(_._payload),x)}if(Mo(_))return g(p,m,_,x);if(yo(_))return w(p,m,_,x);Wl(p,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,m!==null&&m.tag===6?(n(p,m.sibling),m=r(m,_),m.return=p,p=m):(n(p,m),m=Sd(_,p.mode,x),m.return=p,p=m),o(p)):n(p,m)}return y}var $s=Gx(!0),Yx=Gx(!1),ou=Yi(null),au=null,ps=null,gg=null;function mg(){gg=ps=au=null}function yg(t){var e=ou.current;de(ou),t._currentValue=e}function Ff(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ss(t,e){au=t,gg=ps=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(gg!==t)if(t={context:t,memoizedValue:e,next:null},ps===null){if(au===null)throw Error(I(308));ps=t,au.dependencies={lanes:0,firstContext:t}}else ps=ps.next=t;return e}var fr=null;function vg(t){fr===null?fr=[t]:fr.push(t)}function Qx(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,vg(e)):(n.next=r.next,r.next=n),e.interleaved=n,Jn(t,i)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fi=!1;function wg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ri(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,J&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Jn(t,n)}return r=i.interleaved,r===null?(e.next=e,vg(i)):(e.next=r.next,r.next=e),i.interleaved=e,Jn(t,n)}function Ic(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rg(t,n)}}function pv(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function lu(t,e,n,i){var r=t.updateQueue;fi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,w=a;switch(d=e,f=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,d=typeof g=="function"?g.call(f,h,d):g,d==null)break e;h=we({},h,d);break e;case 2:fi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=h):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Nr|=o,t.lanes=o,t.memoizedState=h}}function gv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(I(191,r));r.call(i)}}}var ll={},En=Yi(ll),Ea=Yi(ll),Ca=Yi(ll);function pr(t){if(t===ll)throw Error(I(174));return t}function _g(t,e){switch(ae(Ca,e),ae(Ea,t),ae(En,ll),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vf(e,t)}de(En),ae(En,e)}function Fs(){de(En),de(Ea),de(Ca)}function Jx(t){pr(Ca.current);var e=pr(En.current),n=vf(e,t.type);e!==n&&(ae(Ea,t),ae(En,n))}function xg(t){Ea.current===t&&(de(En),de(Ea))}var me=Yi(0);function cu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yd=[];function kg(){for(var t=0;t<yd.length;t++)yd[t]._workInProgressVersionPrimary=null;yd.length=0}var Nc=oi.ReactCurrentDispatcher,vd=oi.ReactCurrentBatchConfig,Ir=0,ve=null,Le=null,Be=null,uu=!1,Jo=!1,Ta=0,hI=0;function et(){throw Error(I(321))}function Sg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function bg(t,e,n,i,r,s){if(Ir=s,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nc.current=t===null||t.memoizedState===null?gI:mI,t=n(i,r),Jo){s=0;do{if(Jo=!1,Ta=0,25<=s)throw Error(I(301));s+=1,Be=Le=null,e.updateQueue=null,Nc.current=yI,t=n(i,r)}while(Jo)}if(Nc.current=hu,e=Le!==null&&Le.next!==null,Ir=0,Be=Le=ve=null,uu=!1,e)throw Error(I(300));return t}function Eg(){var t=Ta!==0;return Ta=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?ve.memoizedState=Be=t:Be=Be.next=t,Be}function tn(){if(Le===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Be===null?ve.memoizedState:Be.next;if(e!==null)Be=e,Le=t;else{if(t===null)throw Error(I(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?ve.memoizedState=Be=t:Be=Be.next=t}return Be}function Ia(t,e){return typeof e=="function"?e(t):e}function wd(t){var e=tn(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var i=Le,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ir&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,ve.lanes|=u,Nr|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,hn(i,e.memoizedState)||(Tt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,ve.lanes|=s,Nr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _d(t){var e=tn(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);hn(s,e.memoizedState)||(Tt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function Zx(){}function e1(t,e){var n=ve,i=tn(),r=e(),s=!hn(i.memoizedState,r);if(s&&(i.memoizedState=r,Tt=!0),i=i.queue,Cg(i1.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Na(9,n1.bind(null,n,i,r,e),void 0,null),He===null)throw Error(I(349));Ir&30||t1(n,e,r)}return r}function t1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function n1(t,e,n,i){e.value=n,e.getSnapshot=i,r1(e)&&s1(t)}function i1(t,e,n){return n(function(){r1(e)&&s1(t)})}function r1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function s1(t){var e=Jn(t,1);e!==null&&un(e,t,1,-1)}function mv(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=pI.bind(null,ve,t),[e.memoizedState,t]}function Na(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function o1(){return tn().memoizedState}function Pc(t,e,n,i){var r=yn();ve.flags|=t,r.memoizedState=Na(1|e,n,void 0,i===void 0?null:i)}function oh(t,e,n,i){var r=tn();i=i===void 0?null:i;var s=void 0;if(Le!==null){var o=Le.memoizedState;if(s=o.destroy,i!==null&&Sg(i,o.deps)){r.memoizedState=Na(e,n,s,i);return}}ve.flags|=t,r.memoizedState=Na(1|e,n,s,i)}function yv(t,e){return Pc(8390656,8,t,e)}function Cg(t,e){return oh(2048,8,t,e)}function a1(t,e){return oh(4,2,t,e)}function l1(t,e){return oh(4,4,t,e)}function c1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function u1(t,e,n){return n=n!=null?n.concat([t]):null,oh(4,4,c1.bind(null,e,t),n)}function Tg(){}function h1(t,e){var n=tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Sg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function d1(t,e){var n=tn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Sg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function f1(t,e,n){return Ir&21?(hn(n,e)||(n=vx(),ve.lanes|=n,Nr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tt=!0),t.memoizedState=n)}function dI(t,e){var n=ie;ie=n!==0&&4>n?n:4,t(!0);var i=vd.transition;vd.transition={};try{t(!1),e()}finally{ie=n,vd.transition=i}}function p1(){return tn().memoizedState}function fI(t,e,n){var i=Mi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},g1(t))m1(e,n);else if(n=Qx(t,e,n,i),n!==null){var r=_t();un(n,t,i,r),y1(n,e,i)}}function pI(t,e,n){var i=Mi(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(g1(t))m1(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,hn(a,o)){var l=e.interleaved;l===null?(r.next=r,vg(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=Qx(t,e,r,i),n!==null&&(r=_t(),un(n,t,i,r),y1(n,e,i))}}function g1(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function m1(t,e){Jo=uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function y1(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rg(t,n)}}var hu={readContext:en,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},gI={readContext:en,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:yv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pc(4194308,4,c1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pc(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=yn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=fI.bind(null,ve,t),[i.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:mv,useDebugValue:Tg,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=mv(!1),e=t[0];return t=dI.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ve,r=yn();if(pe){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),He===null)throw Error(I(349));Ir&30||t1(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,yv(i1.bind(null,i,s,t),[t]),i.flags|=2048,Na(9,n1.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=yn(),e=He.identifierPrefix;if(pe){var n=Hn,i=Vn;n=(i&~(1<<32-cn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ta++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mI={readContext:en,useCallback:h1,useContext:en,useEffect:Cg,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:d1,useReducer:wd,useRef:o1,useState:function(){return wd(Ia)},useDebugValue:Tg,useDeferredValue:function(t){var e=tn();return f1(e,Le.memoizedState,t)},useTransition:function(){var t=wd(Ia)[0],e=tn().memoizedState;return[t,e]},useMutableSource:Zx,useSyncExternalStore:e1,useId:p1,unstable_isNewReconciler:!1},yI={readContext:en,useCallback:h1,useContext:en,useEffect:Cg,useImperativeHandle:u1,useInsertionEffect:a1,useLayoutEffect:l1,useMemo:d1,useReducer:_d,useRef:o1,useState:function(){return _d(Ia)},useDebugValue:Tg,useDeferredValue:function(t){var e=tn();return Le===null?e.memoizedState=t:f1(e,Le.memoizedState,t)},useTransition:function(){var t=_d(Ia)[0],e=tn().memoizedState;return[t,e]},useMutableSource:Zx,useSyncExternalStore:e1,useId:p1,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ah={isMounted:function(t){return(t=t._reactInternals)?Kr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=_t(),r=Mi(t),s=Yn(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,r),e!==null&&(un(e,t,r,i),Ic(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=_t(),r=Mi(t),s=Yn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ri(t,s,r),e!==null&&(un(e,t,r,i),Ic(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),i=Mi(t),r=Yn(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ri(t,r,i),e!==null&&(un(e,t,i,n),Ic(e,t,i))}};function vv(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!xa(n,i)||!xa(r,s):!0}function v1(t,e,n){var i=!1,r=Bi,s=e.contextType;return typeof s=="object"&&s!==null?s=en(s):(r=Nt(e)?Cr:ht.current,i=e.contextTypes,s=(i=i!=null)?Os(t,r):Bi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ah,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function wv(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ah.enqueueReplaceState(e,e.state,null)}function Uf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},wg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=en(s):(s=Nt(e)?Cr:ht.current,r.context=Os(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jf(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ah.enqueueReplaceState(r,r.state,null),lu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function js(t,e){try{var n="",i=e;do n+=WC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function xd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vI=typeof WeakMap=="function"?WeakMap:Map;function w1(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){fu||(fu=!0,Xf=i),zf(t,e)},n}function _1(t,e,n){n=Yn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){zf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zf(t,e),typeof i!="function"&&(Di===null?Di=new Set([this]):Di.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _v(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new vI;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=RI.bind(null,t,e,n),e.then(t,t))}function xv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,Ri(n,e,1))),n.lanes|=1),t)}var wI=oi.ReactCurrentOwner,Tt=!1;function vt(t,e,n,i){e.child=t===null?Yx(e,null,n,i):$s(e,t.child,n,i)}function Sv(t,e,n,i,r){n=n.render;var s=e.ref;return Ss(e,r),i=bg(t,e,n,i,s,r),n=Eg(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zn(t,e,r)):(pe&&n&&dg(e),e.flags|=1,vt(t,e,i,r),e.child)}function bv(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Og(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,x1(t,e,s,i,r)):(t=Mc(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:xa,n(o,i)&&t.ref===e.ref)return Zn(t,e,r)}return e.flags|=1,t=Oi(s,i),t.ref=e.ref,t.return=e,e.child=t}function x1(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(xa(s,i)&&t.ref===e.ref)if(Tt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Tt=!0);else return e.lanes=t.lanes,Zn(t,e,r)}return Bf(t,e,n,i,r)}function k1(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(ms,Dt),Dt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(ms,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ae(ms,Dt),Dt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ae(ms,Dt),Dt|=i;return vt(t,e,r,n),e.child}function S1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bf(t,e,n,i,r){var s=Nt(n)?Cr:ht.current;return s=Os(e,s),Ss(e,r),n=bg(t,e,n,i,s,r),i=Eg(),t!==null&&!Tt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Zn(t,e,r)):(pe&&i&&dg(e),e.flags|=1,vt(t,e,n,r),e.child)}function Ev(t,e,n,i,r){if(Nt(n)){var s=!0;iu(e)}else s=!1;if(Ss(e,r),e.stateNode===null)Ac(t,e),v1(e,n,i),Uf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=en(c):(c=Nt(n)?Cr:ht.current,c=Os(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&wv(e,o,i,c),fi=!1;var d=e.memoizedState;o.state=d,lu(e,i,o,r),l=e.memoizedState,a!==i||d!==l||It.current||fi?(typeof u=="function"&&(jf(e,n,u,i),l=e.memoizedState),(a=fi||vv(e,n,a,i,d,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,Xx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:rn(e.type,a),o.props=c,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=en(l):(l=Nt(n)?Cr:ht.current,l=Os(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&wv(e,o,i,l),fi=!1,d=e.memoizedState,o.state=d,lu(e,i,o,r);var g=e.memoizedState;a!==h||d!==g||It.current||fi?(typeof f=="function"&&(jf(e,n,f,i),g=e.memoizedState),(c=fi||vv(e,n,c,i,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Vf(t,e,n,i,s,r)}function Vf(t,e,n,i,r,s){S1(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&uv(e,n,!1),Zn(t,e,s);i=e.stateNode,wI.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=$s(e,t.child,null,s),e.child=$s(e,null,a,s)):vt(t,e,a,s),e.memoizedState=i.state,r&&uv(e,n,!0),e.child}function b1(t){var e=t.stateNode;e.pendingContext?cv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cv(t,e.context,!1),_g(t,e.containerInfo)}function Cv(t,e,n,i,r){return Ls(),pg(r),e.flags|=256,vt(t,e,n,i),e.child}var Hf={dehydrated:null,treeContext:null,retryLane:0};function Wf(t){return{baseLanes:t,cachePool:null,transitions:null}}function E1(t,e,n){var i=e.pendingProps,r=me.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ae(me,r&1),t===null)return $f(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=uh(o,i,0,null),t=xr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Wf(n),e.memoizedState=Hf,t):Ig(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return _I(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Oi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Oi(a,s):(s=xr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Wf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Hf,i}return s=t.child,t=s.sibling,i=Oi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ig(t,e){return e=uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kl(t,e,n,i){return i!==null&&pg(i),$s(e,t.child,null,n),t=Ig(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _I(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=xd(Error(I(422))),Kl(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=uh({mode:"visible",children:i.children},r,0,null),s=xr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&$s(e,t.child,null,o),e.child.memoizedState=Wf(o),e.memoizedState=Hf,s);if(!(e.mode&1))return Kl(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(I(419)),i=xd(s,i,void 0),Kl(t,e,o,i)}if(a=(o&t.childLanes)!==0,Tt||a){if(i=He,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Jn(t,r),un(i,t,r,-1))}return Mg(),i=xd(Error(I(421))),Kl(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=DI.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Mt=Ai(r.nextSibling),jt=e,pe=!0,an=null,t!==null&&(Kt[qt++]=Vn,Kt[qt++]=Hn,Kt[qt++]=Tr,Vn=t.id,Hn=t.overflow,Tr=e),e=Ig(e,i.children),e.flags|=4096,e)}function Tv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Ff(t.return,e,n)}function kd(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function C1(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(vt(t,e,i.children,n),i=me.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tv(t,n,e);else if(t.tag===19)Tv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ae(me,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&cu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),kd(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&cu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}kd(e,!0,n,null,s);break;case"together":kd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Zn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Nr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=Oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xI(t,e,n){switch(e.tag){case 3:b1(e),Ls();break;case 5:Jx(e);break;case 1:Nt(e.type)&&iu(e);break;case 4:_g(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ae(ou,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ae(me,me.current&1),e.flags|=128,null):n&e.child.childLanes?E1(t,e,n):(ae(me,me.current&1),t=Zn(t,e,n),t!==null?t.sibling:null);ae(me,me.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return C1(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ae(me,me.current),i)break;return null;case 22:case 23:return e.lanes=0,k1(t,e,n)}return Zn(t,e,n)}var T1,Kf,I1,N1;T1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kf=function(){};I1=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,pr(En.current);var s=null;switch(n){case"input":r=pf(t,r),i=pf(t,i),s=[];break;case"select":r=we({},r,{value:void 0}),i=we({},i,{value:void 0}),s=[];break;case"textarea":r=yf(t,r),i=yf(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=tu)}wf(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(pa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ce("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};N1=function(t,e,n,i){n!==i&&(e.flags|=4)};function So(t,e){if(!pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function kI(t,e,n){var i=e.pendingProps;switch(fg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return Nt(e.type)&&nu(),tt(e),null;case 3:return i=e.stateNode,Fs(),de(It),de(ht),kg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(ep(an),an=null))),Kf(t,e),tt(e),null;case 5:xg(e);var r=pr(Ca.current);if(n=e.type,t!==null&&e.stateNode!=null)I1(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(I(166));return tt(e),null}if(t=pr(En.current),Hl(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[wn]=e,i[ba]=s,t=(e.mode&1)!==0,n){case"dialog":ce("cancel",i),ce("close",i);break;case"iframe":case"object":case"embed":ce("load",i);break;case"video":case"audio":for(r=0;r<Lo.length;r++)ce(Lo[r],i);break;case"source":ce("error",i);break;case"img":case"image":case"link":ce("error",i),ce("load",i);break;case"details":ce("toggle",i);break;case"input":Ly(i,s),ce("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ce("invalid",i);break;case"textarea":Fy(i,s),ce("invalid",i)}wf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Vl(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Vl(i.textContent,a,t),r=["children",""+a]):pa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ce("scroll",i)}switch(n){case"input":Ol(i),$y(i,s,!0);break;case"textarea":Ol(i),jy(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=tu)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ix(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[wn]=e,t[ba]=i,T1(t,e,!1,!1),e.stateNode=t;e:{switch(o=_f(n,i),n){case"dialog":ce("cancel",t),ce("close",t),r=i;break;case"iframe":case"object":case"embed":ce("load",t),r=i;break;case"video":case"audio":for(r=0;r<Lo.length;r++)ce(Lo[r],t);r=i;break;case"source":ce("error",t),r=i;break;case"img":case"image":case"link":ce("error",t),ce("load",t),r=i;break;case"details":ce("toggle",t),r=i;break;case"input":Ly(t,i),r=pf(t,i),ce("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=we({},i,{value:void 0}),ce("invalid",t);break;case"textarea":Fy(t,i),r=yf(t,i),ce("invalid",t);break;default:r=i}wf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ox(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rx(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ga(t,l):typeof l=="number"&&ga(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ce("scroll",t):l!=null&&Jp(t,s,l,o))}switch(n){case"input":Ol(t),$y(t,i,!1);break;case"textarea":Ol(t),jy(t);break;case"option":i.value!=null&&t.setAttribute("value",""+zi(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?ws(t,!!i.multiple,s,!1):i.defaultValue!=null&&ws(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=tu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tt(e),null;case 6:if(t&&e.stateNode!=null)N1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(I(166));if(n=pr(Ca.current),pr(En.current),Hl(e)){if(i=e.stateNode,n=e.memoizedProps,i[wn]=e,(s=i.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:Vl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[wn]=e,e.stateNode=i}return tt(e),null;case 13:if(de(me),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pe&&Mt!==null&&e.mode&1&&!(e.flags&128))qx(),Ls(),e.flags|=98560,s=!1;else if(s=Hl(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(I(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(I(317));s[wn]=e}else Ls(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),s=!1}else an!==null&&(ep(an),an=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?Fe===0&&(Fe=3):Mg())),e.updateQueue!==null&&(e.flags|=4),tt(e),null);case 4:return Fs(),Kf(t,e),t===null&&ka(e.stateNode.containerInfo),tt(e),null;case 10:return yg(e.type._context),tt(e),null;case 17:return Nt(e.type)&&nu(),tt(e),null;case 19:if(de(me),s=e.memoizedState,s===null)return tt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)So(s,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=cu(t),o!==null){for(e.flags|=128,So(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ae(me,me.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ne()>Us&&(e.flags|=128,i=!0,So(s,!1),e.lanes=4194304)}else{if(!i)if(t=cu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),So(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pe)return tt(e),null}else 2*Ne()-s.renderingStartTime>Us&&n!==1073741824&&(e.flags|=128,i=!0,So(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ne(),e.sibling=null,n=me.current,ae(me,i?n&1|2:n&1),e):(tt(e),null);case 22:case 23:return Dg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Dt&1073741824&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function SI(t,e){switch(fg(e),e.tag){case 1:return Nt(e.type)&&nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fs(),de(It),de(ht),kg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xg(e),null;case 13:if(de(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));Ls()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return de(me),null;case 4:return Fs(),null;case 10:return yg(e.type._context),null;case 22:case 23:return Dg(),null;case 24:return null;default:return null}}var ql=!1,st=!1,bI=typeof WeakSet=="function"?WeakSet:Set,M=null;function gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ke(t,e,i)}else n.current=null}function qf(t,e,n){try{n()}catch(i){ke(t,e,i)}}var Iv=!1;function EI(t,e){if(Pf=Jc,t=Mx(),hg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,d=null;t:for(;;){for(var f;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++c===r&&(a=o),d===s&&++u===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Af={focusedElem:t,selectionRange:n},Jc=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,y=g.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?w:rn(e.type,w),y);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(x){ke(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return g=Iv,Iv=!1,g}function Zo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&qf(e,n,s)}r=r.next}while(r!==i)}}function lh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Gf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function P1(t){var e=t.alternate;e!==null&&(t.alternate=null,P1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[wn],delete e[ba],delete e[Mf],delete e[aI],delete e[lI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function A1(t){return t.tag===5||t.tag===3||t.tag===4}function Nv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||A1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=tu));else if(i!==4&&(t=t.child,t!==null))for(Yf(t,e,n),t=t.sibling;t!==null;)Yf(t,e,n),t=t.sibling}function Qf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Qf(t,e,n),t=t.sibling;t!==null;)Qf(t,e,n),t=t.sibling}var qe=null,sn=!1;function li(t,e,n){for(n=n.child;n!==null;)R1(t,e,n),n=n.sibling}function R1(t,e,n){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(eh,n)}catch{}switch(n.tag){case 5:st||gs(n,e);case 6:var i=qe,r=sn;qe=null,li(t,e,n),qe=i,sn=r,qe!==null&&(sn?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(sn?(t=qe,n=n.stateNode,t.nodeType===8?gd(t.parentNode,n):t.nodeType===1&&gd(t,n),wa(t)):gd(qe,n.stateNode));break;case 4:i=qe,r=sn,qe=n.stateNode.containerInfo,sn=!0,li(t,e,n),qe=i,sn=r;break;case 0:case 11:case 14:case 15:if(!st&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&qf(n,e,o),r=r.next}while(r!==i)}li(t,e,n);break;case 1:if(!st&&(gs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){ke(n,e,a)}li(t,e,n);break;case 21:li(t,e,n);break;case 22:n.mode&1?(st=(i=st)||n.memoizedState!==null,li(t,e,n),st=i):li(t,e,n);break;default:li(t,e,n)}}function Pv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bI),e.forEach(function(i){var r=MI.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:qe=a.stateNode,sn=!1;break e;case 3:qe=a.stateNode.containerInfo,sn=!0;break e;case 4:qe=a.stateNode.containerInfo,sn=!0;break e}a=a.return}if(qe===null)throw Error(I(160));R1(s,o,r),qe=null,sn=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){ke(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)D1(e,t),e=e.sibling}function D1(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),gn(t),i&4){try{Zo(3,t,t.return),lh(3,t)}catch(w){ke(t,t.return,w)}try{Zo(5,t,t.return)}catch(w){ke(t,t.return,w)}}break;case 1:nn(e,t),gn(t),i&512&&n!==null&&gs(n,n.return);break;case 5:if(nn(e,t),gn(t),i&512&&n!==null&&gs(n,n.return),t.flags&32){var r=t.stateNode;try{ga(r,"")}catch(w){ke(t,t.return,w)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&tx(r,s),_f(a,o);var c=_f(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?ox(r,h):u==="dangerouslySetInnerHTML"?rx(r,h):u==="children"?ga(r,h):Jp(r,u,h,c)}switch(a){case"input":gf(r,s);break;case"textarea":nx(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ws(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?ws(r,!!s.multiple,s.defaultValue,!0):ws(r,!!s.multiple,s.multiple?[]:"",!1))}r[ba]=s}catch(w){ke(t,t.return,w)}}break;case 6:if(nn(e,t),gn(t),i&4){if(t.stateNode===null)throw Error(I(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(w){ke(t,t.return,w)}}break;case 3:if(nn(e,t),gn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{wa(e.containerInfo)}catch(w){ke(t,t.return,w)}break;case 4:nn(e,t),gn(t);break;case 13:nn(e,t),gn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ag=Ne())),i&4&&Pv(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(st=(c=st)||u,nn(e,t),st=c):nn(e,t),gn(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(M=t,u=t.child;u!==null;){for(h=M=u;M!==null;){switch(d=M,f=d.child,d.tag){case 0:case 11:case 14:case 15:Zo(4,d,d.return);break;case 1:gs(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(w){ke(i,n,w)}}break;case 5:gs(d,d.return);break;case 22:if(d.memoizedState!==null){Rv(h);continue}}f!==null?(f.return=d,M=f):Rv(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=sx("display",o))}catch(w){ke(t,t.return,w)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){ke(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:nn(e,t),gn(t),i&4&&Pv(t);break;case 21:break;default:nn(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(A1(n)){var i=n;break e}n=n.return}throw Error(I(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ga(r,""),i.flags&=-33);var s=Nv(t);Qf(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=Nv(t);Yf(t,a,o);break;default:throw Error(I(161))}}catch(l){ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function CI(t,e,n){M=t,M1(t)}function M1(t,e,n){for(var i=(t.mode&1)!==0;M!==null;){var r=M,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ql;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||st;a=ql;var c=st;if(ql=o,(st=l)&&!c)for(M=r;M!==null;)o=M,l=o.child,o.tag===22&&o.memoizedState!==null?Dv(r):l!==null?(l.return=o,M=l):Dv(r);for(;s!==null;)M=s,M1(s),s=s.sibling;M=r,ql=a,st=c}Av(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,M=s):Av(t)}}function Av(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:st||lh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!st)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gv(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&wa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}st||e.flags&512&&Gf(e)}catch(d){ke(e,e.return,d)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function Rv(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function Dv(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lh(4,e)}catch(l){ke(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){ke(e,r,l)}}var s=e.return;try{Gf(e)}catch(l){ke(e,s,l)}break;case 5:var o=e.return;try{Gf(e)}catch(l){ke(e,o,l)}}}catch(l){ke(e,e.return,l)}if(e===t){M=null;break}var a=e.sibling;if(a!==null){a.return=e.return,M=a;break}M=e.return}}var TI=Math.ceil,du=oi.ReactCurrentDispatcher,Ng=oi.ReactCurrentOwner,Jt=oi.ReactCurrentBatchConfig,J=0,He=null,Me=null,Qe=0,Dt=0,ms=Yi(0),Fe=0,Pa=null,Nr=0,ch=0,Pg=0,ea=null,bt=null,Ag=0,Us=1/0,jn=null,fu=!1,Xf=null,Di=null,Gl=!1,ki=null,pu=0,ta=0,Jf=null,Rc=-1,Dc=0;function _t(){return J&6?Ne():Rc!==-1?Rc:Rc=Ne()}function Mi(t){return t.mode&1?J&2&&Qe!==0?Qe&-Qe:uI.transition!==null?(Dc===0&&(Dc=vx()),Dc):(t=ie,t!==0||(t=window.event,t=t===void 0?16:Ex(t.type)),t):1}function un(t,e,n,i){if(50<ta)throw ta=0,Jf=null,Error(I(185));sl(t,n,i),(!(J&2)||t!==He)&&(t===He&&(!(J&2)&&(ch|=n),Fe===4&&gi(t,Qe)),Pt(t,i),n===1&&J===0&&!(e.mode&1)&&(Us=Ne()+500,sh&&Qi()))}function Pt(t,e){var n=t.callbackNode;uT(t,e);var i=Xc(t,t===He?Qe:0);if(i===0)n!==null&&By(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&By(n),e===1)t.tag===0?cI(Mv.bind(null,t)):Hx(Mv.bind(null,t)),sI(function(){!(J&6)&&Qi()}),n=null;else{switch(wx(i)){case 1:n=ig;break;case 4:n=mx;break;case 16:n=Qc;break;case 536870912:n=yx;break;default:n=Qc}n=B1(n,O1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function O1(t,e){if(Rc=-1,Dc=0,J&6)throw Error(I(327));var n=t.callbackNode;if(bs()&&t.callbackNode!==n)return null;var i=Xc(t,t===He?Qe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=gu(t,i);else{e=i;var r=J;J|=2;var s=$1();(He!==t||Qe!==e)&&(jn=null,Us=Ne()+500,_r(t,e));do try{PI();break}catch(a){L1(t,a)}while(1);mg(),du.current=s,J=r,Me!==null?e=0:(He=null,Qe=0,e=Fe)}if(e!==0){if(e===2&&(r=Ef(t),r!==0&&(i=r,e=Zf(t,r))),e===1)throw n=Pa,_r(t,0),gi(t,i),Pt(t,Ne()),n;if(e===6)gi(t,i);else{if(r=t.current.alternate,!(i&30)&&!II(r)&&(e=gu(t,i),e===2&&(s=Ef(t),s!==0&&(i=s,e=Zf(t,s))),e===1))throw n=Pa,_r(t,0),gi(t,i),Pt(t,Ne()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(I(345));case 2:lr(t,bt,jn);break;case 3:if(gi(t,i),(i&130023424)===i&&(e=Ag+500-Ne(),10<e)){if(Xc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){_t(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Df(lr.bind(null,t,bt,jn),e);break}lr(t,bt,jn);break;case 4:if(gi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-cn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ne()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*TI(i/1960))-i,10<i){t.timeoutHandle=Df(lr.bind(null,t,bt,jn),i);break}lr(t,bt,jn);break;case 5:lr(t,bt,jn);break;default:throw Error(I(329))}}}return Pt(t,Ne()),t.callbackNode===n?O1.bind(null,t):null}function Zf(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(_r(t,e).flags|=256),t=gu(t,e),t!==2&&(e=bt,bt=n,e!==null&&ep(e)),t}function ep(t){bt===null?bt=t:bt.push.apply(bt,t)}function II(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!hn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gi(t,e){for(e&=~Pg,e&=~ch,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),i=1<<n;t[n]=-1,e&=~i}}function Mv(t){if(J&6)throw Error(I(327));bs();var e=Xc(t,0);if(!(e&1))return Pt(t,Ne()),null;var n=gu(t,e);if(t.tag!==0&&n===2){var i=Ef(t);i!==0&&(e=i,n=Zf(t,i))}if(n===1)throw n=Pa,_r(t,0),gi(t,e),Pt(t,Ne()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lr(t,bt,jn),Pt(t,Ne()),null}function Rg(t,e){var n=J;J|=1;try{return t(e)}finally{J=n,J===0&&(Us=Ne()+500,sh&&Qi())}}function Pr(t){ki!==null&&ki.tag===0&&!(J&6)&&bs();var e=J;J|=1;var n=Jt.transition,i=ie;try{if(Jt.transition=null,ie=1,t)return t()}finally{ie=i,Jt.transition=n,J=e,!(J&6)&&Qi()}}function Dg(){Dt=ms.current,de(ms)}function _r(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rI(n)),Me!==null)for(n=Me.return;n!==null;){var i=n;switch(fg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&nu();break;case 3:Fs(),de(It),de(ht),kg();break;case 5:xg(i);break;case 4:Fs();break;case 13:de(me);break;case 19:de(me);break;case 10:yg(i.type._context);break;case 22:case 23:Dg()}n=n.return}if(He=t,Me=t=Oi(t.current,null),Qe=Dt=e,Fe=0,Pa=null,Pg=ch=Nr=0,bt=ea=null,fr!==null){for(e=0;e<fr.length;e++)if(n=fr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}fr=null}return t}function L1(t,e){do{var n=Me;try{if(mg(),Nc.current=hu,uu){for(var i=ve.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}uu=!1}if(Ir=0,Be=Le=ve=null,Jo=!1,Ta=0,Ng.current=null,n===null||n.return===null){Fe=1,Pa=e,Me=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Qe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=xv(o);if(f!==null){f.flags&=-257,kv(f,o,a,s,e),f.mode&1&&_v(s,c,e),e=f,l=c;var g=e.updateQueue;if(g===null){var w=new Set;w.add(l),e.updateQueue=w}else g.add(l);break e}else{if(!(e&1)){_v(s,c,e),Mg();break e}l=Error(I(426))}}else if(pe&&a.mode&1){var y=xv(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),kv(y,o,a,s,e),pg(js(l,a));break e}}s=l=js(l,a),Fe!==4&&(Fe=2),ea===null?ea=[s]:ea.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=w1(s,l,e);pv(s,p);break e;case 1:a=l;var m=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Di===null||!Di.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=_1(s,a,e);pv(s,x);break e}}s=s.return}while(s!==null)}j1(n)}catch(k){e=k,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function $1(){var t=du.current;return du.current=hu,t===null?hu:t}function Mg(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(Nr&268435455)&&!(ch&268435455)||gi(He,Qe)}function gu(t,e){var n=J;J|=2;var i=$1();(He!==t||Qe!==e)&&(jn=null,_r(t,e));do try{NI();break}catch(r){L1(t,r)}while(1);if(mg(),J=n,du.current=i,Me!==null)throw Error(I(261));return He=null,Qe=0,Fe}function NI(){for(;Me!==null;)F1(Me)}function PI(){for(;Me!==null&&!tT();)F1(Me)}function F1(t){var e=z1(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?j1(t):Me=e,Ng.current=null}function j1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SI(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Me=null;return}}else if(n=kI(n,e,Dt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Fe===0&&(Fe=5)}function lr(t,e,n){var i=ie,r=Jt.transition;try{Jt.transition=null,ie=1,AI(t,e,n,i)}finally{Jt.transition=r,ie=i}return null}function AI(t,e,n,i){do bs();while(ki!==null);if(J&6)throw Error(I(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hT(t,s),t===He&&(Me=He=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gl||(Gl=!0,B1(Qc,function(){return bs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jt.transition,Jt.transition=null;var o=ie;ie=1;var a=J;J|=4,Ng.current=null,EI(t,n),D1(n,t),XT(Af),Jc=!!Pf,Af=Pf=null,t.current=n,CI(n),nT(),J=a,ie=o,Jt.transition=s}else t.current=n;if(Gl&&(Gl=!1,ki=t,pu=r),s=t.pendingLanes,s===0&&(Di=null),sT(n.stateNode),Pt(t,Ne()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(fu)throw fu=!1,t=Xf,Xf=null,t;return pu&1&&t.tag!==0&&bs(),s=t.pendingLanes,s&1?t===Jf?ta++:(ta=0,Jf=t):ta=0,Qi(),null}function bs(){if(ki!==null){var t=wx(pu),e=Jt.transition,n=ie;try{if(Jt.transition=null,ie=16>t?16:t,ki===null)var i=!1;else{if(t=ki,ki=null,pu=0,J&6)throw Error(I(331));var r=J;for(J|=4,M=t.current;M!==null;){var s=M,o=s.child;if(M.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(M=c;M!==null;){var u=M;switch(u.tag){case 0:case 11:case 15:Zo(8,u,s)}var h=u.child;if(h!==null)h.return=u,M=h;else for(;M!==null;){u=M;var d=u.sibling,f=u.return;if(P1(u),u===c){M=null;break}if(d!==null){d.return=f,M=d;break}M=f}}}var g=s.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var y=w.sibling;w.sibling=null,w=y}while(w!==null)}}M=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,M=o;else e:for(;M!==null;){if(s=M,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zo(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,M=p;break e}M=s.return}}var m=t.current;for(M=m;M!==null;){o=M;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,M=_;else e:for(o=m;M!==null;){if(a=M,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lh(9,a)}}catch(k){ke(a,a.return,k)}if(a===o){M=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,M=x;break e}M=a.return}}if(J=r,Qi(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(eh,t)}catch{}i=!0}return i}finally{ie=n,Jt.transition=e}}return!1}function Ov(t,e,n){e=js(n,e),e=w1(t,e,1),t=Ri(t,e,1),e=_t(),t!==null&&(sl(t,1,e),Pt(t,e))}function ke(t,e,n){if(t.tag===3)Ov(t,t,n);else for(;e!==null;){if(e.tag===3){Ov(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Di===null||!Di.has(i))){t=js(n,t),t=_1(e,t,1),e=Ri(e,t,1),t=_t(),e!==null&&(sl(e,1,t),Pt(e,t));break}}e=e.return}}function RI(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Qe&n)===n&&(Fe===4||Fe===3&&(Qe&130023424)===Qe&&500>Ne()-Ag?_r(t,0):Pg|=n),Pt(t,e)}function U1(t,e){e===0&&(t.mode&1?(e=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):e=1);var n=_t();t=Jn(t,e),t!==null&&(sl(t,e,n),Pt(t,n))}function DI(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),U1(t,n)}function MI(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(I(314))}i!==null&&i.delete(e),U1(t,n)}var z1;z1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)Tt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tt=!1,xI(t,e,n);Tt=!!(t.flags&131072)}else Tt=!1,pe&&e.flags&1048576&&Wx(e,su,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ac(t,e),t=e.pendingProps;var r=Os(e,ht.current);Ss(e,n),r=bg(null,e,i,t,r,n);var s=Eg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(i)?(s=!0,iu(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,wg(e),r.updater=ah,e.stateNode=r,r._reactInternals=e,Uf(e,i,t,n),e=Vf(null,e,i,!0,s,n)):(e.tag=0,pe&&s&&dg(e),vt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ac(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=LI(i),t=rn(i,t),r){case 0:e=Bf(null,e,i,t,n);break e;case 1:e=Ev(null,e,i,t,n);break e;case 11:e=Sv(null,e,i,t,n);break e;case 14:e=bv(null,e,i,rn(i.type,t),n);break e}throw Error(I(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rn(i,r),Bf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rn(i,r),Ev(t,e,i,r,n);case 3:e:{if(b1(e),t===null)throw Error(I(387));i=e.pendingProps,s=e.memoizedState,r=s.element,Xx(t,e),lu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=js(Error(I(423)),e),e=Cv(t,e,i,n,r);break e}else if(i!==r){r=js(Error(I(424)),e),e=Cv(t,e,i,n,r);break e}else for(Mt=Ai(e.stateNode.containerInfo.firstChild),jt=e,pe=!0,an=null,n=Yx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ls(),i===r){e=Zn(t,e,n);break e}vt(t,e,i,n)}e=e.child}return e;case 5:return Jx(e),t===null&&$f(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Rf(i,r)?o=null:s!==null&&Rf(i,s)&&(e.flags|=32),S1(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&$f(e),null;case 13:return E1(t,e,n);case 4:return _g(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=$s(e,null,i,n):vt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rn(i,r),Sv(t,e,i,r,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ae(ou,i._currentValue),i._currentValue=o,s!==null)if(hn(s.value,o)){if(s.children===r.children&&!It.current){e=Zn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Yn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Ff(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(I(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ff(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ss(e,n),r=en(r),i=i(r),e.flags|=1,vt(t,e,i,n),e.child;case 14:return i=e.type,r=rn(i,e.pendingProps),r=rn(i.type,r),bv(t,e,i,r,n);case 15:return x1(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rn(i,r),Ac(t,e),e.tag=1,Nt(i)?(t=!0,iu(e)):t=!1,Ss(e,n),v1(e,i,r),Uf(e,i,r,n),Vf(null,e,i,!0,t,n);case 19:return C1(t,e,n);case 22:return k1(t,e,n)}throw Error(I(156,e.tag))};function B1(t,e){return gx(t,e)}function OI(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,i){return new OI(t,e,n,i)}function Og(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LI(t){if(typeof t=="function")return Og(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eg)return 11;if(t===tg)return 14}return 2}function Oi(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mc(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Og(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case os:return xr(n.children,r,s,e);case Zp:o=8,r|=8;break;case uf:return t=Yt(12,n,e,r|2),t.elementType=uf,t.lanes=s,t;case hf:return t=Yt(13,n,e,r),t.elementType=hf,t.lanes=s,t;case df:return t=Yt(19,n,e,r),t.elementType=df,t.lanes=s,t;case J_:return uh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q_:o=10;break e;case X_:o=9;break e;case eg:o=11;break e;case tg:o=14;break e;case di:o=16,i=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function xr(t,e,n,i){return t=Yt(7,t,i,e),t.lanes=n,t}function uh(t,e,n,i){return t=Yt(22,t,i,e),t.elementType=J_,t.lanes=n,t.stateNode={isHidden:!1},t}function Sd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function bd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $I(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Lg(t,e,n,i,r,s,o,a,l){return t=new $I(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wg(s),t}function FI(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ss,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function V1(t){if(!t)return Bi;t=t._reactInternals;e:{if(Kr(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(Nt(n))return Vx(t,n,e)}return e}function H1(t,e,n,i,r,s,o,a,l){return t=Lg(n,i,!0,t,r,s,o,a,l),t.context=V1(null),n=t.current,i=_t(),r=Mi(n),s=Yn(i,r),s.callback=e??null,Ri(n,s,r),t.current.lanes=r,sl(t,r,i),Pt(t,i),t}function hh(t,e,n,i){var r=e.current,s=_t(),o=Mi(r);return n=V1(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ri(r,e,o),t!==null&&(un(t,r,o,s),Ic(t,r,o)),o}function mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $g(t,e){Lv(t,e),(t=t.alternate)&&Lv(t,e)}function jI(){return null}var W1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fg(t){this._internalRoot=t}dh.prototype.render=Fg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));hh(t,e,null,null)};dh.prototype.unmount=Fg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pr(function(){hh(null,t,null,null)}),e[Xn]=null}};function dh(t){this._internalRoot=t}dh.prototype.unstable_scheduleHydration=function(t){if(t){var e=kx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pi.length&&e!==0&&e<pi[n].priority;n++);pi.splice(n,0,t),n===0&&bx(t)}};function jg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $v(){}function UI(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=mu(o);s.call(c)}}var o=H1(e,i,t,0,null,!1,!1,"",$v);return t._reactRootContainer=o,t[Xn]=o.current,ka(t.nodeType===8?t.parentNode:t),Pr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=mu(l);a.call(c)}}var l=Lg(t,0,!1,null,null,!1,!1,"",$v);return t._reactRootContainer=l,t[Xn]=l.current,ka(t.nodeType===8?t.parentNode:t),Pr(function(){hh(e,l,n,i)}),l}function ph(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=mu(o);a.call(l)}}hh(e,o,t,r)}else o=UI(n,e,t,r,i);return mu(o)}_x=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Oo(e.pendingLanes);n!==0&&(rg(e,n|1),Pt(e,Ne()),!(J&6)&&(Us=Ne()+500,Qi()))}break;case 13:Pr(function(){var i=Jn(t,1);if(i!==null){var r=_t();un(i,t,1,r)}}),$g(t,1)}};sg=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=_t();un(e,t,134217728,n)}$g(t,134217728)}};xx=function(t){if(t.tag===13){var e=Mi(t),n=Jn(t,e);if(n!==null){var i=_t();un(n,t,e,i)}$g(t,e)}};kx=function(){return ie};Sx=function(t,e){var n=ie;try{return ie=t,e()}finally{ie=n}};kf=function(t,e,n){switch(e){case"input":if(gf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=rh(i);if(!r)throw Error(I(90));ex(i),gf(i,r)}}}break;case"textarea":nx(t,n);break;case"select":e=n.value,e!=null&&ws(t,!!n.multiple,e,!1)}};cx=Rg;ux=Pr;var zI={usingClientEntryPoint:!1,Events:[al,us,rh,ax,lx,Rg]},bo={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BI={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fx(t),t===null?null:t.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||jI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{eh=Yl.inject(BI),bn=Yl}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zI;Vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jg(e))throw Error(I(200));return FI(t,e,null,n)};Vt.createRoot=function(t,e){if(!jg(t))throw Error(I(299));var n=!1,i="",r=W1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Lg(t,1,!1,null,null,n,!1,i,r),t[Xn]=e.current,ka(t.nodeType===8?t.parentNode:t),new Fg(e)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=fx(e),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return Pr(t)};Vt.hydrate=function(t,e,n){if(!fh(e))throw Error(I(200));return ph(null,t,e,!0,n)};Vt.hydrateRoot=function(t,e,n){if(!jg(t))throw Error(I(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=W1;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=H1(e,null,t,1,n??null,r,!1,s,o),t[Xn]=e.current,ka(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new dh(e)};Vt.render=function(t,e,n){if(!fh(e))throw Error(I(200));return ph(null,t,e,!1,n)};Vt.unmountComponentAtNode=function(t){if(!fh(t))throw Error(I(40));return t._reactRootContainer?(Pr(function(){ph(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1};Vt.unstable_batchedUpdates=Rg;Vt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!fh(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return ph(t,e,n,!1,i)};Vt.version="18.3.1-next-f1338f8080-20240426";function K1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K1)}catch(t){console.error(t)}}K1(),K_.exports=Vt;var VI=K_.exports,Fv=VI;lf.createRoot=Fv.createRoot,lf.hydrateRoot=Fv.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Aa(){return Aa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Aa.apply(this,arguments)}var Si;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Si||(Si={}));const jv="popstate";function HI(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return tp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:yu(r)}return KI(e,n,null,t)}function Pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function q1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function WI(){return Math.random().toString(36).substr(2,8)}function Uv(t,e){return{usr:t.state,key:t.key,idx:e}}function tp(t,e,n,i){return n===void 0&&(n=null),Aa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?io(e):e,{state:n,key:e&&e.key||i||WI()})}function yu(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function io(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function KI(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Si.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Aa({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Si.Pop;let y=u(),p=y==null?null:y-c;c=y,l&&l({action:a,location:w.location,delta:p})}function d(y,p){a=Si.Push;let m=tp(w.location,y,p);n&&n(m,y),c=u()+1;let _=Uv(m,c),x=w.createHref(m);try{o.pushState(_,"",x)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;r.location.assign(x)}s&&l&&l({action:a,location:w.location,delta:1})}function f(y,p){a=Si.Replace;let m=tp(w.location,y,p);n&&n(m,y),c=u();let _=Uv(m,c),x=w.createHref(m);o.replaceState(_,"",x),s&&l&&l({action:a,location:w.location,delta:0})}function g(y){let p=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof y=="string"?y:yu(y);return m=m.replace(/ $/,"%20"),Pe(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let w={get action(){return a},get location(){return t(r,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(jv,h),l=y,()=>{r.removeEventListener(jv,h),l=null}},createHref(y){return e(r,y)},createURL:g,encodeLocation(y){let p=g(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:d,replace:f,go(y){return o.go(y)}};return w}var zv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zv||(zv={}));function qI(t,e,n){return n===void 0&&(n="/"),GI(t,e,n,!1)}function GI(t,e,n,i){let r=typeof e=="string"?io(e):e,s=Ug(r.pathname||"/",n);if(s==null)return null;let o=G1(t);YI(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=o2(s);a=r2(o[l],c,i)}return a}function G1(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Pe(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Li([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Pe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),G1(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:n2(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of Y1(s.path))r(s,o,l)}),e}function Y1(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=Y1(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function YI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:i2(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const QI=/^:[\w-]+$/,XI=3,JI=2,ZI=1,e2=10,t2=-2,Bv=t=>t==="*";function n2(t,e){let n=t.split("/"),i=n.length;return n.some(Bv)&&(i+=t2),e&&(i+=JI),n.filter(r=>!Bv(r)).reduce((r,s)=>r+(QI.test(s)?XI:s===""?ZI:e2),i)}function i2(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function r2(t,e,n){n===void 0&&(n=!1);let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=Vv({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),d=l.route;if(!h&&c&&n&&!i[i.length-1].route.index&&(h=Vv({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Li([s,h.pathname]),pathnameBase:u2(Li([s,h.pathnameBase])),route:d}),h.pathnameBase!=="/"&&(s=Li([s,h.pathnameBase]))}return o}function Vv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=s2(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:d,isOptional:f}=u;if(d==="*"){let w=a[h]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const g=a[h];return f&&!g?c[d]=void 0:c[d]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function s2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),q1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function o2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return q1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ug(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function a2(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?io(t):t;return{pathname:n?n.startsWith("/")?n:l2(n,e):e,search:h2(i),hash:d2(r)}}function l2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Ed(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function c2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zg(t,e){let n=c2(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function Bg(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=io(t):(r=Aa({},t),Pe(!r.pathname||!r.pathname.includes("?"),Ed("?","pathname","search",r)),Pe(!r.pathname||!r.pathname.includes("#"),Ed("#","pathname","hash",r)),Pe(!r.search||!r.search.includes("#"),Ed("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),h-=1;r.pathname=d.join("/")}a=h>=0?e[h]:"/"}let l=a2(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Li=t=>t.join("/").replace(/\/\/+/g,"/"),u2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),h2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,d2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function f2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Q1=["post","put","patch","delete"];new Set(Q1);const p2=["get",...Q1];new Set(p2);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ra.apply(this,arguments)}const Vg=S.createContext(null),g2=S.createContext(null),Xi=S.createContext(null),gh=S.createContext(null),Ji=S.createContext({outlet:null,matches:[],isDataRoute:!1}),X1=S.createContext(null);function m2(t,e){let{relative:n}=e===void 0?{}:e;ro()||Pe(!1);let{basename:i,navigator:r}=S.useContext(Xi),{hash:s,pathname:o,search:a}=Z1(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Li([i,o])),r.createHref({pathname:l,search:a,hash:s})}function ro(){return S.useContext(gh)!=null}function so(){return ro()||Pe(!1),S.useContext(gh).location}function J1(t){S.useContext(Xi).static||S.useLayoutEffect(t)}function oo(){let{isDataRoute:t}=S.useContext(Ji);return t?N2():y2()}function y2(){ro()||Pe(!1);let t=S.useContext(Vg),{basename:e,future:n,navigator:i}=S.useContext(Xi),{matches:r}=S.useContext(Ji),{pathname:s}=so(),o=JSON.stringify(zg(r,n.v7_relativeSplatPath)),a=S.useRef(!1);return J1(()=>{a.current=!0}),S.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=Bg(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Li([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,s,t])}function Z1(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=S.useContext(Xi),{matches:r}=S.useContext(Ji),{pathname:s}=so(),o=JSON.stringify(zg(r,i.v7_relativeSplatPath));return S.useMemo(()=>Bg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function v2(t,e){return w2(t,e)}function w2(t,e,n,i){ro()||Pe(!1);let{navigator:r}=S.useContext(Xi),{matches:s}=S.useContext(Ji),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=so(),u;if(e){var h;let y=typeof e=="string"?io(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||Pe(!1),u=y}else u=c;let d=u.pathname||"/",f=d;if(l!=="/"){let y=l.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=qI(t,{pathname:f}),w=b2(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:Li([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:Li([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,i);return e&&w?S.createElement(gh.Provider,{value:{location:Ra({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Si.Pop}},w):w}function _2(){let t=I2(),e=f2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:r},n):null,s)}const x2=S.createElement(_2,null);class k2 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Ji.Provider,{value:this.props.routeContext},S.createElement(X1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S2(t){let{routeContext:e,match:n,children:i}=t,r=S.useContext(Vg);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Ji.Provider,{value:e},i)}function b2(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Pe(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:d,errors:f}=n,g=h.route.loader&&d[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,d)=>{let f,g=!1,w=null,y=null;n&&(f=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||x2,l&&(c<0&&d===0?(P2("route-fallback",!1),g=!0,y=null):c===d&&(g=!0,y=h.route.hydrateFallbackElement||null)));let p=e.concat(o.slice(0,d+1)),m=()=>{let _;return f?_=w:g?_=y:h.route.Component?_=S.createElement(h.route.Component,null):h.route.element?_=h.route.element:_=u,S.createElement(S2,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:n!=null},children:_})};return n&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?S.createElement(k2,{location:n.location,revalidation:n.revalidation,component:w,error:f,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var ek=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ek||{}),vu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(vu||{});function E2(t){let e=S.useContext(Vg);return e||Pe(!1),e}function C2(t){let e=S.useContext(g2);return e||Pe(!1),e}function T2(t){let e=S.useContext(Ji);return e||Pe(!1),e}function tk(t){let e=T2(),n=e.matches[e.matches.length-1];return n.route.id||Pe(!1),n.route.id}function I2(){var t;let e=S.useContext(X1),n=C2(vu.UseRouteError),i=tk(vu.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function N2(){let{router:t}=E2(ek.UseNavigateStable),e=tk(vu.UseNavigateStable),n=S.useRef(!1);return J1(()=>{n.current=!0}),S.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ra({fromRouteId:e},s)))},[t,e])}const Hv={};function P2(t,e,n){!e&&!Hv[t]&&(Hv[t]=!0)}const Wv={};function A2(t,e){Wv[e]||(Wv[e]=!0,console.warn(e))}const es=(t,e,n)=>A2(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function R2(t,e){t!=null&&t.v7_startTransition||es("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&es("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||es("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||es("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||es("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||es("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function ci(t){let{to:e,replace:n,state:i,relative:r}=t;ro()||Pe(!1);let{future:s,static:o}=S.useContext(Xi),{matches:a}=S.useContext(Ji),{pathname:l}=so(),c=oo(),u=Bg(e,zg(a,s.v7_relativeSplatPath),l,r==="path"),h=JSON.stringify(u);return S.useEffect(()=>c(JSON.parse(h),{replace:n,state:i,relative:r}),[c,h,r,n,i]),null}function Ln(t){Pe(!1)}function D2(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Si.Pop,navigator:s,static:o=!1,future:a}=t;ro()&&Pe(!1);let l=e.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:s,static:o,future:Ra({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=io(i));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:g="default"}=i,w=S.useMemo(()=>{let y=Ug(u,l);return y==null?null:{location:{pathname:y,search:h,hash:d,state:f,key:g},navigationType:r}},[l,u,h,d,f,g,r]);return w==null?null:S.createElement(Xi.Provider,{value:c},S.createElement(gh.Provider,{children:n,value:w}))}function M2(t){let{children:e,location:n}=t;return v2(np(e),n)}new Promise(()=>{});function np(t,e){e===void 0&&(e=[]);let n=[];return S.Children.forEach(t,(i,r)=>{if(!S.isValidElement(i))return;let s=[...e,r];if(i.type===S.Fragment){n.push.apply(n,np(i.props.children,s));return}i.type!==Ln&&Pe(!1),!i.props.index||!i.props.children||Pe(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=np(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ip(){return ip=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ip.apply(this,arguments)}function O2(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function L2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $2(t,e){return t.button===0&&(!e||e==="_self")&&!L2(t)}const F2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],j2="6";try{window.__reactRouterVersion=j2}catch{}const U2="startTransition",Kv=RC[U2];function z2(t){let{basename:e,children:n,future:i,window:r}=t,s=S.useRef();s.current==null&&(s.current=HI({window:r,v5Compat:!0}));let o=s.current,[a,l]=S.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=S.useCallback(h=>{c&&Kv?Kv(()=>l(h)):l(h)},[l,c]);return S.useLayoutEffect(()=>o.listen(u),[o,u]),S.useEffect(()=>R2(i),[i]),S.createElement(D2,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const B2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zn=S.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,d=O2(e,F2),{basename:f}=S.useContext(Xi),g,w=!1;if(typeof c=="string"&&V2.test(c)&&(g=c,B2))try{let _=new URL(window.location.href),x=c.startsWith("//")?new URL(_.protocol+c):new URL(c),k=Ug(x.pathname,f);x.origin===_.origin&&k!=null?c=k+x.search+x.hash:w=!0}catch{}let y=m2(c,{relative:r}),p=H2(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:h});function m(_){i&&i(_),_.defaultPrevented||p(_)}return S.createElement("a",ip({},d,{href:g||y,onClick:w||s?i:m,ref:n,target:l}))});var qv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qv||(qv={}));var Gv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gv||(Gv={}));function H2(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=oo(),c=so(),u=Z1(t,{relative:o});return S.useCallback(h=>{if($2(h,n)){h.preventDefault();let d=i!==void 0?i:yu(c)===yu(u);l(t,{replace:d,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,i,r,n,t,s,o,a])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},W2=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ik={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),i.push(n[u],n[h],n[d],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):W2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||h==null)throw new K2;const d=s<<2|a>>4;if(i.push(d),c!==64){const f=a<<4&240|c>>2;if(i.push(f),h!==64){const g=c<<6&192|h;i.push(g)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class K2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q2=function(t){const e=nk(t);return ik.encodeByteArray(e,!0)},wu=function(t){return q2(t).replace(/\./g,"")},rk=function(t){try{return ik.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=()=>G2().__FIREBASE_DEFAULTS__,Q2=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},X2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rk(t[1]);return e&&JSON.parse(e)},mh=()=>{try{return Y2()||Q2()||X2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sk=t=>{var e,n;return(n=(e=mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ok=t=>{const e=sk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},ak=()=>{var t;return(t=mh())===null||t===void 0?void 0:t.config},lk=t=>{var e;return(e=mh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[wu(JSON.stringify(n)),wu(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function eN(){var t;const e=(t=mh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iN(){const t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rN(){try{return typeof indexedDB=="object"}catch{return!1}}function sN(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="FirebaseError";class Dn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=oN,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?aN(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Dn(r,a,i)}}function aN(t,e){return t.replace(lN,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const lN=/\{\$([^}]+)}/g;function cN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _u(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(Yv(s)&&Yv(o)){if(!_u(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Yv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Fo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function uN(t,e){const n=new hN(t,e);return n.subscribe.bind(n)}class hN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");dN(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Cd),r.error===void 0&&(r.error=Cd),r.complete===void 0&&(r.complete=Cd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t){return t&&t._delegate?t._delegate:t}class Vi{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new J2;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gN(e))try{this.getOrInitializeService({instanceIdentifier:cr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=cr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=cr){return this.instances.has(e)}getOptions(e=cr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=cr){return this.component?this.component.multipleInstances?e:cr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pN(t){return t===cr?void 0:t}function gN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const yN={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},vN=Z.INFO,wN={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},_N=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=wN[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hg{constructor(e){this.name=e,this._logLevel=vN,this._logHandler=_N,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const xN=(t,e)=>e.some(n=>t instanceof n);let Qv,Xv;function kN(){return Qv||(Qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SN(){return Xv||(Xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uk=new WeakMap,rp=new WeakMap,hk=new WeakMap,Td=new WeakMap,Wg=new WeakMap;function bN(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n($i(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uk.set(n,t)}).catch(()=>{}),Wg.set(e,t),e}function EN(t){if(rp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});rp.set(t,e)}let sp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CN(t){sp=t(sp)}function TN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Id(this),e,...n);return hk.set(i,e.sort?e.sort():[e]),$i(i)}:SN().includes(t)?function(...e){return t.apply(Id(this),e),$i(uk.get(this))}:function(...e){return $i(t.apply(Id(this),e))}}function IN(t){return typeof t=="function"?TN(t):(t instanceof IDBTransaction&&EN(t),xN(t,kN())?new Proxy(t,sp):t)}function $i(t){if(t instanceof IDBRequest)return bN(t);if(Td.has(t))return Td.get(t);const e=IN(t);return e!==t&&(Td.set(t,e),Wg.set(e,t)),e}const Id=t=>Wg.get(t);function NN(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=$i(o);return i&&o.addEventListener("upgradeneeded",l=>{i($i(o.result),l.oldVersion,l.newVersion,$i(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const PN=["get","getKey","getAll","getAllKeys","count"],AN=["put","add","delete","clear"],Nd=new Map;function Jv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=AN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||PN.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return Nd.set(e,s),s}CN(t=>({...t,get:(e,n,i)=>Jv(e,n)||t.get(e,n,i),has:(e,n)=>!!Jv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function DN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const op="@firebase/app",Zv="0.9.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new Hg("@firebase/app"),MN="@firebase/app-compat",ON="@firebase/analytics-compat",LN="@firebase/analytics",$N="@firebase/app-check-compat",FN="@firebase/app-check",jN="@firebase/auth",UN="@firebase/auth-compat",zN="@firebase/database",BN="@firebase/database-compat",VN="@firebase/functions",HN="@firebase/functions-compat",WN="@firebase/installations",KN="@firebase/installations-compat",qN="@firebase/messaging",GN="@firebase/messaging-compat",YN="@firebase/performance",QN="@firebase/performance-compat",XN="@firebase/remote-config",JN="@firebase/remote-config-compat",ZN="@firebase/storage",eP="@firebase/storage-compat",tP="@firebase/firestore",nP="@firebase/firestore-compat",iP="firebase",rP="9.23.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap="[DEFAULT]",sP={[op]:"fire-core",[MN]:"fire-core-compat",[LN]:"fire-analytics",[ON]:"fire-analytics-compat",[FN]:"fire-app-check",[$N]:"fire-app-check-compat",[jN]:"fire-auth",[UN]:"fire-auth-compat",[zN]:"fire-rtdb",[BN]:"fire-rtdb-compat",[VN]:"fire-fn",[HN]:"fire-fn-compat",[WN]:"fire-iid",[KN]:"fire-iid-compat",[qN]:"fire-fcm",[GN]:"fire-fcm-compat",[YN]:"fire-perf",[QN]:"fire-perf-compat",[XN]:"fire-rc",[JN]:"fire-rc-compat",[ZN]:"fire-gcs",[eP]:"fire-gcs-compat",[tP]:"fire-fst",[nP]:"fire-fst-compat","fire-js":"fire-js",[iP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xu=new Map,lp=new Map;function oP(t,e){try{t.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Rr(t){const e=t.name;if(lp.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;lp.set(e,t);for(const n of xu.values())oP(n,t);return!0}function yh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Fi=new cl("app","Firebase",aP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=rP;function dk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ap,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Fi.create("bad-app-name",{appName:String(r)});if(n||(n=ak()),!n)throw Fi.create("no-options");const s=xu.get(r);if(s){if(_u(n,s.options)&&_u(i,s.config))return s;throw Fi.create("duplicate-app",{appName:r})}const o=new mN(r);for(const l of lp.values())o.addComponent(l);const a=new lP(n,i,o);return xu.set(r,a),a}function Kg(t=ap){const e=xu.get(t);if(!e&&t===ap&&ak())return dk();if(!e)throw Fi.create("no-app",{appName:t});return e}function Cn(t,e,n){var i;let r=(i=sP[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(a.join(" "));return}Rr(new Vi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="firebase-heartbeat-database",uP=1,Da="firebase-heartbeat-store";let Pd=null;function fk(){return Pd||(Pd=NN(cP,uP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Da)}}}).catch(t=>{throw Fi.create("idb-open",{originalErrorMessage:t.message})})),Pd}async function hP(t){try{return await(await fk()).transaction(Da).objectStore(Da).get(pk(t))}catch(e){if(e instanceof Dn)Ar.warn(e.message);else{const n=Fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ar.warn(n.message)}}}async function e0(t,e){try{const i=(await fk()).transaction(Da,"readwrite");await i.objectStore(Da).put(e,pk(t)),await i.done}catch(n){if(n instanceof Dn)Ar.warn(n.message);else{const i=Fi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ar.warn(i.message)}}}function pk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=1024,fP=30*24*60*60*1e3;class pP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mP(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=t0();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=fP}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=t0(),{heartbeatsToSend:n,unsentEntries:i}=gP(this._heartbeatsCache.heartbeats),r=wu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function t0(){return new Date().toISOString().substring(0,10)}function gP(t,e=dP){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),n0(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),n0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class mP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rN()?sN().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await hP(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return e0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return e0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function n0(t){return wu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t){Rr(new Vi("platform-logger",e=>new RN(e),"PRIVATE")),Rr(new Vi("heartbeat",e=>new pP(e),"PRIVATE")),Cn(op,Zv,t),Cn(op,Zv,"esm2017"),Cn("fire-js","")}yP("");function qg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function gk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vP=gk,mk=new cl("auth","Firebase",gk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Hg("@firebase/auth");function wP(t,...e){ku.logLevel<=Z.WARN&&ku.warn(`Auth (${qr}): ${t}`,...e)}function Oc(t,...e){ku.logLevel<=Z.ERROR&&ku.error(`Auth (${qr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t,...e){throw Gg(t,...e)}function Tn(t,...e){return Gg(t,...e)}function _P(t,e,n){const i=Object.assign(Object.assign({},vP()),{[e]:n});return new cl("auth","Firebase",i).create(e,{appName:t.name})}function Gg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return mk.create(t,...e)}function z(t,e,...n){if(!t)throw Gg(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Oc(e),new Error(e)}function ei(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xP(){return i0()==="http:"||i0()==="https:"}function i0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xP()||tN()||"connection"in navigator)?navigator.onLine:!0}function SP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n){this.shortDelay=e,this.longDelay=n,ei(n>e,"Short delay should be less than long delay!"),this.isMobile=Z2()||nN()}get(){return kP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t,e){ei(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=new hl(3e4,6e4);function ao(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Gr(t,e,n,i,r={}){return vk(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=ul(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),yk.fetch()(wk(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function vk(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},bP),e);try{const r=new CP(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ql(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ql(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ql(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ql(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _P(t,u,c);dn(t,u)}}catch(r){if(r instanceof Dn)throw r;dn(t,"network-request-failed",{message:String(r)})}}async function dl(t,e,n,i,r={}){const s=await Gr(t,e,n,i,r);return"mfaPendingCredential"in s&&dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function wk(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?Yg(t.config,r):`${t.config.apiScheme}://${r}`}class CP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Tn(this.auth,"network-request-failed")),EP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ql(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Tn(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(t,e){return Gr(t,"POST","/v1/accounts:delete",e)}async function IP(t,e){return Gr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NP(t,e=!1){const n=Ae(t),i=await n.getIdToken(e),r=Qg(i);z(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:na(Ad(r.auth_time)),issuedAtTime:na(Ad(r.iat)),expirationTime:na(Ad(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ad(t){return Number(t)*1e3}function Qg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Oc("JWT malformed, contained fewer than 3 sections"),null;try{const r=rk(n);return r?JSON.parse(r):(Oc("Failed to decode base64 JWT payload"),null)}catch(r){return Oc("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function PP(t){const e=Qg(t);return z(e,"internal-error"),z(typeof e.exp<"u","internal-error"),z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Dn&&AP(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function AP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=na(this.lastLoginAt),this.creationTime=na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t){var e;const n=t.auth,i=await t.getIdToken(),r=await zs(t,IP(n,{idToken:i}));z(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?OP(s.providerUserInfo):[],a=MP(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _k(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function DP(t){const e=Ae(t);await Su(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MP(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function OP(t){return t.map(e=>{var{providerId:n}=e,i=qg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(t,e){const n=await vk(t,{},async()=>{const i=ul({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=wk(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yk.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){z(e.idToken,"internal-error"),z(typeof e.idToken<"u","internal-error"),z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PP(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return z(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await LP(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Ma;return i&&(z(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(z(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t,e){z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class kr{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=qg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _k(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await zs(this,this.stsTokenManager.getToken(this.auth,e));return z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NP(this,e)}reload(){return DP(this)}_assign(e){this!==e&&(z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new kr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Su(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await zs(this,TP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;const h=(i=n.displayName)!==null&&i!==void 0?i:void 0,d=(r=n.email)!==null&&r!==void 0?r:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,p=(c=n.createdAt)!==null&&c!==void 0?c:void 0,m=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:_,emailVerified:x,isAnonymous:k,providerData:b,stsTokenManager:C}=n;z(_&&C,e,"internal-error");const E=Ma.fromJSON(this.name,C);z(typeof _=="string",e,"internal-error"),ui(h,e.name),ui(d,e.name),z(typeof x=="boolean",e,"internal-error"),z(typeof k=="boolean",e,"internal-error"),ui(f,e.name),ui(g,e.name),ui(w,e.name),ui(y,e.name),ui(p,e.name),ui(m,e.name);const P=new kr({uid:_,auth:e,email:d,emailVerified:x,displayName:h,isAnonymous:k,photoURL:g,phoneNumber:f,tenantId:w,stsTokenManager:E,createdAt:p,lastLoginAt:m});return b&&Array.isArray(b)&&(P.providerData=b.map(A=>Object.assign({},A))),y&&(P._redirectEventId=y),P}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ma;r.updateFromServerResponse(n);const s=new kr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Su(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map;function Kn(t){ei(t instanceof Function,"Expected a class definition");let e=r0.get(t);return e?(ei(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,r0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xk.type="NONE";const s0=xk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t,e,n){return`firebase:${t}:${e}:${n}`}class Es{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Lc(this.userKey,r.apiKey,s),this.fullPersistenceKey=Lc("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?kr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Es(Kn(s0),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Kn(s0);const o=Lc(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=kr._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Es(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Es(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ck(e))return"Blackberry";if(Tk(e))return"Webos";if(Xg(e))return"Safari";if((e.includes("chrome/")||Sk(e))&&!e.includes("edge/"))return"Chrome";if(Ek(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function kk(t=dt()){return/firefox\//i.test(t)}function Xg(t=dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Sk(t=dt()){return/crios\//i.test(t)}function bk(t=dt()){return/iemobile/i.test(t)}function Ek(t=dt()){return/android/i.test(t)}function Ck(t=dt()){return/blackberry/i.test(t)}function Tk(t=dt()){return/webos/i.test(t)}function vh(t=dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $P(t=dt()){var e;return vh(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FP(){return iN()&&document.documentMode===10}function Ik(t=dt()){return vh(t)||Ek(t)||Tk(t)||Ck(t)||/windows phone/i.test(t)||bk(t)}function jP(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t,e=[]){let n;switch(t){case"Browser":n=o0(dt());break;case"Worker":n=`${o0(dt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qr}/${i}`}async function Pk(t,e){return Gr(t,"GET","/v2/recaptchaConfig",ao(t,e))}function a0(t){return t!==void 0&&t.enterprise!==void 0}class Ak{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function Rk(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Tn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",UP().appendChild(i)})}function zP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const BP="https://www.google.com/recaptcha/enterprise.js?render=",VP="recaptcha-enterprise",HP="NO_RECAPTCHA";class Dk{constructor(e){this.type=VP,this.auth=lo(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Pk(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Ak(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;a0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(HP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&a0(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}Rk(BP+a).then(()=>{r(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function bu(t,e,n,i=!1){const r=new Dk(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new l0(this),this.idTokenSubscription=new l0(this),this.beforeStateQueue=new WP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Es.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Su(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ae(e):null;return n&&z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}async initializeRecaptchaConfig(){const e=await Pk(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new Ak(e);this.tenantId==null?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Dk(this).verify()}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kn(e)||this._popupRedirectResolver;z(n,this,"argument-error"),this.redirectPersistenceManager=await Es.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return z(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function lo(t){return Ae(t)}class l0{constructor(e){this.auth=e,this.observer=null,this.addObserver=uN(n=>this.observer=n)}get next(){return z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t,e){const n=yh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(_u(s,e??{}))return r;dn(r,"already-initialized")}return n.initialize({options:e})}function GP(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function YP(t,e,n){const i=lo(t);z(i._canInitEmulator,i,"emulator-config-failed"),z(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=Mk(e),{host:o,port:a}=QP(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||XP()}function Mk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function QP(t){const e=Mk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:c0(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:c0(o)}}}function c0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}async function JP(t,e){return Gr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t,e){return dl(t,"POST","/v1/accounts:signInWithPassword",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(t,e){return dl(t,"POST","/v1/accounts:signInWithEmailLink",ao(t,e))}async function eA(t,e){return dl(t,"POST","/v1/accounts:signInWithEmailLink",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Jg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Oa(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Oa(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const r=await bu(e,i,"signInWithPassword");return Rd(e,r)}else return Rd(e,i).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await bu(e,i,"signInWithPassword");return Rd(e,s)}else return Promise.reject(r)});case"emailLink":return ZP(e,{email:this._email,oobCode:this._password});default:dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return JP(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return eA(e,{idToken:n,email:this._email,oobCode:this._password});default:dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cs(t,e){return dl(t,"POST","/v1/accounts:signInWithIdp",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="http://localhost";class Dr extends Jg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Dr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=qg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Dr(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Cs(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Cs(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cs(e,n)}buildRequest(){const e={requestUri:tA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ul(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iA(t){const e=$o(Fo(t)).link,n=e?$o(Fo(e)).deep_link_id:null,i=$o(Fo(t)).deep_link_id;return(i?$o(Fo(i)).link:null)||i||n||e||t}class Zg{constructor(e){var n,i,r,s,o,a;const l=$o(Fo(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,h=nA((r=l.mode)!==null&&r!==void 0?r:null);z(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=iA(e);try{return new Zg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.providerId=co.PROVIDER_ID}static credential(e,n){return Oa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Zg.parseLink(n);return z(i,"argument-error"),Oa._fromEmailAndCode(e,i.code,i.tenantId)}}co.PROVIDER_ID="password";co.EMAIL_PASSWORD_SIGN_IN_METHOD="password";co.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Ok{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends fl{constructor(){super("facebook.com")}static credential(e){return Dr._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Dr._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return yi.credential(n,i)}catch{return null}}}yi.GOOGLE_SIGN_IN_METHOD="google.com";yi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends fl{constructor(){super("github.com")}static credential(e){return Dr._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch{return null}}}vi.GITHUB_SIGN_IN_METHOD="github.com";vi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends fl{constructor(){super("twitter.com")}static credential(e,n){return Dr._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return wi.credential(n,i)}catch{return null}}}wi.TWITTER_SIGN_IN_METHOD="twitter.com";wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(t,e){return dl(t,"POST","/v1/accounts:signUp",ao(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await kr._fromIdTokenResponse(e,i,r),o=u0(i);return new Mr({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=u0(i);return new Mr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function u0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends Dn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Eu.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Eu(e,n,i,r)}}function Lk(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Eu._fromErrorAndOperation(t,s,e,i):s})}async function rA(t,e,n=!1){const i=await zs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Mr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await zs(t,Lk(i,r,e,t),n);z(s.idToken,i,"internal-error");const o=Qg(s.idToken);z(o,i,"internal-error");const{sub:a}=o;return z(t.uid===a,i,"user-mismatch"),Mr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&dn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(t,e,n=!1){const i="signIn",r=await Lk(t,i,e),s=await Mr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function oA(t,e){return $k(lo(t),e)}async function aA(t,e,n){var i;const r=lo(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.emailPasswordEnabled){const c=await bu(r,s,"signUpPassword");o=Dd(r,c)}else o=Dd(r,s).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await bu(r,s,"signUpPassword");return Dd(r,u)}else return Promise.reject(c)});const a=await o.catch(c=>Promise.reject(c)),l=await Mr._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function lA(t,e,n){return oA(Ae(t),co.credential(e,n))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cA(t,e){return Gr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function em(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=Ae(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await zs(i,cA(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function uA(t,e,n,i){return Ae(t).onIdTokenChanged(e,n,i)}function hA(t,e,n){return Ae(t).beforeAuthStateChanged(e,n)}function dA(t,e,n,i){return Ae(t).onAuthStateChanged(e,n,i)}function fA(t){return Ae(t).signOut()}const Cu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cu,"1"),this.storage.removeItem(Cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(){const t=dt();return Xg(t)||vh(t)}const gA=1e3,mA=10;class jk extends Fk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pA()&&jP(),this.fallbackToPolling=Ik(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);FP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,mA):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},gA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jk.type="LOCAL";const yA=jk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk extends Fk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Uk.type="SESSION";const zk=Uk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new wh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await vA(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=tm("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){const d=h;if(d.data.eventId===c)switch(d.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function _A(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function xA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SA(){return Bk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="firebaseLocalStorageDb",bA=1,Tu="firebaseLocalStorage",Hk="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _h(t,e){return t.transaction([Tu],e?"readwrite":"readonly").objectStore(Tu)}function EA(){const t=indexedDB.deleteDatabase(Vk);return new pl(t).toPromise()}function up(){const t=indexedDB.open(Vk,bA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Tu,{keyPath:Hk})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Tu)?e(i):(i.close(),await EA(),e(await up()))})})}async function h0(t,e,n){const i=_h(t,!0).put({[Hk]:e,value:n});return new pl(i).toPromise()}async function CA(t,e){const n=_h(t,!1).get(e),i=await new pl(n).toPromise();return i===void 0?null:i.value}function d0(t,e){const n=_h(t,!0).delete(e);return new pl(n).toPromise()}const TA=800,IA=3;class Wk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await up(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>IA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(SA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xA(),!this.activeServiceWorker)return;this.sender=new wA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await up();return await h0(e,Cu,"1"),await d0(e,Cu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>h0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>CA(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>d0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=_h(r,!1).getAll();return new pl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wk.type="LOCAL";const NA=Wk;new hl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e){return e?Kn(e):(z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends Jg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AA(t){return $k(t.auth,new nm(t),t.bypassAuthState)}function RA(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),sA(n,new nm(t),t.bypassAuthState)}async function DA(t){const{auth:e,user:n}=t;return z(n,e,"internal-error"),rA(n,new nm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AA;case"linkViaPopup":case"linkViaRedirect":return DA;case"reauthViaPopup":case"reauthViaRedirect":return RA;default:dn(this.auth,"internal-error")}}resolve(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new hl(2e3,1e4);class ys extends Kk{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ys.currentPopupAction&&ys.currentPopupAction.cancel(),ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return z(e,this.auth,"internal-error"),e}async onExecution(){ei(this.filter.length===1,"Popup operations only handle one event");const e=tm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MA.get())};e()}}ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="pendingRedirect",$c=new Map;class LA extends Kk{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=$c.get(this.auth._key());if(!e){try{const i=await $A(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}$c.set(this.auth._key(),e)}return this.bypassAuthState||$c.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $A(t,e){const n=UA(e),i=jA(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function FA(t,e){$c.set(t._key(),e)}function jA(t){return Kn(t._redirectPersistence)}function UA(t){return Lc(OA,t.config.apiKey,t.name)}async function zA(t,e,n=!1){const i=lo(t),r=PA(i,e),o=await new LA(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=10*60*1e3;class VA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!qk(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BA&&this.cachedEventUids.clear(),this.cachedEventUids.has(f0(e))}saveEventToCache(e){this.cachedEventUids.add(f0(e)),this.lastProcessedEventTime=Date.now()}}function f0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function qk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t,e={}){return Gr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qA=/^https?/;async function GA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WA(t);for(const n of e)try{if(YA(n))return}catch{}dn(t,"unauthorized-domain")}function YA(t){const e=cp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!qA.test(n))return!1;if(KA.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=new hl(3e4,6e4);function p0(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XA(t){return new Promise((e,n)=>{var i,r,s;function o(){p0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p0(),n(Tn(t,"network-request-failed"))},timeout:QA.get()})}if(!((r=(i=In().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=In().gapi)===null||s===void 0)&&s.load)o();else{const a=zP("iframefcb");return In()[a]=()=>{gapi.load?o():n(Tn(t,"network-request-failed"))},Rk(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Fc=null,e})}let Fc=null;function JA(t){return Fc=Fc||XA(t),Fc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=new hl(5e3,15e3),eR="__/auth/iframe",tR="emulator/auth/iframe",nR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rR(t){const e=t.config;z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yg(e,tR):`https://${t.config.authDomain}/${eR}`,i={apiKey:e.apiKey,appName:t.name,v:qr},r=iR.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ul(i).slice(1)}`}async function sR(t){const e=await JA(t),n=In().gapi;return z(n,t,"internal-error"),e.open({where:document.body,url:rR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nR,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Tn(t,"network-request-failed"),a=In().setTimeout(()=>{s(o)},ZA.get());function l(){In().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aR=500,lR=600,cR="_blank",uR="http://localhost";class g0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hR(t,e,n,i=aR,r=lR){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},oR),{width:i.toString(),height:r.toString(),top:s,left:o}),c=dt().toLowerCase();n&&(a=Sk(c)?cR:n),kk(c)&&(e=e||uR,l.scrollbars="yes");const u=Object.entries(l).reduce((d,[f,g])=>`${d}${f}=${g},`,"");if($P(c)&&a!=="_self")return dR(e||"",a),new g0(null);const h=window.open(e||"",a,u);z(h,t,"popup-blocked");try{h.focus()}catch{}return new g0(h)}function dR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR="__/auth/handler",pR="emulator/auth/handler",gR=encodeURIComponent("fac");async function m0(t,e,n,i,r,s){z(t.config.authDomain,t,"auth-domain-config-required"),z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:qr,eventId:r};if(e instanceof Ok){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof fl){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${gR}=${encodeURIComponent(l)}`:"";return`${mR(t)}?${ul(a).slice(1)}${c}`}function mR({config:t}){return t.emulator?Yg(t,pR):`https://${t.authDomain}/${fR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="webStorageSupport";class yR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zk,this._completeRedirectFn=zA,this._overrideRedirectResult=FA}async _openPopup(e,n,i,r){var s;ei((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await m0(e,n,i,cp(),r);return hR(e,o,tm())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await m0(e,n,i,cp(),r);return _A(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ei(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await sR(e),i=new VA(e);return n.register("authEvent",r=>(z(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Md,{type:Md},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Md];o!==void 0&&n(!!o),dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ik()||Xg()||vh()}}const vR=yR;var y0="@firebase/auth",v0="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function xR(t){Rr(new Vi("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;z(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nk(t)},c=new KP(i,r,s,l);return GP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Rr(new Vi("auth-internal",e=>{const n=lo(e.getProvider("auth").getImmediate());return(i=>new wR(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(y0,v0,_R(t)),Cn(y0,v0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=5*60,SR=lk("authIdTokenMaxAge")||kR;let w0=null;const bR=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>SR)return;const r=n==null?void 0:n.token;w0!==r&&(w0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function ER(t=Kg()){const e=yh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=qP(t,{popupRedirectResolver:vR,persistence:[NA,yA,zk]}),i=lk("authTokenSyncURL");if(i){const s=bR(i);hA(n,s,()=>s(n.currentUser)),uA(n,o=>s(o))}const r=sk("auth");return r&&YP(n,`http://${r}`),n}xR("Browser");var CR="firebase",TR="9.23.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn(CR,TR,"app");var IR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},R,im=im||{},V=IR||self;function xh(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function gl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function NR(t){return Object.prototype.hasOwnProperty.call(t,Od)&&t[Od]||(t[Od]=++PR)}var Od="closure_uid_"+(1e9*Math.random()>>>0),PR=0;function AR(t,e,n){return t.call.apply(t.bind,arguments)}function RR(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function lt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?lt=AR:lt=RR,lt.apply(null,arguments)}function Xl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function Ke(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Zi(){this.s=this.s,this.o=this.o}var DR=0;Zi.prototype.s=!1;Zi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),DR!=0)&&NR(this)};Zi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Gk=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function rm(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function _0(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(xh(i)){const r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function ct(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}ct.prototype.h=function(){this.defaultPrevented=!0};var MR=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{V.addEventListener("test",()=>{},e),V.removeEventListener("test",()=>{},e)}catch{}return t}();function La(t){return/^[\s\xa0]*$/.test(t)}function kh(){var t=V.navigator;return t&&(t=t.userAgent)?t:""}function _n(t){return kh().indexOf(t)!=-1}function sm(t){return sm[" "](t),t}sm[" "]=function(){};function OR(t,e){var n=TD;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var LR=_n("Opera"),Bs=_n("Trident")||_n("MSIE"),Yk=_n("Edge"),hp=Yk||Bs,Qk=_n("Gecko")&&!(kh().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge"))&&!(_n("Trident")||_n("MSIE"))&&!_n("Edge"),$R=kh().toLowerCase().indexOf("webkit")!=-1&&!_n("Edge");function Xk(){var t=V.document;return t?t.documentMode:void 0}var dp;e:{var Ld="",$d=function(){var t=kh();if(Qk)return/rv:([^\);]+)(\)|;)/.exec(t);if(Yk)return/Edge\/([\d\.]+)/.exec(t);if(Bs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if($R)return/WebKit\/(\S+)/.exec(t);if(LR)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if($d&&(Ld=$d?$d[1]:""),Bs){var Fd=Xk();if(Fd!=null&&Fd>parseFloat(Ld)){dp=String(Fd);break e}}dp=Ld}var fp;if(V.document&&Bs){var x0=Xk();fp=x0||parseInt(dp,10)||void 0}else fp=void 0;var FR=fp;function $a(t,e){if(ct.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Qk){e:{try{sm(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:jR[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&$a.$.h.call(this)}}Ke($a,ct);var jR={2:"touch",3:"pen",4:"mouse"};$a.prototype.h=function(){$a.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ml="closure_listenable_"+(1e6*Math.random()|0),UR=0;function zR(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++UR,this.fa=this.ia=!1}function Sh(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function om(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function BR(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Jk(t){const e={};for(const n in t)e[n]=t[n];return e}const k0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zk(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<k0.length;s++)n=k0[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function bh(t){this.src=t,this.g={},this.h=0}bh.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=gp(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new zR(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function pp(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=Gk(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Sh(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function gp(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var am="closure_lm_"+(1e6*Math.random()|0),jd={};function eS(t,e,n,i,r){if(i&&i.once)return nS(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)eS(t,e[s],n,i,r);return null}return n=um(n),t&&t[ml]?t.O(e,n,gl(i)?!!i.capture:!!i,r):tS(t,e,n,!1,i,r)}function tS(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=gl(r)?!!r.capture:!!r,a=cm(t);if(a||(t[am]=a=new bh(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=VR(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)MR||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(rS(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function VR(){function t(n){return e.call(t.src,t.listener,n)}const e=HR;return t}function nS(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)nS(t,e[s],n,i,r);return null}return n=um(n),t&&t[ml]?t.P(e,n,gl(i)?!!i.capture:!!i,r):tS(t,e,n,!0,i,r)}function iS(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)iS(t,e[s],n,i,r);else i=gl(i)?!!i.capture:!!i,n=um(n),t&&t[ml]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=gp(s,n,i,r),-1<n&&(Sh(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=cm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=gp(e,n,i,r)),(n=-1<t?e[t]:null)&&lm(n))}function lm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ml])pp(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(rS(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=cm(e))?(pp(n,t),n.h==0&&(n.src=null,e[am]=null)):Sh(t)}}}function rS(t){return t in jd?jd[t]:jd[t]="on"+t}function HR(t,e){if(t.fa)t=!0;else{e=new $a(e,this);var n=t.listener,i=t.la||t.src;t.ia&&lm(t),t=n.call(i,e)}return t}function cm(t){return t=t[am],t instanceof bh?t:null}var Ud="__closure_events_fn_"+(1e9*Math.random()>>>0);function um(t){return typeof t=="function"?t:(t[Ud]||(t[Ud]=function(e){return t.handleEvent(e)}),t[Ud])}function We(){Zi.call(this),this.i=new bh(this),this.S=this,this.J=null}Ke(We,Zi);We.prototype[ml]=!0;We.prototype.removeEventListener=function(t,e,n,i){iS(this,t,e,n,i)};function Xe(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new ct(e,t);else if(e instanceof ct)e.target=e.target||t;else{var r=e;e=new ct(i,t),Zk(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=Jl(o,i,!0,e)&&r}if(o=e.g=t,r=Jl(o,i,!0,e)&&r,r=Jl(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=Jl(o,i,!1,e)&&r}We.prototype.N=function(){if(We.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Sh(n[i]);delete t.g[e],t.h--}}this.J=null};We.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};We.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function Jl(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&pp(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var hm=V.JSON.stringify;class WR{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function KR(){var t=dm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class qR{constructor(){this.h=this.g=null}add(e,n){const i=sS.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var sS=new WR(()=>new GR,t=>t.reset());class GR{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function YR(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function QR(t){V.setTimeout(()=>{throw t},0)}let Fa,ja=!1,dm=new qR,oS=()=>{const t=V.Promise.resolve(void 0);Fa=()=>{t.then(XR)}};var XR=()=>{for(var t;t=KR();){try{t.h.call(t.g)}catch(n){QR(n)}var e=sS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ja=!1};function Eh(t,e){We.call(this),this.h=t||1,this.g=e||V,this.j=lt(this.qb,this),this.l=Date.now()}Ke(Eh,We);R=Eh.prototype;R.ga=!1;R.T=null;R.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xe(this,"tick"),this.ga&&(fm(this),this.start()))}};R.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function fm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}R.N=function(){Eh.$.N.call(this),fm(this),delete this.g};function pm(t,e,n){if(typeof t=="function")n&&(t=lt(t,n));else if(t&&typeof t.handleEvent=="function")t=lt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:V.setTimeout(t,e||0)}function aS(t){t.g=pm(()=>{t.g=null,t.i&&(t.i=!1,aS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class JR extends Zi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:aS(this)}N(){super.N(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ua(t){Zi.call(this),this.h=t,this.g={}}Ke(Ua,Zi);var S0=[];function lS(t,e,n,i){Array.isArray(n)||(n&&(S0[0]=n.toString()),n=S0);for(var r=0;r<n.length;r++){var s=eS(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function cS(t){om(t.g,function(e,n){this.g.hasOwnProperty(n)&&lm(e)},t),t.g={}}Ua.prototype.N=function(){Ua.$.N.call(this),cS(this)};Ua.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ch(){this.g=!0}Ch.prototype.Ea=function(){this.g=!1};function ZR(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function eD(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function vs(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+nD(t,n)+(i?" "+i:"")})}function tD(t,e){t.info(function(){return"TIMEOUT: "+e})}Ch.prototype.info=function(){};function nD(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return hm(n)}catch{return e}}var Yr={},b0=null;function Th(){return b0=b0||new We}Yr.Ta="serverreachability";function uS(t){ct.call(this,Yr.Ta,t)}Ke(uS,ct);function za(t){const e=Th();Xe(e,new uS(e))}Yr.STAT_EVENT="statevent";function hS(t,e){ct.call(this,Yr.STAT_EVENT,t),this.stat=e}Ke(hS,ct);function wt(t){const e=Th();Xe(e,new hS(e,t))}Yr.Ua="timingevent";function dS(t,e){ct.call(this,Yr.Ua,t),this.size=e}Ke(dS,ct);function yl(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){t()},e)}var Ih={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function gm(){}gm.prototype.h=null;function E0(t){return t.h||(t.h=t.i())}function pS(){}var vl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mm(){ct.call(this,"d")}Ke(mm,ct);function ym(){ct.call(this,"c")}Ke(ym,ct);var mp;function Nh(){}Ke(Nh,gm);Nh.prototype.g=function(){return new XMLHttpRequest};Nh.prototype.i=function(){return{}};mp=new Nh;function wl(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Ua(this),this.P=iD,t=hp?125:void 0,this.V=new Eh(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gS}function gS(){this.i=null,this.g="",this.h=!1}var iD=45e3,yp={},Iu={};R=wl.prototype;R.setTimeout=function(t){this.P=t};function vp(t,e,n){t.L=1,t.v=Ah(ti(e)),t.s=n,t.S=!0,mS(t,null)}function mS(t,e){t.G=Date.now(),_l(t),t.A=ti(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),bS(n.i,"t",i),t.C=0,n=t.l.J,t.h=new gS,t.g=WS(t.l,n?e:null,!t.s),0<t.O&&(t.M=new JR(lt(t.Pa,t,t.g),t.O)),lS(t.U,t.g,"readystatechange",t.nb),e=t.I?Jk(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),za(),ZR(t.j,t.u,t.A,t.m,t.W,t.s)}R.nb=function(t){t=t.target;const e=this.M;e&&xn(t)==3?e.l():this.Pa(t)};R.Pa=function(t){try{if(t==this.g)e:{const u=xn(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||hp||this.g&&(this.h.h||this.g.ja()||N0(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?za(3):za(2)),Ph(this);var n=this.g.da();this.ca=n;t:if(yS(this)){var i=N0(this.g);t="";var r=i.length,s=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gr(this),ia(this);var o="";break t}this.h.i=new V.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,eD(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!La(a)){var c=a;break t}}c=null}if(n=c)vs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wp(this,n);else{this.i=!1,this.o=3,wt(12),gr(this),ia(this);break e}}this.S?(vS(this,u,o),hp&&this.i&&u==3&&(lS(this.U,this.V,"tick",this.mb),this.V.start())):(vs(this.j,this.m,o,null),wp(this,o)),u==4&&gr(this),this.i&&!this.J&&(u==4?zS(this.l,this):(this.i=!1,_l(this)))}else bD(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,wt(12)):(this.o=0,wt(13)),gr(this),ia(this)}}}catch{}finally{}};function yS(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function vS(t,e,n){let i=!0,r;for(;!t.J&&t.C<n.length;)if(r=rD(t,n),r==Iu){e==4&&(t.o=4,wt(14),i=!1),vs(t.j,t.m,null,"[Incomplete Response]");break}else if(r==yp){t.o=4,wt(15),vs(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else vs(t.j,t.m,r,null),wp(t,r);yS(t)&&r!=Iu&&r!=yp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,wt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Sm(e),e.M=!0,wt(11))):(vs(t.j,t.m,n,"[Invalid Chunked Response]"),gr(t),ia(t))}R.mb=function(){if(this.g){var t=xn(this.g),e=this.g.ja();this.C<e.length&&(Ph(this),vS(this,t,e),this.i&&t!=4&&_l(this))}};function rD(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?Iu:(n=Number(e.substring(n,i)),isNaN(n)?yp:(i+=1,i+n>e.length?Iu:(e=e.slice(i,i+n),t.C=i+n,e)))}R.cancel=function(){this.J=!0,gr(this)};function _l(t){t.Y=Date.now()+t.P,wS(t,t.P)}function wS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=yl(lt(t.lb,t),e)}function Ph(t){t.B&&(V.clearTimeout(t.B),t.B=null)}R.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(tD(this.j,this.A),this.L!=2&&(za(),wt(17)),gr(this),this.o=2,ia(this)):wS(this,this.Y-t)};function ia(t){t.l.H==0||t.J||zS(t.l,t)}function gr(t){Ph(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,fm(t.V),cS(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function wp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||_p(n.i,t))){if(!t.K&&_p(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Au(n),Mh(n);else break e;km(n),wt(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=yl(lt(n.ib,n),6e3));if(1>=TS(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else mr(n,11)}else if((t.K||n.g==t)&&Au(n),!La(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(i=1.5*d,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const f=t.g;if(f){const g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=i.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(vm(s,s.h),s.h=null))}if(i.F){const w=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(i.Da=w,ue(i.I,i.F,w))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=HS(i,i.J?i.pa:null,i.Y),o.K){IS(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.B&&(Ph(a),_l(a)),i.g=o}else jS(i);0<n.j.length&&Oh(n)}else c[0]!="stop"&&c[0]!="close"||mr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?mr(n,7):xm(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}za(4)}catch{}}function sD(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(xh(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function oD(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(xh(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function _S(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(xh(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=oD(t),i=sD(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var xS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aD(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Sr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Sr){this.h=t.h,Nu(this,t.j),this.s=t.s,this.g=t.g,Pu(this,t.m),this.l=t.l;var e=t.i,n=new Ba;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),C0(this,n),this.o=t.o}else t&&(e=String(t).match(xS))?(this.h=!1,Nu(this,e[1]||"",!0),this.s=jo(e[2]||""),this.g=jo(e[3]||"",!0),Pu(this,e[4]),this.l=jo(e[5]||"",!0),C0(this,e[6]||"",!0),this.o=jo(e[7]||"")):(this.h=!1,this.i=new Ba(null,this.h))}Sr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Uo(e,T0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Uo(e,T0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Uo(n,n.charAt(0)=="/"?uD:cD,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Uo(n,dD)),t.join("")};function ti(t){return new Sr(t)}function Nu(t,e,n){t.j=n?jo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Pu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function C0(t,e,n){e instanceof Ba?(t.i=e,fD(t.i,t.h)):(n||(e=Uo(e,hD)),t.i=new Ba(e,t.h))}function ue(t,e,n){t.i.set(e,n)}function Ah(t){return ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function jo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Uo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,lD),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function lD(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var T0=/[#\/\?@]/g,cD=/[#\?:]/g,uD=/[#\?]/g,hD=/[#\?@]/g,dD=/#/g;function Ba(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function er(t){t.g||(t.g=new Map,t.h=0,t.i&&aD(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}R=Ba.prototype;R.add=function(t,e){er(this),this.i=null,t=uo(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function kS(t,e){er(t),e=uo(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function SS(t,e){return er(t),e=uo(t,e),t.g.has(e)}R.forEach=function(t,e){er(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};R.ta=function(){er(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};R.Z=function(t){er(this);let e=[];if(typeof t=="string")SS(this,t)&&(e=e.concat(this.g.get(uo(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};R.set=function(t,e){return er(this),this.i=null,t=uo(this,t),SS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};R.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function bS(t,e,n){kS(t,e),0<n.length&&(t.i=null,t.g.set(uo(t,e),rm(n)),t.h+=n.length)}R.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function uo(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function fD(t,e){e&&!t.j&&(er(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(kS(this,i),bS(this,r,n))},t)),t.j=e}var pD=class{constructor(t,e){this.g=t,this.map=e}};function ES(t){this.l=t||gD,V.PerformanceNavigationTiming?(t=V.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(V.g&&V.g.Ka&&V.g.Ka()&&V.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var gD=10;function CS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function TS(t){return t.h?1:t.g?t.g.size:0}function _p(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function vm(t,e){t.g?t.g.add(e):t.h=e}function IS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}ES.prototype.cancel=function(){if(this.i=NS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function NS(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return rm(t.i)}var mD=class{stringify(t){return V.JSON.stringify(t,void 0)}parse(t){return V.JSON.parse(t,void 0)}};function yD(){this.g=new mD}function vD(t,e,n){const i=n||"";try{_S(t,function(r,s){let o=r;gl(r)&&(o=hm(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function wD(t,e){const n=new Ch;if(V.Image){const i=new Image;i.onload=Xl(Zl,n,i,"TestLoadImage: loaded",!0,e),i.onerror=Xl(Zl,n,i,"TestLoadImage: error",!1,e),i.onabort=Xl(Zl,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=Xl(Zl,n,i,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Zl(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function xl(t){this.l=t.fc||null,this.j=t.ob||!1}Ke(xl,gm);xl.prototype.g=function(){return new Rh(this.l,this.j)};xl.prototype.i=function(t){return function(){return t}}({});function Rh(t,e){We.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=wm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ke(Rh,We);var wm=0;R=Rh.prototype;R.open=function(t,e){if(this.readyState!=wm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Va(this)};R.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||V).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};R.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kl(this)),this.readyState=wm};R.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;PS(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function PS(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}R.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?kl(this):Va(this),this.readyState==3&&PS(this)}};R.Za=function(t){this.g&&(this.response=this.responseText=t,kl(this))};R.Ya=function(t){this.g&&(this.response=t,kl(this))};R.ka=function(){this.g&&kl(this)};function kl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Va(t)}R.setRequestHeader=function(t,e){this.v.append(t,e)};R.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};R.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Va(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Rh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var _D=V.JSON.parse;function Ee(t){We.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=AS,this.L=this.M=!1}Ke(Ee,We);var AS="",xD=/^https?$/i,kD=["POST","PUT"];R=Ee.prototype;R.Oa=function(t){this.M=t};R.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mp.g(),this.C=this.u?E0(this.u):E0(mp),this.g.onreadystatechange=lt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){I0(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=V.FormData&&t instanceof V.FormData,!(0<=Gk(kD,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{MS(this),0<this.B&&((this.L=SD(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.ua,this)):this.A=pm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){I0(this,s)}};function SD(t){return Bs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}R.ua=function(){typeof im<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xe(this,"timeout"),this.abort(8))};function I0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,RS(t),Dh(t)}function RS(t){t.F||(t.F=!0,Xe(t,"complete"),Xe(t,"error"))}R.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Xe(this,"complete"),Xe(this,"abort"),Dh(this))};R.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dh(this,!0)),Ee.$.N.call(this)};R.La=function(){this.s||(this.G||this.v||this.l?DS(this):this.kb())};R.kb=function(){DS(this)};function DS(t){if(t.h&&typeof im<"u"&&(!t.C[1]||xn(t)!=4||t.da()!=2)){if(t.v&&xn(t)==4)pm(t.La,0,t);else if(Xe(t,"readystatechange"),xn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(xS)[1]||null;!r&&V.self&&V.self.location&&(r=V.self.location.protocol.slice(0,-1)),i=!xD.test(r?r.toLowerCase():"")}n=i}if(n)Xe(t,"complete"),Xe(t,"success");else{t.m=6;try{var s=2<xn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",RS(t)}}finally{Dh(t)}}}}function Dh(t,e){if(t.g){MS(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Xe(t,"ready");try{n.onreadystatechange=i}catch{}}}function MS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(V.clearTimeout(t.A),t.A=null)}R.isActive=function(){return!!this.g};function xn(t){return t.g?t.g.readyState:0}R.da=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}};R.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};R.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),_D(e)}};function N0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case AS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function bD(t){const e={};t=(t.g&&2<=xn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(La(t[i]))continue;var n=YR(t[i]);const r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}BR(e,function(i){return i.join(", ")})}R.Ia=function(){return this.m};R.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function OS(t){let e="";return om(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function _m(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=OS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ue(t,e,n))}function Eo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function LS(t){this.Ga=0,this.j=[],this.l=new Ch,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Eo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Eo("baseRetryDelayMs",5e3,t),this.hb=Eo("retryDelaySeedMs",1e4,t),this.eb=Eo("forwardChannelMaxRetries",2,t),this.xa=Eo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new ES(t&&t.concurrentRequestLimit),this.Ja=new yD,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}R=LS.prototype;R.ra=8;R.H=1;function xm(t){if($S(t),t.H==3){var e=t.W++,n=ti(t.I);if(ue(n,"SID",t.K),ue(n,"RID",e),ue(n,"TYPE","terminate"),Sl(t,n),e=new wl(t,t.l,e),e.L=2,e.v=Ah(ti(n)),n=!1,V.navigator&&V.navigator.sendBeacon)try{n=V.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&V.Image&&(new Image().src=e.v,n=!0),n||(e.g=WS(e.l,null),e.g.ha(e.v)),e.G=Date.now(),_l(e)}VS(t)}function Mh(t){t.g&&(Sm(t),t.g.cancel(),t.g=null)}function $S(t){Mh(t),t.u&&(V.clearTimeout(t.u),t.u=null),Au(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&V.clearTimeout(t.m),t.m=null)}function Oh(t){if(!CS(t.i)&&!t.m){t.m=!0;var e=t.Na;Fa||oS(),ja||(Fa(),ja=!0),dm.add(e,t),t.C=0}}function ED(t,e){return TS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=yl(lt(t.Na,t,e),BS(t,t.C)),t.C++,!0)}R.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new wl(this,this.l,t);let s=this.s;if(this.U&&(s?(s=Jk(s),Zk(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=FS(this,r,e),n=ti(this.I),ue(n,"RID",t),ue(n,"CVER",22),this.F&&ue(n,"X-HTTP-Session-Id",this.F),Sl(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(OS(s)))+"&"+e:this.o&&_m(n,this.o,s)),vm(this.i,r),this.bb&&ue(n,"TYPE","init"),this.P?(ue(n,"$req",e),ue(n,"SID","null"),r.aa=!0,vp(r,n,null)):vp(r,n,e),this.H=2}}else this.H==3&&(t?P0(this,t):this.j.length==0||CS(this.i)||P0(this))};function P0(t,e){var n;e?n=e.m:n=t.W++;const i=ti(t.I);ue(i,"SID",t.K),ue(i,"RID",n),ue(i,"AID",t.V),Sl(t,i),t.o&&t.s&&_m(i,t.o,t.s),n=new wl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=FS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),vm(t.i,n),vp(n,i,e)}function Sl(t,e){t.na&&om(t.na,function(n,i){ue(e,i,n)}),t.h&&_S({},function(n,i){ue(e,i,n)})}function FS(t,e,n){n=Math.min(t.j.length,n);var i=t.h?lt(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].g;const u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{vD(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function jS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Fa||oS(),ja||(Fa(),ja=!0),dm.add(e,t),t.A=0}}function km(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=yl(lt(t.Ma,t),BS(t,t.A)),t.A++,!0)}R.Ma=function(){if(this.u=null,US(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=yl(lt(this.jb,this),t)}};R.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,wt(10),Mh(this),US(this))};function Sm(t){t.B!=null&&(V.clearTimeout(t.B),t.B=null)}function US(t){t.g=new wl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ti(t.wa);ue(e,"RID","rpc"),ue(e,"SID",t.K),ue(e,"AID",t.V),ue(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ue(e,"TO",t.qa),ue(e,"TYPE","xmlhttp"),Sl(t,e),t.o&&t.s&&_m(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Ah(ti(e)),n.s=null,n.S=!0,mS(n,t)}R.ib=function(){this.v!=null&&(this.v=null,Mh(this),km(this),wt(19))};function Au(t){t.v!=null&&(V.clearTimeout(t.v),t.v=null)}function zS(t,e){var n=null;if(t.g==e){Au(t),Sm(t),t.g=null;var i=2}else if(_p(t.i,e))n=e.F,IS(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=t.C;i=Th(),Xe(i,new dS(i,n)),Oh(t)}else jS(t);else if(r=e.o,r==3||r==0&&0<e.ca||!(i==1&&ED(t,e)||i==2&&km(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:mr(t,5);break;case 4:mr(t,10);break;case 3:mr(t,6);break;default:mr(t,2)}}}function BS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function mr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=lt(t.pb,t);n||(n=new Sr("//www.google.com/images/cleardot.gif"),V.location&&V.location.protocol=="http"||Nu(n,"https"),Ah(n)),wD(n.toString(),i)}else wt(2);t.H=0,t.h&&t.h.za(e),VS(t),$S(t)}R.pb=function(t){t?(this.l.info("Successfully pinged google.com"),wt(2)):(this.l.info("Failed to ping google.com"),wt(1))};function VS(t){if(t.H=0,t.ma=[],t.h){const e=NS(t.i);(e.length!=0||t.j.length!=0)&&(_0(t.ma,e),_0(t.ma,t.j),t.i.i.length=0,rm(t.j),t.j.length=0),t.h.ya()}}function HS(t,e,n){var i=n instanceof Sr?ti(n):new Sr(n);if(i.g!="")e&&(i.g=e+"."+i.g),Pu(i,i.m);else{var r=V.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Sr(null);i&&Nu(s,i),e&&(s.g=e),r&&Pu(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&ue(i,n,e),ue(i,"VER",t.ra),Sl(t,i),i}function WS(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ee(new xl({ob:!0})):new Ee(t.va),e.Oa(t.J),e}R.isActive=function(){return!!this.h&&this.h.isActive(this)};function KS(){}R=KS.prototype;R.Ba=function(){};R.Aa=function(){};R.za=function(){};R.ya=function(){};R.isActive=function(){return!0};R.Va=function(){};function Ru(){if(Bs&&!(10<=Number(FR)))throw Error("Environmental error: no available transport.")}Ru.prototype.g=function(t,e){return new Bt(t,e)};function Bt(t,e){We.call(this),this.g=new LS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!La(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!La(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ho(this)}Ke(Bt,We);Bt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;wt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=HS(t,null,t.Y),Oh(t)};Bt.prototype.close=function(){xm(this.g)};Bt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=hm(t),t=n);e.j.push(new pD(e.fb++,t)),e.H==3&&Oh(e)};Bt.prototype.N=function(){this.g.h=null,delete this.j,xm(this.g),delete this.g,Bt.$.N.call(this)};function qS(t){mm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ke(qS,mm);function GS(){ym.call(this),this.status=1}Ke(GS,ym);function ho(t){this.g=t}Ke(ho,KS);ho.prototype.Ba=function(){Xe(this.g,"a")};ho.prototype.Aa=function(t){Xe(this.g,new qS(t))};ho.prototype.za=function(t){Xe(this.g,new GS)};ho.prototype.ya=function(){Xe(this.g,"b")};function CD(){this.blockSize=-1}function fn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ke(fn,CD);fn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function zd(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}fn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)zd(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){zd(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){zd(this,i),r=0;break}}this.h=r,this.i+=e};fn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function re(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var TD={};function bm(t){return-128<=t&&128>t?OR(t,function(e){return new re([e|0],0>e?-1:0)}):new re([t|0],0>t?-1:0)}function kn(t){if(isNaN(t)||!isFinite(t))return Ts;if(0>t)return Ye(kn(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=xp;return new re(e,0)}function YS(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ye(YS(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=kn(Math.pow(e,8)),i=Ts,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=kn(Math.pow(e,s)),i=i.R(s).add(kn(o))):(i=i.R(n),i=i.add(kn(o)))}return i}var xp=4294967296,Ts=bm(0),kp=bm(1),A0=bm(16777216);R=re.prototype;R.ea=function(){if(Gt(this))return-Ye(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:xp+i)*e,e*=xp}return t};R.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(qn(this))return"0";if(Gt(this))return"-"+Ye(this).toString(t);for(var e=kn(Math.pow(t,6)),n=this,i="";;){var r=Mu(n,e).g;n=Du(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,qn(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};R.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function qn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Gt(t){return t.h==-1}R.X=function(t){return t=Du(this,t),Gt(t)?-1:qn(t)?0:1};function Ye(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new re(n,~t.h).add(kp)}R.abs=function(){return Gt(this)?Ye(this):this};R.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new re(n,n[n.length-1]&-2147483648?-1:0)};function Du(t,e){return t.add(Ye(e))}R.R=function(t){if(qn(this)||qn(t))return Ts;if(Gt(this))return Gt(t)?Ye(this).R(Ye(t)):Ye(Ye(this).R(t));if(Gt(t))return Ye(this.R(Ye(t)));if(0>this.X(A0)&&0>t.X(A0))return kn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,l=t.D(r)&65535;n[2*i+2*r]+=o*l,ec(n,2*i+2*r),n[2*i+2*r+1]+=s*l,ec(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,ec(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,ec(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new re(n,0)};function ec(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Co(t,e){this.g=t,this.h=e}function Mu(t,e){if(qn(e))throw Error("division by zero");if(qn(t))return new Co(Ts,Ts);if(Gt(t))return e=Mu(Ye(t),e),new Co(Ye(e.g),Ye(e.h));if(Gt(e))return e=Mu(t,Ye(e)),new Co(Ye(e.g),e.h);if(30<t.g.length){if(Gt(t)||Gt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=kp,i=e;0>=i.X(t);)n=R0(n),i=R0(i);var r=ts(n,1),s=ts(i,1);for(i=ts(i,2),n=ts(n,2);!qn(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=ts(i,1),n=ts(n,1)}return e=Du(t,r.R(e)),new Co(r,e)}for(r=Ts;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=kn(n),o=s.R(e);Gt(o)||0<o.X(t);)n-=i,s=kn(n),o=s.R(e);qn(s)&&(s=kp),r=r.add(s),t=Du(t,o)}return new Co(r,t)}R.gb=function(t){return Mu(this,t).h};R.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new re(n,this.h&t.h)};R.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new re(n,this.h|t.h)};R.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new re(n,this.h^t.h)};function R0(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new re(n,t.h)}function ts(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new re(r,t.h)}Ru.prototype.createWebChannel=Ru.prototype.g;Bt.prototype.send=Bt.prototype.u;Bt.prototype.open=Bt.prototype.m;Bt.prototype.close=Bt.prototype.close;Ih.NO_ERROR=0;Ih.TIMEOUT=8;Ih.HTTP_ERROR=6;fS.COMPLETE="complete";pS.EventType=vl;vl.OPEN="a";vl.CLOSE="b";vl.ERROR="c";vl.MESSAGE="d";We.prototype.listen=We.prototype.O;Ee.prototype.listenOnce=Ee.prototype.P;Ee.prototype.getLastError=Ee.prototype.Sa;Ee.prototype.getLastErrorCode=Ee.prototype.Ia;Ee.prototype.getStatus=Ee.prototype.da;Ee.prototype.getResponseJson=Ee.prototype.Wa;Ee.prototype.getResponseText=Ee.prototype.ja;Ee.prototype.send=Ee.prototype.ha;Ee.prototype.setWithCredentials=Ee.prototype.Oa;fn.prototype.digest=fn.prototype.l;fn.prototype.reset=fn.prototype.reset;fn.prototype.update=fn.prototype.j;re.prototype.add=re.prototype.add;re.prototype.multiply=re.prototype.R;re.prototype.modulo=re.prototype.gb;re.prototype.compare=re.prototype.X;re.prototype.toNumber=re.prototype.ea;re.prototype.toString=re.prototype.toString;re.prototype.getBits=re.prototype.D;re.fromNumber=kn;re.fromString=YS;var ID=function(){return new Ru},ND=function(){return Th()},Bd=Ih,PD=fS,AD=Yr,D0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},RD=xl,tc=pS,DD=Ee,MD=fn,Is=re;const M0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="9.23.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new Hg("@firebase/firestore");function O0(){return Or.logLevel}function O(t,...e){if(Or.logLevel<=Z.DEBUG){const n=e.map(Em);Or.debug(`Firestore (${fo}): ${t}`,...n)}}function ni(t,...e){if(Or.logLevel<=Z.ERROR){const n=e.map(Em);Or.error(`Firestore (${fo}): ${t}`,...n)}}function Vs(t,...e){if(Or.logLevel<=Z.WARN){const n=e.map(Em);Or.warn(`Firestore (${fo}): ${t}`,...n)}}function Em(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t="Unexpected state"){const e=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: `+t;throw ni(e),new Error(e)}function fe(t,e){t||H()}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class OD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}}class LD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $D{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ji,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ji)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe(typeof i.accessToken=="string"),new QS(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new rt(e)}}class FD{constructor(e,n,i){this.h=e,this.l=n,this.m=i,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class jD{constructor(e,n,i){this.h=e,this.l=n,this.m=i}getToken(){return Promise.resolve(new FD(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class UD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zD{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const i=s=>{s.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.T=n.token,new UD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=BD(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ee(t,e){return t<e?-1:t>e?1:0}function Hs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ue.fromMillis(Date.now())}static fromDate(e){return Ue.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ue(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.timestamp=e}static fromTimestamp(e){return new W(e)}static min(){return new W(new Ue(0,0))}static max(){return new W(new Ue(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n,i){n===void 0?n=0:n>e.length&&H(),i===void 0?i=e.length-n:i>e.length-n&&H(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Ha.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ha?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Ha{construct(e,n,i){return new Se(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new $(T.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const VD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Ha{construct(e,n,i){return new at(e,n,i)}static isValidIdentifier(e){return VD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new $(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new $(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new $(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new $(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(n)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.path=e}static fromPath(e){return new F(Se.fromString(e))}static fromName(e){return new F(Se.fromString(e).popFirst(5))}static empty(){return new F(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new Se(e.slice()))}}function HD(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=W.fromTimestamp(i===1e9?new Ue(n+1,0):new Ue(n,i));return new Hi(r,F.empty(),e)}function WD(t){return new Hi(t.readTime,t.key,-1)}class Hi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Hi(W.min(),F.empty(),-1)}static max(){return new Hi(W.max(),F.empty(),-1)}}function KD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=F.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t){if(t.code!==T.FAILED_PRECONDITION||t.message!==qD)throw t;O("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,i)=>{n(e)})}static reject(e){return new N((n,i)=>{i(e)})}static waitFor(e){return new N((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=N.resolve(!1);for(const i of e)n=n.next(r=>r?N.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new N((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,n){return new N((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function El(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>n.writeSequenceNumber(i))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}Cm.ct=-1;function Lh(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function YD(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,n){this.comparator=e,this.root=n||Ge.EMPTY}insert(e,n){return new _e(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ge.BLACK,null,null))}remove(e){return new _e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ge.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nc(this.root,e,this.comparator,!1)}getReverseIterator(){return new nc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nc(this.root,e,this.comparator,!0)}}class nc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ge{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??Ge.RED,this.left=r??Ge.EMPTY,this.right=s??Ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new Ge(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ge.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ge.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}Ge.EMPTY=null,Ge.RED=!0,Ge.BLACK=!1;Ge.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Ge(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $0(this.data.getIterator())}getIteratorFrom(e){return new $0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class $0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new ut(at.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new ZS("Invalid base64 string: "+r):r}}(e);return new ft(n)}static fromUint8Array(e){const n=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const QD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(t){if(fe(!!t),typeof t=="string"){let e=0;const n=QD.exec(t);if(fe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Im(t){const e=t.mapValue.fields.__previous_value__;return Tm(e)?Im(e):e}function Wa(t){const e=Wi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ue(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Ka{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $r(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tm(t)?4:JD(t)?9007199254740991:10:H()}function An(t,e){if(t===e)return!0;const n=$r(t);if(n!==$r(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wa(t).isEqual(Wa(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Wi(i.timestampValue),o=Wi(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Lr(i.bytesValue).isEqual(Lr(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return De(i.geoPointValue.latitude)===De(r.geoPointValue.latitude)&&De(i.geoPointValue.longitude)===De(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return De(i.integerValue)===De(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=De(i.doubleValue),o=De(r.doubleValue);return s===o?Ou(s)===Ou(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Hs(t.arrayValue.values||[],e.arrayValue.values||[],An);case 10:return function(i,r){const s=i.mapValue.fields||{},o=r.mapValue.fields||{};if(L0(s)!==L0(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(o[a]===void 0||!An(s[a],o[a])))return!1;return!0}(t,e);default:return H()}}function qa(t,e){return(t.values||[]).find(n=>An(n,e))!==void 0}function Ws(t,e){if(t===e)return 0;const n=$r(t),i=$r(e);if(n!==i)return ee(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(r,s){const o=De(r.integerValue||r.doubleValue),a=De(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return F0(t.timestampValue,e.timestampValue);case 4:return F0(Wa(t),Wa(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(r,s){const o=Lr(r),a=Lr(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const c=ee(o[l],a[l]);if(c!==0)return c}return ee(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,s){const o=ee(De(r.latitude),De(s.latitude));return o!==0?o:ee(De(r.longitude),De(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const c=Ws(o[l],a[l]);if(c)return c}return ee(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===ic.mapValue&&s===ic.mapValue)return 0;if(r===ic.mapValue)return 1;if(s===ic.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=s.fields||{},c=Object.keys(l);a.sort(),c.sort();for(let u=0;u<a.length&&u<c.length;++u){const h=ee(a[u],c[u]);if(h!==0)return h;const d=Ws(o[a[u]],l[c[u]]);if(d!==0)return d}return ee(a.length,c.length)}(t.mapValue,e.mapValue);default:throw H()}}function F0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=Wi(t),i=Wi(e),r=ee(n.seconds,i.seconds);return r!==0?r:ee(n.nanos,i.nanos)}function Ks(t){return Sp(t)}function Sp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(i){const r=Wi(i);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Lr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(i){let r="[",s=!0;for(const o of i.values||[])s?s=!1:r+=",",r+=Sp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${Sp(i.fields[a])}`;return s+"}"}(t.mapValue):H();var e,n}function bp(t){return!!t&&"integerValue"in t}function Nm(t){return!!t&&"arrayValue"in t}function j0(t){return!!t&&"nullValue"in t}function U0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jc(t){return!!t&&"mapValue"in t}function ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Qr(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ra(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function JD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!jc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(n)}setAll(e){let n=at.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=ra(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());jc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return An(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];jc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Qr(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Et(ra(this.value))}}function eb(t){const e=[];return Qr(t.fields,(n,i)=>{const r=new at([n]);if(jc(i)){const s=eb(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ot(e,0,W.min(),W.min(),W.min(),Et.empty(),0)}static newFoundDocument(e,n,i,r){return new ot(e,1,n,W.min(),i,r,0)}static newNoDocument(e,n){return new ot(e,2,n,W.min(),W.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,W.min(),W.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.position=e,this.inclusive=n}}function z0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=F.comparator(F.fromName(o.referenceValue),n.key):i=Ws(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function B0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!An(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{}class $e extends tb{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new tM(e,n,i):n==="array-contains"?new rM(e,i):n==="in"?new sM(e,i):n==="not-in"?new oM(e,i):n==="array-contains-any"?new aM(e,i):new $e(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new nM(e,i):new iM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ws(n,this.value)):n!==null&&$r(this.value)===$r(n)&&this.matchesComparison(Ws(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Rn extends tb{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new Rn(e,n)}matches(e){return nb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.lt!==null||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return e!==null?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function nb(t){return t.op==="and"}function ib(t){return eM(t)&&nb(t)}function eM(t){for(const e of t.filters)if(e instanceof Rn)return!1;return!0}function Ep(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+Ks(t.value);if(ib(t))return t.filters.map(e=>Ep(e)).join(",");{const e=t.filters.map(n=>Ep(n)).join(",");return`${t.op}(${e})`}}function rb(t,e){return t instanceof $e?function(n,i){return i instanceof $e&&n.op===i.op&&n.field.isEqual(i.field)&&An(n.value,i.value)}(t,e):t instanceof Rn?function(n,i){return i instanceof Rn&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((r,s,o)=>r&&rb(s,i.filters[o]),!0):!1}(t,e):void H()}function sb(t){return t instanceof $e?function(e){return`${e.field.canonicalString()} ${e.op} ${Ks(e.value)}`}(t):t instanceof Rn?function(e){return e.op.toString()+" {"+e.getFilters().map(sb).join(" ,")+"}"}(t):"Filter"}class tM extends $e{constructor(e,n,i){super(e,n,i),this.key=F.fromName(i.referenceValue)}matches(e){const n=F.comparator(e.key,this.key);return this.matchesComparison(n)}}class nM extends $e{constructor(e,n){super(e,"in",n),this.keys=ob("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class iM extends $e{constructor(e,n){super(e,"not-in",n),this.keys=ob("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ob(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>F.fromName(i.referenceValue))}class rM extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nm(n)&&qa(n.arrayValue,this.value)}}class sM extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qa(this.value.arrayValue,n)}}class oM extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qa(this.value.arrayValue,n)}}class aM extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>qa(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.dt=null}}function V0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new lM(t,e,n,i,r,s,o)}function Pm(t){const e=K(t);if(e.dt===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ep(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Lh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ks(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ks(i)).join(",")),e.dt=n}return e.dt}function Am(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B0(t.startAt,e.startAt)&&B0(t.endAt,e.endAt)}function Cp(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.wt=null,this._t=null,this.startAt,this.endAt}}function cM(t,e,n,i,r,s,o,a){return new $h(t,e,n,i,r,s,o,a)}function Rm(t){return new $h(t)}function H0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uM(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function hM(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function dM(t){return t.collectionGroup!==null}function Ns(t){const e=K(t);if(e.wt===null){e.wt=[];const n=hM(e),i=uM(e);if(n!==null&&i===null)n.isKeyField()||e.wt.push(new sa(n)),e.wt.push(new sa(at.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new sa(at.keyField(),s))}}}return e.wt}function ii(t){const e=K(t);if(!e._t)if(e.limitType==="F")e._t=V0(e.path,e.collectionGroup,Ns(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Ns(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new sa(s.field,o))}const i=e.endAt?new Lu(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Lu(e.startAt.position,e.startAt.inclusive):null;e._t=V0(e.path,e.collectionGroup,n,e.filters,e.limit,i,r)}return e._t}function Tp(t,e,n){return new $h(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fh(t,e){return Am(ii(t),ii(e))&&t.limitType===e.limitType}function ab(t){return`${Pm(ii(t))}|lt:${t.limitType}`}function Ip(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(i=>sb(i)).join(", ")}]`),Lh(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(i=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(i)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ks(i)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ks(i)).join(",")),`Target(${n})`}(ii(t))}; limitType=${t.limitType})`}function jh(t,e){return e.isFoundDocument()&&function(n,i){const r=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):F.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,i){for(const r of Ns(n))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const r of n.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(r,s,o){const a=z0(r,s,o);return r.inclusive?a<=0:a<0}(n.startAt,Ns(n),i)||n.endAt&&!function(r,s,o){const a=z0(r,s,o);return r.inclusive?a>=0:a>0}(n.endAt,Ns(n),i))}(t,e)}function fM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function lb(t){return(e,n)=>{let i=!1;for(const r of Ns(t)){const s=pM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function pM(t,e,n){const i=t.field.isKeyField()?F.comparator(e.key,n.key):function(r,s,o){const a=s.data.field(r),l=o.data.field(r);return a!==null&&l!==null?Ws(a,l):H()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Qr(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return JS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM=new _e(F.comparator);function ri(){return gM}const cb=new _e(F.comparator);function zo(...t){let e=cb;for(const n of t)e=e.insert(n.key,n);return e}function ub(t){let e=cb;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function yr(){return oa()}function hb(){return oa()}function oa(){return new po(t=>t.toString(),(t,e)=>t.isEqual(e))}const mM=new _e(F.comparator),yM=new ut(F.comparator);function Y(...t){let e=yM;for(const n of t)e=e.add(n);return e}const vM=new ut(ee);function wM(){return vM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function fb(t){return{integerValue:""+t}}function _M(t,e){return YD(e)?fb(e):db(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function xM(t,e,n){return t instanceof $u?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Tm(r)&&(r=Im(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(n,e):t instanceof Ga?gb(t,e):t instanceof Ya?mb(t,e):function(i,r){const s=pb(i,r),o=W0(s)+W0(i.gt);return bp(s)&&bp(i.gt)?fb(o):db(i.serializer,o)}(t,e)}function kM(t,e,n){return t instanceof Ga?gb(t,e):t instanceof Ya?mb(t,e):n}function pb(t,e){return t instanceof Fu?bp(n=e)||function(i){return!!i&&"doubleValue"in i}(n)?e:{integerValue:0}:null;var n}class $u extends Uh{}class Ga extends Uh{constructor(e){super(),this.elements=e}}function gb(t,e){const n=yb(e);for(const i of t.elements)n.some(r=>An(r,i))||n.push(i);return{arrayValue:{values:n}}}class Ya extends Uh{constructor(e){super(),this.elements=e}}function mb(t,e){let n=yb(e);for(const i of t.elements)n=n.filter(r=>!An(r,i));return{arrayValue:{values:n}}}class Fu extends Uh{constructor(e,n){super(),this.serializer=e,this.gt=n}}function W0(t){return De(t.integerValue||t.doubleValue)}function yb(t){return Nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function SM(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Ga&&i instanceof Ga||n instanceof Ya&&i instanceof Ya?Hs(n.elements,i.elements,An):n instanceof Fu&&i instanceof Fu?An(n.gt,i.gt):n instanceof $u&&i instanceof $u}(t.transform,e.transform)}class bM{constructor(e,n){this.version=e,this.transformResults=n}}class Nn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class zh{}function vb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _b(t.key,Nn.none()):new Cl(t.key,t.data,Nn.none());{const n=t.data,i=Et.empty();let r=new ut(at.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new tr(t.key,i,new Ot(r.toArray()),Nn.none())}}function EM(t,e,n){t instanceof Cl?function(i,r,s){const o=i.value.clone(),a=q0(i.fieldTransforms,r,s.transformResults);o.setAll(a),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof tr?function(i,r,s){if(!Uc(i.precondition,r))return void r.convertToUnknownDocument(s.version);const o=q0(i.fieldTransforms,r,s.transformResults),a=r.data;a.setAll(wb(i)),a.setAll(o),r.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(i,r,s){r.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n,i){return t instanceof Cl?function(r,s,o,a){if(!Uc(r.precondition,s))return o;const l=r.value.clone(),c=G0(r.fieldTransforms,a,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,i):t instanceof tr?function(r,s,o,a){if(!Uc(r.precondition,s))return o;const l=G0(r.fieldTransforms,a,s),c=s.data;return c.setAll(wb(r)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(u=>u.field))}(t,e,n,i):function(r,s,o){return Uc(r.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function CM(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=pb(i.transform,r||null);s!=null&&(n===null&&(n=Et.empty()),n.set(i.field,s))}return n||null}function K0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Hs(n,i,(r,s)=>SM(r,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Cl extends zh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class tr extends zh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function wb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function q0(t,e,n){const i=new Map;fe(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,kM(o,a,n[r]))}return i}function G0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,xM(s,o,e))}return i}class _b extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TM extends zh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&EM(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=aa(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=aa(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=hb();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=vb(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(W.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Y())}isEqual(e){return this.batchId===e.batchId&&Hs(this.mutations,e.mutations,(n,i)=>K0(n,i))&&Hs(this.baseMutations,e.baseMutations,(n,i)=>K0(n,i))}}class Dm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){fe(e.mutations.length===i.length);let r=mM;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new Dm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re,X;function AM(t){switch(t){default:return H();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function xb(t){if(t===void 0)return ni("GRPC error has no .code"),T.UNKNOWN;switch(t){case Re.OK:return T.OK;case Re.CANCELLED:return T.CANCELLED;case Re.UNKNOWN:return T.UNKNOWN;case Re.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Re.INTERNAL:return T.INTERNAL;case Re.UNAVAILABLE:return T.UNAVAILABLE;case Re.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Re.NOT_FOUND:return T.NOT_FOUND;case Re.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Re.ABORTED:return T.ABORTED;case Re.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Re.DATA_LOSS:return T.DATA_LOSS;default:return H()}}(X=Re||(Re={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return rc}static getOrCreateInstance(){return rc===null&&(rc=new Mm),rc}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let rc=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new Is([4294967295,4294967295],0);function Y0(t){const e=RM().encode(t),n=new MD;return n.update(e),new Uint8Array(n.digest())}function Q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Is([n,i],0),new Is([r,s],0)]}class Om{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Bo(`Invalid padding: ${n}`);if(i<0)throw new Bo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Is.fromNumber(this.It)}Et(e,n,i){let r=e.add(n.multiply(Is.fromNumber(i)));return r.compare(DM)===1&&(r=new Is([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}vt(e){if(this.It===0)return!1;const n=Y0(e),[i,r]=Q0(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);if(!this.At(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Om(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.It===0)return;const n=Y0(e),[i,r]=Q0(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(i,r,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Tl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Bh(W.min(),r,new _e(ee),ri(),Y())}}class Tl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Tl(i,n,Y(),Y(),Y())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,i,r){this.Pt=e,this.removedTargetIds=n,this.key=i,this.bt=r}}class kb{constructor(e,n){this.targetId=e,this.Vt=n}}class Sb{constructor(e,n,i=ft.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class X0{constructor(){this.St=0,this.Dt=Z0(),this.Ct=ft.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return this.St!==0}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Y(),n=Y(),i=Y();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:H()}}),new Tl(this.Ct,this.xt,e,n,i)}Ft(){this.Nt=!1,this.Dt=Z0()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class MM{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ri(),this.zt=J0(),this.Wt=new _e(ee)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const i=this.Zt(n);switch(e.state){case 0:this.te(n)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||this.removeTarget(n);break;case 3:this.te(n)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),i.$t(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((i,r)=>{this.te(r)&&n(r)})}ne(e){var n;const i=e.targetId,r=e.Vt.count,s=this.se(i);if(s){const o=s.target;if(Cp(o))if(r===0){const a=new F(o.path);this.Yt(i,a,ot.newNoDocument(a,W.min()))}else fe(r===1);else{const a=this.ie(i);if(a!==r){const l=this.re(e,a);if(l!==0){this.ee(i);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(i,c)}(n=Mm.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(c,u,h){var d,f,g,w,y,p;const m={localCacheCount:u,existenceFilterCount:h.count},_=h.unchangedNames;return _&&(m.bloomFilter={applied:c===0,hashCount:(d=_==null?void 0:_.hashCount)!==null&&d!==void 0?d:0,bitmapLength:(w=(g=(f=_==null?void 0:_.bits)===null||f===void 0?void 0:f.bitmap)===null||g===void 0?void 0:g.length)!==null&&w!==void 0?w:0,padding:(p=(y=_==null?void 0:_.bits)===null||y===void 0?void 0:y.padding)!==null&&p!==void 0?p:0}),m}(l,a,e.Vt))}}}}re(e,n){const{unchangedNames:i,count:r}=e.Vt;if(!i||!i.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:a=0}=i;let l,c;try{l=Lr(s).toUint8Array()}catch(u){if(u instanceof ZS)return Vs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw u}try{c=new Om(l,o,a)}catch(u){return Vs(u instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),1}return c.It===0?1:r!==n-this.oe(e.targetId,c)?2:0}oe(e,n){const i=this.Gt.getRemoteKeysForTarget(e);let r=0;return i.forEach(s=>{const o=this.Gt.ue(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(a)||(this.Yt(e,s,null),r++)}),r}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const a=this.se(o);if(a){if(s.current&&Cp(a.target)){const l=new F(a.target.path);this.jt.get(l)!==null||this.ae(o,l)||this.Yt(o,l,ot.newNoDocument(l,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let i=Y();this.zt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.se(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const r=new Bh(e,n,this.Wt,this.jt,i);return this.jt=ri(),this.zt=J0(),this.Wt=new _e(ee),r}Jt(e,n){if(!this.te(e))return;const i=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,i),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,i){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,n)?r.Bt(n,1):r.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),i&&(this.jt=this.jt.insert(n,i))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new X0,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new ut(ee),this.zt=this.zt.insert(e,n)),n}te(e){const n=this.se(e)!==null;return n||O("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new X0),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function J0(){return new _e(F.comparator)}function Z0(){return new _e(F.comparator)}const OM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),LM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),$M=(()=>({and:"AND",or:"OR"}))();class FM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Np(t,e){return t.useProto3Json||Lh(e)?e:{value:e}}function ju(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jM(t,e){return ju(t,e.toTimestamp())}function Pn(t){return fe(!!t),W.fromTimestamp(function(e){const n=Wi(e);return new Ue(n.seconds,n.nanos)}(t))}function Lm(t,e){return function(n){return new Se(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Eb(t){const e=Se.fromString(t);return fe(Nb(e)),e}function Pp(t,e){return Lm(t.databaseId,e.path)}function Vd(t,e){const n=Eb(e);if(n.get(1)!==t.databaseId.projectId)throw new $(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(Cb(n))}function Ap(t,e){return Lm(t.databaseId,e)}function UM(t){const e=Eb(t);return e.length===4?Se.emptyPath():Cb(e)}function Rp(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Cb(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ew(t,e,n){return{name:Pp(t,e),fields:n.value.mapValue.fields}}function zM(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(fe(c===void 0||typeof c=="string"),ft.fromBase64String(c||"")):(fe(c===void 0||c instanceof Uint8Array),ft.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const c=l.code===void 0?T.UNKNOWN:xb(l.code);return new $(c,l.message||"")}(o);n=new Sb(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Vd(t,i.document.name),s=Pn(i.document.updateTime),o=i.document.createTime?Pn(i.document.createTime):W.min(),a=new Et({mapValue:{fields:i.document.fields}}),l=ot.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new zc(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Vd(t,i.document),s=i.readTime?Pn(i.readTime):W.min(),o=ot.newNoDocument(r,s),a=i.removedTargetIds||[];n=new zc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Vd(t,i.document),s=i.removedTargetIds||[];n=new zc([],s,r,null)}else{if(!("filter"in e))return H();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new PM(r,s),a=i.targetId;n=new kb(a,o)}}return n}function BM(t,e){let n;if(e instanceof Cl)n={update:ew(t,e.key,e.value)};else if(e instanceof _b)n={delete:Pp(t,e.key)};else if(e instanceof tr)n={update:ew(t,e.key,e.data),updateMask:XM(e.fieldMask)};else{if(!(e instanceof TM))return H();n={verify:Pp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const o=s.transform;if(o instanceof $u)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ga)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ya)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Fu)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw H()}(0,i))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:jM(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:H()}(t,e.precondition)),n}function VM(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(i,r){let s=i.updateTime?Pn(i.updateTime):Pn(r);return s.isEqual(W.min())&&(s=Pn(r)),new bM(s,i.transformResults||[])}(n,e))):[]}function HM(t,e){return{documents:[Ap(t,e.path)]}}function WM(t,e){const n={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(n.parent=Ap(t,i),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ap(t,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(l){if(l.length!==0)return Ib(Rn.create(l,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(l){if(l.length!==0)return l.map(c=>function(u){return{field:is(u.field),direction:GM(u.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Np(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function KM(t){let e=UM(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){fe(i===1);const u=n.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(u){const h=Tb(u);return h instanceof Rn&&ib(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(u=>function(h){return new sa(rs(h.field),function(d){switch(d){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(u)));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Lh(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,d=u.values||[];return new Lu(d,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,d=u.values||[];return new Lu(d,h)}(n.endAt)),cM(e,r,o,s,a,"F",l,c)}function qM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Tb(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=rs(e.unaryFilter.field);return $e.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=rs(e.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rs(e.unaryFilter.field);return $e.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=rs(e.unaryFilter.field);return $e.create(s,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(e){return $e.create(rs(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Rn.create(e.compositeFilter.filters.map(n=>Tb(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return H()}}(e.compositeFilter.op))}(t):H()}function GM(t){return OM[t]}function YM(t){return LM[t]}function QM(t){return $M[t]}function is(t){return{fieldPath:t.canonicalString()}}function rs(t){return at.fromServerFormat(t.fieldPath)}function Ib(t){return t instanceof $e?function(e){if(e.op==="=="){if(U0(e.value))return{unaryFilter:{field:is(e.field),op:"IS_NAN"}};if(j0(e.value))return{unaryFilter:{field:is(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(U0(e.value))return{unaryFilter:{field:is(e.field),op:"IS_NOT_NAN"}};if(j0(e.value))return{unaryFilter:{field:is(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:is(e.field),op:YM(e.op),value:e.value}}}(t):t instanceof Rn?function(e){const n=e.getFilters().map(i=>Ib(i));return n.length===1?n[0]:{compositeFilter:{op:QM(e.op),filters:n}}}(t):H()}function XM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Nb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n,i,r,s=W.min(),o=W.min(),a=ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e){this.fe=e}}function ZM(t){const e=KM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Tp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.rn=new tO}addToCollectionParentIndex(e,n){return this.rn.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Hi.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Hi.min())}updateCollectionGroup(e,n,i){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class tO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new ut(Se.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ut(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new qs(0)}static Mn(){return new qs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.changes=new po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?N.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&aa(i.mutation,r,Ot.empty(),Ue.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Y()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Y()){const r=yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=zo();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Y()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ri();const o=oa(),a=oa();return n.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof tr)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),aa(u.mutation,c,u.mutation.getFieldMask(),Ue.now())):o.set(c.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new iO(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const i=oa();let r=new _e((o,a)=>o-a),s=Y();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=i.get(l)||Ot.empty();u=a.applyToLocalView(c,u),i.set(l,u);const h=(r.get(a.batchId)||Y()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=hb();u.forEach(d=>{if(!s.has(d)){const f=vb(n.get(d),i.get(d));f!==null&&h.set(d,f),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return N.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i){return function(r){return F.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i):this.getDocumentsMatchingCollectionQuery(e,n,i)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):N.resolve(yr());let a=-1,l=s;return o.next(c=>N.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?N.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Y())).next(u=>({batchId:a,changes:ub(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(i=>{let r=zo();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i){const r=n.collectionGroup;let s=zo();return this.indexManager.getCollectionParents(e,r).next(o=>N.forEach(o,a=>{const l=function(c,u){return new $h(u,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,i).next(c=>{c.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r))).next(s=>{r.forEach((a,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,ot.newInvalidDocument(c)))});let o=zo();return s.forEach((a,l)=>{const c=r.get(a);c!==void 0&&aa(c.mutation,l,Ot.empty(),Ue.now()),jh(n,l)&&(o=o.insert(a,l))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return N.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var i;return this.cs.set(n.id,{id:(i=n).id,version:i.version,createTime:Pn(i.createTime)}),N.resolve()}getNamedQuery(e,n){return N.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,function(i){return{name:i.name,query:ZM(i.bundledQuery),readTime:Pn(i.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(){this.overlays=new _e(F.comparator),this.ls=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const i=yr();return N.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.we(e,n,s)}),N.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.ls.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(i)),N.resolve()}getOverlaysForCollection(e,n,i){const r=yr(),s=n.length+1,o=new F(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return N.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new _e((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=yr(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=yr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return N.resolve(a)}we(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.ls.get(r.largestBatchId).delete(i.key);this.ls.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new NM(n,i));let s=this.ls.get(n);s===void 0&&(s=Y(),this.ls.set(n,s)),this.ls.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.fs=new ut(ze.ds),this.ws=new ut(ze._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const i=new ze(e,n);this.fs=this.fs.add(i),this.ws=this.ws.add(i)}gs(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.ys(new ze(e,n))}ps(e,n){e.forEach(i=>this.removeReference(i,n))}Is(e){const n=new F(new Se([])),i=new ze(n,e),r=new ze(n,e+1),s=[];return this.ws.forEachInRange([i,r],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new F(new Se([])),i=new ze(n,e),r=new ze(n,e+1);let s=Y();return this.ws.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ze(e,0),i=this.fs.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class ze{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return F.comparator(e.key,n.key)||ee(e.As,n.As)}static _s(e,n){return ee(e.As,n.As)||F.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new ut(ze.ds)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new IM(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.Rs=this.Rs.add(new ze(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.bs(i),s=r<0?0:r;return N.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.vs-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new ze(n,0),r=new ze(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([i,r],o=>{const a=this.Ps(o.As);s.push(a)}),N.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ut(ee);return n.forEach(r=>{const s=new ze(r,0),o=new ze(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],a=>{i=i.add(a.As)})}),N.resolve(this.Vs(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;F.isDocumentKey(s)||(s=s.child(""));const o=new ze(new F(s),0);let a=new ut(ee);return this.Rs.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.As)),!0)},o),N.resolve(this.Vs(a))}Vs(e){const n=[];return e.forEach(i=>{const r=this.Ps(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){fe(this.Ss(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Rs;return N.forEach(n.mutations,r=>{const s=new ze(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=i})}Cn(e){}containsKey(e,n){const i=new ze(n,0),r=this.Rs.firstAfterOrEqual(i);return N.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Ss(e,n){return this.bs(e)}bs(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.Ds=e,this.docs=new _e(F.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Ds(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return N.resolve(i?i.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let i=ri();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ot.newInvalidDocument(r))}),N.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ri();const o=n.path,a=new F(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||KD(WD(u),i)<=0||(r.has(u.key)||jh(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,i,r){H()}Cs(e,n){return N.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new cO(this)}getSize(e){return N.resolve(this.size)}}class cO extends nO{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.os.addEntry(e,r)):this.os.removeEntry(i)}),N.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.persistence=e,this.xs=new po(n=>Pm(n),Am),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this.Ns=0,this.ks=new $m,this.targetCount=0,this.Ms=qs.kn()}forEachTarget(e,n){return this.xs.forEach((i,r)=>n(r)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Ns&&(this.Ns=n),N.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new qs(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Fn(n),N.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.xs.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),N.waitFor(s).next(()=>r)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const i=this.xs.get(n)||null;return N.resolve(i)}addMatchingKeys(e,n,i){return this.ks.gs(n,i),N.resolve()}removeMatchingKeys(e,n,i){this.ks.ps(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),N.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),N.resolve()}getMatchingKeysForTargetId(e,n){const i=this.ks.Es(n);return N.resolve(i)}containsKey(e,n){return N.resolve(this.ks.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n){this.$s={},this.overlays={},this.Os=new Cm(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new uO(this),this.indexManager=new eO,this.remoteDocumentCache=function(i){return new lO(i)}(i=>this.referenceDelegate.Ls(i)),this.serializer=new JM(n),this.qs=new sO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.$s[e.toKey()];return i||(i=new aO(n,this.referenceDelegate),this.$s[e.toKey()]=i),i}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,i){O("MemoryPersistence","Starting transaction:",e);const r=new dO(this.Os.next());return this.referenceDelegate.Us(),i(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,n){return N.or(Object.values(this.$s).map(i=>()=>i.containsKey(e,n)))}}class dO extends GD{constructor(e){super(),this.currentSequenceNumber=e}}class Fm{constructor(e){this.persistence=e,this.Qs=new $m,this.js=null}static zs(e){return new Fm(e)}get Ws(){if(this.js)return this.js;throw H()}addReference(e,n,i){return this.Qs.addReference(i,n),this.Ws.delete(i.toString()),N.resolve()}removeReference(e,n,i){return this.Qs.removeReference(i,n),this.Ws.add(i.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),N.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(r=>this.Ws.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Ws,i=>{const r=F.fromPath(i);return this.Hs(e,r).next(s=>{s||n.removeEntry(r,W.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(i=>{i?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return N.or([()=>N.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Fi=i,this.Bi=r}static Li(e,n){let i=Y(),r=Y();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new jm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,i,r){return this.Ki(e,n).next(s=>s||this.Gi(e,n,r,i)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(H0(n))return N.resolve(null);let i=ii(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Tp(n,null,"F"),i=ii(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Y(...s);return this.Ui.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.ji(n,a);return this.zi(n,c,o,l.readTime)?this.Ki(e,Tp(n,null,"F")):this.Wi(e,c,n,l)}))})))}Gi(e,n,i,r){return H0(n)||r.isEqual(W.min())?this.Qi(e,n):this.Ui.getDocuments(e,i).next(s=>{const o=this.ji(n,s);return this.zi(n,o,i,r)?this.Qi(e,n):(O0()<=Z.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ip(n)),this.Wi(e,o,n,HD(r,-1)))})}ji(e,n){let i=new ut(lb(e));return n.forEach((r,s)=>{jh(e,s)&&(i=i.add(s))}),i}zi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,n){return O0()<=Z.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Ip(n)),this.Ui.getDocumentsMatchingQuery(e,n,Hi.min())}Wi(e,n,i,r){return this.Ui.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,n,i,r){this.persistence=e,this.Hi=n,this.serializer=r,this.Ji=new _e(ee),this.Yi=new po(s=>Pm(s),Am),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(i)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function gO(t,e,n,i){return new pO(t,e,n,i)}async function Pb(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.tr(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=Y();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({er:c,removedBatchIds:o,addedBatchIds:a}))})})}function mO(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,c){const u=l.batch,h=u.keys();let d=N.resolve();return h.forEach(f=>{d=d.next(()=>c.getEntry(a,f)).next(g=>{const w=l.docVersions.get(f);fe(w!==null),g.version.compareTo(w)<0&&(u.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),c.addEntry(g)))})}),d.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=Y();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Ab(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function yO(t,e){const n=K(t),i=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const a=[];e.targetChanges.forEach((u,h)=>{const d=r.get(h);if(!d)return;a.push(n.Bs.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Bs.addMatchingKeys(s,u.addedDocuments,h)));let f=d.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(ft.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(h,f),function(g,w,y){return g.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,f,u)&&a.push(n.Bs.updateTargetData(s,f))});let l=ri(),c=Y();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(vO(s,o,e.documentUpdates).next(u=>{l=u.nr,c=u.sr})),!i.isEqual(W.min())){const u=n.Bs.getLastRemoteSnapshotVersion(s).next(h=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return N.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.Ji=r,s))}function vO(t,e,n){let i=Y(),r=Y();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ri();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(W.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{nr:o,sr:r}})}function wO(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function _O(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Bs.getTargetData(i,e).next(s=>s?(r=s,N.resolve(r)):n.Bs.allocateTargetId(i).next(o=>(r=new bi(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Bs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ji.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(i.targetId,i),n.Yi.set(e,i.targetId)),i})}async function Dp(t,e,n){const i=K(t),r=i.Ji.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!El(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ji=i.Ji.remove(e),i.Yi.delete(r.target)}function tw(t,e,n){const i=K(t);let r=W.min(),s=Y();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,c){const u=K(a),h=u.Yi.get(c);return h!==void 0?N.resolve(u.Ji.get(h)):u.Bs.getTargetData(l,c)}(i,o,ii(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Hi.getDocumentsMatchingQuery(o,e,n?r:W.min(),n?s:Y())).next(a=>(xO(i,fM(e),a),{documents:a,ir:s})))}function xO(t,e,n){let i=t.Xi.get(e)||W.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.Xi.set(e,i)}class nw{constructor(){this.activeTargetIds=wM()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kO{constructor(){this.Hr=new nw,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,i){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new nw,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{Yr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc=null;function Hd(){return sc===null?sc=268435456+Math.round(2147483648*Math.random()):sc++,"0x"+sc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt="WebChannelConnection";class CO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.mo=n+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,i,r,s){const o=Hd(),a=this.To(e,n);O("RestConnection",`Sending RPC '${e}' ${o}:`,a,i);const l={};return this.Eo(l,r,s),this.Ao(e,a,l,i).then(c=>(O("RestConnection",`Received RPC '${e}' ${o}: `,c),c),c=>{throw Vs("RestConnection",`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}vo(e,n,i,r,s,o){return this.Io(e,n,i,r,s)}Eo(e,n,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+fo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}To(e,n){const i=bO[e];return`${this.mo}/v1/${n}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,i,r){const s=Hd();return new Promise((o,a)=>{const l=new DD;l.setWithCredentials(!0),l.listenOnce(PD.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Bd.NO_ERROR:const u=l.getResponseJson();O(nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Bd.TIMEOUT:O(nt,`RPC '${e}' ${s} timed out`),a(new $(T.DEADLINE_EXCEEDED,"Request time out"));break;case Bd.HTTP_ERROR:const h=l.getStatus();if(O(nt,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const g=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(y)>=0?y:T.UNKNOWN}(f.status);a(new $(g,f.message))}else a(new $(T.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new $(T.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{O(nt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);O(nt,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",c,i,15)})}Ro(e,n,i){const r=Hd(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ID(),a=ND(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new RD({})),this.Eo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const u=s.join("");O(nt,`Creating RPC '${e}' stream ${r}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const g=new EO({ro:y=>{f?O(nt,`Not sending because RPC '${e}' stream ${r} is closed:`,y):(d||(O(nt,`Opening RPC '${e}' stream ${r} transport.`),h.open(),d=!0),O(nt,`RPC '${e}' stream ${r} sending:`,y),h.send(y))},oo:()=>h.close()}),w=(y,p,m)=>{y.listen(p,_=>{try{m(_)}catch(x){setTimeout(()=>{throw x},0)}})};return w(h,tc.EventType.OPEN,()=>{f||O(nt,`RPC '${e}' stream ${r} transport opened.`)}),w(h,tc.EventType.CLOSE,()=>{f||(f=!0,O(nt,`RPC '${e}' stream ${r} transport closed`),g.wo())}),w(h,tc.EventType.ERROR,y=>{f||(f=!0,Vs(nt,`RPC '${e}' stream ${r} transport errored:`,y),g.wo(new $(T.UNAVAILABLE,"The operation could not be completed")))}),w(h,tc.EventType.MESSAGE,y=>{var p;if(!f){const m=y.data[0];fe(!!m);const _=m,x=_.error||((p=_[0])===null||p===void 0?void 0:p.error);if(x){O(nt,`RPC '${e}' stream ${r} received error:`,x);const k=x.status;let b=function(E){const P=Re[E];if(P!==void 0)return xb(P)}(k),C=x.message;b===void 0&&(b=T.INTERNAL,C="Unknown error status: "+k+" with message "+x.message),f=!0,g.wo(new $(b,C)),h.close()}else O(nt,`RPC '${e}' stream ${r} received:`,m),g._o(m)}}),w(a,AD.STAT_EVENT,y=>{y.stat===D0.PROXY?O(nt,`RPC '${e}' stream ${r} detected buffering proxy`):y.stat===D0.NOPROXY&&O(nt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.fo()},0),g}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t){return new FM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=i,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,n-i);r>0&&O("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){this.Do!==null&&(this.Do.skipDelay(),this.Do=null)}cancel(){this.Do!==null&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,i,r,s,o,a,l){this.ii=e,this.$o=i,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Rb(e,n)}Uo(){return this.state===1||this.state===5||this.Ko()}Ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&this.Bo===null&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,n){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,e!==4?this.qo.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(ni(n.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(n)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Fo===n&&this.Zo(i,r)},i=>{e(()=>{const r=new $(T.UNKNOWN,"Fetching auth token failed: "+i.message);return this.tu(r)})})}Zo(e,n){const i=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{i(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{i(()=>this.tu(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TO extends Db{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=zM(this.serializer,e),i=function(r){if(!("targetChange"in r))return W.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?W.min():s.readTime?Pn(s.readTime):W.min()}(e);return this.listener.nu(n,i)}su(e){const n={};n.database=Rp(this.serializer),n.addTarget=function(r,s){let o;const a=s.target;if(o=Cp(a)?{documents:HM(r,a)}:{query:WM(r,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=bb(r,s.resumeToken);const l=Np(r,s.expectedCount);l!==null&&(o.expectedCount=l)}else if(s.snapshotVersion.compareTo(W.min())>0){o.readTime=ju(r,s.snapshotVersion.toTimestamp());const l=Np(r,s.expectedCount);l!==null&&(o.expectedCount=l)}return o}(this.serializer,e);const i=qM(this.serializer,e);i&&(n.labels=i),this.Wo(n)}iu(e){const n={};n.database=Rp(this.serializer),n.removeTarget=e,this.Wo(n)}}class IO extends Db{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=VM(e.writeResults,e.commitTime),i=Pn(e.commitTime);return this.listener.cu(i,n)}return fe(!e.writeResults||e.writeResults.length===0),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Rp(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>BM(this.serializer,i))};this.Wo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new $(T.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,n,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new $(T.UNKNOWN,r.toString())})}vo(e,n,i,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(T.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class PO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){this.wu===0&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){this.state==="Online"?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,e==="Online"&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(ni(n),this.mu=!1):O("OnlineStateTracker",n)}Tu(){this._u!==null&&(this._u.cancel(),this._u=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(o=>{i.enqueueAndForget(async()=>{Xr(this)&&(O("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=K(a);l.vu.add(4),await Il(l),l.bu.set("Unknown"),l.vu.delete(4),await Hh(l)}(this))})}),this.bu=new PO(i,r)}}async function Hh(t){if(Xr(t))for(const e of t.Ru)await e(!0)}async function Il(t){for(const e of t.Ru)await e(!1)}function Mb(t,e){const n=K(t);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),Bm(n)?zm(n):go(n).Ko()&&Um(n,e))}function Ob(t,e){const n=K(t),i=go(n);n.Au.delete(e),i.Ko()&&Lb(n,e),n.Au.size===0&&(i.Ko()?i.jo():Xr(n)&&n.bu.set("Unknown"))}function Um(t,e){if(t.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).su(e)}function Lb(t,e){t.Vu.qt(e),go(t).iu(e)}function zm(t){t.Vu=new MM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),le:e=>t.Au.get(e)||null,ue:()=>t.datastore.serializer.databaseId}),go(t).start(),t.bu.gu()}function Bm(t){return Xr(t)&&!go(t).Uo()&&t.Au.size>0}function Xr(t){return K(t).vu.size===0}function $b(t){t.Vu=void 0}async function RO(t){t.Au.forEach((e,n)=>{Um(t,e)})}async function DO(t,e){$b(t),Bm(t)?(t.bu.Iu(e),zm(t)):t.bu.set("Unknown")}async function MO(t,e,n){if(t.bu.set("Online"),e instanceof Sb&&e.state===2&&e.cause)try{await async function(i,r){const s=r.cause;for(const o of r.targetIds)i.Au.has(o)&&(await i.remoteSyncer.rejectListen(o,s),i.Au.delete(o),i.Vu.removeTarget(o))}(t,e)}catch(i){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Uu(t,i)}else if(e instanceof zc?t.Vu.Ht(e):e instanceof kb?t.Vu.ne(e):t.Vu.Xt(e),!n.isEqual(W.min()))try{const i=await Ab(t.localStore);n.compareTo(i)>=0&&await function(r,s){const o=r.Vu.ce(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const c=r.Au.get(l);c&&r.Au.set(l,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach((a,l)=>{const c=r.Au.get(a);if(!c)return;r.Au.set(a,c.withResumeToken(ft.EMPTY_BYTE_STRING,c.snapshotVersion)),Lb(r,a);const u=new bi(c.target,a,l,c.sequenceNumber);Um(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(i){O("RemoteStore","Failed to raise snapshot:",i),await Uu(t,i)}}async function Uu(t,e,n){if(!El(e))throw e;t.vu.add(1),await Il(t),t.bu.set("Offline"),n||(n=()=>Ab(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{O("RemoteStore","Retrying IndexedDB access"),await n(),t.vu.delete(1),await Hh(t)})}function Fb(t,e){return e().catch(n=>Uu(t,n,e))}async function Wh(t){const e=K(t),n=Ki(e);let i=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;OO(e);)try{const r=await wO(e.localStore,i);if(r===null){e.Eu.length===0&&n.jo();break}i=r.batchId,LO(e,r)}catch(r){await Uu(e,r)}jb(e)&&Ub(e)}function OO(t){return Xr(t)&&t.Eu.length<10}function LO(t,e){t.Eu.push(e);const n=Ki(t);n.Ko()&&n.ou&&n.uu(e.mutations)}function jb(t){return Xr(t)&&!Ki(t).Uo()&&t.Eu.length>0}function Ub(t){Ki(t).start()}async function $O(t){Ki(t).hu()}async function FO(t){const e=Ki(t);for(const n of t.Eu)e.uu(n.mutations)}async function jO(t,e,n){const i=t.Eu.shift(),r=Dm.from(i,e,n);await Fb(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Wh(t)}async function UO(t,e){e&&Ki(t).ou&&await async function(n,i){if(r=i.code,AM(r)&&r!==T.ABORTED){const s=n.Eu.shift();Ki(n).Qo(),await Fb(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Wh(n)}var r}(t,e),jb(t)&&Ub(t)}async function rw(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");const i=Xr(n);n.vu.add(3),await Il(n),i&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.vu.delete(3),await Hh(n)}async function zO(t,e){const n=K(t);e?(n.vu.delete(2),await Hh(n)):e||(n.vu.add(2),await Il(n),n.bu.set("Unknown"))}function go(t){return t.Su||(t.Su=function(e,n,i){const r=K(e);return r.fu(),new TO(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:RO.bind(null,t),ao:DO.bind(null,t),nu:MO.bind(null,t)}),t.Ru.push(async e=>{e?(t.Su.Qo(),Bm(t)?zm(t):t.bu.set("Unknown")):(await t.Su.stop(),$b(t))})),t.Su}function Ki(t){return t.Du||(t.Du=function(e,n,i){const r=K(e);return r.fu(),new IO(n,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{uo:$O.bind(null,t),ao:UO.bind(null,t),au:FO.bind(null,t),cu:jO.bind(null,t)}),t.Ru.push(async e=>{e?(t.Du.Qo(),await Wh(t)):(await t.Du.stop(),t.Eu.length>0&&(O("RemoteStore",`Stopping write stream with ${t.Eu.length} pending writes`),t.Eu=[]))})),t.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new Vm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hm(t,e){if(ni("AsyncQueue",`${e}: ${t}`),El(t))return new $(T.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.comparator=e?(n,i)=>e(n,i)||F.comparator(n.key,i.key):(n,i)=>F.comparator(n.key,i.key),this.keyedMap=zo(),this.sortedSet=new _e(this.comparator)}static emptySet(e){return new Ps(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Ps;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.Cu=new _e(F.comparator)}track(e){const n=e.doc.key,i=this.Cu.get(n);i?e.type!==0&&i.type===3?this.Cu=this.Cu.insert(n,e):e.type===3&&i.type!==1?this.Cu=this.Cu.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Cu=this.Cu.remove(n):e.type===1&&i.type===2?this.Cu=this.Cu.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):H():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,i)=>{e.push(i)}),e}}class Gs{constructor(e,n,i,r,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Gs(e,n,Ps.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this.Nu=void 0,this.listeners=[]}}class VO{constructor(){this.queries=new po(e=>ab(e),Fh),this.onlineState="Unknown",this.ku=new Set}}async function HO(t,e){const n=K(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new BO),r)try{s.Nu=await n.onListen(i)}catch(o){const a=Hm(o,`Initialization of query '${Ip(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.listeners.push(e),e.Mu(n.onlineState),s.Nu&&e.$u(s.Nu)&&Wm(n)}async function WO(t,e){const n=K(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function KO(t,e){const n=K(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.$u(r)&&(i=!0);o.Nu=r}}i&&Wm(n)}function qO(t,e,n){const i=K(t),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);i.queries.delete(e)}function Wm(t){t.ku.forEach(e=>{e.next()})}class GO{constructor(e,n,i){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}$u(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Gs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){if(!e.fromCache)return!0;const i=n!=="Offline";return(!this.options.Ku||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Lu(e){if(e.docChanges.length>0)return!0;const n=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Uu(e){e=Gs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.key=e}}class Bb{constructor(e){this.key=e}}class YO{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Y(),this.mutatedKeys=Y(),this.tc=lb(e),this.ec=new Ps(this.tc)}get nc(){return this.Yu}sc(e,n){const i=n?n.ic:new sw,r=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,h)=>{const d=r.get(u),f=jh(this.query,h)?h:null,g=!!d&&this.mutatedKeys.has(d.key),w=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;d&&f?d.data.isEqual(f.data)?g!==w&&(i.track({type:3,doc:f}),y=!0):this.rc(d,f)||(i.track({type:2,doc:f}),y=!0,(l&&this.tc(f,l)>0||c&&this.tc(f,c)<0)&&(a=!0)):!d&&f?(i.track({type:0,doc:f}),y=!0):d&&!f&&(i.track({type:1,doc:d}),y=!0,(l||c)&&(a=!0)),y&&(f?(o=o.add(f),s=w?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ec:o,ic:i,zi:a,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((c,u)=>function(h,d){const f=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return f(h)-f(d)}(c.type,u.type)||this.tc(c.doc,u.doc)),this.oc(i);const o=n?this.uc():[],a=this.Zu.size===0&&this.current?1:0,l=a!==this.Xu;return this.Xu=a,s.length!==0||l?{snapshot:new Gs(this.query,e.ec,r,s,e.mutatedKeys,a===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ec:this.ec,ic:new sw,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Y(),this.ec.forEach(i=>{this.ac(i.key)&&(this.Zu=this.Zu.add(i.key))});const n=[];return e.forEach(i=>{this.Zu.has(i)||n.push(new Bb(i))}),this.Zu.forEach(i=>{e.has(i)||n.push(new zb(i))}),n}hc(e){this.Yu=e.ir,this.Zu=Y();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return Gs.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,this.Xu===0,this.hasCachedResults)}}class QO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class XO{constructor(e){this.key=e,this.fc=!1}}class JO{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new po(a=>ab(a),Fh),this._c=new Map,this.mc=new Set,this.gc=new _e(F.comparator),this.yc=new Map,this.Ic=new $m,this.Tc={},this.Ec=new Map,this.Ac=qs.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return this.vc===!0}}async function ZO(t,e){const n=cL(t);let i,r;const s=n.wc.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.lc();else{const o=await _O(n.localStore,ii(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=await eL(n,e,i,a==="current",o.resumeToken),n.isPrimaryClient&&Mb(n.remoteStore,o)}return r}async function eL(t,e,n,i,r){t.Rc=(h,d,f)=>async function(g,w,y,p){let m=w.view.sc(y);m.zi&&(m=await tw(g.localStore,w.query,!1).then(({documents:k})=>w.view.sc(k,m)));const _=p&&p.targetChanges.get(w.targetId),x=w.view.applyChanges(m,g.isPrimaryClient,_);return aw(g,w.targetId,x.cc),x.snapshot}(t,h,d,f);const s=await tw(t.localStore,e,!0),o=new YO(e,s.ir),a=o.sc(s.documents),l=Tl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),c=o.applyChanges(a,t.isPrimaryClient,l);aw(t,n,c.cc);const u=new QO(e,n,o);return t.wc.set(e,u),t._c.has(n)?t._c.get(n).push(e):t._c.set(n,[e]),c.snapshot}async function tL(t,e){const n=K(t),i=n.wc.get(e),r=n._c.get(i.targetId);if(r.length>1)return n._c.set(i.targetId,r.filter(s=>!Fh(s,e))),void n.wc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Dp(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),Ob(n.remoteStore,i.targetId),Mp(n,i.targetId)}).catch(bl)):(Mp(n,i.targetId),await Dp(n.localStore,i.targetId,!0))}async function nL(t,e,n){const i=uL(t);try{const r=await function(s,o){const a=K(s),l=Ue.now(),c=o.reduce((d,f)=>d.add(f.key),Y());let u,h;return a.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=ri(),g=Y();return a.Zi.getEntries(d,c).next(w=>{f=w,f.forEach((y,p)=>{p.isValidDocument()||(g=g.add(y))})}).next(()=>a.localDocuments.getOverlayedDocuments(d,f)).next(w=>{u=w;const y=[];for(const p of o){const m=CM(p,u.get(p.key).overlayedDocument);m!=null&&y.push(new tr(p.key,m,eb(m.value.mapValue),Nn.exists(!0)))}return a.mutationQueue.addMutationBatch(d,l,y,o)}).next(w=>{h=w;const y=w.applyToLocalDocumentSet(u,g);return a.documentOverlayCache.saveOverlays(d,w.batchId,y)})}).then(()=>({batchId:h.batchId,changes:ub(u)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,o,a){let l=s.Tc[s.currentUser.toKey()];l||(l=new _e(ee)),l=l.insert(o,a),s.Tc[s.currentUser.toKey()]=l}(i,r.batchId,n),await Nl(i,r.changes),await Wh(i.remoteStore)}catch(r){const s=Hm(r,"Failed to persist write");n.reject(s)}}async function Vb(t,e){const n=K(t);try{const i=await yO(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.yc.get(s);o&&(fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.fc=!0:r.modifiedDocuments.size>0?fe(o.fc):r.removedDocuments.size>0&&(fe(o.fc),o.fc=!1))}),await Nl(n,i,e)}catch(i){await bl(i)}}function ow(t,e,n){const i=K(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.wc.forEach((s,o)=>{const a=o.view.Mu(e);a.snapshot&&r.push(a.snapshot)}),function(s,o){const a=K(s);a.onlineState=o;let l=!1;a.queries.forEach((c,u)=>{for(const h of u.listeners)h.Mu(o)&&(l=!0)}),l&&Wm(a)}(i.eventManager,e),r.length&&i.dc.nu(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function iL(t,e,n){const i=K(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.yc.get(e),s=r&&r.key;if(s){let o=new _e(F.comparator);o=o.insert(s,ot.newNoDocument(s,W.min()));const a=Y().add(s),l=new Bh(W.min(),new Map,new _e(ee),o,a);await Vb(i,l),i.gc=i.gc.remove(s),i.yc.delete(e),Km(i)}else await Dp(i.localStore,e,!1).then(()=>Mp(i,e,n)).catch(bl)}async function rL(t,e){const n=K(t),i=e.batch.batchId;try{const r=await mO(n.localStore,e);Wb(n,i,null),Hb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Nl(n,r)}catch(r){await bl(r)}}async function sL(t,e,n){const i=K(t);try{const r=await function(s,o){const a=K(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(fe(u!==null),c=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>a.localDocuments.getDocuments(l,c))})}(i.localStore,e);Wb(i,e,n),Hb(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Nl(i,r)}catch(r){await bl(r)}}function Hb(t,e){(t.Ec.get(e)||[]).forEach(n=>{n.resolve()}),t.Ec.delete(e)}function Wb(t,e,n){const i=K(t);let r=i.Tc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Tc[i.currentUser.toKey()]=r}}function Mp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t._c.get(e))t.wc.delete(i),n&&t.dc.Pc(i,n);t._c.delete(e),t.isPrimaryClient&&t.Ic.Is(e).forEach(i=>{t.Ic.containsKey(i)||Kb(t,i)})}function Kb(t,e){t.mc.delete(e.path.canonicalString());const n=t.gc.get(e);n!==null&&(Ob(t.remoteStore,n),t.gc=t.gc.remove(e),t.yc.delete(n),Km(t))}function aw(t,e,n){for(const i of n)i instanceof zb?(t.Ic.addReference(i.key,e),oL(t,i)):i instanceof Bb?(O("SyncEngine","Document no longer in limbo: "+i.key),t.Ic.removeReference(i.key,e),t.Ic.containsKey(i.key)||Kb(t,i.key)):H()}function oL(t,e){const n=e.key,i=n.path.canonicalString();t.gc.get(n)||t.mc.has(i)||(O("SyncEngine","New document in limbo: "+n),t.mc.add(i),Km(t))}function Km(t){for(;t.mc.size>0&&t.gc.size<t.maxConcurrentLimboResolutions;){const e=t.mc.values().next().value;t.mc.delete(e);const n=new F(Se.fromString(e)),i=t.Ac.next();t.yc.set(i,new XO(n)),t.gc=t.gc.insert(n,i),Mb(t.remoteStore,new bi(ii(Rm(n.path)),i,"TargetPurposeLimboResolution",Cm.ct))}}async function Nl(t,e,n){const i=K(t),r=[],s=[],o=[];i.wc.isEmpty()||(i.wc.forEach((a,l)=>{o.push(i.Rc(l,e,n).then(c=>{if((c||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){r.push(c);const u=jm.Li(l.targetId,c);s.push(u)}}))}),await Promise.all(o),i.dc.nu(r),await async function(a,l){const c=K(a);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>N.forEach(l,h=>N.forEach(h.Fi,d=>c.persistence.referenceDelegate.addReference(u,h.targetId,d)).next(()=>N.forEach(h.Bi,d=>c.persistence.referenceDelegate.removeReference(u,h.targetId,d)))))}catch(u){if(!El(u))throw u;O("LocalStore","Failed to update sequence numbers: "+u)}for(const u of l){const h=u.targetId;if(!u.fromCache){const d=c.Ji.get(h),f=d.snapshotVersion,g=d.withLastLimboFreeSnapshotVersion(f);c.Ji=c.Ji.insert(h,g)}}}(i.localStore,s))}async function aL(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());const i=await Pb(n.localStore,e);n.currentUser=e,function(r,s){r.Ec.forEach(o=>{o.forEach(a=>{a.reject(new $(T.CANCELLED,s))})}),r.Ec.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Nl(n,i.er)}}function lL(t,e){const n=K(t),i=n.yc.get(e);if(i&&i.fc)return Y().add(i.key);{let r=Y();const s=n._c.get(e);if(!s)return r;for(const o of s){const a=n.wc.get(o);r=r.unionWith(a.view.nc)}return r}}function cL(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iL.bind(null,e),e.dc.nu=KO.bind(null,e.eventManager),e.dc.Pc=qO.bind(null,e.eventManager),e}function uL(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sL.bind(null,e),e}class lw{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Vh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return gO(this.persistence,new fO,e.initialUser,this.serializer)}createPersistence(e){return new hO(Fm.zs,this.serializer)}createSharedClientState(e){return new kO}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class hL{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ow(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=aL.bind(null,this.syncEngine),await zO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new VO}createDatastore(e){const n=Vh(e.databaseInfo.databaseId),i=(r=e.databaseInfo,new CO(r));var r;return function(s,o,a,l){return new NO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return n=this.localStore,i=this.datastore,r=e.asyncQueue,s=a=>ow(this.syncEngine,a,0),o=iw.D()?new iw:new SO,new AO(n,i,r,s,o);var n,i,r,s,o}createSyncEngine(e,n){return function(i,r,s,o,a,l,c){const u=new JO(i,r,s,o,a,l);return c&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=K(e);O("RemoteStore","RemoteStore shutting down."),n.vu.add(5),await Il(n),n.Pu.shutdown(),n.bu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):ni("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=rt.UNAUTHENTICATED,this.clientId=XS.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async s=>{O("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(i,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Hm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Kd(t,e){t.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Pb(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gL(t);O("FirestoreClient","Initializing OnlineComponentProvider");const i=await t.getConfiguration();await e.initialize(n,i),t.setCredentialChangeListener(r=>rw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>rw(e.remoteStore,s)),t._onlineComponents=e}function pL(t){return t.name==="FirebaseError"?t.code===T.FAILED_PRECONDITION||t.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function gL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!pL(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),await Kd(t,new lw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),await Kd(t,new lw);return t._offlineComponents}async function qb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),await cw(t,t._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),await cw(t,new hL))),t._onlineComponents}function mL(t){return qb(t).then(e=>e.syncEngine)}async function yL(t){const e=await qb(t),n=e.eventManager;return n.onListen=ZO.bind(null,e.syncEngine),n.onUnlisten=tL.bind(null,e.syncEngine),n}function vL(t,e,n={}){const i=new ji;return t.asyncQueue.enqueueAndForget(async()=>function(r,s,o,a,l){const c=new dL({next:h=>{s.enqueueAndForget(()=>WO(r,u));const d=h.docs.has(o);!d&&h.fromCache?l.reject(new $(T.UNAVAILABLE,"Failed to get document because the client is offline.")):d&&h.fromCache&&a&&a.source==="server"?l.reject(new $(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new GO(Rm(o.path),c,{includeMetadataChanges:!0,Ku:!0});return HO(r,u)}(await yL(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t,e,n){if(!n)throw new $(T.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _L(t,e,n,i){if(e===!0&&i===!0)throw new $(T.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hw(t){if(!F.isDocumentKey(t))throw new $(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function Fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qm(t);throw new $(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new $(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_L("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gb((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(T.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(T.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(T.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(n=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,n.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var n,i}}class Gm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new $(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new OD;switch(n.type){case"firstParty":return new jD(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new $(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=uw.get(e);n&&(O("ComponentProvider","Removing Datastore"),uw.delete(e),n.terminate())}(this),Promise.resolve()}}function xL(t,e,n,i={}){var r;const s=(t=Fr(t,Gm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=rt.MOCK_USER;else{a=ck(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new $(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new rt(c)}t._authCredentials=new LD(new QS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class Ym{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ym(this.firestore,e,this._query)}}class Qa extends Ym{constructor(e,n,i){super(e,n,Rm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new F(e))}withConverter(e){return new Qa(this.firestore,e,this._path)}}function jr(t,e,...n){if(t=Ae(t),arguments.length===1&&(e=XS.A()),wL("doc","path",e),t instanceof Gm){const i=Se.fromString(e,...n);return hw(i),new Ut(t,null,new F(i))}{if(!(t instanceof Ut||t instanceof Qa))throw new $(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Se.fromString(e,...n));return hw(i),new Ut(t.firestore,t instanceof Qa?t.converter:null,new F(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Rb(this,"async_queue_retry"),this.Xc=()=>{const n=Wd();n&&O("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=Wd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=Wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new ji;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(this.Qc.length!==0){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!El(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(i=>{this.Wc=i,this.Hc=!1;const r=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(i);throw ni("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Hc=!1,i))));return this.Gc=n,n}enqueueAfterDelay(e,n,i){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const r=Vm.createAndSchedule(this,e,n,i,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&H()}verifyOperationInProgress(){}async sa(){let e;do e=this.Gc,await e;while(e!==this.Gc)}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}class Kh extends Gm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new kL,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qb(this),this._firestoreClient.terminate()}}function SL(t,e){const n=typeof t=="object"?t:Kg(),i=typeof t=="string"?t:e||"(default)",r=yh(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=ok("firestore");s&&xL(r,...s)}return r}function Yb(t){return t._firestoreClient||Qb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Qb(t){var e,n,i;const r=t._freezeSettings(),s=function(o,a,l,c){return new XD(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,Gb(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new fL(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.cache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.cache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ys(ft.fromBase64String(e))}catch(n){throw new $(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ys(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL=/^__.*__$/;class EL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cl(e,this.data,n,this.fieldTransforms)}}class Xb{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Jb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class Jm{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Jm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.fa(e),r}da(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.aa({path:i,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return zu(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(e.length===0)throw this._a("Document fields must not be empty");if(Jb(this.ca)&&bL.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class CL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Vh(e)}ya(e,n,i,r=!1){return new Jm({ca:e,methodName:n,ga:i,path:at.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zb(t){const e=t._freezeSettings(),n=Vh(t._databaseId);return new CL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TL(t,e,n,i,r,s={}){const o=t.ya(s.merge||s.mergeFields?2:0,e,n,r);Zm("Data must be an object, but it was:",o,i);const a=eE(i,o);let l,c;if(s.merge)l=new Ot(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const d=Op(e,h,n);if(!o.contains(d))throw new $(T.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);nE(u,d)||u.push(d)}l=new Ot(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new EL(new Et(a),l,c)}class Gh extends Qm{_toFieldTransform(e){if(e.ca!==2)throw e.ca===1?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gh}}function IL(t,e,n,i){const r=t.ya(1,e,n);Zm("Data must be an object, but it was:",r,i);const s=[],o=Et.empty();Qr(i,(l,c)=>{const u=ey(e,l,n);c=Ae(c);const h=r.da(u);if(c instanceof Gh)s.push(u);else{const d=Yh(c,h);d!=null&&(s.push(u),o.set(u,d))}});const a=new Ot(s);return new Xb(o,a,r.fieldTransforms)}function NL(t,e,n,i,r,s){const o=t.ya(1,e,n),a=[Op(e,i,n)],l=[r];if(s.length%2!=0)throw new $(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Op(e,s[d])),l.push(s[d+1]);const c=[],u=Et.empty();for(let d=a.length-1;d>=0;--d)if(!nE(c,a[d])){const f=a[d];let g=l[d];g=Ae(g);const w=o.da(f);if(g instanceof Gh)c.push(f);else{const y=Yh(g,w);y!=null&&(c.push(f),u.set(f,y))}}const h=new Ot(c);return new Xb(u,h,o.fieldTransforms)}function Yh(t,e){if(tE(t=Ae(t)))return Zm("Unsupported field value:",e,t),eE(t,e);if(t instanceof Qm)return function(n,i){if(!Jb(i.ca))throw i._a(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.la&&e.ca!==4)throw e._a("Nested arrays are not supported");return function(n,i){const r=[];let s=0;for(const o of n){let a=Yh(o,i.wa(s));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),s++}return{arrayValue:{values:r}}}(t,e)}return function(n,i){if((n=Ae(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return _M(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Ue.fromDate(n);return{timestampValue:ju(i.serializer,r)}}if(n instanceof Ue){const r=new Ue(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ju(i.serializer,r)}}if(n instanceof Xm)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ys)return{bytesValue:bb(i.serializer,n._byteString)};if(n instanceof Ut){const r=i.databaseId,s=n.firestore._databaseId;if(!s.isEqual(r))throw i._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Lm(n.firestore._databaseId||i.databaseId,n._key.path)}}throw i._a(`Unsupported field value: ${qm(n)}`)}(t,e)}function eE(t,e){const n={};return JS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qr(t,(i,r)=>{const s=Yh(r,e.ha(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function tE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Xm||t instanceof Ys||t instanceof Ut||t instanceof Qm)}function Zm(t,e,n){if(!tE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const i=qm(n);throw i==="an object"?e._a(t+" a custom object"):e._a(t+" "+i)}}function Op(t,e,n){if((e=Ae(e))instanceof qh)return e._internalPath;if(typeof e=="string")return ey(t,e);throw zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const PL=new RegExp("[~\\*/\\[\\]]");function ey(t,e,n){if(e.search(PL)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new qh(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zu(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new $(T.INVALID_ARGUMENT,a+t+l)}function nE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AL extends iE{data(){return super.data()}}function rE(t,e){return typeof e=="string"?ey(t,e):e instanceof qh?e._internalPath:e._delegate._internalPath}class RL{convertValue(e,n="none"){switch($r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Qr(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new Xm(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Im(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Wa(e));default:return null}}convertTimestamp(e){const n=Wi(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Se.fromString(e);fe(Nb(i));const r=new Ka(i.get(1),i.get(3)),s=new F(i.popFirst(5));return r.isEqual(n)||ni(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sE extends iE{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new OL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(rE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class OL extends sE{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(t){t=Fr(t,Ut);const e=Fr(t.firestore,Kh);return vL(Yb(e),t._key).then(n=>$L(e,t,n))}class LL extends RL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ys(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function ny(t,e,n){t=Fr(t,Ut);const i=Fr(t.firestore,Kh),r=DL(t.converter,e,n);return aE(i,[TL(Zb(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Nn.none())])}function oE(t,e,n,...i){t=Fr(t,Ut);const r=Fr(t.firestore,Kh),s=Zb(r);let o;return o=typeof(e=Ae(e))=="string"||e instanceof qh?NL(s,"updateDoc",t._key,e,n,i):IL(s,"updateDoc",t._key,e),aE(r,[o.toMutation(t._key,Nn.exists(!0))])}function aE(t,e){return function(n,i){const r=new ji;return n.asyncQueue.enqueueAndForget(async()=>nL(await mL(n),i,r)),r.promise}(Yb(t),e)}function $L(t,e,n){const i=n.docs.get(e._key),r=new LL(t);return new sE(t,r,e._key,i,new ML(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){fo=n})(qr),Rr(new Vi("firestore",(n,{instanceIdentifier:i,options:r})=>{const s=n.getProvider("app").getImmediate(),o=new Kh(new $D(n.getProvider("auth-internal")),new zD(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new $(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(a.options.projectId,l)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Cn(M0,"3.13.0",t),Cn(M0,"3.13.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="firebasestorage.googleapis.com",cE="storageBucket",FL=2*60*1e3,jL=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te extends Dn{constructor(e,n,i=0){super(qd(e),`Firebase Storage: ${n} (${qd(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Te.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ce;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ce||(Ce={}));function qd(t){return"storage/"+t}function iy(){const t="An unknown error occurred, please check the error payload for server response.";return new Te(Ce.UNKNOWN,t)}function UL(t){return new Te(Ce.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function zL(t){return new Te(Ce.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function BL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Te(Ce.UNAUTHENTICATED,t)}function VL(){return new Te(Ce.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function HL(t){return new Te(Ce.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function WL(){return new Te(Ce.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KL(){return new Te(Ce.CANCELED,"User canceled the upload/download.")}function qL(t){return new Te(Ce.INVALID_URL,"Invalid URL '"+t+"'.")}function GL(t){return new Te(Ce.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function YL(){return new Te(Ce.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cE+"' property when initializing the app?")}function QL(){return new Te(Ce.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function XL(){return new Te(Ce.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JL(t){return new Te(Ce.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Lp(t){return new Te(Ce.INVALID_ARGUMENT,t)}function uE(){return new Te(Ce.APP_DELETED,"The Firebase app was deleted.")}function ZL(t){return new Te(Ce.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function la(t,e){return new Te(Ce.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function To(t){throw new Te(Ce.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Lt.makeFromUrl(e,n)}catch{return new Lt(e,"")}if(i.path==="")return i;throw GL(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${r}/o${d}`,"i"),g={bucket:1,path:3},w=n===lE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",p=new RegExp(`^https?://${w}/${r}/${y}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:f,indices:g,postModify:c},{regex:p,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<_.length;x++){const k=_[x],b=k.regex.exec(e);if(b){const C=b[k.indices.bucket];let E=b[k.indices.path];E||(E=""),i=new Lt(C,E),k.postModify(i);break}}if(i==null)throw qL(e);return i}}class e${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t$(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function h(y){r=setTimeout(()=>{r=null,t(f,l())},y)}function d(){s&&clearTimeout(s)}function f(y,...p){if(c){d();return}if(y){d(),u.call(null,y,...p);return}if(l()||o){d(),u.call(null,y,...p);return}i<64&&(i*=2);let _;a===1?(a=2,_=0):_=(i+Math.random())*1e3,h(_)}let g=!1;function w(y){g||(g=!0,d(),!c&&(r!==null?(y||(a=2),clearTimeout(r),h(0)):y||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function n$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(t){return t!==void 0}function r$(t){return typeof t=="object"&&!Array.isArray(t)}function ry(t){return typeof t=="string"||t instanceof String}function fw(t){return sy()&&t instanceof Blob}function sy(){return typeof Blob<"u"&&!eN()}function pw(t,e,n,i){if(i<e)throw Lp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Lp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function hE(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var br;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(br||(br={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e,n,i,r,s,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new oc(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===br.NO_ERROR,l=s.getStatus();if(!a||s$(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===br.ABORT;i(!1,new oc(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new oc(c,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());i$(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=iy();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(r.canceled){const l=this.appDelete_?uE():KL();o(l)}else{const l=WL();o(l)}};this.canceled_?n(!1,new oc(!1,null,!0)):this.backoffId_=t$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&n$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class oc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function a$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function l$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function c$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function u$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function h$(t,e,n,i,r,s,o=!0){const a=hE(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return c$(c,e),a$(c,n),l$(c,s),u$(c,i),new o$(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function f$(...t){const e=d$();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(sy())return new Blob(t);throw new Te(Ce.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function p$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t){if(typeof atob>"u")throw JL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Gd{constructor(e,n){this.data=e,this.contentType=n||null}}function m$(t,e){switch(t){case Sn.RAW:return new Gd(dE(e));case Sn.BASE64:case Sn.BASE64URL:return new Gd(fE(t,e));case Sn.DATA_URL:return new Gd(v$(e),w$(e))}throw iy()}function dE(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=i,o=t.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function y$(t){let e;try{e=decodeURIComponent(t)}catch{throw la(Sn.DATA_URL,"Malformed data URL.")}return dE(e)}function fE(t,e){switch(t){case Sn.BASE64:{const r=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(r||s)throw la(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Sn.BASE64URL:{const r=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(r||s)throw la(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=g$(e)}catch(r){throw r.message.includes("polyfill")?r:la(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class pE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw la(Sn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=_$(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function v$(t){const e=new pE(t);return e.base64?fE(Sn.BASE64,e.rest):y$(e.rest)}function w$(t){return new pE(t).contentType}function _$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n){let i=0,r="";fw(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(fw(this.data_)){const i=this.data_,r=p$(i,e,n);return r===null?null:new _i(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new _i(i,!0)}}static getBlob(...e){if(sy()){const n=e.map(i=>i instanceof _i?i.data_:i);return new _i(f$.apply(null,n))}else{const n=e.map(o=>ry(o)?m$(Sn.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)r[s++]=o[a]}),new _i(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t){let e;try{e=JSON.parse(t)}catch{return null}return r$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function k$(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function mE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(t,e){return e}class yt{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||S$}}let ac=null;function b$(t){return!ry(t)||t.length<2?t:mE(t)}function yE(){if(ac)return ac;const t=[];t.push(new yt("bucket")),t.push(new yt("generation")),t.push(new yt("metageneration")),t.push(new yt("name","fullPath",!0));function e(s,o){return b$(o)}const n=new yt("name");n.xform=e,t.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new yt("size");return r.xform=i,t.push(r),t.push(new yt("timeCreated")),t.push(new yt("updated")),t.push(new yt("md5Hash",null,!0)),t.push(new yt("cacheControl",null,!0)),t.push(new yt("contentDisposition",null,!0)),t.push(new yt("contentEncoding",null,!0)),t.push(new yt("contentLanguage",null,!0)),t.push(new yt("contentType",null,!0)),t.push(new yt("metadata","customMetadata",!0)),ac=t,ac}function E$(t,e){function n(){const i=t.bucket,r=t.fullPath,s=new Lt(i,r);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function C$(t,e,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,e[o.server])}return E$(i,t),i}function vE(t,e,n){const i=gE(e);return i===null?null:C$(t,i,n)}function T$(t,e,n,i){const r=gE(e);if(r===null||!ry(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,h=t.fullPath,d="/b/"+o(u)+"/o/"+o(h),f=oy(d,n,i),g=hE({alt:"media",token:c});return f+g})[0]}function I$(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class wE{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t){if(!t)throw iy()}function N$(t,e){function n(i,r){const s=vE(t,r,e);return _E(s!==null),s}return n}function P$(t,e){function n(i,r){const s=vE(t,r,e);return _E(s!==null),T$(s,r,t.host,t._protocol)}return n}function xE(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=VL():r=BL():n.getStatus()===402?r=zL(t.bucket):n.getStatus()===403?r=HL(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function A$(t){const e=xE(t);function n(i,r){let s=e(i,r);return i.getStatus()===404&&(s=UL(t.path)),s.serverResponse=r.serverResponse,s}return n}function R$(t,e,n){const i=e.fullServerUrl(),r=oy(i,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new wE(r,s,P$(t,n),o);return a.errorHandler=A$(e),a}function D$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function M$(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=D$(null,e)),i}function O$(t,e,n,i,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let x=0;x<2;x++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=M$(e,i,r),u=I$(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,d=`\r
--`+l+"--",f=_i.getBlob(h,i,d);if(f===null)throw QL();const g={name:c.fullPath},w=oy(s,t.host,t._protocol),y="POST",p=t.maxUploadRetryTime,m=new wE(w,y,N$(t,n),p);return m.urlParams=g,m.headers=o,m.body=f.uploadData(),m.errorHandler=xE(e),m}class L${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=br.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=br.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=br.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r){if(this.sent_)throw To("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw To("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw To("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw To("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw To("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $$ extends L${initXhr(){this.xhr_.responseType="text"}}function kE(){return new $$}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){this._service=e,n instanceof Lt?this._location=n:this._location=Lt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ur(e,n)}get root(){const e=new Lt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mE(this._location.path)}get storage(){return this._service}get parent(){const e=x$(this._location.path);if(e===null)return null;const n=new Lt(this._location.bucket,e);return new Ur(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw ZL(e)}}function F$(t,e,n){t._throwIfRoot("uploadBytes");const i=O$(t.storage,t._location,yE(),new _i(e,!0),n);return t.storage.makeRequestWithTokens(i,kE).then(r=>({metadata:r,ref:t}))}function j$(t){t._throwIfRoot("getDownloadURL");const e=R$(t.storage,t._location,yE());return t.storage.makeRequestWithTokens(e,kE).then(n=>{if(n===null)throw XL();return n})}function U$(t,e){const n=k$(t._location.path,e),i=new Lt(t._location.bucket,n);return new Ur(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(t){return/^[A-Za-z]+:\/\//.test(t)}function B$(t,e){return new Ur(t,e)}function SE(t,e){if(t instanceof ay){const n=t;if(n._bucket==null)throw YL();const i=new Ur(n,n._bucket);return e!=null?SE(i,e):i}else return e!==void 0?U$(t,e):t}function V$(t,e){if(e&&z$(e)){if(t instanceof ay)return B$(t,e);throw Lp("To use ref(service, url), the first argument must be a Storage instance.")}else return SE(t,e)}function gw(t,e){const n=e==null?void 0:e[cE];return n==null?null:Lt.makeFromBucketSpec(n,t)}function H$(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:ck(r,t.app.options.projectId))}class ay{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=lE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FL,this._maxUploadRetryTime=jL,this._requests=new Set,r!=null?this._bucket=Lt.makeFromBucketSpec(r,this._host):this._bucket=gw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Lt.makeFromBucketSpec(this._url,e):this._bucket=gw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){pw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){pw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ur(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new e$(uE());{const o=h$(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const mw="@firebase/storage",yw="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE="storage";function W$(t,e,n){return t=Ae(t),F$(t,e,n)}function K$(t){return t=Ae(t),j$(t)}function q$(t,e){return t=Ae(t),V$(t,e)}function G$(t=Kg(),e){t=Ae(t);const i=yh(t,bE).getImmediate({identifier:e}),r=ok("storage");return r&&Y$(i,...r),i}function Y$(t,e,n,i={}){H$(t,e,n,i)}function Q$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new ay(n,i,r,e,qr)}function X$(){Rr(new Vi(bE,Q$,"PUBLIC").setMultipleInstances(!0)),Cn(mw,yw,""),Cn(mw,yw,"esm2017")}X$();const J$={apiKey:"AIzaSyCBzLqdIAXLsaUZU9e5LhJRs3OAmAfKZUI",authDomain:"stock-tracker-7a87a.firebaseapp.com",databaseURL:"https://stock-tracker-7a87a-default-rtdb.europe-west1.firebasedatabase.app",projectId:"stock-tracker-7a87a",storageBucket:"stock-tracker-7a87a.firebasestorage.app",messagingSenderId:"436136550947",appId:"1:436136550947:web:30e59d287e3d06291e4796",measurementId:"G-W8B38MB3ZM"},ly=dk(J$),zr=SL(ly),Br=ER(ly),Z$=G$(ly);function vw(t,e){return ny(jr(zr,"users",t),{stocks:e},{merge:!0}).catch(n=>{throw console.error("Error saving stocks:",n),n})}function eF(t){return ty(jr(zr,"users",t)).then(e=>e.exists()?e.data().stocks||[]:[]).catch(e=>{throw console.error("Error getting stocks:",e),e})}async function ww(t,e){try{await oE(jr(zr,"users",t),{cryptos:e})}catch(n){throw console.error("Error saving cryptos:",n),n}}async function tF(t){try{const e=await ty(jr(zr,"users",t));return e.exists()?e.data().cryptos||[]:[]}catch(e){throw console.error("Error getting cryptos:",e),e}}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EE=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var iF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:s,iconNode:o,...a},l)=>S.createElement("svg",{ref:l,...iF,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:EE("lucide",r),...a},[...o.map(([c,u])=>S.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=(t,e)=>{const n=S.forwardRef(({className:i,...r},s)=>S.createElement(rF,{ref:s,iconNode:e,className:EE(`lucide-${nF(t)}`,i),...r}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=ai("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=ai("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=ai("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=ai("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=ai("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=ai("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=ai("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=ai("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=ai("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function dF({isAuthenticated:t,user:e}){const n=oo(),i=so(),[r,s]=S.useState(!1),o=async()=>{try{await fA(Br),n("/login")}catch(l){console.error("Error signing out:",l)}},a=l=>i.pathname===l;return v.jsx("nav",{className:`fixed top-0 left-0 h-screen bg-secondary transition-all duration-300 ease-in-out overflow-hidden z-10 shadow-lg ${r?"w-64":"w-16"}`,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:v.jsxs("div",{className:"flex flex-col h-full py-6",children:[v.jsx("ul",{className:"flex-grow space-y-2",children:t&&v.jsxs(v.Fragment,{children:[v.jsx("li",{children:v.jsxs(zn,{to:"/profile",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/profile")?"bg-primary":""}`,children:[v.jsx(hF,{className:"w-6 h-6 min-w-[24px]"}),v.jsx("span",{className:`ml-4 ${r?"block":"hidden"}`,children:"Profile"})]})}),v.jsx("li",{children:v.jsxs(zn,{to:"/dashboard",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/dashboard")?"bg-primary":""}`,children:[v.jsx(aF,{className:"w-6 h-6 min-w-[24px]"}),v.jsx("span",{className:`ml-4 ${r?"block":"hidden"}`,children:"Dashboard"})]})}),v.jsx("li",{children:v.jsxs(zn,{to:"/add-stock",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/add-stock")?"bg-primary":""}`,children:[v.jsx(uF,{className:"w-6 h-6 min-w-[24px]"}),v.jsx("span",{className:`ml-4 ${r?"block":"hidden"}`,children:"Add Stock"})]})}),v.jsx("li",{children:v.jsxs(zn,{to:"/compare-stocks",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/compare-stocks")?"bg-primary":""}`,children:[v.jsx(oF,{className:"w-6 h-6 min-w-[24px]"}),v.jsx("span",{className:`ml-4 ${r?"block":"hidden"}`,children:"Compare Stocks"})]})}),v.jsx("li",{children:v.jsxs(zn,{to:"/ai-assistant",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/ai-assistant")?"bg-primary":""}`,children:[v.jsx(sF,{className:"w-6 h-6 min-w-[24px]"}),v.jsx("span",{className:`ml-4 ${r?"block":"hidden"}`,children:"AI Assistant"})]})})]})}),v.jsx("div",{className:"mt-auto",children:t?v.jsxs("button",{onClick:o,className:"flex items-center w-full px-4 py-3 text-text-primary hover:bg-primary transition duration-300",children:[v.jsx(cF,{className:"w-6 h-6 min-w-[24px]"}),v.jsx("span",{className:`ml-4 ${r?"block":"hidden"}`,children:"Sign Out"})]}):v.jsxs(zn,{to:"/login",className:`flex items-center px-4 py-3 text-text-primary hover:bg-primary transition duration-300 ${a("/login")?"bg-primary":""}`,children:[v.jsx(lF,{className:"w-6 h-6 min-w-[24px]"}),v.jsx("span",{className:`ml-4 ${r?"block":"hidden"}`,children:"Sign In"})]})})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pl(t){return t+.5|0}const Ei=(t,e,n)=>Math.max(Math.min(t,n),e);function Vo(t){return Ei(Pl(t*2.55),0,255)}function Ui(t){return Ei(Pl(t*255),0,255)}function Bn(t){return Ei(Pl(t/2.55)/100,0,1)}function _w(t){return Ei(Pl(t*100),0,100)}const Wt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$p=[..."0123456789ABCDEF"],fF=t=>$p[t&15],pF=t=>$p[(t&240)>>4]+$p[t&15],lc=t=>(t&240)>>4===(t&15),gF=t=>lc(t.r)&&lc(t.g)&&lc(t.b)&&lc(t.a);function mF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Wt[t[1]]*17,g:255&Wt[t[2]]*17,b:255&Wt[t[3]]*17,a:e===5?Wt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Wt[t[1]]<<4|Wt[t[2]],g:Wt[t[3]]<<4|Wt[t[4]],b:Wt[t[5]]<<4|Wt[t[6]],a:e===9?Wt[t[7]]<<4|Wt[t[8]]:255})),n}const yF=(t,e)=>t<255?e(t):"";function vF(t){var e=gF(t)?fF:pF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+yF(t.a,e):void 0}const wF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function TE(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function _F(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function xF(t,e,n){const i=TE(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function kF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function cy(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=kF(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function uy(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ui)}function hy(t,e,n){return uy(TE,t,e,n)}function SF(t,e,n){return uy(xF,t,e,n)}function bF(t,e,n){return uy(_F,t,e,n)}function IE(t){return(t%360+360)%360}function EF(t){const e=wF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Vo(+e[5]):Ui(+e[5]));const r=IE(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=SF(r,s,o):e[1]==="hsv"?i=bF(r,s,o):i=hy(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function CF(t,e){var n=cy(t);n[0]=IE(n[0]+e),n=hy(n),t.r=n[0],t.g=n[1],t.b=n[2]}function TF(t){if(!t)return;const e=cy(t),n=e[0],i=_w(e[1]),r=_w(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Bn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const xw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},kw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function IF(){const t={},e=Object.keys(kw),n=Object.keys(xw);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,xw[s]);s=parseInt(kw[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let cc;function NF(t){cc||(cc=IF(),cc.transparent=[0,0,0,0]);const e=cc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const PF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function AF(t){const e=PF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Vo(o):Ei(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Vo(i):Ei(i,0,255)),r=255&(e[4]?Vo(r):Ei(r,0,255)),s=255&(e[6]?Vo(s):Ei(s,0,255)),{r:i,g:r,b:s,a:n}}}function RF(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Bn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Yd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ns=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function DF(t,e,n){const i=ns(Bn(t.r)),r=ns(Bn(t.g)),s=ns(Bn(t.b));return{r:Ui(Yd(i+n*(ns(Bn(e.r))-i))),g:Ui(Yd(r+n*(ns(Bn(e.g))-r))),b:Ui(Yd(s+n*(ns(Bn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function uc(t,e,n){if(t){let i=cy(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=hy(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function NE(t,e){return t&&Object.assign(e||{},t)}function Sw(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ui(t[3]))):(e=NE(t,{r:0,g:0,b:0,a:1}),e.a=Ui(e.a)),e}function MF(t){return t.charAt(0)==="r"?AF(t):EF(t)}class Xa{constructor(e){if(e instanceof Xa)return e;const n=typeof e;let i;n==="object"?i=Sw(e):n==="string"&&(i=mF(e)||NF(e)||MF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=NE(this._rgb);return e&&(e.a=Bn(e.a)),e}set rgb(e){this._rgb=Sw(e)}rgbString(){return this._valid?RF(this._rgb):void 0}hexString(){return this._valid?vF(this._rgb):void 0}hslString(){return this._valid?TF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=DF(this._rgb,e._rgb,n)),this}clone(){return new Xa(this.rgb)}alpha(e){return this._rgb.a=Ui(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Pl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return uc(this._rgb,2,e),this}darken(e){return uc(this._rgb,2,-e),this}saturate(e){return uc(this._rgb,1,e),this}desaturate(e){return uc(this._rgb,1,-e),this}rotate(e){return CF(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function On(){}const OF=(()=>{let t=0;return()=>t++})();function he(t){return t==null}function ye(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function te(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ve(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Rt(t,e){return Ve(t)?t:e}function Q(t,e){return typeof t>"u"?e:t}const LF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function oe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ne(t,e,n,i){let r,s,o;if(ye(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(te(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Bu(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Vu(t){if(ye(t))return t.map(Vu);if(te(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Vu(t[n[r]]);return e}return t}function PE(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $F(t,e,n,i){if(!PE(t))return;const r=e[t],s=n[t];te(r)&&te(s)?Ja(r,s,i):e[t]=Vu(s)}function Ja(t,e,n){const i=ye(e)?e:[e],r=i.length;if(!te(t))return t;n=n||{};const s=n.merger||$F;let o;for(let a=0;a<r;++a){if(o=i[a],!te(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function ca(t,e){return Ja(t,e,{merger:FF})}function FF(t,e,n){if(!PE(t))return;const i=e[t],r=n[t];te(i)&&te(r)?ca(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Vu(r))}const bw={"":t=>t,x:t=>t.x,y:t=>t.y};function jF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function UF(t){const e=jF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Hu(t,e){return(bw[e]||(bw[e]=UF(e)))(t)}function dy(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wu=t=>typeof t<"u",qi=t=>typeof t=="function",Ew=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function zF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Oe=Math.PI,Zt=2*Oe,BF=Zt+Oe,Ku=Number.POSITIVE_INFINITY,VF=Oe/180,$t=Oe/2,ir=Oe/4,Cw=Oe*2/3,Ci=Math.log10,Qs=Math.sign;function ua(t,e,n){return Math.abs(t-e)<n}function Tw(t){const e=Math.round(t);t=ua(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ci(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function HF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function Za(t){return!isNaN(parseFloat(t))&&isFinite(t)}function WF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function AE(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ti(t){return t*(Oe/180)}function fy(t){return t*(180/Oe)}function Iw(t){if(!Ve(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function KF(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Oe&&(s+=Zt),{angle:s,distance:r}}function Fp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function qF(t,e){return(t-e+BF)%Zt-Oe}function on(t){return(t%Zt+Zt)%Zt}function RE(t,e,n,i){const r=on(t),s=on(e),o=on(n),a=on(s-r),l=on(o-r),c=on(r-s),u=on(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Qt(t,e,n){return Math.max(e,Math.min(n,t))}function GF(t){return Qt(t,-32768,32767)}function Ho(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function py(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const vr=(t,e,n,i)=>py(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),YF=(t,e,n)=>py(t,n,i=>t[i][e]>=n);function QF(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const DE=["push","pop","shift","splice","unshift"];function XF(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),DE.forEach(n=>{const i="_onData"+dy(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Nw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(DE.forEach(s=>{delete t[s]}),delete t._chartjs)}function JF(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ME=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function OE(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,ME.call(window,()=>{i=!1,t.apply(e,n)}))}}function ZF(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const gy=t=>t==="start"?"left":t==="end"?"right":"center",it=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,e4=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function t4(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=Qt(Math.min(vr(a,l,c).lo,n?i:vr(e,l,o.getPixelForValue(c)).lo),0,i-1)),d?s=Qt(Math.max(vr(a,o.axis,u,!0).hi+1,n?0:vr(e,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function n4(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const hc=t=>t===0||t===1,Pw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Zt/n)),Aw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Zt/n)+1,ha={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*$t)+1,easeOutSine:t=>Math.sin(t*$t),easeInOutSine:t=>-.5*(Math.cos(Oe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>hc(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>hc(t)?t:Pw(t,.075,.3),easeOutElastic:t=>hc(t)?t:Aw(t,.075,.3),easeInOutElastic(t){return hc(t)?t:t<.5?.5*Pw(t*2,.1125,.45):.5+.5*Aw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-ha.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?ha.easeInBounce(t*2)*.5:ha.easeOutBounce(t*2-1)*.5+.5};function my(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Rw(t){return my(t)?t:new Xa(t)}function Qd(t){return my(t)?t:new Xa(t).saturate(.5).darken(.1).hexString()}const i4=["x","y","borderWidth","radius","tension"],r4=["color","borderColor","backgroundColor"];function s4(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:r4},numbers:{type:"number",properties:i4}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function o4(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Dw=new Map;function a4(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Dw.get(n);return i||(i=new Intl.NumberFormat(t,e),Dw.set(n,i)),i}function yy(t,e,n){return a4(e,n).format(t)}const LE={values(t){return ye(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=l4(t,n)}const o=Ci(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),yy(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(Ci(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?LE.numeric.call(this,t,e,n):""}};function l4(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Qh={formatters:LE};function c4(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Qh.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Vr=Object.create(null),jp=Object.create(null);function da(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Xd(t,e,n){return typeof e=="string"?Ja(da(t,e),n):Ja(da(t,""),e)}class u4{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Qd(r.backgroundColor),this.hoverBorderColor=(i,r)=>Qd(r.borderColor),this.hoverColor=(i,r)=>Qd(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Xd(this,e,n)}get(e){return da(this,e)}describe(e,n){return Xd(jp,e,n)}override(e,n){return Xd(Vr,e,n)}route(e,n,i,r){const s=da(this,e),o=da(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return te(l)?Object.assign({},c,l):Q(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var be=new u4({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[s4,o4,c4]);function h4(t){return!t||he(t.size)||he(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function qu(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function d4(t,e,n,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],h!=null&&!ye(h))o=qu(t,r,s,o,h);else if(ye(h))for(c=0,u=h.length;c<u;c++)d=h[c],d!=null&&!ye(d)&&(o=qu(t,r,s,o,d));t.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function rr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function Mw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Up(t,e,n,i){$E(t,e,n,i,null)}function $E(t,e,n,i,r){let s,o,a,l,c,u,h,d;const f=e.pointStyle,g=e.rotation,w=e.radius;let y=(g||0)*VF;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(y),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,w,0,0,Zt):t.arc(n,i,w,0,Zt),t.closePath();break;case"triangle":u=r?r/2:w,t.moveTo(n+Math.sin(y)*u,i-Math.cos(y)*w),y+=Cw,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*w),y+=Cw,t.lineTo(n+Math.sin(y)*u,i-Math.cos(y)*w),t.closePath();break;case"rectRounded":c=w*.516,l=w-c,o=Math.cos(y+ir)*l,h=Math.cos(y+ir)*(r?r/2-c:l),a=Math.sin(y+ir)*l,d=Math.sin(y+ir)*(r?r/2-c:l),t.arc(n-h,i-a,c,y-Oe,y-$t),t.arc(n+d,i-o,c,y-$t,y),t.arc(n+h,i+a,c,y,y+$t),t.arc(n-d,i+o,c,y+$t,y+Oe),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*w,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}y+=ir;case"rectRot":h=Math.cos(y)*(r?r/2:w),o=Math.cos(y)*w,a=Math.sin(y)*w,d=Math.sin(y)*(r?r/2:w),t.moveTo(n-h,i-a),t.lineTo(n+d,i-o),t.lineTo(n+h,i+a),t.lineTo(n-d,i+o),t.closePath();break;case"crossRot":y+=ir;case"cross":h=Math.cos(y)*(r?r/2:w),o=Math.cos(y)*w,a=Math.sin(y)*w,d=Math.sin(y)*(r?r/2:w),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"star":h=Math.cos(y)*(r?r/2:w),o=Math.cos(y)*w,a=Math.sin(y)*w,d=Math.sin(y)*(r?r/2:w),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o),y+=ir,h=Math.cos(y)*(r?r/2:w),o=Math.cos(y)*w,a=Math.sin(y)*w,d=Math.sin(y)*(r?r/2:w),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+d,i-o),t.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(y)*w,a=Math.sin(y)*w,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(y)*(r?r/2:w),i+Math.sin(y)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Gn(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function vy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function wy(t){t.restore()}function f4(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function p4(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function g4(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),he(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function m4(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function y4(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Hr(t,e,n,i,r,s={}){const o=ye(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,g4(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&y4(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),he(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),m4(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function Gu(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Oe,Oe,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Oe,$t,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,$t,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-$t,!0),t.lineTo(n+o.topLeft,i)}const v4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,w4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _4(t,e){const n=(""+t).match(v4);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const x4=t=>+t||0;function FE(t,e){const n={},i=te(e),r=i?Object.keys(e):e,s=te(t)?i?o=>Q(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=x4(s(o));return n}function k4(t){return FE(t,{top:"y",right:"x",bottom:"y",left:"x"})}function As(t){return FE(t,["topLeft","topRight","bottomLeft","bottomRight"])}function pt(t){const e=k4(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function je(t,e){t=t||{},e=e||be.font;let n=Q(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Q(t.style,e.style);i&&!(""+i).match(w4)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Q(t.family,e.family),lineHeight:_4(Q(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Q(t.weight,e.weight),string:""};return r.string=h4(r),r}function dc(t,e,n,i){let r=!0,s,o,a;for(s=0,o=t.length;s<o;++s)if(a=t[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),n!==void 0&&ye(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function S4(t,e,n){const{min:i,max:r}=t,s=LF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function nr(t,e){return Object.assign(Object.create(t),e)}function _y(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=BE("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>_y([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return UE(a,l,()=>A4(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Lw(a).includes(l)},ownKeys(a){return Lw(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Xs(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:jE(t,i),setContext:s=>Xs(t,s,n,i),override:s=>Xs(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return UE(s,o,()=>E4(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function jE(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:qi(n)?n:()=>n,isIndexable:qi(i)?i:()=>i}}const b4=(t,e)=>t?t+dy(e):e,xy=(t,e)=>te(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function UE(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function E4(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return qi(a)&&o.isScriptable(e)&&(a=C4(e,a,t,n)),ye(a)&&a.length&&(a=T4(e,a,t,o.isIndexable)),xy(e,a)&&(a=Xs(a,r,s&&s[e],o)),a}function C4(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),xy(t,l)&&(l=ky(r._scopes,r,t,l)),l}function T4(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(te(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=ky(c,r,t,u);e.push(Xs(h,s,o&&o[t],a))}}return e}function zE(t,e,n){return qi(t)?t(e,n):t}const I4=(t,e)=>t===!0?e:typeof t=="string"?Hu(e,t):void 0;function N4(t,e,n,i,r){for(const s of e){const o=I4(n,s);if(o){t.add(o);const a=zE(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function ky(t,e,n,i){const r=e._rootScopes,s=zE(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=Ow(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=Ow(a,o,s,l,i),l===null)?!1:_y(Array.from(a),[""],r,s,()=>P4(e,n,i))}function Ow(t,e,n,i,r){for(;n;)n=N4(t,e,n,i,r);return n}function P4(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return ye(r)&&te(n)?n:r||{}}function A4(t,e,n,i){let r;for(const s of e)if(r=BE(b4(s,t),n),typeof r<"u")return xy(t,r)?ky(n,i,t,r):r}function BE(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function Lw(t){let e=t._keys;return e||(e=t._keys=R4(t._scopes)),e}function R4(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const D4=Number.EPSILON||1e-14,Js=(t,e)=>e<t.length&&!t[e].skip&&t[e],VE=t=>t==="x"?"y":"x";function M4(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Fp(s,r),l=Fp(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function O4(t,e,n){const i=t.length;let r,s,o,a,l,c=Js(t,0);for(let u=0;u<i-1;++u)if(l=c,c=Js(t,u+1),!(!l||!c)){if(ua(e[u],0,D4)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])}}function L4(t,e,n="x"){const i=VE(n),r=t.length;let s,o,a,l=Js(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Js(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function $4(t,e="x"){const n=VE(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Js(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=Js(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?Qs(r[o-1])!==Qs(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}O4(t,r,s),L4(t,s,e)}function fc(t,e,n){return Math.max(Math.min(t,n),e)}function F4(t,e){let n,i,r,s,o,a=Gn(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&Gn(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=fc(r.cp1x,e.left,e.right),r.cp1y=fc(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=fc(r.cp2x,e.left,e.right),r.cp2y=fc(r.cp2y,e.top,e.bottom)))}function j4(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")$4(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=M4(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&F4(t,n)}function Sy(){return typeof window<"u"&&typeof document<"u"}function by(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Yu(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Xh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function U4(t,e){return Xh(t).getPropertyValue(e)}const z4=["top","right","bottom","left"];function Er(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=z4[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const B4=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function V4(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(B4(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ur(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Xh(n),s=r.boxSizing==="border-box",o=Er(r,"padding"),a=Er(r,"border","width"),{x:l,y:c,box:u}=V4(t,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:g}=e;return s&&(f-=o.width+a.width,g-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/g*n.height/i)}}function H4(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&by(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Xh(s),l=Er(a,"border","width"),c=Er(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Yu(a.maxWidth,s,"clientWidth"),r=Yu(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Ku,maxHeight:r||Ku}}const pc=t=>Math.round(t*10)/10;function W4(t,e,n,i){const r=Xh(t),s=Er(r,"margin"),o=Yu(r.maxWidth,t,"clientWidth")||Ku,a=Yu(r.maxHeight,t,"clientHeight")||Ku,l=H4(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const d=Er(r,"border","width"),f=Er(r,"padding");c-=f.width+d.width,u-=f.height+d.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=pc(Math.min(c,o,l.maxWidth)),u=pc(Math.min(u,a,l.maxHeight)),c&&!u&&(u=pc(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=pc(Math.floor(u*i))),{width:c,height:u}}function $w(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const K4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Sy()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Fw(t,e){const n=U4(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function hr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function q4(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function G4(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=hr(t,r,n),a=hr(r,s,n),l=hr(s,e,n),c=hr(o,a,n),u=hr(a,l,n);return hr(c,u,n)}const Y4=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},Q4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Rs(t,e,n){return t?Y4(e,n):Q4()}function HE(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function WE(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function KE(t){return t==="angle"?{between:RE,compare:qF,normalize:on}:{between:Ho,compare:(e,n)=>e-n,normalize:e=>e}}function jw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function X4(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=KE(i),l=e.length;let{start:c,end:u,loop:h}=t,d,f;if(h){for(c+=l,u+=l,d=0,f=l;d<f&&o(a(e[c%l][i]),r,s);++d)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function J4(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=KE(i),{start:u,end:h,loop:d,style:f}=X4(t,e,n),g=[];let w=!1,y=null,p,m,_;const x=()=>l(r,_,p)&&a(r,_)!==0,k=()=>a(s,p)===0||l(s,_,p),b=()=>w||x(),C=()=>!w||k();for(let E=u,P=u;E<=h;++E)m=e[E%o],!m.skip&&(p=c(m[i]),p!==_&&(w=l(p,r,s),y===null&&b()&&(y=a(p,r)===0?E:P),y!==null&&C()&&(g.push(jw({start:y,end:E,loop:d,count:o,style:f})),y=null),P=E,_=p));return y!==null&&g.push(jw({start:y,end:h,loop:d,count:o,style:f})),g}function Z4(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=J4(i[r],t.points,e);s.length&&n.push(...s)}return n}function ej(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function tj(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function nj(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=ej(n,r,s,i);if(i===!0)return Uw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return Uw(t,tj(n,o,l,c),n,e)}function Uw(t,e,n,i){return!i||!i.setContext||!n?e:ij(t,e,n,i)}function ij(t,e,n,i){const r=t._chart.getContext(),s=zw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,d=h;function f(g,w,y,p){const m=a?-1:1;if(g!==w){for(g+=l;n[g%l].skip;)g-=m;for(;n[w%l].skip;)w+=m;g%l!==w%l&&(c.push({start:g%l,end:w%l,loop:y,style:p}),u=p,h=w%l)}}for(const g of e){h=a?h:g.start;let w=n[h%l],y;for(d=h+1;d<=g.end;d++){const p=n[d%l];y=zw(i.setContext(nr(r,{type:"segment",p0:w,p1:p,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),rj(y,u)&&f(h,d-1,g.loop,u),w=p,u=y}h<d-1&&f(h,d-1,g.loop,u)}return c}function zw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function rj(t,e){if(!e)return!1;const n=[],i=function(r,s){return my(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class sj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ME.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var $n=new sj;const Bw="transparent",oj={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Rw(t||Bw),r=i.valid&&Rw(e||Bw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class aj{constructor(e,n,i,r){const s=n[i];r=dc([e.to,r,s,e.from]);const o=dc([e.from,s,r]);this._active=!0,this._fn=e.fn||oj[e.type||typeof o],this._easing=ha[e.easing]||ha.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=dc([e.to,n,r,e.from]),this._from=dc([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class qE{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!te(e))return;const n=Object.keys(be.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!te(s))return;const o={};for(const a of n)o[a]=s[a];(ye(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=cj(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&lj(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const d=i.get(c);if(h)if(d&&h.active()){h.update(d,u,a);continue}else h.cancel();if(!d||!d.duration){e[c]=u;continue}s[c]=h=new aj(d,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return $n.add(this._chart,i),!0}}function lj(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function cj(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Vw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function uj(t,e,n){if(n===!1)return!1;const i=Vw(t,n),r=Vw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function hj(t){let e,n,i,r;return te(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function GE(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function Hw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],Ve(c)&&(s||e===0||Qs(e)===Qs(c))&&(e+=c)}return!u&&!i.all?0:e}function dj(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:t[u]};return a}function Jd(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function fj(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function pj(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function gj(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Ww(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function Kw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=fj(s,o,i),h=e.length;let d;for(let f=0;f<h;++f){const g=e[f],{[l]:w,[c]:y}=g,p=g._stacks||(g._stacks={});d=p[c]=gj(r,u,w),d[a]=y,d._top=Ww(d,o,!0,i.type),d._bottom=Ww(d,o,!1,i.type);const m=d._visualValues||(d._visualValues={});m[a]=y}}function Zd(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function mj(t,e){return nr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function yj(t,e,n){return nr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Io(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const ef=t=>t==="reset"||t==="none",qw=(t,e)=>e?t:Object.assign({},t),vj=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:GE(n,!0),values:null};class fa{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Jd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Io(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(h,d,f,g)=>h==="x"?d:h==="r"?g:f,s=n.xAxisID=Q(i.xAxisID,Zd(e,"x")),o=n.yAxisID=Q(i.yAxisID,Zd(e,"y")),a=n.rAxisID=Q(i.rAxisID,Zd(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Nw(this._data,this),e._stacked&&Io(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(te(n)){const r=this._cachedMeta;this._data=dj(n,r)}else if(i!==n){if(i){Nw(i,this);const r=this._cachedMeta;Io(r),r._parsed=[]}n&&Object.isExtensible(n)&&XF(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Jd(n.vScale,n),n.stack!==i.stack&&(r=!0,Io(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(Kw(this,n._parsed),n._stacked=Jd(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,d;if(this._parsing===!1)i._parsed=r,i._sorted=!0,d=r;else{ye(r[e])?d=this.parseArrayData(i,r,e,n):te(r[e])?d=this.parseObjectData(i,r,e,n):d=this.parsePrimitiveData(i,r,e,n);const f=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=d[u],l&&(f()&&(l=!1),c=h);i._sorted=l}o&&Kw(this,d)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let d,f,g;for(d=0,f=r;d<f;++d)g=d+i,h[d]={[a]:u||s.parse(c[g],g),[l]:o.parse(n[g],g)};return h}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,d,f;for(u=0,h=r;u<h;++u)d=u+i,f=n[d],c[u]={x:s.parse(Hu(f,a),d),y:o.parse(Hu(f,l),d)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:GE(r,!0),values:n._stacks[e.axis]._visualValues};return Hw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=Hw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=vj(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=pj(a);let d,f;function g(){f=r[d];const w=f[a.axis];return!Ve(f[e.axis])||u>w||h<w}for(d=0;d<o&&!(!g()&&(this.updateRangeFromParsed(c,e,f,l),s));++d);if(s){for(d=o-1;d>=0;--d)if(!g()){this.updateRangeFromParsed(c,e,f,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Ve(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=hj(Q(this.options.clip,uj(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=yj(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=mj(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Wu(i);if(a)return qw(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],d=c.getOptionScopes(this.getDataset(),u),f=Object.keys(be.elements[e]),g=()=>this.getContext(i,r,n),w=c.resolveNamedOptions(d,f,g,h);return w.$shared&&(w.$shared=l,s[o]=Object.freeze(qw(w,l))),w}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),d=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(d,this.getContext(e,i,n))}const c=new qE(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ef(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){ef(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!ef(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Io(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}U(fa,"defaults",{}),U(fa,"datasetElementType",null),U(fa,"dataElementType",null);class Bc extends fa{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=t4(n,r,o);this._drawStart=a,this._drawCount=l,n4(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),d=o.axis,f=a.axis,{spanGaps:g,segment:w}=this.options,y=Za(g)?g:Number.POSITIVE_INFINITY,p=this.chart._animationsDisabled||s||r==="none",m=n+i,_=e.length;let x=n>0&&this.getParsed(n-1);for(let k=0;k<_;++k){const b=e[k],C=p?b:{};if(k<n||k>=m){C.skip=!0;continue}const E=this.getParsed(k),P=he(E[f]),A=C[d]=o.getPixelForValue(E[d],k),L=C[f]=s||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,E,l):E[f],k);C.skip=isNaN(A)||isNaN(L)||P,C.stop=k>0&&Math.abs(E[d]-x[d])>y,w&&(C.parsed=E,C.raw=c.data[k]),h&&(C.options=u||this.resolveDataElementOptions(k,b.active?"active":r)),p||this.updateElement(b,k,C,r),x=E}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}U(Bc,"id","line"),U(Bc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),U(Bc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function sr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ey{constructor(e){U(this,"options");this.options=e||{}}static override(e){Object.assign(Ey.prototype,e)}init(){}formats(){return sr()}parse(){return sr()}format(){return sr()}add(){return sr()}diff(){return sr()}startOf(){return sr()}endOf(){return sr()}}var wj={_date:Ey};function _j(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?YF:vr;if(i){if(r._sharedOptions){const c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const h=l(s,e,n-u),d=l(s,e,n+u);return{lo:h.lo,hi:d.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Al(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:d}=_j(s[a],e,o,r);for(let f=h;f<=d;++f){const g=u[f];g.skip||i(g,c,f)}}}function xj(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function tf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Al(t,n,e,function(a,l,c){!r&&!Gn(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function kj(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=KF(o,{x:e.x,y:e.y});RE(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Al(t,n,e,s),r}function Sj(t,e,n,i,r,s){let o=[];const a=xj(n);let l=Number.POSITIVE_INFINITY;function c(u,h,d){const f=u.inRange(e.x,e.y,r);if(i&&!f)return;const g=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(g))&&!f)return;const y=a(e,g);y<l?(o=[{element:u,datasetIndex:h,index:d}],l=y):y===l&&o.push({element:u,datasetIndex:h,index:d})}return Al(t,n,e,c),o}function nf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?kj(t,e,n,r):Sj(t,e,n,i,r,s)}function Gw(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Al(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var bj={evaluateInteractionItems:Al,modes:{index(t,e,n,i){const r=ur(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?tf(t,r,s,i,o):nf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const r=ur(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?tf(t,r,s,i,o):nf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=ur(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return tf(t,r,s,i,o)},nearest(t,e,n,i){const r=ur(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return nf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=ur(e,t);return Gw(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=ur(e,t);return Gw(t,r,"y",n.intersect,i)}}};const YE=["left","top","right","bottom"];function No(t,e){return t.filter(n=>n.pos===e)}function Yw(t,e){return t.filter(n=>YE.indexOf(n.pos)===-1&&n.box.axis===e)}function Po(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Ej(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function Cj(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!YE.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Tj(t,e){const n=Cj(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function Ij(t){const e=Ej(t),n=Po(e.filter(c=>c.box.fullSize),!0),i=Po(No(e,"left"),!0),r=Po(No(e,"right")),s=Po(No(e,"top"),!0),o=Po(No(e,"bottom")),a=Yw(e,"x"),l=Yw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:No(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function Qw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function QE(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Nj(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!te(r)){n.size&&(t[r]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[r]+=n.size}s.getPadding&&QE(o,s.getPadding());const a=Math.max(0,e.outerWidth-Qw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Qw(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Pj(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Aj(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function Wo(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Aj(a.horizontal,e));const{same:h,other:d}=Nj(e,n,a,i);c|=h&&r.length,u=u||d,l.fullSize||r.push(a)}return c&&Wo(r,e,n,i)||u}function gc(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Xw(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,d=c.size||l.height;Wu(c.start)&&(o=c.start),l.fullSize?gc(l,r.left,o,n.outerWidth-r.right-r.left,d):gc(l,e.left+c.placed,o,h,d),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,d=c.size||l.width;Wu(c.start)&&(s=c.start),l.fullSize?gc(l,s,r.top,d,n.outerHeight-r.bottom-r.top):gc(l,s,e.top+c.placed,d,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var Xt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=pt(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=Ij(t.boxes),l=a.vertical,c=a.horizontal;ne(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const u=l.reduce((w,y)=>y.box.options&&y.box.options.display===!1?w:w+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);QE(d,pt(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),g=Tj(l.concat(c),h);Wo(a.fullSize,f,h,g),Wo(l,f,h,g),Wo(c,f,h,g)&&Wo(l,f,h,g),Pj(f),Xw(a.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,Xw(a.rightAndBottom,f,h,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ne(a.chartArea,w=>{const y=w.box;Object.assign(y,t.chartArea),y.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class XE{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class Rj extends XE{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Vc="$chartjs",Dj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Jw=t=>t===null||t==="";function Mj(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Vc]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Jw(r)){const s=Fw(t,"width");s!==void 0&&(t.width=s)}if(Jw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Fw(t,"height");s!==void 0&&(t.height=s)}return t}const JE=K4?{passive:!0}:!1;function Oj(t,e,n){t&&t.addEventListener(e,n,JE)}function Lj(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,JE)}function $j(t,e){const n=Dj[t.type]||t.type,{x:i,y:r}=ur(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Qu(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Fj(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Qu(a.addedNodes,i),o=o&&!Qu(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function jj(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Qu(a.removedNodes,i),o=o&&!Qu(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const el=new Map;let Zw=0;function ZE(){const t=window.devicePixelRatio;t!==Zw&&(Zw=t,el.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function Uj(t,e){el.size||window.addEventListener("resize",ZE),el.set(t,e)}function zj(t){el.delete(t),el.size||window.removeEventListener("resize",ZE)}function Bj(t,e,n){const i=t.canvas,r=i&&by(i);if(!r)return;const s=OE((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),Uj(t,s),o}function rf(t,e,n){n&&n.disconnect(),e==="resize"&&zj(t)}function Vj(t,e,n){const i=t.canvas,r=OE(s=>{t.ctx!==null&&n($j(s,t))},t);return Oj(i,e,r),r}class Hj extends XE{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Mj(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Vc])return!1;const i=n[Vc].initial;["height","width"].forEach(s=>{const o=i[s];he(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Vc],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:Fj,detach:jj,resize:Bj}[n]||Vj;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:rf,detach:rf,resize:rf}[n]||Lj)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return W4(e,n,i,r)}isAttached(e){const n=e&&by(e);return!!(n&&n.isConnected)}}function Wj(t){return!Sy()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Rj:Hj}class si{constructor(){U(this,"x");U(this,"y");U(this,"active",!1);U(this,"options");U(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Za(this.x)&&Za(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}U(si,"defaults",{}),U(si,"defaultRoutes");function Kj(t,e){const n=t.options.ticks,i=qj(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?Yj(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return Qj(e,c,s,o/r),c;const u=Gj(s,e,r);if(o>0){let h,d;const f=o>1?Math.round((l-a)/(o-1)):null;for(mc(e,c,u,he(f)?0:a-f,a),h=0,d=o-1;h<d;h++)mc(e,c,u,s[h],s[h+1]);return mc(e,c,u,l,he(f)?e.length:l+f),c}return mc(e,c,u),c}function qj(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function Gj(t,e,n){const i=Xj(t),r=e.length/n;if(!i)return Math.max(r,1);const s=HF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function Yj(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function Qj(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function mc(t,e,n,i,r){const s=Q(i,0),o=Math.min(Q(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function Xj(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const Jj=t=>t==="left"?"right":t==="right"?"left":t,e_=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,t_=(t,e)=>Math.min(e||t,t);function n_(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Zj(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function eU(t,e){ne(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Ao(t){return t.drawTicks?t.tickLength:0}function i_(t,e){if(!t.display)return 0;const n=je(t.font,e),i=pt(t.padding);return(ye(t.text)?t.text.length:1)*n.lineHeight+i.height}function tU(t,e){return nr(t,{scale:e,type:"scale"})}function nU(t,e,n){return nr(t,{tick:n,index:e,type:"tick"})}function iU(t,e,n){let i=gy(t);return(n&&e!=="right"||!n&&e==="right")&&(i=Jj(i)),i}function rU(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,d,f,g;const w=o-r,y=a-s;if(t.isHorizontal()){if(f=it(i,s,a),te(n)){const p=Object.keys(n)[0],m=n[p];g=u[p].getPixelForValue(m)+w-e}else n==="center"?g=(c.bottom+c.top)/2+w-e:g=e_(t,n,e);d=a-s}else{if(te(n)){const p=Object.keys(n)[0],m=n[p];f=u[p].getPixelForValue(m)-y+e}else n==="center"?f=(c.left+c.right)/2-y+e:f=e_(t,n,e);g=it(i,o,r),h=n==="left"?-$t:$t}return{titleX:f,titleY:g,maxWidth:d,rotation:h}}class Jr extends si{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Rt(e,Number.POSITIVE_INFINITY),n=Rt(n,Number.NEGATIVE_INFINITY),i=Rt(i,Number.POSITIVE_INFINITY),r=Rt(r,Number.NEGATIVE_INFINITY),{min:Rt(e,i),max:Rt(n,r),minDefined:Ve(e),maxDefined:Ve(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Rt(n,Rt(i,n)),max:Rt(i,Rt(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){oe(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=S4(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?n_(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Kj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){oe(this.options.afterUpdate,[this])}beforeSetDimensions(){oe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){oe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),oe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){oe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=oe(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){oe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){oe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=t_(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,d=u.highest.height,f=Qt(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),h+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Ao(e.grid)-n.padding-i_(e.title,this.chart.options.font),c=Math.sqrt(h*h+d*d),o=fy(Math.min(Math.asin(Qt((u.highest.height+6)/a,-1,1)),Math.asin(Qt(l/c,-1,1))-Math.asin(Qt(d/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){oe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){oe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=i_(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ao(s)+l):(e.height=this.maxHeight,e.width=Ao(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:d}=this._getLabelSizes(),f=i.padding*2,g=Ti(this.labelRotation),w=Math.cos(g),y=Math.sin(g);if(a){const p=i.mirror?0:y*h.width+w*d.height;e.height=Math.min(this.maxHeight,e.height+p+f)}else{const p=i.mirror?0:w*h.width+y*d.height;e.width=Math.min(this.maxWidth,e.width+p+f)}this._calculatePadding(c,u,y,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,f=0;l?c?(d=r*e.width,f=i*n.height):(d=i*e.height,f=r*n.width):s==="start"?f=n.width:s==="end"?d=e.width:s!=="inner"&&(d=e.width/2,f=n.width/2),this.paddingLeft=Math.max((d-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){oe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)he(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=n_(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/t_(n,i));let c=0,u=0,h,d,f,g,w,y,p,m,_,x,k;for(h=0;h<n;h+=l){if(g=e[h].label,w=this._resolveTickFontOptions(h),r.font=y=w.string,p=s[y]=s[y]||{data:{},gc:[]},m=w.lineHeight,_=x=0,!he(g)&&!ye(g))_=qu(r,p.data,p.gc,_,g),x=m;else if(ye(g))for(d=0,f=g.length;d<f;++d)k=g[d],!he(k)&&!ye(k)&&(_=qu(r,p.data,p.gc,_,k),x+=m);o.push(_),a.push(x),c=Math.max(_,c),u=Math.max(x,u)}eU(s,n);const b=o.indexOf(c),C=a.indexOf(u),E=P=>({width:o[P]||0,height:a[P]||0});return{first:E(0),last:E(n-1),widest:E(b),highest:E(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return GF(this._alignToPixels?rr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=nU(this.getContext(),e,i))}return this.$context||(this.$context=tU(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ti(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),d=Ao(s),f=[],g=a.setContext(this.getContext()),w=g.display?g.width:0,y=w/2,p=function(Ie){return rr(i,Ie,w)};let m,_,x,k,b,C,E,P,A,L,q,xe;if(o==="top")m=p(this.bottom),C=this.bottom-d,P=m-y,L=p(e.top)+y,xe=e.bottom;else if(o==="bottom")m=p(this.top),L=e.top,xe=p(e.bottom)-y,C=m+y,P=this.top+d;else if(o==="left")m=p(this.right),b=this.right-d,E=m-y,A=p(e.left)+y,q=e.right;else if(o==="right")m=p(this.left),A=e.left,q=p(e.right)-y,b=m+y,E=this.left+d;else if(n==="x"){if(o==="center")m=p((e.top+e.bottom)/2+.5);else if(te(o)){const Ie=Object.keys(o)[0],Ze=o[Ie];m=p(this.chart.scales[Ie].getPixelForValue(Ze))}L=e.top,xe=e.bottom,C=m+y,P=C+d}else if(n==="y"){if(o==="center")m=p((e.left+e.right)/2);else if(te(o)){const Ie=Object.keys(o)[0],Ze=o[Ie];m=p(this.chart.scales[Ie].getPixelForValue(Ze))}b=m-y,E=b-d,A=e.left,q=e.right}const At=Q(r.ticks.maxTicksLimit,h),ge=Math.max(1,Math.ceil(h/At));for(_=0;_<h;_+=ge){const Ie=this.getContext(_),Ze=s.setContext(Ie),D=a.setContext(Ie),j=Ze.lineWidth,B=Ze.color,se=D.dash||[],le=D.dashOffset,pn=Ze.tickWidth,gt=Ze.tickColor,Mn=Ze.tickBorderDash||[],mt=Ze.tickBorderDashOffset;x=Zj(this,_,l),x!==void 0&&(k=rr(i,x,j),c?b=E=A=q=k:C=P=L=xe=k,f.push({tx1:b,ty1:C,tx2:E,ty2:P,x1:A,y1:L,x2:q,y2:xe,width:j,color:B,borderDash:se,borderDashOffset:le,tickWidth:pn,tickColor:gt,tickBorderDash:Mn,tickBorderDashOffset:mt}))}return this._ticksLength=h,this._borderValue=m,f}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,d=Ao(i.grid),f=d+u,g=h?-u:f,w=-Ti(this.labelRotation),y=[];let p,m,_,x,k,b,C,E,P,A,L,q,xe="middle";if(r==="top")b=this.bottom-g,C=this._getXAxisLabelAlignment();else if(r==="bottom")b=this.top+g,C=this._getXAxisLabelAlignment();else if(r==="left"){const ge=this._getYAxisLabelAlignment(d);C=ge.textAlign,k=ge.x}else if(r==="right"){const ge=this._getYAxisLabelAlignment(d);C=ge.textAlign,k=ge.x}else if(n==="x"){if(r==="center")b=(e.top+e.bottom)/2+f;else if(te(r)){const ge=Object.keys(r)[0],Ie=r[ge];b=this.chart.scales[ge].getPixelForValue(Ie)+f}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")k=(e.left+e.right)/2-f;else if(te(r)){const ge=Object.keys(r)[0],Ie=r[ge];k=this.chart.scales[ge].getPixelForValue(Ie)}C=this._getYAxisLabelAlignment(d).textAlign}n==="y"&&(l==="start"?xe="top":l==="end"&&(xe="bottom"));const At=this._getLabelSizes();for(p=0,m=a.length;p<m;++p){_=a[p],x=_.label;const ge=s.setContext(this.getContext(p));E=this.getPixelForTick(p)+s.labelOffset,P=this._resolveTickFontOptions(p),A=P.lineHeight,L=ye(x)?x.length:1;const Ie=L/2,Ze=ge.color,D=ge.textStrokeColor,j=ge.textStrokeWidth;let B=C;o?(k=E,C==="inner"&&(p===m-1?B=this.options.reverse?"left":"right":p===0?B=this.options.reverse?"right":"left":B="center"),r==="top"?c==="near"||w!==0?q=-L*A+A/2:c==="center"?q=-At.highest.height/2-Ie*A+A:q=-At.highest.height+A/2:c==="near"||w!==0?q=A/2:c==="center"?q=At.highest.height/2-Ie*A:q=At.highest.height-L*A,h&&(q*=-1),w!==0&&!ge.showLabelBackdrop&&(k+=A/2*Math.sin(w))):(b=E,q=(1-L)*A/2);let se;if(ge.showLabelBackdrop){const le=pt(ge.backdropPadding),pn=At.heights[p],gt=At.widths[p];let Mn=q-le.top,mt=0-le.left;switch(xe){case"middle":Mn-=pn/2;break;case"bottom":Mn-=pn;break}switch(C){case"center":mt-=gt/2;break;case"right":mt-=gt;break;case"inner":p===m-1?mt-=gt:p>0&&(mt-=gt/2);break}se={left:mt,top:Mn,width:gt+le.width,height:pn+le.height,color:ge.backdropColor}}y.push({label:x,font:P,textOffset:q,options:{rotation:w,color:Ze,strokeColor:D,strokeWidth:j,textAlign:B,textBaseline:xe,translation:[k,b],backdrop:se}})}return y}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ti(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,d;this.isHorizontal()?(c=rr(e,this.left,o)-o/2,u=rr(e,this.right,a)+a/2,h=d=l):(h=rr(e,this.top,o)-o/2,d=rr(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,d),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&vy(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Hr(i,c,0,u,l,a)}r&&wy(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=je(i.font),o=pt(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||te(n)?(l+=o.bottom,ye(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:d}=rU(this,l,n,a);Hr(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:d,textAlign:iU(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Q(e.grid&&e.grid.z,-1),r=Q(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Jr.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return je(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class yc{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;aU(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,sU(e,o,i),this.override&&be.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in be[r]&&(delete be[r][i],this.override&&delete Vr[i])}}function sU(t,e,n){const i=Ja(Object.create(null),[n?be.get(n):{},be.get(e),t.defaults]);be.set(e,i),t.defaultRoutes&&oU(e,t.defaultRoutes),t.descriptors&&be.describe(e,t.descriptors)}function oU(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");be.route(s,r,l,a)})}function aU(t){return"id"in t&&"defaults"in t}class lU{constructor(){this.controllers=new yc(fa,"datasets",!0),this.elements=new yc(si,"elements"),this.plugins=new yc(Object,"plugins"),this.scales=new yc(Jr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):ne(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=dy(e);oe(i["before"+r],[],i),n[e](i),oe(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var vn=new lU;class cU{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(oe(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){he(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=Q(i.options&&i.options.plugins,{}),s=uU(i);return r===!1&&!n?[]:dU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function uU(t){const e={},n=[],i=Object.keys(vn.plugins.items);for(let s=0;s<i.length;s++)n.push(vn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function hU(t,e){return!e&&t===!1?null:t===!0?{}:t}function dU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=hU(i[l],r);c!==null&&s.push({plugin:a,options:fU(t.config,{plugin:a,local:n[l]},c,o)})}return s}function fU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zp(t,e){const n=be.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function pU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function gU(t,e){return t===e?"_index_":"_value_"}function r_(t){if(t==="x"||t==="y"||t==="r")return t}function mU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Bp(t,...e){if(r_(t))return t;for(const n of e){const i=n.axis||mU(n.position)||t.length>1&&r_(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function s_(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function yU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return s_(t,"x",n[0])||s_(t,"y",n[0])}return{}}function vU(t,e){const n=Vr[t.type]||{scales:{}},i=e.scales||{},r=zp(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!te(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Bp(o,a,yU(o,t),be.scales[a.type]),c=gU(l,r),u=n.scales||{};s[o]=ca(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||zp(a,e),u=(Vr[a]||{}).scales||{};Object.keys(u).forEach(h=>{const d=pU(h,l),f=o[d+"AxisID"]||d;s[f]=s[f]||Object.create(null),ca(s[f],[{axis:d},i[f],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];ca(a,[be.scales[a.type],be.scale])}),s}function eC(t){const e=t.options||(t.options={});e.plugins=Q(e.plugins,{}),e.scales=vU(t,e)}function tC(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function wU(t){return t=t||{},t.data=tC(t.data),eC(t),t}const o_=new Map,nC=new Set;function vc(t,e){let n=o_.get(t);return n||(n=e(),o_.set(t,n),nC.add(n)),n}const Ro=(t,e,n)=>{const i=Hu(e,n);i!==void 0&&t.add(i)};class _U{constructor(e){this._config=wU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tC(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eC(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return vc(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return vc(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return vc(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>Ro(l,e,h))),u.forEach(h=>Ro(l,r,h)),u.forEach(h=>Ro(l,Vr[s]||{},h)),u.forEach(h=>Ro(l,be,h)),u.forEach(h=>Ro(l,jp,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nC.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Vr[n]||{},be.datasets[n]||{},{type:n},be,jp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=a_(this._resolverCache,e,r);let l=o;if(kU(o,n)){s.$shared=!1,i=qi(i)?i():i;const c=this.createResolver(e,i,a);l=Xs(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=a_(this._resolverCache,e,i);return te(n)?Xs(s,n,void 0,r):s}}function a_(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:_y(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const xU=t=>te(t)&&Object.getOwnPropertyNames(t).some(e=>qi(t[e]));function kU(t,e){const{isScriptable:n,isIndexable:i}=jE(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(qi(a)||xU(a))||o&&ye(a))return!0}return!1}var SU="4.4.7";const bU=["top","bottom","left","right","chartArea"];function l_(t,e){return t==="top"||t==="bottom"||bU.indexOf(t)===-1&&e==="x"}function c_(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function u_(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),oe(n&&n.onComplete,[t],e)}function EU(t){const e=t.chart,n=e.options.animation;oe(n&&n.onProgress,[t],e)}function iC(t){return Sy()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Hc={},h_=t=>{const e=iC(t);return Object.values(Hc).filter(n=>n.canvas===e).pop()};function CU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function TU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function wc(t,e,n){return t.options.clip?t[n]:e[n]}function IU(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:wc(n,e,"left"),right:wc(n,e,"right"),top:wc(i,e,"top"),bottom:wc(i,e,"bottom")}:e}var hi;let mo=(hi=class{static register(...e){vn.add(...e),d_()}static unregister(...e){vn.remove(...e),d_()}constructor(e,n){const i=this.config=new _U(n),r=iC(e),s=h_(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Wj(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=OF(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new cU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ZF(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],Hc[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}$n.listen(this,"complete",u_),$n.listen(this,"progress",EU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return he(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return vn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$w(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Mw(this.canvas,this.ctx),this}stop(){return $n.stop(this),this}resize(e,n){$n.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$w(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),oe(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ne(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Bp(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ne(s,o=>{const a=o.options,l=a.id,c=Bp(l,a),u=Q(a.type,o.dtype);(a.position===void 0||l_(a.position,c)!==l_(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const d=vn.getScale(u);h=new d({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),ne(r,(o,a)=>{o||delete i[a]}),ne(i,o=>{Xt.configure(this,o,o.options),Xt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(c_("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||zp(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=vn.getController(a),{datasetElementType:c,dataElementType:u}=be.datasets[a];Object.assign(l,{dataElementType:vn.getElement(u),datasetElementType:c&&vn.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ne(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),d=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(d),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||ne(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(c_("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ne(this.scales,e=>{Xt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Ew(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;CU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!Ew(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xt.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ne(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,qi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($n.has(this)?this.attached&&!$n.running(this)&&$n.start(this):(this.draw(),u_({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=IU(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&vy(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&wy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Gn(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=bj.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=nr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Wu(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),$n.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Mw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Hc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ne(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ne(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ne(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Bu(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=zF(e),c=TU(e,this._lastEvent,i,l);i&&(this._lastEvent=null,oe(s.onHover,[e,a,this],this),l&&oe(s.onClick,[e,a,this],this));const u=!Bu(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},U(hi,"defaults",be),U(hi,"instances",Hc),U(hi,"overrides",Vr),U(hi,"registry",vn),U(hi,"version",SU),U(hi,"getChart",h_),hi);function d_(){return ne(mo.instances,t=>t._plugins.invalidate())}function rC(t,e,n=e){t.lineCap=Q(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Q(n.borderDash,e.borderDash)),t.lineDashOffset=Q(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Q(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Q(n.borderWidth,e.borderWidth),t.strokeStyle=Q(n.borderColor,e.borderColor)}function NU(t,e,n){t.lineTo(n.x,n.y)}function PU(t){return t.stepped?f4:t.tension||t.cubicInterpolationMode==="monotone"?p4:NU}function sC(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function AU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=sC(r,n,i),u=PU(s);let{move:h=!0,reverse:d}=i||{},f,g,w;for(f=0;f<=c;++f)g=r[(a+(d?c-f:f))%o],!g.skip&&(h?(t.moveTo(g.x,g.y),h=!1):u(t,w,g,d,s.stepped),w=g);return l&&(g=r[(a+(d?c:0))%o],u(t,w,g,d,s.stepped)),!!l}function RU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=sC(r,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,d,f,g,w,y,p;const m=x=>(o+(c?a-x:x))%s,_=()=>{w!==y&&(t.lineTo(u,y),t.lineTo(u,w),t.lineTo(u,p))};for(l&&(f=r[m(0)],t.moveTo(f.x,f.y)),d=0;d<=a;++d){if(f=r[m(d)],f.skip)continue;const x=f.x,k=f.y,b=x|0;b===g?(k<w?w=k:k>y&&(y=k),u=(h*u+x)/++h):(_(),t.lineTo(x,k),g=b,h=0,w=y=k),p=k}_()}function Vp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?RU:AU}function DU(t){return t.stepped?q4:t.tension||t.cubicInterpolationMode==="monotone"?G4:hr}function MU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),rC(t,e.options),t.stroke(r)}function OU(t,e,n,i){const{segments:r,options:s}=e,o=Vp(e);for(const a of r)rC(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const LU=typeof Path2D=="function";function $U(t,e,n,i){LU&&!e.options.segment?MU(t,e,n,i):OU(t,e,n,i)}class wr extends si{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;j4(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=nj(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=Z4(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=DU(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:d}=o[c],f=s[h],g=s[d];if(f===g){a.push(f);continue}const w=Math.abs((r-f[n])/(g[n]-f[n])),y=l(f,g,w,i.stepped);y[n]=e[n],a.push(y)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Vp(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Vp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),$U(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}U(wr,"id","line"),U(wr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),U(wr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),U(wr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function f_(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Ds extends si{constructor(n){super();U(this,"parsed");U(this,"skip");U(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return f_(this,n,"x",i)}inYRange(n,i){return f_(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Gn(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Up(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}U(Ds,"id","point"),U(Ds,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),U(Ds,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const p_=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},FU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class g_ extends si{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=oe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=je(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=p_(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let d=-1,f=-u;return this.legendItems.forEach((g,w)=>{const y=i+n/2+s.measureText(g.text).width;(w===0||c[c.length-1]+y+2*a>o)&&(h+=u,c[c.length-(w>0?0:1)]=0,f+=u,d++),l[w]={left:0,top:f,row:d,width:y,height:r},c[c.length-1]+=y+a}),h}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,d=0,f=0,g=0,w=0;return this.legendItems.forEach((y,p)=>{const{itemWidth:m,itemHeight:_}=jU(i,n,s,y,r);p>0&&f+_+2*a>u&&(h+=d+a,c.push({width:d,height:f}),g+=d+a,w++,d=f=0),l[p]={left:g,top:f,col:w,width:m,height:_},d=Math.max(d,m),f+=_+a}),h+=d,c.push({width:d,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Rs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=it(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=it(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=it(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=it(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;vy(e,this),this._draw(),wy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=be.color,l=Rs(e.rtl,this.left,this.width),c=je(o.font),{padding:u}=o,h=c.size,d=h/2;let f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:g,boxHeight:w,itemHeight:y}=p_(o,h),p=function(b,C,E){if(isNaN(g)||g<=0||isNaN(w)||w<0)return;r.save();const P=Q(E.lineWidth,1);if(r.fillStyle=Q(E.fillStyle,a),r.lineCap=Q(E.lineCap,"butt"),r.lineDashOffset=Q(E.lineDashOffset,0),r.lineJoin=Q(E.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=Q(E.strokeStyle,a),r.setLineDash(Q(E.lineDash,[])),o.usePointStyle){const A={radius:w*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:P},L=l.xPlus(b,g/2),q=C+d;$E(r,A,L,q,o.pointStyleWidth&&g)}else{const A=C+Math.max((h-w)/2,0),L=l.leftForLtr(b,g),q=As(E.borderRadius);r.beginPath(),Object.values(q).some(xe=>xe!==0)?Gu(r,{x:L,y:A,w:g,h:w,radius:q}):r.rect(L,A,g,w),r.fill(),P!==0&&r.stroke()}r.restore()},m=function(b,C,E){Hr(r,E.text,b,C+y/2,c,{strikethrough:E.hidden,textAlign:l.textAlign(E.textAlign)})},_=this.isHorizontal(),x=this._computeTitleHeight();_?f={x:it(s,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:f={x:this.left+u,y:it(s,this.top+x+u,this.bottom-n[0].height),line:0},HE(this.ctx,e.textDirection);const k=y+u;this.legendItems.forEach((b,C)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const E=r.measureText(b.text).width,P=l.textAlign(b.textAlign||(b.textAlign=o.textAlign)),A=g+d+E;let L=f.x,q=f.y;l.setWidth(this.width),_?C>0&&L+A+u>this.right&&(q=f.y+=k,f.line++,L=f.x=it(s,this.left+u,this.right-i[f.line])):C>0&&q+k>this.bottom&&(L=f.x=L+n[f.line].width+u,f.line++,q=f.y=it(s,this.top+x+u,this.bottom-n[f.line].height));const xe=l.x(L);if(p(xe,q,b),L=e4(P,L+g+d,_?L+A:this.right,e.rtl),m(l.x(L),q,b),_)f.x+=A+u;else if(typeof b.text!="string"){const At=c.lineHeight;f.y+=oC(b,At)+u}else f.y+=k}),WE(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=je(n.font),r=pt(n.padding);if(!n.display)return;const s=Rs(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,h=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),u=this.top+c,h=it(e.align,h,this.right-d);else{const g=this.columnSizes.reduce((w,y)=>Math.max(w,y.height),0);u=c+it(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const f=it(a,h,h+d);o.textAlign=s.textAlign(gy(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Hr(o,n.text,f,u,i)}_computeTitleHeight(){const e=this.options.title,n=je(e.font),i=pt(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Ho(e,this.left,this.right)&&Ho(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ho(e,r.left,r.left+r.width)&&Ho(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!BU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=FU(r,i);r&&!s&&oe(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&oe(n.onHover,[e,i,this],this)}else i&&oe(n.onClick,[e,i,this],this)}}function jU(t,e,n,i,r){const s=UU(i,t,e,n),o=zU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function UU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function zU(t,e,n){let i=t;return typeof e.text!="string"&&(i=oC(e,n)),i}function oC(t,e){const n=t.text?t.text.length:0;return e*n}function BU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Cy={id:"legend",_element:g_,start(t,e,n){const i=t.legend=new g_({ctx:t.ctx,options:n,chart:t});Xt.configure(t,i,n),Xt.addBox(t,i)},stop(t){Xt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Xt.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=pt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class aC extends si{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=ye(i.text)?i.text.length:1;this._padding=pt(i.padding);const s=r*je(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=it(a,i,s),h=n+e,c=s-i):(o.position==="left"?(u=i+e,h=it(a,r,n),l=Oe*-.5):(u=s-e,h=it(a,n,r),l=Oe*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=je(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Hr(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:gy(n.align),textBaseline:"middle",translation:[o,a]})}}function VU(t,e){const n=new aC({ctx:t.ctx,options:e,chart:t});Xt.configure(t,n,e),Xt.addBox(t,n),t.titleBlock=n}var Ty={id:"title",_element:aC,start(t,e,n){VU(t,n)},stop(t){const e=t.titleBlock;Xt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Xt.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ko={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Fp(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function mn(t,e){return e&&(ye(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Fn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function HU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function m_(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=je(e.bodyFont),c=je(e.titleFont),u=je(e.footerFont),h=s.length,d=r.length,f=i.length,g=pt(e.padding);let w=g.height,y=0,p=i.reduce((x,k)=>x+k.before.length+k.lines.length+k.after.length,0);if(p+=t.beforeBody.length+t.afterBody.length,h&&(w+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),p){const x=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=f*x+(p-f)*l.lineHeight+(p-1)*e.bodySpacing}d&&(w+=e.footerMarginTop+d*u.lineHeight+(d-1)*e.footerSpacing);let m=0;const _=function(x){y=Math.max(y,n.measureText(x).width+m)};return n.save(),n.font=c.string,ne(t.title,_),n.font=l.string,ne(t.beforeBody.concat(t.afterBody),_),m=e.displayColors?o+2+e.boxPadding:0,ne(i,x=>{ne(x.before,_),ne(x.lines,_),ne(x.after,_)}),m=0,n.font=u.string,ne(t.footer,_),n.restore(),y+=g.width,{width:y,height:w}}function WU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function KU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function qU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),KU(c,t,e,n)&&(c="center"),c}function y_(t,e,n){const i=n.yAlign||e.yAlign||WU(t,n);return{xAlign:n.xAlign||e.xAlign||qU(t,e,n,i),yAlign:i}}function GU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function YU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function v_(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=As(o);let g=GU(e,a);const w=YU(e,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(u,d)+r:a==="right"&&(g+=Math.max(h,f)+r),{x:Qt(g,0,i.width-e.width),y:Qt(w,0,i.height-e.height)}}function _c(t,e,n){const i=pt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function w_(t){return mn([],Fn(t))}function QU(t,e,n){return nr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function __(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const lC={beforeTitle:On,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:On,beforeBody:On,beforeLabel:On,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return he(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:On,afterBody:On,beforeFooter:On,footer:On,afterFooter:On};function St(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?lC[e].call(n,i):r}class Hp extends si{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new qE(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=QU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=St(i,"beforeTitle",this,e),s=St(i,"title",this,e),o=St(i,"afterTitle",this,e);let a=[];return a=mn(a,Fn(r)),a=mn(a,Fn(s)),a=mn(a,Fn(o)),a}getBeforeBody(e,n){return w_(St(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return ne(e,s=>{const o={before:[],lines:[],after:[]},a=__(i,s);mn(o.before,Fn(St(a,"beforeLabel",this,s))),mn(o.lines,St(a,"label",this,s)),mn(o.after,Fn(St(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return w_(St(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=St(i,"beforeFooter",this,e),s=St(i,"footer",this,e),o=St(i,"afterFooter",this,e);let a=[];return a=mn(a,Fn(r)),a=mn(a,Fn(s)),a=mn(a,Fn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(HU(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,d)=>e.filter(u,h,d,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),ne(a,u=>{const h=__(e.callbacks,u);r.push(St(h,"labelColor",this,u)),s.push(St(h,"labelPointStyle",this,u)),o.push(St(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=Ko[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=m_(this,i),c=Object.assign({},a,l),u=y_(this.chart,i,c),h=v_(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=As(a),{x:d,y:f}=e,{width:g,height:w}=n;let y,p,m,_,x,k;return s==="center"?(x=f+w/2,r==="left"?(y=d,p=y-o,_=x+o,k=x-o):(y=d+g,p=y+o,_=x-o,k=x+o),m=y):(r==="left"?p=d+Math.max(l,u)+o:r==="right"?p=d+g-Math.max(c,h)-o:p=this.caretX,s==="top"?(_=f,x=_-o,y=p-o,m=p+o):(_=f+w,x=_+o,y=p+o,m=p-o),k=_),{x1:y,x2:p,x3:m,y1:_,y2:x,y3:k}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Rs(i.rtl,this.x,this.width);for(e.x=_c(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=je(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=je(s.bodyFont),h=_c(this,"left",s),d=r.x(h),f=l<u.lineHeight?(u.lineHeight-l)/2:0,g=n.y+f;if(s.usePointStyle){const w={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},y=r.leftForLtr(d,c)+c/2,p=g+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Up(e,w,y,p),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Up(e,w,y,p)}else{e.lineWidth=te(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=r.leftForLtr(d,c),y=r.leftForLtr(r.xPlus(d,1),c-2),p=As(o.borderRadius);Object.values(p).some(m=>m!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Gu(e,{x:w,y:g,w:c,h:l,radius:p}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Gu(e,{x:y,y:g+1,w:c-2,h:l-2,radius:p}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(w,g,c,l),e.strokeRect(w,g,c,l),e.fillStyle=o.backgroundColor,e.fillRect(y,g+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=je(i.bodyFont);let d=h.lineHeight,f=0;const g=Rs(i.rtl,this.x,this.width),w=function(E){n.fillText(E,g.x(e.x+f),e.y+d/2),e.y+=d+s},y=g.textAlign(o);let p,m,_,x,k,b,C;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=_c(this,y,i),n.fillStyle=i.bodyColor,ne(this.beforeBody,w),f=a&&y!=="right"?o==="center"?c/2+u:c+2+u:0,x=0,b=r.length;x<b;++x){for(p=r[x],m=this.labelTextColors[x],n.fillStyle=m,ne(p.before,w),_=p.lines,a&&_.length&&(this._drawColorBox(n,e,x,g,i),d=Math.max(h.lineHeight,l)),k=0,C=_.length;k<C;++k)w(_[k]),d=h.lineHeight;ne(p.after,w)}f=0,d=h.lineHeight,ne(this.afterBody,w),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Rs(i.rtl,this.x,this.width);for(e.x=_c(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=je(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:g}=As(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-d,l),n.quadraticCurveTo(a+c,l,a+c,l+d),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+u-g),n.quadraticCurveTo(a+c,l+u,a+c-g,l+u),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+f,l+u),n.quadraticCurveTo(a,l+u,a,l+u-f),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=Ko[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=m_(this,e),l=Object.assign({},o,this._size),c=y_(n,e,l),u=v_(e,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=pt(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),HE(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),WE(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Bu(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Bu(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=Ko[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}U(Hp,"positioners",Ko);var Iy={id:"tooltip",_element:Hp,positioners:Ko,afterInit(t,e,n){n&&(t.tooltip=new Hp({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lC},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const XU=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function JU(t,e,n,i){const r=t.indexOf(e);if(r===-1)return XU(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const ZU=(t,e)=>t===null?null:Qt(Math.round(t),0,e);function x_(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class tl extends Jr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(he(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:JU(i,e,Q(n,e),this._addedLabels),ZU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return x_.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}U(tl,"id","category"),U(tl,"defaults",{ticks:{callback:x_}});function ez(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,f=s||1,g=u-1,{min:w,max:y}=e,p=!he(o),m=!he(a),_=!he(c),x=(y-w)/(h+1);let k=Tw((y-w)/g/f)*f,b,C,E,P;if(k<1e-14&&!p&&!m)return[{value:w},{value:y}];P=Math.ceil(y/k)-Math.floor(w/k),P>g&&(k=Tw(P*k/g/f)*f),he(l)||(b=Math.pow(10,l),k=Math.ceil(k*b)/b),r==="ticks"?(C=Math.floor(w/k)*k,E=Math.ceil(y/k)*k):(C=w,E=y),p&&m&&s&&WF((a-o)/s,k/1e3)?(P=Math.round(Math.min((a-o)/k,u)),k=(a-o)/P,C=o,E=a):_?(C=p?o:C,E=m?a:E,P=c-1,k=(E-C)/P):(P=(E-C)/k,ua(P,Math.round(P),k/1e3)?P=Math.round(P):P=Math.ceil(P));const A=Math.max(Iw(k),Iw(C));b=Math.pow(10,he(l)?A:l),C=Math.round(C*b)/b,E=Math.round(E*b)/b;let L=0;for(p&&(d&&C!==o?(n.push({value:o}),C<o&&L++,ua(Math.round((C+L*k)*b)/b,o,k_(o,x,t))&&L++):C<o&&L++);L<P;++L){const q=Math.round((C+L*k)*b)/b;if(m&&q>a)break;n.push({value:q})}return m&&d&&E!==a?n.length&&ua(n[n.length-1].value,a,k_(a,x,t))?n[n.length-1].value=a:n.push({value:a}):(!m||E===a)&&n.push({value:E}),n}function k_(t,e,{horizontal:n,minRotation:i}){const r=Ti(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Xu extends Jr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return he(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Qs(r),c=Qs(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=ez(r,s);return e.bounds==="ticks"&&AE(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return yy(e,this.chart.options.locale,this.options.ticks.format)}}class nl extends Xu{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ve(e)?e:0,this.max=Ve(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Ti(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}U(nl,"id","linear"),U(nl,"defaults",{ticks:{callback:Qh.formatters.numeric}});const il=t=>Math.floor(Ci(t)),or=(t,e)=>Math.pow(10,il(t)+e);function S_(t){return t/Math.pow(10,il(t))===1}function b_(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function tz(t,e){const n=e-t;let i=il(n);for(;b_(t,e,i)>10;)i++;for(;b_(t,e,i)<10;)i--;return Math.min(i,il(t))}function nz(t,{min:e,max:n}){e=Rt(t.min,e);const i=[],r=il(e);let s=tz(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let h=Math.floor((c-u)/Math.pow(10,s)),d=Rt(t.min,Math.round((l+u+h*Math.pow(10,s))*o)/o);for(;d<n;)i.push({value:d,major:S_(d),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),d=Math.round((l+u+h*Math.pow(10,s))*o)/o;const f=Rt(t.max,d);return i.push({value:f,major:S_(f),significand:h}),i}class E_ extends Jr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Xu.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Ve(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ve(e)?Math.max(0,e):null,this.max=Ve(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ve(this._userMin)&&(this.min=e===or(this.min,0)?or(this.min,-1):or(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=a=>i=e?i:a,o=a=>r=n?r:a;i===r&&(i<=0?(s(1),o(10)):(s(or(i,-1)),o(or(r,1)))),i<=0&&s(or(r,-1)),r<=0&&o(or(i,1)),this.min=i,this.max=r}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=nz(n,this);return e.bounds==="ticks"&&AE(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":yy(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ci(e),this._valueRange=Ci(this.max)-Ci(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ci(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}U(E_,"id","logarithmic"),U(E_,"defaults",{ticks:{callback:Qh.formatters.logarithmic,major:{enabled:!0}}});function Wp(t){const e=t.ticks;if(e.display&&t.display){const n=pt(e.backdropPadding);return Q(e.font&&e.font.size,be.font.size)+n.height}return 0}function iz(t,e,n){return n=ye(n)?n:[n],{w:d4(t,e.string,n),h:n.length*e.lineHeight}}function C_(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function rz(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Oe/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+r[l],a),h=je(c.font),d=iz(t.ctx,h,t._pointLabels[l]);i[l]=d;const f=on(t.getIndexAngle(l)+a),g=Math.round(fy(f)),w=C_(g,u.x,d.w,0,180),y=C_(g,u.y,d.h,90,270);sz(n,e,f,w,y)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=lz(t,i,r)}function sz(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function oz(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,i+r+o,s),c=Math.round(fy(on(l.angle+$t))),u=hz(l.y,a.h,c),h=cz(c),d=uz(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function az(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:s}=t;return!(Gn({x:n,y:i},e)||Gn({x:n,y:s},e)||Gn({x:r,y:i},e)||Gn({x:r,y:s},e))}function lz(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Wp(s)/2,additionalAngle:o?Oe/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];const h=oz(t,u,l);i.push(h),a==="auto"&&(h.visible=az(h,c),h.visible&&(c=h))}return i}function cz(t){return t===0||t===180?"center":t<180?"left":"right"}function uz(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function hz(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function dz(t,e,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=e;if(!he(a)){const l=As(e.borderRadius),c=pt(e.backdropPadding);t.fillStyle=a;const u=i-c.left,h=r-c.top,d=s-i+c.width,f=o-r+c.height;Object.values(l).some(g=>g!==0)?(t.beginPath(),Gu(t,{x:u,y:h,w:d,h:f,radius:l}),t.fill()):t.fillRect(u,h,d,f)}}function fz(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=t._pointLabelItems[r];if(!s.visible)continue;const o=i.setContext(t.getPointLabelContext(r));dz(n,o,s);const a=je(o.font),{x:l,y:c,textAlign:u}=s;Hr(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function cC(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Zt);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function pz(t,e,n,i,r){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),cC(t,n,o,i),s.closePath(),s.stroke(),s.restore())}function gz(t,e,n){return nr(t,{label:n,index:e,type:"pointLabel"})}class xc extends Xu{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=pt(Wp(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Ve(e)&&!isNaN(e)?e:0,this.max=Ve(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Wp(this.options))}generateTickLabels(e){Xu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=oe(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?rz(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){const n=Zt/(this._pointLabels.length||1),i=this.options.startAngle||0;return on(e*n+Ti(i))}getDistanceFromCenterForValue(e){if(he(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(he(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return gz(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-$t+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),cC(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&fz(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);const d=this.getContext(h),f=r.setContext(d),g=s.setContext(d);pz(this,f,l,o,g)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:d}=u;!d||!h||(e.lineWidth=d,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=je(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const h=pt(c.backdropPadding);e.fillRect(-o/2-h.left,-s-u.size/2-h.top,o+h.width,u.size+h.height)}Hr(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}U(xc,"id","radialLinear"),U(xc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Qh.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),U(xc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),U(xc,"descriptors",{angleLines:{_fallback:"grid"}});const Jh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ct=Object.keys(Jh);function T_(t,e){return t-e}function I_(t,e){if(he(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Ve(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Za(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function N_(t,e,n,i){const r=Ct.length;for(let s=Ct.indexOf(t);s<r-1;++s){const o=Jh[Ct[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Ct[s]}return Ct[r-1]}function mz(t,e,n,i,r){for(let s=Ct.length-1;s>=Ct.indexOf(n);s--){const o=Ct[s];if(Jh[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Ct[n?Ct.indexOf(n):0]}function yz(t){for(let e=Ct.indexOf(t)+1,n=Ct.length;e<n;++e)if(Jh[Ct[e]].common)return Ct[e]}function P_(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=py(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function vz(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function A_(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:vz(t,i,r,n)}class Ju extends Jr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new wj._date(e.adapters.date);r.init(n),ca(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:I_(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Ve(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Ve(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=QF(r,s,o);return this._unit=n.unit||(i.autoSkip?N_(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):mz(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:yz(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),A_(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Qt(n,0,o),i=Qt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||N_(s.minUnit,n,i,this._getLabelCapacity(n)),a=Q(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Za(l)||l===!0,u={};let h=n,d,f;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(d=h,f=0;d<i;d=+e.add(d,a,o),f++)P_(u,d,g);return(d===i||r.bounds==="ticks"||f===1)&&P_(u,d,g),Object.keys(u).sort(T_).map(w=>+w)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return oe(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],d=i[n],f=c&&h&&d&&d.major;return this._adapter.format(e,r||(f?h:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Ti(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,A_(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(I_(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return JF(e.sort(T_))}}U(Ju,"id","time"),U(Ju,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function kc(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=vr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=vr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class R_ extends Ju{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=kc(n,this.min),this._tableRange=kc(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(kc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return kc(this._table,i*this._tableRange+this._minPos,!0)}}U(R_,"id","timeseries"),U(R_,"defaults",Ju.defaults);const uC="label";function D_(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function wz(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function hC(t,e){t.labels=e}function dC(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uC;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function _z(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uC;const n={labels:[],datasets:[]};return hC(n,t.labels),dC(n,t.datasets,e),n}function xz(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...d}=t,f=S.useRef(null),g=S.useRef(),w=()=>{f.current&&(g.current=new mo(f.current,{type:o,data:_z(a,s),options:l&&{...l},plugins:c}),D_(e,g.current))},y=()=>{D_(e,null),g.current&&(g.current.destroy(),g.current=null)};return S.useEffect(()=>{!r&&g.current&&l&&wz(g.current,l)},[r,l]),S.useEffect(()=>{!r&&g.current&&hC(g.current.config.data,a.labels)},[r,a.labels]),S.useEffect(()=>{!r&&g.current&&a.datasets&&dC(g.current.config.data,a.datasets,s)},[r,a.datasets]),S.useEffect(()=>{g.current&&(r?(y(),setTimeout(w)):g.current.update(h))},[r,l,a.labels,a.datasets,h]),S.useEffect(()=>{g.current&&(y(),setTimeout(w))},[o]),S.useEffect(()=>(w(),()=>y()),[]),eo.createElement("canvas",Object.assign({ref:f,role:"img",height:n,width:i},d),u)}const kz=S.forwardRef(xz);function Sz(t,e){return mo.register(e),S.forwardRef((n,i)=>eo.createElement(kz,Object.assign({},n,{ref:i,type:t})))}const Ny=Sz("line",Bc);mo.register(tl,nl,Ds,wr,Ty,Iy,Cy);const bz="VsNkEb0zbUUoaS30tLEtworzEy92byRB";function Ez({stock:t,onDelete:e}){const[n,i]=S.useState(null),[r,s]=S.useState(null),[o,a]=S.useState("30"),[l,c]=S.useState(null),[u,h]=S.useState(null),[d,f]=S.useState(null),[g,w]=S.useState({currentPrice:!1,priceChange:!1,volume:!1,marketCap:!1,peRatio:!1});S.useEffect(()=>{async function m(){try{const _=await fetch(`https://financialmodelingprep.com/api/v3/historical-price-full/${t.symbol}?timeseries=${o}&apikey=${bz}`);if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);const x=await _.json();if(!x.historical||x.historical.length===0)throw new Error("No data available for this stock");const k=x.historical.reverse(),b=k[k.length-1];i({labels:k.map(C=>C.date),datasets:[{label:"Closing Price",data:k.map(C=>C.close),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.2)",tension:.1,fill:!0}]}),c(b.close),h(b.close-k[0].close),f({volume:b.volume||"N/A",marketCap:b.marketCap&&!isNaN(b.marketCap)?b.marketCap:"N/A",pe:b.pe&&!isNaN(b.pe)?b.pe:"N/A"}),s(null)}catch(_){console.error("Error fetching stock data:",_),s(_.message),i(null),c(null),h(null),f(null)}}m()},[t.symbol,o]);const y={currentPrice:"The most recent price at which the stock was traded.",priceChange:"The change in price over the selected time period.",volume:"The total number of shares traded during the most recent trading day.",marketCap:"The total value of a company's outstanding shares of stock.",peRatio:"The ratio of a company's share price to its earnings per share."},p=m=>{w(_=>({..._,[m]:!_[m]}))};return r?v.jsxs("div",{className:"bg-error text-white p-6 rounded-lg shadow-lg",children:["Error: ",r]}):n?v.jsxs("div",{className:"bg-secondary border border-gray-700 rounded-lg overflow-hidden shadow-lg transition duration-300 ease-in-out hover:shadow-2xl h-full flex flex-col",children:[v.jsxs("div",{className:"p-8",children:[v.jsxs("div",{className:"flex justify-between items-start mb-6",children:[v.jsxs("h3",{className:"text-2xl font-bold text-text-primary",children:[t.name," (",t.symbol,")"]}),v.jsx("button",{onClick:()=>e(t.id),className:"bg-error hover:bg-red-700 text-white font-bold py-2 px-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:v.jsx(CE,{size:20})})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:"text-4xl font-bold text-text-primary",children:["$",l.toFixed(2)]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("currentPrice"),children:v.jsx(ln,{size:20})})]}),g.currentPrice&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.currentPrice}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:`text-2xl font-semibold ${u>=0?"text-success":"text-error"}`,children:[u>=0?"+":"-","$",Math.abs(u).toFixed(2)," (",(u/(l-u)*100).toFixed(2),"%)"]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("priceChange"),children:v.jsx(ln,{size:20})})]}),g.priceChange&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.priceChange}),d&&v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-text-secondary",children:["Volume: ",d.volume.toLocaleString()]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("volume"),children:v.jsx(ln,{size:16})})]}),g.volume&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.volume}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-text-secondary",children:["Market Cap: ",typeof d.marketCap=="number"?`$${(d.marketCap/1e9).toFixed(2)}B`:"N/A"]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("marketCap"),children:v.jsx(ln,{size:16})})]}),g.marketCap&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.marketCap}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-text-secondary",children:["P/E Ratio: ",typeof d.pe=="number"?d.pe.toFixed(2):"N/A"]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("peRatio"),children:v.jsx(ln,{size:16})})]}),g.peRatio&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.peRatio})]})]}),v.jsx("div",{className:"h-64 flex-grow",children:v.jsx(Ny,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!1,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"var(--text-color-muted)"}},x:{grid:{display:!1},ticks:{color:"var(--text-color-muted)"}}}}})})]})]}),v.jsx("div",{className:"bg-primary p-4 flex justify-center space-x-4",children:["7","30","90","365"].map(m=>v.jsx("button",{onClick:()=>a(m),className:`px-4 py-2 rounded-lg ${o===m?"bg-accent text-white":"bg-secondary text-text-primary hover:bg-accent hover:text-white"} transition duration-300 ease-in-out transform hover:scale-105`,children:m==="7"?"1W":m==="30"?"1M":m==="90"?"3M":"1Y"},m))})]}):v.jsx("div",{className:"bg-secondary text-text-primary p-6 rounded-lg shadow-lg",children:"Loading..."})}mo.register(tl,nl,Ds,wr,Ty,Iy,Cy);function Cz({crypto:t,onDelete:e}){const[n,i]=S.useState(null),[r,s]=S.useState(null),[o,a]=S.useState("m30"),[l,c]=S.useState(null),[u,h]=S.useState(null),[d,f]=S.useState(null),[g,w]=S.useState({currentPrice:!1,priceChange:!1,volume:!1,marketCap:!1,supply:!1,maxSupply:!1});S.useEffect(()=>{async function m(){try{const[_,x]=await Promise.all([fetch(`https://api.coincap.io/v2/assets/${t.id}/history?interval=${o}`),fetch(`https://api.coincap.io/v2/assets/${t.id}`)]);if(!_.ok||!x.ok)throw new Error(`HTTP error! status: ${_.status||x.status}`);const[k,b]=await Promise.all([_.json(),x.json()]);if(!k.data||k.data.length===0)throw new Error("No data available for this cryptocurrency");const C=k.data,E=o==="m30"?48:o==="h2"?84:o==="h12"?60:30,P=Math.max(1,Math.floor(C.length/E)),A=C.filter((q,xe)=>xe%P===0).slice(-E);i({labels:A.map(q=>new Date(q.time).toLocaleDateString()),datasets:[{label:"Price (USD)",data:A.map(q=>parseFloat(q.priceUsd)),borderColor:"#10B981",backgroundColor:"rgba(16, 185, 129, 0.2)",tension:.1,fill:!0}]});const L=parseFloat(b.data.priceUsd);c(L),h(L-parseFloat(A[0].priceUsd)),f({volume:parseFloat(b.data.volumeUsd24Hr),marketCap:parseFloat(b.data.marketCapUsd),supply:parseFloat(b.data.supply),maxSupply:b.data.maxSupply?parseFloat(b.data.maxSupply):null}),s(null)}catch(_){console.error("Error fetching crypto data:",_),s(_.message),i(null),c(null),h(null),f(null)}}m()},[t.id,o]);const y={currentPrice:"The most recent price of the cryptocurrency in USD.",priceChange:"The change in price over the selected time period.",volume:"The total trading volume in USD over the last 24 hours.",marketCap:"The total market value of the cryptocurrency's circulating supply.",supply:"The amount of coins that are circulating in the market.",maxSupply:"The maximum number of coins that will ever exist in the lifetime of the cryptocurrency."},p=m=>{w(_=>({..._,[m]:!_[m]}))};return r?v.jsxs("div",{className:"bg-error text-white p-6 rounded-lg shadow-lg",children:["Error: ",r]}):!n||!d?v.jsx("div",{className:"bg-secondary text-text-primary p-6 rounded-lg shadow-lg",children:"Loading..."}):v.jsxs("div",{className:"bg-secondary border border-gray-700 rounded-lg overflow-hidden shadow-lg transition duration-300 ease-in-out hover:shadow-2xl h-full flex flex-col",children:[v.jsxs("div",{className:"p-8",children:[v.jsxs("div",{className:"flex justify-between items-start mb-6",children:[v.jsxs("h3",{className:"text-2xl font-bold text-text-primary",children:[t.name," (",t.symbol.toUpperCase(),")"]}),v.jsx("button",{onClick:()=>e(t.id),className:"bg-error hover:bg-red-700 text-white font-bold py-2 px-3 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:v.jsx(CE,{size:20})})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:"text-4xl font-bold text-text-primary",children:["$",l.toFixed(2)]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("currentPrice"),children:v.jsx(ln,{size:20})})]}),g.currentPrice&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.currentPrice}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("span",{className:`text-2xl font-semibold ${u>=0?"text-success":"text-error"}`,children:[u>=0?"+":"-","$",Math.abs(u).toFixed(2)," (",(u/(l-u)*100).toFixed(2),"%)"]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("priceChange"),children:v.jsx(ln,{size:20})})]}),g.priceChange&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.priceChange}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-text-secondary",children:["Volume: $",d.volume.toLocaleString(void 0,{maximumFractionDigits:0})]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("volume"),children:v.jsx(ln,{size:16})})]}),g.volume&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.volume}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-text-secondary",children:["Market Cap: $",d.marketCap.toLocaleString(void 0,{maximumFractionDigits:0})]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("marketCap"),children:v.jsx(ln,{size:16})})]}),g.marketCap&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.marketCap}),v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-text-secondary",children:["Supply: ",d.supply.toLocaleString(void 0,{maximumFractionDigits:0})," ",t.symbol.toUpperCase()]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("supply"),children:v.jsx(ln,{size:16})})]}),g.supply&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.supply}),d.maxSupply&&v.jsxs("div",{className:"flex items-center",children:[v.jsxs("p",{className:"text-text-secondary",children:["Max Supply: ",d.maxSupply.toLocaleString(void 0,{maximumFractionDigits:0})," ",t.symbol.toUpperCase()]}),v.jsx("button",{className:"ml-2 text-text-secondary hover:text-text-primary transition duration-300",onClick:()=>p("maxSupply"),children:v.jsx(ln,{size:16})})]}),g.maxSupply&&d.maxSupply&&v.jsx("p",{className:"text-sm text-text-secondary",children:y.maxSupply})]})]}),v.jsx("div",{className:"h-64 flex-grow",children:v.jsx(Ny,{data:n,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!1,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"var(--text-color-muted)"}},x:{grid:{display:!1},ticks:{color:"var(--text-color-muted)"}}}}})})]})]}),v.jsx("div",{className:"bg-primary p-4 flex justify-center space-x-4",children:[{label:"1D",value:"m30"},{label:"1W",value:"h2"},{label:"1M",value:"h12"},{label:"1Y",value:"d1"}].map(({label:m,value:_})=>v.jsx("button",{onClick:()=>a(_),className:`px-4 py-2 rounded-lg ${o===_?"bg-accent text-white":"bg-secondary text-text-primary hover:bg-accent hover:text-white"} transition duration-300 ease-in-out transform hover:scale-105`,children:m},_))})]})}const Ft=({children:t,onClick:e,type:n="button",disabled:i=!1,className:r=""})=>v.jsx("button",{type:n,onClick:e,disabled:i,className:`px-4 py-2 bg-accent text-white rounded hover:bg-accent-dark transition-all duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-opacity-50 ${i?"opacity-50 cursor-not-allowed":""} ${r}`,children:t}),Tz=({type:t="text",id:e,value:n,onChange:i,placeholder:r,required:s=!1,className:o="",label:a})=>v.jsxs("div",{className:"mb-4",children:[a&&v.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-text-primary",children:a}),v.jsx("input",{type:t,id:e,value:n,onChange:i,placeholder:r,required:s,className:`w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none ${o}`})]}),Wc=eo.forwardRef(({className:t,...e},n)=>v.jsx("label",{ref:n,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${t}`,...e}));Wc.displayName="Label";const Kc=eo.forwardRef(({className:t,children:e,...n},i)=>v.jsx("select",{className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${t}`,ref:i,...n,children:e}));Kc.displayName="Select";const Iz=[{id:1,name:"Microsoft",symbol:"MSFT",price:300,change:1.2,volume:1e6}],Nz=[{id:1,name:"Bitcoin",symbol:"BTC",price:45e3,change:2.5,volume:5e5}];function Pz({stocks:t=Iz,cryptos:e=Nz,onDeleteStock:n,onDeleteCrypto:i}){const[r,s]=S.useState(!0),[o,a]=S.useState(""),[l,c]=S.useState("name"),[u,h]=S.useState("asc"),[d,f]=S.useState(t),[g,w]=S.useState(e);S.useEffect(()=>{f(t),w(e)},[t,e]);const y=S.useMemo(()=>(r?d:g).filter(_=>_.name.toLowerCase().includes(o.toLowerCase())||_.symbol.toLowerCase().includes(o.toLowerCase())).sort((_,x)=>{if(_.isCustom)return-1;if(x.isCustom)return 1;const k=_[l],b=x[l];return k<b?u==="asc"?-1:1:k>b?u==="asc"?1:-1:0}),[r,d,g,o,l,u]);return v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsxs("h1",{className:"text-4xl font-bold text-text-primary",children:["Your ",r?"Stock":"Crypto"," Dashboard"]}),v.jsx(zn,{to:"/add-stock",children:v.jsxs(Ft,{className:"bg-accent hover:bg-accent-dark text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105",children:["Add New ",r?"Stock":"Crypto"]})})]}),v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Wc,{htmlFor:"show-stocks",className:"text-text-primary",children:"Show:"}),v.jsxs(Kc,{id:"show-stocks",value:r?"stocks":"crypto",onChange:p=>s(p.target.value==="stocks"),children:[v.jsx("option",{value:"stocks",children:"Stocks"}),v.jsx("option",{value:"crypto",children:"Cryptocurrencies"})]})]}),v.jsx("div",{className:"flex-1 max-w-sm",children:v.jsx(Tz,{type:"text",placeholder:"Search by name or symbol",value:o,onChange:p=>a(p.target.value),className:"w-full"})}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Wc,{htmlFor:"sort-by",className:"text-text-primary",children:"Sort by:"}),v.jsxs(Kc,{id:"sort-by",value:l,onChange:p=>c(p.target.value),children:[v.jsx("option",{value:"name",children:"Name"}),v.jsx("option",{value:"symbol",children:"Symbol"}),v.jsx("option",{value:"price",children:"Price"}),v.jsx("option",{value:"change",children:"Change %"}),v.jsx("option",{value:"volume",children:"Volume"})]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(Wc,{htmlFor:"sort-order",className:"text-text-primary",children:"Order:"}),v.jsxs(Kc,{id:"sort-order",value:u,onChange:p=>h(p.target.value),children:[v.jsx("option",{value:"asc",children:"Ascending"}),v.jsx("option",{value:"desc",children:"Descending"})]})]})]}),v.jsx("div",{className:"grid gap-8 grid-cols-1",children:y.map(p=>p.isCustom?v.jsx(GierStock,{},p.id):r?v.jsx(Ez,{stock:p,onDelete:()=>n(p.id),className:"w-full"},p.id):v.jsx(Cz,{crypto:p,onDelete:()=>i(p.id),className:"w-full"},p.id))}),y.length===0&&v.jsxs("p",{className:"text-center text-text-secondary text-lg",children:["No ",r?"stocks":"cryptocurrencies"," found. Try adjusting your search or add some!"]})]})}const Az={}.VITE_TWELVE_DATA_API_KEY;function Rz({onAddStock:t,onAddCrypto:e}){const[n,i]=S.useState(""),[r,s]=S.useState([]),[o,a]=S.useState(null),[l,c]=S.useState(!1),[u,h]=S.useState(!1);async function d(g){g.preventDefault(),c(!0),a(null),s([]);try{let w;if(u){const y=await fetch(`https://api.coincap.io/v2/assets?search=${n}&limit=10`);if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);const p=await y.json();p.data&&p.data.length>0?s(p.data.map(m=>({id:m.id,symbol:m.symbol,name:m.name}))):a("No results found")}else{const y=await fetch(`https://api.twelvedata.com/symbol_search?symbol=${n}&apikey=${Az}`);if(!y.ok)throw new Error(`HTTP error! status: ${y.status}`);w=(await y.json()).data.filter(m=>m.exchange&&["NASDAQ","NYSE"].includes(m.exchange)).slice(0,10).map(m=>({id:m.symbol,symbol:m.symbol,name:m.instrument_name})),w.length===0?a("No results found"):s(w)}}catch(w){console.error("Error details:",w),a(`Error searching for ${u?"cryptocurrencies":"stocks"}: ${w.message}`)}finally{c(!1)}}function f(g){u?e(g):t(g),i(""),s([])}return v.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-secondary rounded-lg shadow-md",children:[v.jsxs("h2",{className:"text-2xl font-bold mb-4 text-text-primary",children:["Add New ",u?"Cryptocurrency":"Stock"]}),v.jsx("div",{className:"mb-4",children:v.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[v.jsx("span",{className:"mr-3 text-sm font-medium text-text-primary",children:"Stocks"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"checkbox",value:"",className:"sr-only peer",checked:u,onChange:()=>h(!u)}),v.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),v.jsx("span",{className:"ml-3 text-sm font-medium text-text-primary",children:"Crypto"})]})}),v.jsx("form",{onSubmit:d,className:"mb-6",children:v.jsxs("div",{className:"flex",children:[v.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value),placeholder:`Search for a ${u?"cryptocurrency":"stock"}...`,required:!0,disabled:l,className:"flex-grow p-2 border border-gray-600 rounded-l-md bg-primary text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),v.jsx(Ft,{type:"submit",className:"bg-accent hover:bg-accent-dark text-white font-bold py-2 px-4 rounded-r-md",disabled:l,children:l?"Searching...":"Search"})]})}),o&&v.jsx("p",{className:"text-error mb-4",children:o}),r.length>0&&v.jsx("ul",{className:"bg-primary rounded-md overflow-hidden",children:r.map(g=>v.jsx("li",{className:"border-b border-gray-700 last:border-b-0",children:v.jsxs("div",{className:"flex justify-between items-center p-4",children:[v.jsxs("span",{className:"text-text-primary",children:[g.name," (",g.symbol.toUpperCase(),")"]}),v.jsx(Ft,{onClick:()=>f(g),className:"bg-accent hover:bg-accent-dark text-white font-bold py-1 px-3 rounded-md text-sm",children:"Add"})]})},g.id))})]})}mo.register(tl,nl,Ds,wr,Ty,Iy,Cy);const M_="VsNkEb0zbUUoaS30tLEtworzEy92byRB";function Dz({stocks:t}){const[e,n]=S.useState(null),[i,r]=S.useState(null),[s,o]=S.useState("30"),[a,l]=S.useState([]),[c,u]=S.useState("price"),[h,d]=S.useState({}),[f,g]=S.useState(!1);S.useEffect(()=>{async function p(){if(a.length!==0)try{const m=a.map(E=>fetch(`https://financialmodelingprep.com/api/v3/historical-price-full/${E}?timeseries=${s}&apikey=${M_}`).then(P=>P.json())),_=a.map(E=>fetch(`https://financialmodelingprep.com/api/v3/quote/${E}?apikey=${M_}`).then(P=>P.json())),[x,k]=await Promise.all([Promise.all(m),Promise.all(_)]),b={labels:x[0].historical.map(E=>new Date(E.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})).reverse(),datasets:x.map((E,P)=>{const A=E.historical.map(L=>{switch(c){case"price":return L.close;case"percentChange":return(L.close-E.historical[E.historical.length-1].close)/E.historical[E.historical.length-1].close*100;case"volume":return L.volume;default:return L.close}}).reverse();return{label:a[P],data:A,borderColor:`hsl(${P*137.5}, 70%, 50%)`,backgroundColor:`hsla(${P*137.5}, 70%, 50%, 0.2)`,tension:.1,fill:!1}})};n(b);const C={};k.forEach((E,P)=>{const A=E[0];C[a[P]]={price:A.price,change:A.change,percentChange:A.changesPercentage,volume:A.volume,marketCap:A.marketCap,pe:A.pe}}),d(C),r(null)}catch(m){console.error("Error fetching compare data:",m),r(m.message),n(null)}}p()},[a,s,c]);const w=p=>{l(m=>m.includes(p)?m.filter(_=>_!==p):m.length<3?[...m,p]:m)},y=p=>{u(p)};return i?v.jsxs("div",{className:"p-6 bg-error text-white rounded-lg",children:["Error: ",i]}):v.jsxs("div",{className:"p-6 max-w-7xl mx-auto bg-secondary rounded-lg shadow-md",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4 text-text-primary",children:"Compare Stocks"}),v.jsxs("div",{className:"mb-6 bg-primary p-4 rounded-lg",children:[v.jsxs(Ft,{onClick:()=>g(!f),className:"bg-accent hover:bg-accent-dark text-white font-bold py-2 px-4 rounded-md mb-2",children:[f?"Hide":"Show"," How to Use"]}),f&&v.jsxs("div",{className:"mt-2 text-text-secondary",children:[v.jsx("h3",{className:"font-bold mb-2",children:"How to use:"}),v.jsxs("ul",{className:"list-disc list-inside",children:[v.jsx("li",{children:"Select up to 3 stocks from the list below to compare."}),v.jsx("li",{children:"Choose a comparison metric: Price, Percent Change, or Volume."}),v.jsx("li",{children:"Select a timeframe to view the data."}),v.jsx("li",{children:"The chart and statistics table will update automatically."})]})]})]}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.map(p=>v.jsx(Ft,{onClick:()=>w(p.symbol),className:`py-2 px-4 rounded-md ${a.includes(p.symbol)?"bg-accent text-white":"bg-primary text-text-primary hover:bg-accent hover:text-white"}`,children:p.symbol},p.symbol))}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h3",{className:"text-lg font-semibold mb-2 text-text-primary",children:"Comparison Options:"}),v.jsx("div",{className:"flex gap-2",children:["price","percentChange","volume"].map(p=>v.jsx(Ft,{onClick:()=>y(p),className:`py-2 px-4 rounded-md ${c===p?"bg-accent text-white":"bg-primary text-text-primary hover:bg-accent hover:text-white"}`,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})]}),e&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"mb-6 bg-primary p-4 rounded-lg",children:v.jsx(Ny,{data:e,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"rgb(224, 224, 224)"}},title:{display:!0,text:`Stock ${c==="percentChange"?"Percent Change":c.charAt(0).toUpperCase()+c.slice(1)} Comparison`,color:"rgb(224, 224, 224)"}},scales:{y:{beginAtZero:c==="percentChange",grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgb(160, 160, 160)"}},x:{grid:{display:!1},ticks:{color:"rgb(160, 160, 160)"}}}},height:300})}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h3",{className:"text-lg font-semibold mb-2 text-text-primary",children:"Timeframe:"}),v.jsx("div",{className:"flex gap-2",children:["7","30","90","365"].map(p=>v.jsx(Ft,{onClick:()=>o(p),className:`py-2 px-4 rounded-md ${s===p?"bg-accent text-white":"bg-primary text-text-primary hover:bg-accent hover:text-white"}`,children:p==="7"?"1W":p==="30"?"1M":p==="90"?"3M":"1Y"},p))})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left border-collapse",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"bg-primary",children:[v.jsx("th",{className:"p-2 border-b border-gray-700",children:"Symbol"}),v.jsx("th",{className:"p-2 border-b border-gray-700",children:"Price"}),v.jsx("th",{className:"p-2 border-b border-gray-700",children:"Change"}),v.jsx("th",{className:"p-2 border-b border-gray-700",children:"% Change"}),v.jsx("th",{className:"p-2 border-b border-gray-700",children:"Volume"}),v.jsx("th",{className:"p-2 border-b border-gray-700",children:"Market Cap"}),v.jsx("th",{className:"p-2 border-b border-gray-700",children:"P/E Ratio"})]})}),v.jsx("tbody",{children:Object.entries(h).map(([p,m])=>v.jsxs("tr",{className:"hover:bg-primary",children:[v.jsx("td",{className:"p-2 border-b border-gray-700",children:p}),v.jsxs("td",{className:"p-2 border-b border-gray-700",children:["$",m.price.toFixed(2)]}),v.jsxs("td",{className:`p-2 border-b border-gray-700 ${m.change>=0?"text-success":"text-error"}`,children:["$",Math.abs(m.change).toFixed(2)]}),v.jsxs("td",{className:`p-2 border-b border-gray-700 ${m.percentChange>=0?"text-success":"text-error"}`,children:[m.percentChange.toFixed(2),"%"]}),v.jsx("td",{className:"p-2 border-b border-gray-700",children:m.volume.toLocaleString()}),v.jsxs("td",{className:"p-2 border-b border-gray-700",children:["$",(m.marketCap/1e9).toFixed(2),"B"]}),v.jsx("td",{className:"p-2 border-b border-gray-700",children:m.pe?m.pe.toFixed(2):"N/A"})]},p))})]})})]})]})}function Mz(){const[t,e]=S.useState(""),[n,i]=S.useState(""),r=s=>{s.preventDefault();const o=`Here's a mock AI response for your query: "${t}". In a real application, this would be generated by an AI model.`;i(o),e("")};return v.jsxs("div",{className:"p-6 max-w-2xl mx-auto bg-secondary rounded-lg shadow-md",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4 text-text-primary",children:"AI Investment Assistant"}),v.jsx("form",{onSubmit:r,className:"mb-6",children:v.jsxs("div",{className:"flex",children:[v.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"Ask about stocks or investment advice...",required:!0,className:"flex-grow p-2 border border-gray-600 rounded-l-md bg-primary text-text-primary focus:outline-none focus:ring-2 focus:ring-accent"}),v.jsx("button",{type:"submit",className:"bg-accent hover:bg-accent-dark text-white font-bold py-2 px-4 rounded-r-md",children:"Ask AI"})]})}),n&&v.jsxs("div",{className:"bg-primary p-4 rounded-md",children:[v.jsx("h3",{className:"text-lg font-semibold mb-2 text-text-primary",children:"AI Response:"}),v.jsx("p",{className:"text-text-secondary",children:n})]})]})}const sf=({type:t,id:e,value:n,onChange:i,placeholder:r,required:s,label:o,className:a})=>v.jsxs("div",{className:"mb-4",children:[o&&v.jsx("label",{htmlFor:e,className:"block mb-2 text-sm font-medium text-text-primary",children:o}),v.jsx("input",{type:t,id:e,value:n,onChange:i,placeholder:r,required:s,className:`w-full p-2 bg-primary text-text-primary border border-gray-600 rounded focus:outline-none focus:border-accent ${a}`})]});function Oz({onUploadSuccess:t}){const[e,n]=S.useState(null),[i,r]=S.useState(!1),[s,o]=S.useState(null),a=c=>{c.target.files[0]&&n(c.target.files[0])},l=async()=>{if(!e){o("Please select a file to upload.");return}r(!0),o(null);try{const c=Br.currentUser;if(!c)throw new Error("No authenticated user found.");const u=q$(Z$,`profile_pictures/${c.uid}`);await W$(u,e);const h=await K$(u);await em(c,{photoURL:h}),n(null),t&&t(h)}catch(c){console.error("Error uploading file:",c),o("Failed to upload file. Please try again.")}finally{r(!1)}};return v.jsxs("div",{className:"space-y-4",children:[v.jsx("input",{type:"file",onChange:a,accept:"image/*",className:`block w-full text-sm text-text-primary\r
          file:mr-4 file:py-2 file:px-4\r
          file:rounded-full file:border-0\r
          file:text-sm file:font-semibold\r
          file:bg-accent file:text-white\r
          hover:file:bg-accent-dark`}),v.jsx(Ft,{onClick:l,disabled:!e||i,className:"w-full",children:i?"Uploading...":"Upload Profile Picture"}),s&&v.jsx("p",{className:"text-error",children:s})]})}function Lz(){const[t,e]=S.useState(null),[n,i]=S.useState(!0),[r,s]=S.useState(null),[o,a]=S.useState(!1),[l,c]=S.useState({}),u=oo();S.useEffect(()=>{(async()=>{try{const p=Br.currentUser;if(p){const m=jr(zr,"users",p.uid),_=await ty(m);if(_.exists()){const x=_.data();e({...x,photoURL:p.photoURL}),c({...x,photoURL:p.photoURL})}else{const x={email:p.email,displayName:p.displayName||"",phoneNumber:p.phoneNumber||"",createdAt:new Date().toISOString(),stocks:[]};await ny(m,x),e({...x,photoURL:p.photoURL}),c({...x,photoURL:p.photoURL})}}else s("No authenticated user"),u("/login")}catch(p){s("Error fetching user data"),console.error(p)}finally{i(!1)}})()},[u]);const h=()=>{a(!0)},d=async()=>{try{const y=Br.currentUser;y&&(await oE(jr(zr,"users",y.uid),l),await em(y,{displayName:l.displayName}),e(l),a(!1))}catch(y){s("Error updating user data"),console.error(y)}},f=()=>{c(t),a(!1)},g=y=>{c({...l,[y.target.name]:y.target.value})},w=y=>{e({...t,photoURL:y}),c({...l,photoURL:y})};return n?v.jsx("div",{className:"text-center text-text-primary text-xl mt-8",children:"Loading..."}):r?v.jsx("div",{className:"text-center text-error text-xl mt-8",children:r}):v.jsxs("div",{className:"max-w-2xl mx-auto mt-8 p-6 bg-secondary rounded-lg shadow-md",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-text-primary",children:"User Profile"}),t&&v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("img",{src:t.photoURL||"/placeholder.svg?height=150&width=150",alt:"Profile",className:"w-32 h-32 rounded-full object-cover mb-4"}),o&&v.jsx(Oz,{onUploadSuccess:w})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsx(sf,{type:"text",id:"displayName",name:"displayName",value:o?l.displayName:t.displayName,onChange:g,label:"Display Name",disabled:!o}),v.jsx(sf,{type:"email",id:"email",name:"email",value:t.email,label:"Email",disabled:!0}),v.jsx(sf,{type:"tel",id:"phoneNumber",name:"phoneNumber",value:o?l.phoneNumber:t.phoneNumber||"",onChange:g,label:"Phone Number",disabled:!o})]}),v.jsx("div",{className:"flex justify-center space-x-4",children:o?v.jsxs(v.Fragment,{children:[v.jsx(Ft,{onClick:d,children:"Save"}),v.jsx(Ft,{onClick:f,children:"Cancel"})]}):v.jsx(Ft,{onClick:h,children:"Edit Profile"})})]})]})}function $z(){const[t,e]=S.useState(""),[n,i]=S.useState(""),[r,s]=S.useState(null),[o,a]=S.useState(!1),[l,c]=S.useState(!1),u=oo(),h=()=>!t||!n?(s("Both email and password are required."),!1):!t.includes("@")||!t.includes(".")?(s("Please enter a valid email address."),!1):!0,d=async f=>{if(f.preventDefault(),s(null),!!h()){a(!0);try{await lA(Br,t,n),u("/dashboard")}catch(g){switch(g.code){case"auth/user-not-found":s("No user found with this email. Please check your email or sign up.");break;case"auth/wrong-password":s("Incorrect password. Please try again.");break;case"auth/invalid-email":s("Invalid email address.");break;default:s("An error occurred during login. Please try again later.")}}finally{a(!1)}}};return v.jsxs("div",{className:"max-w-md mx-auto mt-8 p-6 bg-secondary rounded-lg shadow-md",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-text-primary",children:"Login"}),v.jsxs("form",{onSubmit:d,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-text-primary",children:"Email"}),v.jsx("input",{type:"email",id:"email",value:t,onChange:f=>e(f.target.value),placeholder:"Email",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-text-primary",children:"Password"}),v.jsx("input",{type:l?"text":"password",id:"password",value:n,onChange:f=>i(f.target.value),placeholder:"Password",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"showPassword",checked:l,onChange:()=>c(!l),className:"mr-2"}),v.jsx("label",{htmlFor:"showPassword",className:"text-text-primary",children:"Show Password"})]}),v.jsx(Ft,{type:"submit",disabled:o,className:"w-full",children:o?"Logging in...":"Login"})]}),r&&v.jsx("p",{className:"mt-4 text-error text-center",role:"alert",children:r}),v.jsxs("p",{className:"mt-4 text-center text-text-secondary",children:["Don't have an account? ",v.jsx(zn,{to:"/signup",className:"text-accent hover:underline",children:"Sign up"})]})]})}function Fz(){const[t,e]=S.useState(""),[n,i]=S.useState(""),[r,s]=S.useState(""),[o,a]=S.useState(""),[l,c]=S.useState(null),[u,h]=S.useState(!1),[d,f]=S.useState(!1),[g,w]=S.useState(!1),y=oo(),p=()=>!t||!n||!r||!o?(c("Email, password, confirm password, and display name are required."),!1):n.length<6?(c("Password must be at least 6 characters long."),!1):n!==r?(c("Passwords do not match."),!1):!t.includes("@")||!t.includes(".")?(c("Please enter a valid email address."),!1):!0,m=async _=>{if(_.preventDefault(),h(!0),c(null),!p()){h(!1);return}try{const k=(await aA(Br,t,n)).user;await em(k,{displayName:o}),await ny(jr(zr,"users",k.uid),{email:t,displayName:o,createdAt:new Date().toISOString()}),y("/dashboard")}catch(x){switch(x.code){case"auth/email-already-in-use":c("This email is already registered. Please login instead.");break;case"auth/invalid-email":c("Please enter a valid email address.");break;case"auth/weak-password":c("Please choose a stronger password.");break;default:c(`An error occurred during signup: ${x.message}`)}}finally{h(!1)}};return v.jsxs("div",{className:"max-w-md mx-auto mt-8 p-6 bg-secondary rounded-lg shadow-md",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-text-primary",children:"Sign Up"}),v.jsxs("form",{onSubmit:m,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-text-primary",children:"Email"}),v.jsx("input",{type:"email",id:"email",value:t,onChange:_=>e(_.target.value),placeholder:"Email",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-text-primary",children:"Password"}),v.jsx("input",{type:d?"text":"password",id:"password",value:n,onChange:_=>i(_.target.value),placeholder:"Password (min. 6 characters)",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"showPassword",checked:d,onChange:()=>f(!d),className:"mr-2"}),v.jsx("label",{htmlFor:"showPassword",className:"text-text-primary",children:"Show Password"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"confirmPassword",className:"block mb-2 text-sm font-medium text-text-primary",children:"Confirm Password"}),v.jsx("input",{type:g?"text":"password",id:"confirmPassword",value:r,onChange:_=>s(_.target.value),placeholder:"Confirm Password",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:"showConfirmPassword",checked:g,onChange:()=>w(!g),className:"mr-2"}),v.jsx("label",{htmlFor:"showConfirmPassword",className:"text-text-primary",children:"Show Confirm Password"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"displayName",className:"block mb-2 text-sm font-medium text-text-primary",children:"Display Name"}),v.jsx("input",{type:"text",id:"displayName",value:o,onChange:_=>a(_.target.value),placeholder:"Display Name",required:!0,className:"w-full p-2 border rounded bg-primary text-text-primary border-gray-600 focus:border-accent focus:outline-none"})]}),v.jsx(Ft,{type:"submit",disabled:u,className:"w-full",children:u?"Signing Up...":"Sign Up"})]}),l&&v.jsx("p",{className:"mt-4 text-error text-center",role:"alert",children:l}),v.jsxs("p",{className:"mt-4 text-center text-text-secondary",children:["Already have an account? ",v.jsx(zn,{to:"/login",className:"text-accent hover:underline",children:"Login"})]})]})}const of=[{id:1,name:"Microsoft",symbol:"MSFT",price:300,change:1.2,volume:1e6}],af=[{id:1,name:"Bitcoin",symbol:"BTC",price:45e3,change:2.5,volume:5e5}];function jz(){const[t,e]=S.useState(null),[n,i]=S.useState(of),[r,s]=S.useState(af),[o,a]=S.useState(!0);S.useEffect(()=>{const d=dA(Br,async f=>{if(f)try{const g=await eF(f.uid),w=await tF(f.uid);i(g.length?g:of),s(w.length?w:af)}catch(g){console.error("Error fetching user data:",g)}else i(of),s(af);e(f),a(!1)});return()=>d()},[]);const l=async d=>{if(t){const f=n.filter(g=>g.id!==d);i(f),await vw(t.uid,f)}},c=async d=>{if(t){const f=r.filter(g=>g.id!==d);s(f),await ww(t.uid,f)}},u=async d=>{if(t){const f=[...n,d];i(f),await vw(t.uid,f)}},h=async d=>{if(t){const f=[...r,d];s(f),await ww(t.uid,f)}};return o?v.jsx("div",{children:"Loading..."}):v.jsx(z2,{children:v.jsxs("div",{className:"flex bg-background min-h-screen",children:[v.jsx(dF,{isAuthenticated:!!t,user:t}),v.jsx("main",{className:"flex-grow p-6 ml-20 transition-all duration-300 ease-in-out",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs(M2,{children:[v.jsx(Ln,{path:"/login",element:t?v.jsx(ci,{to:"/dashboard"}):v.jsx($z,{})}),v.jsx(Ln,{path:"/signup",element:t?v.jsx(ci,{to:"/profile"}):v.jsx(Fz,{})}),v.jsx(Ln,{path:"/profile",element:t?v.jsx(Lz,{}):v.jsx(ci,{to:"/login"})}),v.jsx(Ln,{path:"/dashboard",element:t?v.jsx(Pz,{stocks:n,cryptos:r,onDeleteStock:l,onDeleteCrypto:c}):v.jsx(ci,{to:"/login"})}),v.jsx(Ln,{path:"/add-stock",element:t?v.jsx(Rz,{onAddStock:u,onAddCrypto:h}):v.jsx(ci,{to:"/login"})}),v.jsx(Ln,{path:"/compare-stocks",element:t?v.jsx(Dz,{stocks:n,cryptos:r}):v.jsx(ci,{to:"/login"})}),v.jsx(Ln,{path:"/ai-assistant",element:t?v.jsx(Mz,{}):v.jsx(ci,{to:"/login"})}),v.jsx(Ln,{path:"/",element:v.jsx(ci,{to:t?"/dashboard":"/login"})})]})})})]})})}lf.createRoot(document.getElementById("root")).render(v.jsx(eo.StrictMode,{children:v.jsx(jz,{})}));
